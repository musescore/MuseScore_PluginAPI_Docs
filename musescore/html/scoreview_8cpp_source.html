<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MuseScore: mscore/scoreview.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="musescore_logo_full.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MuseScore
   &#160;<span id="projectnumber">3.6</span>
   </div>
   <div id="projectbrief">Music composition and notation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bc02b511b88b6aa2a028bc2d9b0b2802.html">mscore</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">scoreview.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="scoreview_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//=============================================================================</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//  MuseScore</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//  Music Composition &amp; Notation</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//  Copyright (C) 2002-2017 Werner Schweer &amp; others</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//  This program is free software; you can redistribute it and/or modify</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//  it under the terms of the GNU General Public License version 2</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//  as published by the Free Software Foundation and appearing in</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//  the file LICENCE.GPL</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//=============================================================================</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;log.h&quot;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="scoreview_8h.html">scoreview.h</a>&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="breaksdialog_8h.html">breaksdialog.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="continuouspanel_8h.html">continuouspanel.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="drumroll_8h.html">drumroll.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="editdrumset_8h.html">editdrumset.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="editstaff_8h.html">editstaff.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="globals_8h.html">globals.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="zoombox_8h.html">zoombox.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="measureproperties_8h.html">measureproperties.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="musescore_8h.html">musescore.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="navigator_8h.html">navigator.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="preferences_8h.html">preferences.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="scoreaccessibility_8h.html">scoreaccessibility.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="scoretab_8h.html">scoretab.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="seq_8h.html">seq.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="splitstaff_8h.html">splitstaff.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="textcursor_8h.html">textcursor.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="textpalette_8h.html">textpalette.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="texttools_8h.html">texttools.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="fotomode_8h.html">fotomode.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="tourhandler_8h.html">tourhandler.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="inspector_8h.html">inspector/inspector.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="articulation_8h.html">libmscore/articulation.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="barline_8h.html">libmscore/barline.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="box_8h.html">libmscore/box.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="chord_8h.html">libmscore/chord.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="clef_8h.html">libmscore/clef.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dynamic_8h.html">libmscore/dynamic.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libmscore_2excerpt_8h.html">libmscore/excerpt.h</a>&quot;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="figuredbass_8h.html">libmscore/figuredbass.h</a>&quot;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="fingering_8h.html">libmscore/fingering.h</a>&quot;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hairpin_8h.html">libmscore/hairpin.h</a>&quot;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="harmony_8h.html">libmscore/harmony.h</a>&quot;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="fret_8h.html">libmscore/fret.h</a>&quot;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="icon_8h.html">libmscore/icon.h</a>&quot;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libmscore_2image_8h.html">libmscore/image.h</a>&quot;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="instrchange_8h.html">libmscore/instrchange.h</a>&quot;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="keysig_8h.html">libmscore/keysig.h</a>&quot;</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="lasso_8h.html">libmscore/lasso.h</a>&quot;</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="lyrics_8h.html">libmscore/lyrics.h</a>&quot;</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="measure_8h.html">libmscore/measure.h</a>&quot;</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="navigate_8h.html">libmscore/navigate.h</a>&quot;</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="notedot_8h.html">libmscore/notedot.h</a>&quot;</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="note_8h.html">libmscore/note.h</a>&quot;</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="noteline_8h.html">libmscore/noteline.h</a>&quot;</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ottava_8h.html">libmscore/ottava.h</a>&quot;</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="page_8h.html">libmscore/page.h</a>&quot;</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libmscore_2part_8h.html">libmscore/part.h</a>&quot;</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pedal_8h.html">libmscore/pedal.h</a>&quot;</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pitchspelling_8h.html">libmscore/pitchspelling.h</a>&quot;</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rehearsalmark_8h.html">libmscore/rehearsalmark.h</a>&quot;</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="repeatlist_8h.html">libmscore/repeatlist.h</a>&quot;</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rest_8h.html">libmscore/rest.h</a>&quot;</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libmscore_2score_8h.html">libmscore/score.h</a>&quot;</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="segment_8h.html">libmscore/segment.h</a>&quot;</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="shadownote_8h.html">libmscore/shadownote.h</a>&quot;</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="slur_8h.html">libmscore/slur.h</a>&quot;</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="spanner_8h.html">libmscore/spanner.h</a>&quot;</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="staff_8h.html">libmscore/staff.h</a>&quot;</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="stafflines_8h.html">libmscore/stafflines.h</a>&quot;</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="stafftext_8h.html">libmscore/stafftext.h</a>&quot;</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="stafftype_8h.html">libmscore/stafftype.h</a>&quot;</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sticking_8h.html">libmscore/sticking.h</a>&quot;</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="stringdata_8h.html">libmscore/stringdata.h</a>&quot;</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sym_8h.html">libmscore/sym.h</a>&quot;</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="system_8h.html">libmscore/system.h</a>&quot;</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="systemtext_8h.html">libmscore/systemtext.h</a>&quot;</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="textframe_8h.html">libmscore/textframe.h</a>&quot;</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="text_8h.html">libmscore/text.h</a>&quot;</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="timesig_8h.html">libmscore/timesig.h</a>&quot;</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="trill_8h.html">libmscore/trill.h</a>&quot;</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="tuplet_8h.html">libmscore/tuplet.h</a>&quot;</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="undo_8h.html">libmscore/undo.h</a>&quot;</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libmscore_2utils_8h.html">libmscore/utils.h</a>&quot;</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="volta_8h.html">libmscore/volta.h</a>&quot;</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="xml_8h.html">libmscore/xml.h</a>&quot;</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="textline_8h.html">libmscore/textline.h</a>&quot;</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="shape_8h.html">libmscore/shape.h</a>&quot;</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="preprocessor">#ifdef AVSOMR</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avsomr_8h.html">avsomr/avsomr.h</a>&quot;</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avsomrdrawer_8h.html">avsomr/avsomrdrawer.h</a>&quot;</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceMs.html">Ms</a> {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="keyword">extern</span> QErrorMessage* <a class="code" href="namespaceMs.html#addc0c1c84493b29580209e7a22110c30">errorMessage</a>;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">//   ScoreView</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<a class="code" href="classMs_1_1ScoreView.html#a52f8ed77c3f24cce22f815325917970e">ScoreView::ScoreView</a>(QWidget* parent)</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;   : QWidget(parent), editData(this)</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      {</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      setObjectName(<span class="stringliteral">&quot;scoreview&quot;</span>);</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      setStatusTip(<span class="stringliteral">&quot;scoreview&quot;</span>);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      setAcceptDrops(<span class="keyword">true</span>);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="preprocessor">#ifndef Q_OS_MAC</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      setAttribute(Qt::WA_OpaquePaintEvent);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      setAttribute(Qt::WA_NoSystemBackground);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      setFocusPolicy(Qt::ClickFocus);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      setAttribute(Qt::WA_InputMethodEnabled);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      setAttribute(Qt::WA_KeyCompression);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      setAttribute(Qt::WA_StaticContents);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      setAutoFillBackground(<span class="keyword">false</span>);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      state       = <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a1e23852820b9154316c7c06e2b7ba051">ViewState::NORMAL</a>;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      _score      = 0;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      _omrView    = 0;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      dropTarget  = 0;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      realtimeTimer = <span class="keyword">new</span> QTimer(<span class="keyword">this</span>);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      realtimeTimer-&gt;setTimerType(Qt::PreciseTimer);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      connect(realtimeTimer, SIGNAL(timeout()), <span class="keyword">this</span>, SLOT(triggerCmdRealtimeAdvance()));</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      extendNoteTimer = <span class="keyword">new</span> QTimer(<span class="keyword">this</span>);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      extendNoteTimer-&gt;setTimerType(Qt::PreciseTimer);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      extendNoteTimer-&gt;setSingleShot(<span class="keyword">true</span>);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      connect(extendNoteTimer, SIGNAL(timeout()), <span class="keyword">this</span>, SLOT(extendCurrentNote()));</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      setContextMenuPolicy(Qt::DefaultContextMenu);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> defaultLogicalZoom = <a class="code" href="classMs_1_1ZoomBox.html#a206727ef26cef5679f240399077ae885">ZoomBox::getDefaultLogicalZoom</a>();</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      _zoomIndex = defaultLogicalZoom.index;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <span class="keyword">const</span> qreal physicalZoomLevel = defaultLogicalZoom.level * (<a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;physicalDotsPerInch() / <a class="code" href="namespaceMs.html#ab7904232a877db2441531871cf3f5108">DPI</a>);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      _matrix = QTransform(physicalZoomLevel, 0.0, 0.0, physicalZoomLevel, 0.0, 0.0);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      imatrix = _matrix.inverted();</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      focusFrame  = 0;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      _bgColor    = Qt::darkBlue;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      _fgColor    = Qt::white;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      _fgPixmap    = 0;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      _bgPixmap    = 0;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      editData.curGrip = <a class="code" href="namespaceMs.html#a1aa5dd7502c1d6ba1ca37f5bfd14fda6aad21beaf0e0f72012c11c0fb529d1f0a">Grip::NO_GRIP</a>;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      editData.grips   = 0;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      editData.element = 0;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      lasso       = <span class="keyword">new</span> Lasso(_score);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      _foto       = 0;<span class="comment">// new Lasso(_score);</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      _cursor     = <span class="keyword">new</span> PositionCursor(<span class="keyword">this</span>);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      _cursor-&gt;setType(<a class="code" href="namespaceMs.html#acebbf1c7a6bee6fc8049adb5141f59d4a1903f54cd46d54aa3200a4508c948db0">CursorType::POS</a>);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      _controlCursor     = <span class="keyword">new</span> PositionCursor(<span class="keyword">this</span>);</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      _controlCursor-&gt;setType(<a class="code" href="namespaceMs.html#acebbf1c7a6bee6fc8049adb5141f59d4a1903f54cd46d54aa3200a4508c948db0">CursorType::POS</a>);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      _controlCursor-&gt;setVisible(<a class="code" href="namespaceMs.html#abe8f8da5976e3a727f1a3a7a117e73de">preferences</a>.<a class="code" href="structMs_1_1Preferences.html#a39e1e4d3d337de7dcafb14fd8c75c4a2">getBool</a>(PREF_PAN_CURSOR_VISIBLE));</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      _panSettings.loadFromPreferences();</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      _controlModifier = _panSettings.controlModifierBase;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      _continuousPanel = <span class="keyword">new</span> ContinuousPanel(<span class="keyword">this</span>);</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      _continuousPanel-&gt;setActive(<span class="keyword">true</span>);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      shadowNote  = 0;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      _curLoopIn  = <span class="keyword">new</span> PositionCursor(<span class="keyword">this</span>);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      _curLoopIn-&gt;setType(<a class="code" href="namespaceMs.html#acebbf1c7a6bee6fc8049adb5141f59d4a077a38a30f3b07338275f035c5a2b801">CursorType::LOOP_IN</a>);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      _curLoopOut = <span class="keyword">new</span> PositionCursor(<span class="keyword">this</span>);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      _curLoopOut-&gt;setType(<a class="code" href="namespaceMs.html#acebbf1c7a6bee6fc8049adb5141f59d4a07faea61b3a35dbab6e3ee5bac27da5b">CursorType::LOOP_OUT</a>);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespaceMs.html#a9e76bd253cc84b05294834c6315451ab">converterMode</a>)      <span class="comment">// HACK</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      grabGesture(Qt::PinchGesture);      <span class="comment">// laptop pad (Mac) and touchscreen</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <span class="comment">//-----------------------------------------------------------------------</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classMs_1_1MScore.html#a58e52c0bece662fbd932efcee0ebdb67">MScore::debugMode</a>)</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            setMouseTracking(<span class="keyword">true</span>);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespaceMs.html#abe8f8da5976e3a727f1a3a7a117e73de">preferences</a>.<a class="code" href="structMs_1_1Preferences.html#a39e1e4d3d337de7dcafb14fd8c75c4a2">getBool</a>(PREF_UI_CANVAS_BG_USECOLOR))</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            setBackground(<a class="code" href="classMs_1_1MScore.html#a25a281f50abe7cb55e81182c66c50d56">MScore::bgColor</a>);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            QPixmap* pm = <span class="keyword">new</span> QPixmap(<a class="code" href="namespaceMs.html#abe8f8da5976e3a727f1a3a7a117e73de">preferences</a>.<a class="code" href="structMs_1_1Preferences.html#a0838c098bfae080b0ef28c4eeea245a3">getString</a>(PREF_UI_CANVAS_BG_WALLPAPER));</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            setBackground(pm);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            }</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespaceMs.html#abe8f8da5976e3a727f1a3a7a117e73de">preferences</a>.<a class="code" href="structMs_1_1Preferences.html#a39e1e4d3d337de7dcafb14fd8c75c4a2">getBool</a>(PREF_UI_CANVAS_FG_USECOLOR))</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            setForeground(<a class="code" href="namespaceMs.html#abe8f8da5976e3a727f1a3a7a117e73de">preferences</a>.<a class="code" href="structMs_1_1Preferences.html#a2663c94f483c146a45a34e9d2deb11d5">getColor</a>(PREF_UI_CANVAS_FG_COLOR));</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            QPixmap* pm = <span class="keyword">new</span> QPixmap(<a class="code" href="namespaceMs.html#abe8f8da5976e3a727f1a3a7a117e73de">preferences</a>.<a class="code" href="structMs_1_1Preferences.html#a0838c098bfae080b0ef28c4eeea245a3">getString</a>(PREF_UI_CANVAS_FG_WALLPAPER));</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            <span class="keywordflow">if</span> (pm == 0 || pm-&gt;isNull())</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                  qDebug(<span class="stringliteral">&quot;no valid pixmap %s&quot;</span>, qPrintable(<a class="code" href="namespaceMs.html#abe8f8da5976e3a727f1a3a7a117e73de">preferences</a>.<a class="code" href="structMs_1_1Preferences.html#a0838c098bfae080b0ef28c4eeea245a3">getString</a>(PREF_UI_CANVAS_FG_WALLPAPER)));</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            setForeground(pm);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            }</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      connect(<a class="code" href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">getAction</a>(<span class="stringliteral">&quot;loop&quot;</span>), SIGNAL(toggled(<span class="keywordtype">bool</span>)), SLOT(loopToggled(<span class="keywordtype">bool</span>)));</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespaceMs.html#a1a43a84e57fe33057a3e17aa85488d5f">seq</a>)</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            connect(<a class="code" href="namespaceMs.html#a1a43a84e57fe33057a3e17aa85488d5f">seq</a>, SIGNAL(stopped()), SLOT(seqStopped()));</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      }</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">//   setScore</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#ac75eee40bd733a74052c81b23378ccf3">  213</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#ac75eee40bd733a74052c81b23378ccf3">ScoreView::setScore</a>(<a class="code" href="classMs_1_1Score.html">Score</a>* s)</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <span class="keywordflow">if</span> (_score) {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <span class="keywordflow">if</span> (_score-&gt;isMaster()) {</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                  <a class="code" href="classMs_1_1MasterScore.html">MasterScore</a>* ms = <span class="keyword">static_cast&lt;</span><a class="code" href="classMs_1_1MasterScore.html">MasterScore</a>*<span class="keyword">&gt;</span>(s);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                  <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1MasterScore.html">MasterScore</a>* _ms : *ms-&gt;<a class="code" href="classMs_1_1MasterScore.html#a15c525dbfdfc64bc65ec97202bd71777">movements</a>()) {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                        _ms-&gt;<a class="code" href="classMs_1_1Score.html#a8d4c17f0d115b9501be41346e3d4e68f">removeViewer</a>(<span class="keyword">this</span>);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                        disconnect(s, SIGNAL(posChanged(<a class="code" href="namespaceMs.html#aa15d8b46ea58d6bb59b084d6d7bcff7d">POS</a>, <span class="keywordtype">int</span>)), <span class="keyword">this</span>, SLOT(posChanged(<a class="code" href="namespaceMs.html#aa15d8b46ea58d6bb59b084d6d7bcff7d">POS</a>,<span class="keywordtype">int</span>)));</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                        }</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                  }</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                  _score-&gt;removeViewer(<span class="keyword">this</span>);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                  disconnect(s, SIGNAL(posChanged(<a class="code" href="namespaceMs.html#aa15d8b46ea58d6bb59b084d6d7bcff7d">POS</a>, <span class="keywordtype">int</span>)), <span class="keyword">this</span>, SLOT(posChanged(<a class="code" href="namespaceMs.html#aa15d8b46ea58d6bb59b084d6d7bcff7d">POS</a>,<span class="keywordtype">int</span>)));</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                  }</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            }</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      _score = s;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <span class="keywordflow">if</span> (_score) {</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            <span class="keywordflow">if</span> (_score-&gt;isMaster()) {</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                  <a class="code" href="classMs_1_1MasterScore.html">MasterScore</a>* ms = <span class="keyword">static_cast&lt;</span><a class="code" href="classMs_1_1MasterScore.html">MasterScore</a>*<span class="keyword">&gt;</span>(s);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                  <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1MasterScore.html">MasterScore</a>* _ms : *ms-&gt;<a class="code" href="classMs_1_1MasterScore.html#a15c525dbfdfc64bc65ec97202bd71777">movements</a>()) {</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                        _ms-&gt;<a class="code" href="classMs_1_1Score.html#ab53d6e1fa1a9c0652a3101613d126fef">addViewer</a>(<span class="keyword">this</span>);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                        }</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                  }</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                  _score-&gt;addViewer(<span class="keyword">this</span>);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            }</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      <span class="keywordflow">if</span> (shadowNote == 0) {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            shadowNote = <span class="keyword">new</span> <a class="code" href="classMs_1_1ShadowNote.html">ShadowNote</a>(_score);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            shadowNote-&gt;setVisible(<span class="keyword">false</span>);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            }</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            shadowNote-&gt;setScore(_score);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      lasso-&gt;setScore(s);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      _continuousPanel-&gt;setScore(_score);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <span class="keywordflow">if</span> (_score) {</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            _curLoopIn-&gt;move(s-&gt;<a class="code" href="classMs_1_1Score.html#a79b3e923044c67ce26c45dd20f22d849">pos</a>(<a class="code" href="namespaceMs.html#aa15d8b46ea58d6bb59b084d6d7bcff7da684d325a7303f52e64011467ff5c5758">POS::LEFT</a>));</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            _curLoopOut-&gt;move(s-&gt;<a class="code" href="classMs_1_1Score.html#a79b3e923044c67ce26c45dd20f22d849">pos</a>(<a class="code" href="namespaceMs.html#aa15d8b46ea58d6bb59b084d6d7bcff7da21507b40c80068eda19865706fdc2403">POS::RIGHT</a>));</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            loopToggled(<a class="code" href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">getAction</a>(<span class="stringliteral">&quot;loop&quot;</span>)-&gt;isChecked());</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            connect(s, SIGNAL(posChanged(<a class="code" href="namespaceMs.html#aa15d8b46ea58d6bb59b084d6d7bcff7d">POS</a>,<span class="keywordtype">unsigned</span>)), SLOT(posChanged(<a class="code" href="namespaceMs.html#aa15d8b46ea58d6bb59b084d6d7bcff7d">POS</a>,<span class="keywordtype">unsigned</span>)));</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            connect(<span class="keyword">this</span>, SIGNAL(viewRectChanged()), <span class="keyword">this</span>, SLOT(updateContinuousPanel()));</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            }</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      }</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">//   ScoreView</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a94f2b82e913f6afe7b46f9df097f81ec">  264</a></span>&#160;<a class="code" href="classMs_1_1ScoreView.html#a94f2b82e913f6afe7b46f9df097f81ec">ScoreView::~ScoreView</a>()</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <span class="keywordflow">if</span> (_score)</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            _score-&gt;removeViewer(<span class="keyword">this</span>);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="keyword">delete</span> lasso;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <span class="keyword">delete</span> _foto;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <span class="keyword">delete</span> _cursor;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <span class="keyword">delete</span> _controlCursor;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <span class="keyword">delete</span> _continuousPanel;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      <span class="keyword">delete</span> _curLoopIn;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <span class="keyword">delete</span> _curLoopOut;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      <span class="keyword">delete</span> _bgPixmap;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      <span class="keyword">delete</span> _fgPixmap;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <span class="keyword">delete</span> shadowNote;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      }</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">//   objectPopup</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">//    the menu can be extended by Elements with</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">//      genPropertyMenu()/propertyAction() methods</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a60b1af8920be36114df72b15a49efc91">  286</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a60b1af8920be36114df72b15a49efc91">ScoreView::objectPopup</a>(<span class="keyword">const</span> QPoint&amp; pos, <a class="code" href="classMs_1_1Element.html">Element</a>* obj)</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      <span class="comment">// show tuplet properties if number is clicked:</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <span class="keywordflow">if</span> (obj-&gt;isText() &amp;&amp; obj-&gt;<a class="code" href="classMs_1_1Element.html#a52b30fdd589beba5b760a561a50ac601">parent</a>() &amp;&amp; obj-&gt;<a class="code" href="classMs_1_1Element.html#a52b30fdd589beba5b760a561a50ac601">parent</a>()-&gt;isTuplet()) {</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            obj = obj-&gt;<a class="code" href="classMs_1_1Element.html#a52b30fdd589beba5b760a561a50ac601">parent</a>();</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            <span class="keywordflow">if</span> (!obj-&gt;<a class="code" href="classMs_1_1Element.html#ae4f2f3a774def87e608afd55ef29b3e9">selected</a>())</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                  obj-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a70883d048b0884821ac779d9ab168151">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#aa3b85eb58a8f7f4476fbd05b59253585">select</a>(obj, <a class="code" href="namespaceMs.html#a1066451ad9dc9959bedb76978f4f30c8a0679273e201afd0bf57af3961f8a23b8">SelectType::SINGLE</a>, 0);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            }</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      QMenu* popup = <span class="keyword">new</span> QMenu(<span class="keyword">this</span>);</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      popup-&gt;setSeparatorsCollapsible(<span class="keyword">false</span>);</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      QAction* a = popup-&gt;addSeparator();</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <span class="comment">// Set Slur or Tie according to the selected object</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <span class="keywordflow">if</span> (obj-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() != <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ead109e83750643c68685b2ad8b669d136">ElementType::SLUR_SEGMENT</a>) {</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <span class="keywordflow">if</span> ((obj-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea6fe77702587eeb8974a8e3ec21bdce22">ElementType::STAFF_TEXT</a>) &amp;&amp; (toStaffText(obj)-&gt;systemFlag()))</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                  a-&gt;setText(tr(<span class="stringliteral">&quot;System Text&quot;</span>));</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                  a-&gt;setText(obj-&gt;<a class="code" href="classMs_1_1ScoreElement.html#acb1866df2e440923354fa5b1ee9d5f52">userName</a>());</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            }</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (static_cast&lt;SlurSegment*&gt;(obj)-&gt;spanner()-&gt;type() == <a class="code" href="namespaceMs.html#a6b5aa179fb8d7a11ec316c01a2fdf6e1a6583855a84bb2092bdedabd25e5bc4e7">ElementType::SLUR</a>)</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            a-&gt;setText(tr(<span class="stringliteral">&quot;Slur&quot;</span>));</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (static_cast&lt;SlurSegment*&gt;(obj)-&gt;spanner()-&gt;type() == <a class="code" href="namespaceBww.html#a3e78f1ce9898d7fcb3f7e7adfec046f1ace1daf3e3c443b9ff1e3aa11b5a3c34c">ElementType::TIE</a>)</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            a-&gt;setText(tr(<span class="stringliteral">&quot;Tie&quot;</span>));</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      popup-&gt;addAction(<a class="code" href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">getAction</a>(<span class="stringliteral">&quot;cut&quot;</span>));</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      popup-&gt;addAction(<a class="code" href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">getAction</a>(<span class="stringliteral">&quot;copy&quot;</span>));</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      popup-&gt;addAction(<a class="code" href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">getAction</a>(<span class="stringliteral">&quot;paste&quot;</span>));</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      popup-&gt;addAction(<a class="code" href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">getAction</a>(<span class="stringliteral">&quot;swap&quot;</span>));</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      popup-&gt;addAction(<a class="code" href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">getAction</a>(<span class="stringliteral">&quot;delete&quot;</span>));</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <span class="keywordflow">if</span> (obj-&gt;isNote() || obj-&gt;isRest()) {</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            a = <a class="code" href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">getAction</a>(<span class="stringliteral">&quot;time-delete&quot;</span>);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            popup-&gt;addAction(a);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            }</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      QMenu* selMenu = popup-&gt;addMenu(tr(<span class="stringliteral">&quot;Select&quot;</span>));</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      selMenu-&gt;addAction(<a class="code" href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">getAction</a>(<span class="stringliteral">&quot;select-similar&quot;</span>));</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      selMenu-&gt;addAction(<a class="code" href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">getAction</a>(<span class="stringliteral">&quot;select-similar-staff&quot;</span>));</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      selMenu-&gt;addAction(<a class="code" href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">getAction</a>(<span class="stringliteral">&quot;select-similar-range&quot;</span>));</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      a = selMenu-&gt;addAction(tr(<span class="stringliteral">&quot;More…&quot;</span>));</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      a-&gt;setData(<span class="stringliteral">&quot;select-dialog&quot;</span>);</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      popup-&gt;addSeparator();</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      a = <a class="code" href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">getAction</a>(<span class="stringliteral">&quot;edit-element&quot;</span>);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      popup-&gt;addAction(a);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      a-&gt;setEnabled(obj-&gt;<a class="code" href="classMs_1_1Element.html#accef4917f0fce522b94b90a3ccd0f76b">isEditable</a>());</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      createElementPropertyMenu(obj, popup);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      popup-&gt;addSeparator();</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      a = popup-&gt;addAction(tr(<span class="stringliteral">&quot;Help&quot;</span>));</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      a-&gt;setData(<span class="stringliteral">&quot;help&quot;</span>);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      popup-&gt;addSeparator();</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      popup-&gt;addAction(<span class="stringliteral">&quot;Debugger&quot;</span>)-&gt;setData(<span class="stringliteral">&quot;list&quot;</span>);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      popupActive = <span class="keyword">true</span>;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      a = popup-&gt;exec(pos);</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      popupActive = <span class="keyword">false</span>;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="keywordflow">if</span> (a == 0)</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <span class="keyword">const</span> QByteArray&amp; cmd(a-&gt;data().toByteArray());</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      <span class="keywordflow">if</span> (cmd == <span class="stringliteral">&quot;cut&quot;</span> || cmd ==<span class="stringliteral">&quot;copy&quot;</span> || cmd == <span class="stringliteral">&quot;paste&quot;</span> || cmd == <span class="stringliteral">&quot;swap&quot;</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;         || cmd == <span class="stringliteral">&quot;delete&quot;</span> || cmd == <span class="stringliteral">&quot;time-delete&quot;</span>) {</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <span class="comment">// these actions are already activated</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            }</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <span class="keywordflow">if</span> (cmd == <span class="stringliteral">&quot;list&quot;</span>)</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;showElementContext(obj);</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd == <span class="stringliteral">&quot;help&quot;</span>)</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;showHelp(QString(<span class="stringliteral">&quot;element:%1&quot;</span>).arg(obj-&gt;<a class="code" href="classMs_1_1ScoreElement.html#ad80dda73306d6b784b0cac4626f797d4">name</a>()));</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd == <span class="stringliteral">&quot;edit-element&quot;</span>) {</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            <span class="keywordflow">if</span> (obj-&gt;<a class="code" href="classMs_1_1Element.html#accef4917f0fce522b94b90a3ccd0f76b">isEditable</a>()) {</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                  <span class="keywordflow">if</span> (obj-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a70883d048b0884821ac779d9ab168151">score</a>())</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                        obj-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a70883d048b0884821ac779d9ab168151">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#aa3b85eb58a8f7f4476fbd05b59253585">select</a>(obj);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                  startEditMode(obj);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                  <span class="keywordflow">return</span>;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                  }</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            }</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd == <span class="stringliteral">&quot;select-similar&quot;</span>)</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;selectSimilar(obj, <span class="keyword">false</span>);</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd == <span class="stringliteral">&quot;select-similar-staff&quot;</span>)</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;selectSimilar(obj, <span class="keyword">true</span>);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd == <span class="stringliteral">&quot;select-similar-range&quot;</span>)</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;selectSimilarInRange(obj);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd == <span class="stringliteral">&quot;select-dialog&quot;</span>)</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;selectElementDialog(obj);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd == <span class="stringliteral">&quot;realize-chord-symbols-dialog&quot;</span>) {</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            <span class="keywordflow">if</span> (obj-&gt;<a class="code" href="classMs_1_1Element.html#accef4917f0fce522b94b90a3ccd0f76b">isEditable</a>()) {</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                  <span class="comment">// try to construct a reasonable selection</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                  <span class="keywordflow">if</span> (obj-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a70883d048b0884821ac779d9ab168151">score</a>()) {</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                        <a class="code" href="classMs_1_1Score.html">Score</a>* score = obj-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a70883d048b0884821ac779d9ab168151">score</a>();</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                        <span class="keywordflow">if</span> (score-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#a884ac586a99a211a55eab115a2c3d95f">isRange</a>())</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                              <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;selectSimilarInRange(obj);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                        score-&gt;<a class="code" href="classMs_1_1Score.html#aa3b85eb58a8f7f4476fbd05b59253585">select</a>(obj, <a class="code" href="namespaceMs.html#a401306c67aaadf0a4102c60331e324d6a9eeb52badb613229884838847294b90d">SelectType::ADD</a>);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                        }</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                  <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;realizeChordSymbols();</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                  }</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            }</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            _score-&gt;startCmd();</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            elementPropertyAction(cmd, obj);</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            <span class="keywordflow">if</span> (score()-&gt;undoStack()-&gt;active())</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                  _score-&gt;endCmd();</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            }</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      }</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">//   measurePopup</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a0a07dda77a880d368180ef4c8c56e28f">  399</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a0a07dda77a880d368180ef4c8c56e28f">ScoreView::measurePopup</a>(QContextMenuEvent* ev, <a class="code" href="classMs_1_1Measure.html">Measure</a>* obj)</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      {</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      <span class="keywordtype">int</span> staffIdx;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      <span class="keywordtype">int</span> pitch;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      <a class="code" href="classMs_1_1Segment.html">Segment</a>* seg;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      QPoint gpos = ev-&gt;globalPos();</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      <span class="keywordflow">if</span> (!_score-&gt;pos2measure(editData.startMove, &amp;staffIdx, &amp;pitch, &amp;seg, 0))</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <span class="keywordflow">if</span> (staffIdx == -1) {</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            qDebug(<span class="stringliteral">&quot;ScoreView::measurePopup: staffIdx == -1!&quot;</span>);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            }</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <a class="code" href="classMs_1_1Staff.html">Staff</a>* staff = _score-&gt;staff(staffIdx);</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      QMenu* popup = <span class="keyword">new</span> QMenu(<span class="keyword">this</span>);</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      popup-&gt;setSeparatorsCollapsible(<span class="keyword">false</span>);</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      QAction* a = popup-&gt;addSeparator();</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      a-&gt;setText(tr(<span class="stringliteral">&quot;Staff&quot;</span>));</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      a = popup-&gt;addAction(tr(<span class="stringliteral">&quot;Edit Drumset…&quot;</span>));</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      a-&gt;setData(<span class="stringliteral">&quot;edit-drumset&quot;</span>);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      a-&gt;setEnabled(staff-&gt;<a class="code" href="classMs_1_1Staff.html#ae31dc0de799c1e206af979e65bf837ab">part</a>()-&gt;<a class="code" href="classMs_1_1Part.html#a6cae82662abe64d683dff09b3c7874f8">instrument</a>(obj-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a4957f952a3eca95bba93abfe047420bd">tick</a>())-&gt;drumset() != 0);</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      a = popup-&gt;addAction(tr(<span class="stringliteral">&quot;Piano Roll Editor…&quot;</span>));</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      a-&gt;setData(<span class="stringliteral">&quot;pianoroll&quot;</span>);</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      a = popup-&gt;addAction(tr(<span class="stringliteral">&quot;Staff/Part Properties…&quot;</span>));</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      a-&gt;setData(<span class="stringliteral">&quot;staff-properties&quot;</span>);</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      a = popup-&gt;addAction(tr(<span class="stringliteral">&quot;Split Staff…&quot;</span>));</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      a-&gt;setData(<span class="stringliteral">&quot;staff-split&quot;</span>);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      a = popup-&gt;addSeparator();</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      a-&gt;setText(tr(<span class="stringliteral">&quot;Measure&quot;</span>));</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      popup-&gt;addAction(<a class="code" href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">getAction</a>(<span class="stringliteral">&quot;cut&quot;</span>));</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      popup-&gt;addAction(<a class="code" href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">getAction</a>(<span class="stringliteral">&quot;copy&quot;</span>));</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      popup-&gt;addAction(<a class="code" href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">getAction</a>(<span class="stringliteral">&quot;paste&quot;</span>));</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      popup-&gt;addAction(<a class="code" href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">getAction</a>(<span class="stringliteral">&quot;swap&quot;</span>));</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      popup-&gt;addAction(<a class="code" href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">getAction</a>(<span class="stringliteral">&quot;delete&quot;</span>));</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      popup-&gt;addAction(<a class="code" href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">getAction</a>(<span class="stringliteral">&quot;time-delete&quot;</span>));</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      popup-&gt;addSeparator();</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      QMenu* menuAdd = popup-&gt;addMenu(tr(<span class="stringliteral">&quot;Add&quot;</span>));</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      menuAdd-&gt;addAction(<a class="code" href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">getAction</a>(<span class="stringliteral">&quot;insert-measure&quot;</span>));</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      menuAdd-&gt;addAction(<a class="code" href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">getAction</a>(<span class="stringliteral">&quot;insert-measures&quot;</span>));</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      menuAdd-&gt;addAction(<a class="code" href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">getAction</a>(<span class="stringliteral">&quot;insert-hbox&quot;</span>));</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      menuAdd-&gt;addAction(<a class="code" href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">getAction</a>(<span class="stringliteral">&quot;insert-vbox&quot;</span>));</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      menuAdd-&gt;addAction(<a class="code" href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">getAction</a>(<span class="stringliteral">&quot;insert-textframe&quot;</span>));</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      popup-&gt;addSeparator();</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      a = popup-&gt;addAction(tr(<span class="stringliteral">&quot;Measure Properties…&quot;</span>));</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      a-&gt;setData(<span class="stringliteral">&quot;props&quot;</span>);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      a-&gt;setEnabled(!obj-&gt;<a class="code" href="classMs_1_1Measure.html#ae92cfe704a9477074d0fbe1a3bb6ff61">isMMRest</a>());</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      popup-&gt;addSeparator();</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      popup-&gt;addAction(<span class="stringliteral">&quot;Object Debugger&quot;</span>)-&gt;setData(<span class="stringliteral">&quot;list&quot;</span>);</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      a = popup-&gt;exec(gpos);</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      <span class="keywordflow">if</span> (a == 0)</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      QString cmd(a-&gt;data().toString());</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <span class="keywordflow">if</span> (cmd == <span class="stringliteral">&quot;cut&quot;</span> || cmd ==<span class="stringliteral">&quot;copy&quot;</span> || cmd == <span class="stringliteral">&quot;paste&quot;</span> || cmd == <span class="stringliteral">&quot;swap&quot;</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;         || cmd == <span class="stringliteral">&quot;insert-measure&quot;</span> || cmd == <span class="stringliteral">&quot;select-similar&quot;</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;         || cmd == <span class="stringliteral">&quot;delete&quot;</span> || cmd == <span class="stringliteral">&quot;time-delete&quot;</span>) {</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <span class="comment">// these actions are already activated</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            }</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      _score-&gt;startCmd();</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      <span class="keywordflow">if</span> (cmd == <span class="stringliteral">&quot;list&quot;</span>)</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;showElementContext(obj);</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd == <span class="stringliteral">&quot;color&quot;</span>)</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            _score-&gt;colorItem(obj);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd == <span class="stringliteral">&quot;edit&quot;</span>) {</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            <span class="keywordflow">if</span> (obj-&gt;<a class="code" href="classMs_1_1Measure.html#a2c67ef4fc0d77fa272feef2e45ba3617">isEditable</a>()) {</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                  startEditMode(obj);</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                  <span class="keywordflow">return</span>;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                  }</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            }</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd == <span class="stringliteral">&quot;edit-drumset&quot;</span>) {</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            <a class="code" href="classMs_1_1EditDrumset.html">EditDrumset</a> drumsetEdit(staff-&gt;<a class="code" href="classMs_1_1Staff.html#ae31dc0de799c1e206af979e65bf837ab">part</a>()-&gt;<a class="code" href="classMs_1_1Part.html#a6cae82662abe64d683dff09b3c7874f8">instrument</a>(obj-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a4957f952a3eca95bba93abfe047420bd">tick</a>())-&gt;drumset(), <span class="keyword">this</span>);</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            <span class="keywordflow">if</span> (drumsetEdit.exec()) {</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                  _score-&gt;undo(<span class="keyword">new</span> <a class="code" href="classMs_1_1ChangeDrumset.html">ChangeDrumset</a>(staff-&gt;<a class="code" href="classMs_1_1Staff.html#ae31dc0de799c1e206af979e65bf837ab">part</a>()-&gt;<a class="code" href="classMs_1_1Part.html#a6cae82662abe64d683dff09b3c7874f8">instrument</a>(obj-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a4957f952a3eca95bba93abfe047420bd">tick</a>()), drumsetEdit.<a class="code" href="classMs_1_1Instrument.html#ac377dcee9176d06151474454b0f3c265">drumset</a>()));</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                  <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;updateDrumTools(drumsetEdit.drumset());</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                  <span class="keywordflow">if</span> (_score-&gt;undoStack()-&gt;active()) {</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                        _score-&gt;setLayoutAll();</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                        _score-&gt;endCmd();</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                        }</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                  }</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            }</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd == <span class="stringliteral">&quot;drumroll&quot;</span>) {</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            _score-&gt;endCmd();</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;editInDrumroll(staff);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            }</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd == <span class="stringliteral">&quot;pianoroll&quot;</span>) {</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            _score-&gt;endCmd();</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            QPointF p = toLogical(ev-&gt;pos());</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            <a class="code" href="structMs_1_1Position.html">Position</a> pp;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            <span class="keywordtype">bool</span> foundPos = _score-&gt;getPosition(&amp;pp, p, 0);</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;editInPianoroll(staff, foundPos ? &amp;pp : 0);</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            }</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd == <span class="stringliteral">&quot;staff-properties&quot;</span>) {</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            <a class="code" href="classMs_1_1Fraction.html">Fraction</a> <a class="code" href="click_8h.html#a23377ea277c7aef62f6cf3c640f7155c">tick</a> = obj ? obj-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a4957f952a3eca95bba93abfe047420bd">tick</a>() : <a class="code" href="classMs_1_1Fraction.html">Fraction</a>(-1,1);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            <a class="code" href="classMs_1_1EditStaff.html">EditStaff</a> editStaff(staff, tick, <span class="keyword">this</span>);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            connect(&amp;editStaff, SIGNAL(instrumentChanged()), <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>, SLOT(instrumentChanged()));</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            editStaff.exec();</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            }</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd == <span class="stringliteral">&quot;staff-split&quot;</span>) {</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            <a class="code" href="classMs_1_1SplitStaff.html">SplitStaff</a> <a class="code" href="namespaceMs_1_1LRHand.html#ab842ec714e9b8d83d04868ad7229b74e">splitStaff</a>(<span class="keyword">this</span>);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            <span class="keywordflow">if</span> (splitStaff.exec())</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                  _score-&gt;splitStaff(staffIdx, splitStaff.<a class="code" href="classMs_1_1SplitStaff.html#a3cade784c5a99eab62449920c4362dd7">getSplitPoint</a>());</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            }</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd == <span class="stringliteral">&quot;props&quot;</span>) {</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            <a class="code" href="classMs_1_1MeasureProperties.html">MeasureProperties</a> im(obj);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            im.exec();</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            }</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      <span class="keywordflow">if</span> (_score-&gt;undoStack()-&gt;active())</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            _score-&gt;endCmd();</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      }</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment">//   setBackground</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a9b6639c49b8f736a64213a0efce0cf91">  527</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a9b6639c49b8f736a64213a0efce0cf91">ScoreView::setBackground</a>(QPixmap* pm)</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      {</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      <span class="keyword">delete</span> _bgPixmap;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      _bgPixmap = pm;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      update();</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      }</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div><div class="line"><a name="l00534"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a9e1ed16d5612310f3edaff445d0ce7db">  534</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a9b6639c49b8f736a64213a0efce0cf91">ScoreView::setBackground</a>(<span class="keyword">const</span> QColor&amp; color)</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;      {</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      <span class="keyword">delete</span> _bgPixmap;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      _bgPixmap = 0;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      _bgColor = color;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      update();</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      }</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">//   setForeground</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div><div class="line"><a name="l00546"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a97e80eb178645f767c371648ae674dd8">  546</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a97e80eb178645f767c371648ae674dd8">ScoreView::setForeground</a>(QPixmap* pm)</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      {</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      <span class="keyword">delete</span> _fgPixmap;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      _fgPixmap = pm;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      update();</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      }</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a1d87f748437d85b45e7439481b3daf8e">  553</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a97e80eb178645f767c371648ae674dd8">ScoreView::setForeground</a>(<span class="keyword">const</span> QColor&amp; color)</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      {</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <span class="keyword">delete</span> _fgPixmap;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      _fgPixmap = 0;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      _fgColor = color;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      update();</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      }</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment">//   dataChanged</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div><div class="line"><a name="l00565"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a140eb5996ea9bba125371c43372a3ac5">  565</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a140eb5996ea9bba125371c43372a3ac5">ScoreView::dataChanged</a>(<span class="keyword">const</span> QRectF&amp; r)</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      {</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      update(_matrix.mapRect(r).toRect());  <span class="comment">// generate paint event</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      }</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment">//   moveCursor</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment">//    move cursor during playback</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div><div class="line"><a name="l00575"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a232d837eb35d66b42561d349d5716117">  575</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#aab24975d37461c662a3643a89586075f">ScoreView::moveCursor</a>(<span class="keyword">const</span> <a class="code" href="classMs_1_1Fraction.html">Fraction</a>&amp; <a class="code" href="click_8h.html#a23377ea277c7aef62f6cf3c640f7155c">tick</a>)</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      {</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      <a class="code" href="classMs_1_1Measure.html">Measure</a>* measure = score()-&gt;tick2measureMM(tick);</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <span class="keywordflow">if</span> (measure == 0)</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      qreal x = 0.0;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      <a class="code" href="classMs_1_1Segment.html">Segment</a>* s;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      <span class="keywordflow">for</span> (s = measure-&gt;<a class="code" href="classMs_1_1Measure.html#a3c5e55d2f2291d5ee433a093c0b1dd04">first</a>(<a class="code" href="namespaceMs.html#a24593d5bc01ac95fdbec3d354d258894a7884fad7b22d960efd4e9d84e61e7fe0">SegmentType::ChordRest</a>); s;) {</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            <a class="code" href="classMs_1_1Fraction.html">Fraction</a> t1 = s-&gt;<a class="code" href="classMs_1_1Segment.html#a23cde3c97359266e2787b107aa0c8cdf">tick</a>();</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            <span class="keywordtype">int</span> x1 = s-&gt;<a class="code" href="classMs_1_1Element.html#aafc617f0cd5069a406a83da394b15e53">canvasPos</a>().x();</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            qreal x2;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            <a class="code" href="classMs_1_1Fraction.html">Fraction</a> t2;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            <a class="code" href="classMs_1_1Segment.html">Segment</a>* ns = s-&gt;<a class="code" href="classMs_1_1Segment.html#a1c4c00c6b1052c6c122f5fc665ec8a20">next</a>(<a class="code" href="namespaceMs.html#a24593d5bc01ac95fdbec3d354d258894a7884fad7b22d960efd4e9d84e61e7fe0">SegmentType::ChordRest</a>);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            <span class="keywordflow">while</span> (ns &amp;&amp; !ns-&gt;<a class="code" href="classMs_1_1Element.html#a9f91ce44289781c10fbaab9f5867d387">visible</a>())</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                  ns = ns-&gt;<a class="code" href="classMs_1_1Segment.html#a1c4c00c6b1052c6c122f5fc665ec8a20">next</a>(<a class="code" href="namespaceMs.html#a24593d5bc01ac95fdbec3d354d258894a7884fad7b22d960efd4e9d84e61e7fe0">SegmentType::ChordRest</a>);</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            <span class="keywordflow">if</span> (ns) {</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                  t2 = ns-&gt;<a class="code" href="classMs_1_1Segment.html#a23cde3c97359266e2787b107aa0c8cdf">tick</a>();</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                  x2 = ns-&gt;<a class="code" href="classMs_1_1Element.html#aafc617f0cd5069a406a83da394b15e53">canvasPos</a>().x();</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                  }</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                  t2 = measure-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a6e80c952d019b265c81945b98c91fed2">endTick</a>();</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                  <span class="comment">// measure-&gt;width is not good enough because of courtesy keysig, timesig</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                  <a class="code" href="classMs_1_1Segment.html">Segment</a>* seg = measure-&gt;<a class="code" href="classMs_1_1Measure.html#a66a3e42855dec1d88936966d197a0ac0">findSegment</a>(<a class="code" href="namespaceMs.html#a24593d5bc01ac95fdbec3d354d258894aeb7c90481b6f7672bbbcd3775a2aae7d">SegmentType::EndBarLine</a>, measure-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a4957f952a3eca95bba93abfe047420bd">tick</a>() + measure-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a6cab2bc583be79fa27b83390dd48bc7f">ticks</a>());</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                  <span class="keywordflow">if</span> (seg)</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                        x2 = seg-&gt;<a class="code" href="classMs_1_1Element.html#aafc617f0cd5069a406a83da394b15e53">canvasPos</a>().x();</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                  <span class="keywordflow">else</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                        x2 = measure-&gt;<a class="code" href="classMs_1_1Element.html#aafc617f0cd5069a406a83da394b15e53">canvasPos</a>().x() + measure-&gt;<a class="code" href="classMs_1_1Element.html#abd781d11186d1951028a0efaf6d5cf5a">width</a>(); <span class="comment">//safety, should not happen</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                  }</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            <span class="keywordflow">if</span> (tick &gt;= t1 &amp;&amp; tick &lt; t2) {</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                  <a class="code" href="classMs_1_1Fraction.html">Fraction</a>   dt = t2 - t1;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                  qreal dx = x2 - x1;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                  x = x1 + dx * (tick-t1).ticks() / dt.<a class="code" href="classMs_1_1Fraction.html#a1d92a73ce7f9b7f895a9a083f6fe1eb2">ticks</a>();</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                  }</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            s = ns;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            }</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      <span class="keywordflow">if</span> (s == 0)</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      QColor c(<a class="code" href="classMs_1_1MScore.html#aa0db4fc96c165225d1a05d87f9ac90cd">MScore::selectColor</a>[0]);</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      c.setAlpha(50);</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      _cursor-&gt;setColor(c);</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      _cursor-&gt;setTick(tick);</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <a class="code" href="classMs_1_1System.html">System</a>* system = measure-&gt;<a class="code" href="classMs_1_1Measure.html#a9c4de13b592b3e0cc6a2398641da99ed">system</a>();</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="keywordflow">if</span> (system == 0)</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      <span class="keywordtype">double</span> y        = system-&gt;<a class="code" href="classMs_1_1System.html#ad93df8d8b2f2fb6d8d88c1d4b590156c">staffYpage</a>(0) + system-&gt;<a class="code" href="classMs_1_1System.html#a57af65dafb20c1282ea78ba3d74725a0">page</a>()-&gt;<a class="code" href="classMs_1_1Element.html#a19157e811d0d2a0e3c94dc844039ba2f">pos</a>().y();</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <span class="keywordtype">double</span> _spatium = score()-&gt;spatium();</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      update(_matrix.mapRect(_cursor-&gt;rect()).toRect().adjusted(-1,-1,1,1));</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;      qreal mag = _spatium / <a class="code" href="namespaceMs.html#ace3977c7351a3c80613f191da242afdd">SPATIUM20</a>;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      <span class="keywordtype">double</span> w  = _spatium * 2.0 + score()-&gt;scoreFont()-&gt;width(<a class="code" href="namespaceMs.html#a602ef082ffbbe2c4b11e2375cc4aa794aeab244836adffdeef9573f36a3baba75">SymId::noteheadBlack</a>, mag);</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      <span class="keywordtype">double</span> h  = 6 * _spatium;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      <span class="comment">// set cursor height for whole system</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      <span class="keywordtype">double</span> y2 = 0.0;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; _score-&gt;nstaves(); ++i) {</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            <a class="code" href="classMs_1_1SysStaff.html">SysStaff</a>* ss = system-&gt;<a class="code" href="classMs_1_1System.html#a51fa420463d9aadfbdc0839fb781ff1e">staff</a>(i);</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            <span class="keywordflow">if</span> (!ss-&gt;<a class="code" href="classMs_1_1SysStaff.html#a15edb8450b4cbf7ec4c20591804def65">show</a>() || !_score-&gt;staff(i)-&gt;show())</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                  <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            y2 = ss-&gt;<a class="code" href="classMs_1_1SysStaff.html#aa79ca5523125cce73baf2b3783d0dd32">bbox</a>().bottom();</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            }</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      h += y2;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      x -= _spatium;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      y -= 3 * _spatium;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      _cursor-&gt;setRect(QRectF(x, y, w, h));</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      update(_matrix.mapRect(_cursor-&gt;rect()).toRect().adjusted(-1,-1,1,1));</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      <span class="keywordflow">if</span> (_score-&gt;layoutMode() == <a class="code" href="namespaceMs.html#a9b1fb02f916c554309371c6513550a1ba17b8ef2c330f1430e00c9de5469fc7e7">LayoutMode::LINE</a> &amp;&amp; <a class="code" href="namespaceMs.html#a1a43a84e57fe33057a3e17aa85488d5f">seq</a>-&gt;<a class="code" href="classMs_1_1Seq.html#abb1e3673970733b8564170ccee3c3b6e">isPlaying</a>() &amp;&amp; panSettings().enabled)</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            moveControlCursor(tick);</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;state() == <a class="code" href="namespaceMs.html#aba304e35acf732434f3c3d8b72562885a376c7348e7b637fe5b9ddb868a5b54ac">ScoreState::STATE_PLAY</a> &amp;&amp; <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;panDuringPlayback()) {</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            adjustCanvasPosition(measure, <span class="keyword">true</span>);</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            }</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      }</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="comment">//   moveControlCursor</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment">//    move the control cursor during playback</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment">//   This works by calculating the total length (in sp) of the score</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment">//   and then using that information to calculate the position of the control cursor based on the time passed.</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment">//   Because not all measures have the same width some modifications are made</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="comment">//   to the distance moved each time that this is called (once every 20ms, or whatever the hearbeat is).</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="comment">//   That means that not all milliseconds are treated equally, some cause larger and some smaller movement.</span></div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div><div class="line"><a name="l00668"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a220c3e49e703287696af33c4edae6bdb">  668</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a220c3e49e703287696af33c4edae6bdb">ScoreView::moveControlCursor</a>(<span class="keyword">const</span> <a class="code" href="classMs_1_1Fraction.html">Fraction</a>&amp; <a class="code" href="click_8h.html#a23377ea277c7aef62f6cf3c640f7155c">tick</a>)</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;      {</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      QColor c(Qt::green);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      c.setAlpha(30);</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      _controlCursor-&gt;setColor(c);</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      _controlCursor-&gt;setTick(tick);</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;      <span class="keywordtype">int</span> realX = _cursor-&gt;rect().x();</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      <span class="keywordtype">int</span> controlX = _controlCursor-&gt;rect().x();</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      <span class="keywordtype">double</span> <a class="code" href="namespaceMs.html#a9506eedd97d44c482010b77e53a72b18">distance</a> = realX - controlX;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespaceMs.html#a1a43a84e57fe33057a3e17aa85488d5f">seq</a>-&gt;<a class="code" href="classMs_1_1Seq.html#abb1e3673970733b8564170ccee3c3b6e">isPlaying</a>() &amp;&amp; isCursorDistanceReasonable()) {</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            <span class="comment">// playbackCursor in front of the controlCursor</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;            <span class="keywordflow">if</span> (distance &gt; _panSettings.rightDistance)</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                  _controlModifier += _panSettings.controlModifierSteps;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (distance &gt; _panSettings.rightDistance1 &amp;&amp; _controlModifier &lt; _panSettings.rightMod1)</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                  _controlModifier += _panSettings.controlModifierSteps;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (distance &gt; _panSettings.rightDistance2 &amp;&amp; _controlModifier &lt; _panSettings.rightMod2)</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                  _controlModifier += _panSettings.controlModifierSteps;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (_controlModifier &gt; _panSettings.rightMod1 &amp;&amp; distance &lt; _panSettings.rightDistance1)</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                  _controlModifier -= _panSettings.controlModifierSteps;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (_controlModifier &gt; _panSettings.rightMod2 &amp;&amp; distance &lt; _panSettings.rightDistance2)</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                  _controlModifier -= _panSettings.controlModifierSteps;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (_controlModifier &gt; _panSettings.rightMod3 &amp;&amp; distance &lt; _panSettings.rightDistance3)</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                  _controlModifier = _panSettings.controlModifierBase;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;            <span class="comment">// playbackCursor behind the controlCursor</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (distance &lt; _panSettings.leftDistance)</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                  _controlModifier -= _panSettings.controlModifierSteps;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (_controlModifier &lt; _panSettings.leftMod1 &amp;&amp; distance &gt; _panSettings.leftDistance1)</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                  _controlModifier += _panSettings.controlModifierSteps;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (_controlModifier &lt; _panSettings.leftMod2 &amp;&amp; distance &gt; _panSettings.leftDistance2)</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                  _controlModifier += _panSettings.controlModifierSteps;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (_controlModifier &lt; _panSettings.leftMod3 &amp;&amp; distance &gt; _panSettings.leftDistance3)</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                  _controlModifier = _panSettings.controlModifierBase;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;            <span class="comment">// enforce limits</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;            <span class="keywordflow">if</span> (_controlModifier &lt; _panSettings.minContinuousModifier)</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                  _controlModifier = _panSettings.minContinuousModifier;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (_controlModifier &gt; _panSettings.maxContinuousModifier)</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                  _controlModifier = _panSettings.maxContinuousModifier;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;            <span class="keywordtype">double</span> addition = 0;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;            <span class="keywordflow">if</span> (_controlCursorTimer.isValid()) {</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                  <span class="keywordflow">if</span> (!_panSettings.advancedWeighting || _controlModifier == _panSettings.minContinuousModifier || _controlModifier == _panSettings.maxContinuousModifier) {</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                        addition = _controlCursorTimer.elapsed() * _controlModifier;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                        }</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                  <span class="keywordflow">else</span> {</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                        addition = _controlCursorTimer.elapsed() * _controlModifier * _panSettings.normalWeight + _controlCursorTimer.elapsed() * (_playbackCursorDistanceTravelled/500) * _panSettings.smartWeight;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                        }</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                  }</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;            _timeElapsed += addition;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            }</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      <span class="keywordflow">else</span> { <span class="comment">// reposition the cursor when distance is too great</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;            <span class="keywordtype">double</span> curOffset = _cursor-&gt;rect().x() - score()-&gt;firstMeasure()-&gt;pos().x();</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;            <span class="keywordtype">double</span> length = score()-&gt;lastMeasure()-&gt;pos().x() - score()-&gt;firstMeasure()-&gt;pos().x();</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;            _timeElapsed = (curOffset / length) * score()-&gt;durationWithoutRepeats() * 1000;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            _controlModifier = _panSettings.controlModifierBase;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;            }</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      <span class="comment">// Prepare for the next round of calculations</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      <span class="keywordflow">if</span> (!_controlCursorTimer.isValid() &amp;&amp; distance &gt; 100) <span class="comment">// distance &gt; 100 used to hack around the count-in option</span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;            _controlCursorTimer.start();</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (_controlCursorTimer.isValid())</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;            _controlCursorTimer.restart();</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      <span class="keywordflow">if</span> (!_playbackCursorTimer.isValid() &amp;&amp; _controlCursorTimer.isValid()) {</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            _playbackCursorOldPosition = _cursor-&gt;rect().x();</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;            _playbackCursorTimer.start();</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;            }</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (_playbackCursorTimer.isValid() &amp;&amp; _playbackCursorTimer.elapsed() &gt; _panSettings.cursorTimerDuration) {</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            _playbackCursorNewPosition = _cursor-&gt;rect().x();</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;            _playbackCursorDistanceTravelled = _playbackCursorNewPosition - _playbackCursorOldPosition;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;            _playbackCursorOldPosition = _playbackCursorNewPosition;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;            _playbackCursorTimer.restart();</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;            }</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;      <span class="comment">// Calculate the position of the controlCursor based on the timeElapsed (which is not the real time that has passed)</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      qreal x = score()-&gt;firstMeasure()-&gt;pos().x() + (score()-&gt;lastMeasure()-&gt;pos().x() - score()-&gt;firstMeasure()-&gt;pos().x()) * (_timeElapsed / (score()-&gt;durationWithoutRepeats() * 1000));</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;      x -= score()-&gt;spatium();</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      _controlCursor-&gt;setRect(QRectF(x, _cursor-&gt;rect().y(), _cursor-&gt;rect().width(), _cursor-&gt;rect().height()));</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      update(_matrix.mapRect(_controlCursor-&gt;rect()).toRect().adjusted(-1,-1,1,1));</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      }</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment">//   isCursorDistanceReasonable</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment">//    check if the control cursor needs to be teleported</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment">//    to catch up with the playback cursor (for smooth panning)</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;</div><div class="line"><a name="l00758"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a6458722b4cfdfa121851ec499d40cfe2">  758</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classMs_1_1ScoreView.html#a6458722b4cfdfa121851ec499d40cfe2">ScoreView::isCursorDistanceReasonable</a>()</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      {</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      qreal viewWidth = canvasViewport().width();</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      qreal controlX = _controlCursor-&gt;rect().x();</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      qreal playbackX = _cursor-&gt;rect().x();</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      qreal cursorDistance = abs(controlX - playbackX);</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      <span class="keywordtype">double</span> maxLeftDistance = viewWidth * (_panSettings.controlCursorScreenPos + 0.07); <span class="comment">// 0.05 left margin + 0.02 for making this less sensitive</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;      <span class="keywordtype">double</span> maxRightDistance = viewWidth * (1 - _panSettings.controlCursorScreenPos + 0.15); <span class="comment">// teleporting to the right is harder to trigger (we don&#39;t want to overdo it)</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      <span class="keywordflow">if</span> (controlX &lt; playbackX &amp;&amp; _panSettings.teleportRightEnabled)</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;            <span class="keywordflow">return</span> cursorDistance &lt; maxRightDistance;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      <span class="keywordflow">if</span> (playbackX &lt; controlX &amp;&amp; _panSettings.teleportLeftEnabled)</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            <span class="keywordflow">return</span> cursorDistance &lt; maxLeftDistance;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      }</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="comment">//   moveControlCursorNearCursor</span><span class="comment"></span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="comment">///     used to position the control cursor correctly</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="comment">///     when starting playback</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="comment"></span><span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div><div class="line"><a name="l00782"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a77c1fdb6a5994e2c1138940552fc3376">  782</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a77c1fdb6a5994e2c1138940552fc3376">ScoreView::moveControlCursorNearCursor</a>()</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      {</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      <span class="keywordtype">double</span> curOffset = _cursor-&gt;rect().x() - score()-&gt;firstMeasure()-&gt;pos().x();</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      <span class="keywordtype">double</span> length = score()-&gt;lastMeasure()-&gt;pos().x() - score()-&gt;firstMeasure()-&gt;pos().x();</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      _timeElapsed = (curOffset / length) * score()-&gt;durationWithoutRepeats() * 1000;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      qreal x = score()-&gt;firstMeasure()-&gt;pos().x() + (score()-&gt;lastMeasure()-&gt;pos().x() - score()-&gt;firstMeasure()-&gt;pos().x()) * (_timeElapsed / (score()-&gt;durationWithoutRepeats() * 1000));</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      x -= score()-&gt;spatium();</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      _controlCursor-&gt;setRect(QRectF(x, _cursor-&gt;rect().y(), _cursor-&gt;rect().width(), _cursor-&gt;rect().height()));</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      }</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment">//   moveCursor</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment">//    move cursor in note input mode</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;</div><div class="line"><a name="l00797"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#aab24975d37461c662a3643a89586075f">  797</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#aab24975d37461c662a3643a89586075f">ScoreView::moveCursor</a>()</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      {</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      <span class="keyword">const</span> <a class="code" href="classMs_1_1InputState.html">InputState</a>&amp; is = _score-&gt;inputState();</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      <a class="code" href="classMs_1_1Segment.html">Segment</a>* segment = is.<a class="code" href="classMs_1_1InputState.html#a50906efca36b635813b754bff9b32f15">segment</a>();</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      <span class="keywordflow">if</span> (segment &amp;&amp; score()-&gt;styleB(<a class="code" href="namespaceMs.html#a2bac757437d1a9e364db27de8f9c9e2ea83a473e523160149b1f60621fcba0b5b">Sid::createMultiMeasureRests</a>) &amp;&amp; segment-&gt;<a class="code" href="classMs_1_1Segment.html#a44dc6d5b22a75152673060bc059acfb9">measure</a>()-&gt;<a class="code" href="classMs_1_1Measure.html#a9491f66d4e4c82e05aaea063d3654ac8">hasMMRest</a>()) {</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;            <a class="code" href="classMs_1_1Measure.html">Measure</a>* m = segment-&gt;<a class="code" href="classMs_1_1Segment.html#a44dc6d5b22a75152673060bc059acfb9">measure</a>()-&gt;<a class="code" href="classMs_1_1Measure.html#a9109c2c9621f0cc9ecd86afcae54afe8">mmRest</a>();</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;            segment = m-&gt;<a class="code" href="classMs_1_1Measure.html#a66a3e42855dec1d88936966d197a0ac0">findSegment</a>(<a class="code" href="namespaceMs.html#a24593d5bc01ac95fdbec3d354d258894a7884fad7b22d960efd4e9d84e61e7fe0">SegmentType::ChordRest</a>, m-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a4957f952a3eca95bba93abfe047420bd">tick</a>());</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            }</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      <span class="keywordflow">if</span> (!segment)</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      <span class="keywordtype">int</span> track    = is.<a class="code" href="classMs_1_1InputState.html#a15cf2602df222da8558a2d6a43e66b19">track</a>() == -1 ? 0 : is.<a class="code" href="classMs_1_1InputState.html#a15cf2602df222da8558a2d6a43e66b19">track</a>();</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      <span class="keywordtype">int</span> voice    = track % <a class="code" href="mscore_8h.html#a7b14c16d0b45fd100ee97e74cfd907c0">VOICES</a>;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      <span class="keywordtype">int</span> staffIdx = track / <a class="code" href="mscore_8h.html#a7b14c16d0b45fd100ee97e74cfd907c0">VOICES</a>;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      QColor c(<a class="code" href="classMs_1_1MScore.html#aa0db4fc96c165225d1a05d87f9ac90cd">MScore::selectColor</a>[voice]);</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      c.setAlpha(50);</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      _cursor-&gt;setColor(c);</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      _cursor-&gt;setTick(segment-&gt;<a class="code" href="classMs_1_1Segment.html#a23cde3c97359266e2787b107aa0c8cdf">tick</a>());</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;      <a class="code" href="classMs_1_1System.html">System</a>* system = segment-&gt;<a class="code" href="classMs_1_1Segment.html#a44dc6d5b22a75152673060bc059acfb9">measure</a>()-&gt;<a class="code" href="classMs_1_1Measure.html#a9c4de13b592b3e0cc6a2398641da99ed">system</a>();</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      <span class="keywordflow">if</span> (system == 0) {</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;            <span class="comment">// a new measure was appended but no layout took place</span></div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;            <span class="comment">// or this measure was skipped by a multi measure rest</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;            }</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      <span class="keywordtype">double</span> x        = segment-&gt;<a class="code" href="classMs_1_1Element.html#aafc617f0cd5069a406a83da394b15e53">canvasPos</a>().x();</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      <span class="keywordtype">double</span> y        = system-&gt;<a class="code" href="classMs_1_1System.html#ad93df8d8b2f2fb6d8d88c1d4b590156c">staffYpage</a>(staffIdx) + system-&gt;<a class="code" href="classMs_1_1System.html#a57af65dafb20c1282ea78ba3d74725a0">page</a>()-&gt;<a class="code" href="classMs_1_1Element.html#a19157e811d0d2a0e3c94dc844039ba2f">pos</a>().y();</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      <span class="keywordtype">double</span> _spatium = score()-&gt;spatium();</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      x              -= qMin(segment-&gt;<a class="code" href="classMs_1_1Element.html#a19157e811d0d2a0e3c94dc844039ba2f">pos</a>().x() - score()-&gt;styleP(<a class="code" href="namespaceMs.html#a2bac757437d1a9e364db27de8f9c9e2ea7c5d39d9b58f23d6f42e27eb20d55ec1">Sid::barNoteDistance</a>), 0.0);</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      update(_matrix.mapRect(_cursor-&gt;rect()).toRect().adjusted(-1,-1,1,1));</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;      <span class="keywordtype">double</span> h;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      qreal mag               = _spatium / <a class="code" href="namespaceMs.html#ace3977c7351a3c80613f191da242afdd">SPATIUM20</a>;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;      <span class="keywordtype">double</span> w                = _spatium * 2.0 + score()-&gt;scoreFont()-&gt;width(<a class="code" href="namespaceMs.html#a602ef082ffbbe2c4b11e2375cc4aa794aeab244836adffdeef9573f36a3baba75">SymId::noteheadBlack</a>, mag);</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      <a class="code" href="classMs_1_1Staff.html">Staff</a>* staff            = score()-&gt;staff(staffIdx);</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      <span class="keyword">const</span> <a class="code" href="classMs_1_1StaffType.html">StaffType</a>* staffType    = staff-&gt;<a class="code" href="classMs_1_1Staff.html#ad248bef7f25a4fe152ce281372a24d3f">staffType</a>(is.<a class="code" href="classMs_1_1InputState.html#a79d562ec34847c3154ec4c6c5073d464">tick</a>());</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      <span class="keywordtype">double</span> lineDist         = staffType-&gt;<a class="code" href="classMs_1_1StaffType.html#a8573023e9149c33b1dc28e8e841e21ca">lineDistance</a>().<a class="code" href="classMs_1_1Spatium.html#ab21fa50b8ec92de51fb08a2365770422">val</a>() * _spatium;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      <span class="keywordtype">int</span> lines               = staffType-&gt;<a class="code" href="classMs_1_1StaffType.html#a1f3e57f97fb721dca79f75d6611f394c">lines</a>();</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      <span class="keywordtype">int</span> strg                = is.<a class="code" href="classMs_1_1InputState.html#a3b873c338079a3da35310c7dc79bd5a2">string</a>();          <span class="comment">// strg refers to an instrument physical string</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      x                       -= _spatium;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;      <span class="keywordtype">int</span> instrStrgs          = staff-&gt;<a class="code" href="classMs_1_1Staff.html#ae31dc0de799c1e206af979e65bf837ab">part</a>()-&gt;<a class="code" href="classMs_1_1Part.html#a6cae82662abe64d683dff09b3c7874f8">instrument</a>(is.<a class="code" href="classMs_1_1InputState.html#a79d562ec34847c3154ec4c6c5073d464">tick</a>())-&gt;stringData()-&gt;strings();</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <span class="comment">// if on a TAB staff and InputState::_string makes sense,</span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      <span class="comment">// draw cursor around single string</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      <span class="keywordflow">if</span> (staff-&gt;<a class="code" href="classMs_1_1Staff.html#afdd8a358b8e40b9e02bca11e9fbb8829">isTabStaff</a>(is.<a class="code" href="classMs_1_1InputState.html#a79d562ec34847c3154ec4c6c5073d464">tick</a>()) &amp;&amp; strg &gt;= 0 &amp;&amp; strg &lt;= instrStrgs) {</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;            h = lineDist;                 <span class="comment">// cursor height is one full line distance</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;            y += staffType-&gt;<a class="code" href="classMs_1_1StaffType.html#a5c8edcd1dcd113c55d1a682cf422c26e">physStringToYOffset</a>(strg) * _spatium;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;            <span class="comment">// if frets are on lines, centre on string; if frets are above lines, &#39;sit&#39; above string</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;            y -= (staffType-&gt;<a class="code" href="classMs_1_1StaffType.html#af45a9aadd8ee7ec2943a1ecc4ab9d0e3">onLines</a>() ? lineDist * 0.5 : lineDist);</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;            <span class="comment">// look for a note on this string in this staff</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;            <span class="comment">// if found, it will be selected, to synchronize the &#39;new note input cursor&#39; and the &#39;current note cursor&#39;</span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;            <span class="comment">// i.e. the point where a new note would be added and the existing note which receives any editing</span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;            <span class="comment">// (like pitch change or articulation addition)</span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            <span class="keywordtype">bool</span>        done  = <span class="keyword">false</span>;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            <a class="code" href="classMs_1_1Segment.html">Segment</a>*    seg   = is.<a class="code" href="classMs_1_1InputState.html#a50906efca36b635813b754bff9b32f15">segment</a>();</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            <span class="keywordtype">int</span>         minTrack = (is.<a class="code" href="classMs_1_1InputState.html#a15cf2602df222da8558a2d6a43e66b19">track</a>() / <a class="code" href="mscore_8h.html#a7b14c16d0b45fd100ee97e74cfd907c0">VOICES</a>) * <a class="code" href="mscore_8h.html#a7b14c16d0b45fd100ee97e74cfd907c0">VOICES</a>;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;            <span class="keywordtype">int</span>         maxTrack = minTrack + <a class="code" href="mscore_8h.html#a7b14c16d0b45fd100ee97e74cfd907c0">VOICES</a>;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            <span class="comment">// get selected chord, if one exists and is in this segment</span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;            <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* scr = _score-&gt;selection().cr();</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;            <span class="keywordflow">if</span> (scr &amp;&amp; (scr-&gt;<a class="code" href="classMs_1_1ChordRest.html#a47a641f4c229f43d67ed5154fdebc05c">type</a>() != <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea45d886b842022787183a308e0200d336">ElementType::CHORD</a> || scr-&gt;<a class="code" href="classMs_1_1ChordRest.html#a94a3a697e4767c1e0ed46c205a81ac24">segment</a>() != seg))</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                  scr = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;            <span class="comment">// get the physical string corresponding to current visual string</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> t = minTrack; t &lt; maxTrack; t++) {</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                  <a class="code" href="classMs_1_1Element.html">Element</a>* e = seg-&gt;<a class="code" href="classMs_1_1Segment.html#a4e9ad4c47081dec0aebcd2aea96b309f">element</a>(t);</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                  <span class="keywordflow">if</span> (e != <span class="keyword">nullptr</span> &amp;&amp; e-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea45d886b842022787183a308e0200d336">ElementType::CHORD</a>) {</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                        <span class="comment">// if there is a selected chord in this segment on this track but it is not e</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                        <span class="comment">// then the selected chord must be a grace note chord, and we should use it</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                        <span class="keywordflow">if</span> (scr &amp;&amp; scr-&gt;<a class="code" href="classMs_1_1Element.html#ab4986d1b4f0d45b8e84cf52c46885c36">track</a>() == t &amp;&amp; scr != e)</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                              e = scr;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                        <span class="comment">// search notes looking for one on current string</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                        <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1Note.html">Note</a>* n : static_cast&lt;Chord*&gt;(e)-&gt;notes())</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                              <span class="comment">// if note found on this string, make it current</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                              <span class="keywordflow">if</span> (n-&gt;string() == strg) {</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                                    <span class="keywordflow">if</span> (!n-&gt;selected()) {</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                                          _score-&gt;select(n);</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                                          <span class="comment">// restore input state after selection</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                                          _score-&gt;inputState().<a class="code" href="classMs_1_1ChordRest.html#ac50a2989556e5cd55b71ca4c98067492">setTrack</a>(track);</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;                                          }</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                                    <span class="comment">// if using this code, we can delete the setTrack() call above</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;                                    <span class="comment">// the code below forces input state &amp; cursor to match current note</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                                    _score-&gt;inputState().setTrack(t);</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                                    QColor c(<a class="code" href="classMs_1_1MScore.html#aa0db4fc96c165225d1a05d87f9ac90cd">MScore::selectColor</a>[t % VOICES]);</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                                    c.setAlpha(50);</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                                    _cursor-&gt;setColor(c);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                                    done = <span class="keyword">true</span>;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                                    }</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                        }</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                  <span class="keywordflow">if</span> (done)</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                  }</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      }</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      <span class="comment">// otherwise, draw cursor across whole staff</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;            h = (lines - 1) * lineDist + 4 * _spatium;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;            y -= 2.0 * _spatium;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;            }</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      _cursor-&gt;setRect(QRectF(x, y, w, h));</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      update(_matrix.mapRect(_cursor-&gt;rect()).toRect().adjusted(-1,-1,1,1));</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      <span class="keywordflow">if</span> (is.<a class="code" href="classMs_1_1InputState.html#a28047eb7c30748dd3111c4621eb1ea4d">cr</a>())</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;            adjustCanvasPosition(is.<a class="code" href="classMs_1_1InputState.html#a28047eb7c30748dd3111c4621eb1ea4d">cr</a>(), <span class="keyword">false</span>);</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      }</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;<span class="comment">//   cursorTick</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;</div><div class="line"><a name="l00907"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a46e805141dd47aad785718cddee9aed2">  907</a></span>&#160;<a class="code" href="classMs_1_1Fraction.html">Fraction</a> <a class="code" href="classMs_1_1ScoreView.html#a46e805141dd47aad785718cddee9aed2">ScoreView::cursorTick</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="keyword">      </span>{</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;      <span class="keywordflow">return</span> _cursor-&gt;tick();</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;      }</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="comment">//   setCursorOn</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;</div><div class="line"><a name="l00916"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#abad27335f8d58f3f3389683134375c57">  916</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#abad27335f8d58f3f3389683134375c57">ScoreView::setCursorOn</a>(<span class="keywordtype">bool</span> val)</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      {</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      <span class="keywordflow">if</span> (_cursor &amp;&amp; (_cursor-&gt;visible() != val)) {</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;            _cursor-&gt;setVisible(val);</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;            update(_matrix.mapRect(_cursor-&gt;rect()).toRect().adjusted(-1,-1,1,1));</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;            }</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;      }</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;<span class="comment">//   setLoopCursor</span></div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="comment">//    adjust the cursor shape and position to mark the loop</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="comment">//    isInPos is used to adjust the x position of In vs Out mark</span></div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div><div class="line"><a name="l00930"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a3ad962ba95fa348961d5016da346ee02">  930</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a3ad962ba95fa348961d5016da346ee02">ScoreView::setLoopCursor</a>(<a class="code" href="classMs_1_1PositionCursor.html">PositionCursor</a> *curLoop, <span class="keyword">const</span> <a class="code" href="classMs_1_1Fraction.html">Fraction</a>&amp; <a class="code" href="click_8h.html#a23377ea277c7aef62f6cf3c640f7155c">tick</a>, <span class="keywordtype">bool</span> isInPos)</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;      {</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;      <span class="comment">// set mark height for whole system</span></div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      <a class="code" href="classMs_1_1Measure.html">Measure</a>* measure = score()-&gt;tick2measure(tick);</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      <span class="keywordflow">if</span> (measure == 0)</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;      qreal x = 0.0;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;      <a class="code" href="classMs_1_1Segment.html">Segment</a>* s;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      <span class="keywordflow">for</span> (s = measure-&gt;<a class="code" href="classMs_1_1Measure.html#a3c5e55d2f2291d5ee433a093c0b1dd04">first</a>(<a class="code" href="namespaceMs.html#a24593d5bc01ac95fdbec3d354d258894a7884fad7b22d960efd4e9d84e61e7fe0">SegmentType::ChordRest</a>); s;) {</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;            <a class="code" href="classMs_1_1Fraction.html">Fraction</a> t1 = s-&gt;<a class="code" href="classMs_1_1Segment.html#a23cde3c97359266e2787b107aa0c8cdf">tick</a>();</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;            <span class="keywordtype">int</span> x1 = s-&gt;<a class="code" href="classMs_1_1Element.html#aafc617f0cd5069a406a83da394b15e53">canvasPos</a>().x();</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;            qreal x2;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;            <a class="code" href="classMs_1_1Fraction.html">Fraction</a> t2;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;            <a class="code" href="classMs_1_1Segment.html">Segment</a>* ns = s-&gt;<a class="code" href="classMs_1_1Segment.html#a1c4c00c6b1052c6c122f5fc665ec8a20">next</a>(<a class="code" href="namespaceMs.html#a24593d5bc01ac95fdbec3d354d258894a7884fad7b22d960efd4e9d84e61e7fe0">SegmentType::ChordRest</a>);</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;            <span class="keywordflow">if</span> (ns) {</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                  t2 = ns-&gt;<a class="code" href="classMs_1_1Segment.html#a23cde3c97359266e2787b107aa0c8cdf">tick</a>();</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                  x2 = ns-&gt;<a class="code" href="classMs_1_1Element.html#aafc617f0cd5069a406a83da394b15e53">canvasPos</a>().x();</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                  }</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;                  t2 = measure-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a6e80c952d019b265c81945b98c91fed2">endTick</a>();</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                  x2 = measure-&gt;<a class="code" href="classMs_1_1Element.html#aafc617f0cd5069a406a83da394b15e53">canvasPos</a>().x() + measure-&gt;<a class="code" href="classMs_1_1Element.html#abd781d11186d1951028a0efaf6d5cf5a">width</a>();</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;                  }</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;            <span class="keywordflow">if</span> (tick &gt;= t1 &amp;&amp; tick &lt; t2) {</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                  <a class="code" href="classMs_1_1Fraction.html">Fraction</a>   dt = t2 - t1;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                  qreal dx = x2 - x1;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                  x = x1 + dx * (tick.<a class="code" href="classMs_1_1Fraction.html#a1d92a73ce7f9b7f895a9a083f6fe1eb2">ticks</a>() - t1.ticks()) / dt.<a class="code" href="classMs_1_1Fraction.html#a1d92a73ce7f9b7f895a9a083f6fe1eb2">ticks</a>();</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                  }</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;            s = ns;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;            }</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;      <span class="keywordflow">if</span> (s == 0)</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;      <a class="code" href="classMs_1_1System.html">System</a>* system = measure-&gt;<a class="code" href="classMs_1_1Measure.html#a9c4de13b592b3e0cc6a2398641da99ed">system</a>();</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;      <span class="keywordflow">if</span> (system == 0)</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;      <span class="keywordtype">double</span> y        = system-&gt;<a class="code" href="classMs_1_1System.html#ad93df8d8b2f2fb6d8d88c1d4b590156c">staffYpage</a>(0) + system-&gt;<a class="code" href="classMs_1_1System.html#a57af65dafb20c1282ea78ba3d74725a0">page</a>()-&gt;<a class="code" href="classMs_1_1Element.html#a19157e811d0d2a0e3c94dc844039ba2f">pos</a>().y();</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;      <span class="keywordtype">double</span> _spatium = score()-&gt;spatium();</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;      qreal mag = _spatium / <a class="code" href="namespaceMs.html#ace3977c7351a3c80613f191da242afdd">SPATIUM20</a>;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      <span class="keywordtype">double</span> w  = (_spatium * 2.0 + score()-&gt;scoreFont()-&gt;width(<a class="code" href="namespaceMs.html#a602ef082ffbbe2c4b11e2375cc4aa794aeab244836adffdeef9573f36a3baba75">SymId::noteheadBlack</a>, mag))/3;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;      <span class="keywordtype">double</span> h  = 6 * _spatium;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      <span class="comment">// set cursor height for whole system</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;      <span class="keywordtype">double</span> y2 = 0.0;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; _score-&gt;nstaves(); ++i) {</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;            <a class="code" href="classMs_1_1SysStaff.html">SysStaff</a>* ss = system-&gt;<a class="code" href="classMs_1_1System.html#a51fa420463d9aadfbdc0839fb781ff1e">staff</a>(i);</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;            <span class="keywordflow">if</span> (!ss-&gt;<a class="code" href="classMs_1_1SysStaff.html#a15edb8450b4cbf7ec4c20591804def65">show</a>() || !_score-&gt;staff(i)-&gt;show())</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                  <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;            y2 = ss-&gt;<a class="code" href="classMs_1_1SysStaff.html#aee9868a0f2bc566af571f4fd377d6741">y</a>() + ss-&gt;<a class="code" href="classMs_1_1SysStaff.html#aa79ca5523125cce73baf2b3783d0dd32">bbox</a>().height();</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;            }</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;      h += y2;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      y -= 3 * _spatium;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;      <span class="keywordflow">if</span> (isInPos) {</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;            x = x - _spatium + w/1.5;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;            }</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;            x = x - _spatium;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;            }</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;      curLoop-&gt;<a class="code" href="classMs_1_1PositionCursor.html#ae3dde691712094ad15e7beccb095af7e">setTick</a>(tick);</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;      update(_matrix.mapRect(curLoop-&gt;<a class="code" href="classMs_1_1PositionCursor.html#ab7f81e6223cfe87fe008ec360d5603c2">rect</a>()).toRect().adjusted(-1,-1,1,1));</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;      curLoop-&gt;<a class="code" href="classMs_1_1PositionCursor.html#a0fccaeb4e241b41a837fada745bd40fd">setRect</a>(QRectF(x, y, w, h));</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;      update(_matrix.mapRect(curLoop-&gt;<a class="code" href="classMs_1_1PositionCursor.html#ab7f81e6223cfe87fe008ec360d5603c2">rect</a>()).toRect().adjusted(-1,-1,1,1));</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;      }</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="comment">//   setShadowNote</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;</div><div class="line"><a name="l01005"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a415252f9c604e83c35677a00769cd1a8"> 1005</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a415252f9c604e83c35677a00769cd1a8">ScoreView::setShadowNote</a>(<span class="keyword">const</span> QPointF&amp; p)</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;      {</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;      <span class="keyword">const</span> <a class="code" href="classMs_1_1InputState.html">InputState</a>&amp; is = _score-&gt;inputState();</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;      <a class="code" href="structMs_1_1Position.html">Position</a> pos;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;      <span class="keywordflow">if</span> (!score()-&gt;getPosition(&amp;pos, p, is.<a class="code" href="classMs_1_1InputState.html#add56e365ff1a6963bc5ddb90d5c9909b">voice</a>())) {</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;            shadowNote-&gt;setVisible(<span class="keyword">false</span>);</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;            }</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;      <span class="comment">// in any empty measure, pos will be right next to barline</span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;      <span class="comment">// so pad this by barNoteDistance</span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;      qreal mag     = score()-&gt;staff(pos.<a class="code" href="structMs_1_1Position.html#a2feea1eb55245f72eebc4701d474e66f">staffIdx</a>)-&gt;mag(<a class="code" href="classMs_1_1Fraction.html">Fraction</a>(0,1));</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      qreal relX    = pos.<a class="code" href="structMs_1_1Position.html#a4a5bb90e03f7ee0950a4303af8dc12c2">pos</a>.x() - pos.<a class="code" href="structMs_1_1Position.html#a1e2a764aa7f3f0d219b06415f5abc93d">segment</a>-&gt;<a class="code" href="classMs_1_1Segment.html#a44dc6d5b22a75152673060bc059acfb9">measure</a>()-&gt;<a class="code" href="classMs_1_1Element.html#aafc617f0cd5069a406a83da394b15e53">canvasPos</a>().x();</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;      pos.<a class="code" href="structMs_1_1Position.html#a4a5bb90e03f7ee0950a4303af8dc12c2">pos</a>.rx() -= qMin(relX - score()-&gt;styleP(<a class="code" href="namespaceMs.html#a2bac757437d1a9e364db27de8f9c9e2ea7c5d39d9b58f23d6f42e27eb20d55ec1">Sid::barNoteDistance</a>) * mag, 0.0);</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;      shadowNote-&gt;setVisible(<span class="keyword">true</span>);</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;      <a class="code" href="classMs_1_1Staff.html">Staff</a>* staff = score()-&gt;staff(pos.<a class="code" href="structMs_1_1Position.html#a2feea1eb55245f72eebc4701d474e66f">staffIdx</a>);</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      shadowNote-&gt;setMag(staff-&gt;<a class="code" href="classMs_1_1Staff.html#a80aa5db67223dff29e9113f23865b62b">mag</a>(<a class="code" href="classMs_1_1Fraction.html">Fraction</a>(0,1)));</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;      <span class="keyword">const</span> <a class="code" href="classMs_1_1Instrument.html">Instrument</a>* instr       = staff-&gt;<a class="code" href="classMs_1_1Staff.html#ae31dc0de799c1e206af979e65bf837ab">part</a>()-&gt;<a class="code" href="classMs_1_1Part.html#a6cae82662abe64d683dff09b3c7874f8">instrument</a>(shadowNote-&gt;tick()); <span class="comment">// or pos.segment-&gt;tick()</span></div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;      <a class="code" href="classMs_1_1NoteHead.html#a1d3e8faf3d3bc1d89d9d3485acde69d1">NoteHead::Group</a> noteheadGroup = <a class="code" href="classMs_1_1NoteHead.html#a1d3e8faf3d3bc1d89d9d3485acde69d1a6a94b8d56da1b6f881b076e10170e9a2">NoteHead::Group::HEAD_NORMAL</a>;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;      <span class="keywordtype">int</span> line                      = pos.<a class="code" href="structMs_1_1Position.html#abbe729294840d35520143a7ebfebfbf7">line</a>;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;      <a class="code" href="classMs_1_1NoteHead.html#a31c343e7e7f09fee0246ef6a1d7a4e87">NoteHead::Type</a> noteHead       = is.<a class="code" href="classMs_1_1InputState.html#ad23b3283d9647903d82a42461989506e">duration</a>().<a class="code" href="classMs_1_1TDuration.html#aab1a411cf428fcc4244950a88b03ab95">headType</a>();</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;      <span class="keywordflow">if</span> (instr-&gt;<a class="code" href="classMs_1_1Instrument.html#a1632d4bf3af6b96e024ae13be290099d">useDrumset</a>()) {</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;            <span class="keyword">const</span> <a class="code" href="classMs_1_1Drumset.html">Drumset</a>* ds  = instr-&gt;<a class="code" href="classMs_1_1Instrument.html#ac377dcee9176d06151474454b0f3c265">drumset</a>();</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;            <span class="keywordtype">int</span> pitch    = is.<a class="code" href="classMs_1_1InputState.html#a055ef7159a7af443a067a3e067a69a79">drumNote</a>();</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;            <span class="keywordflow">if</span> (pitch &gt;= 0 &amp;&amp; ds-&gt;<a class="code" href="classMs_1_1Drumset.html#a0c116c7a1faa14e7d3f5b583561f5245">isValid</a>(pitch)) {</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                  line     = ds-&gt;<a class="code" href="classMs_1_1Drumset.html#a19e7739fa57e35a79928fa58766d9c5a">line</a>(pitch);</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;                  noteheadGroup = ds-&gt;<a class="code" href="classMs_1_1Drumset.html#a57e943db32934a5f5b85f56d6cc5dc47">noteHead</a>(pitch);</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                  }</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;            }</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;      shadowNote-&gt;setLine(line);</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;      <span class="keywordtype">int</span> voice;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;      <span class="keywordflow">if</span> (is.<a class="code" href="classMs_1_1InputState.html#a055ef7159a7af443a067a3e067a69a79">drumNote</a>() != -1 &amp;&amp; is.<a class="code" href="classMs_1_1InputState.html#a325cb15dabdc8d28471d820cc28c39bd">drumset</a>() &amp;&amp; is.<a class="code" href="classMs_1_1InputState.html#a325cb15dabdc8d28471d820cc28c39bd">drumset</a>()-&gt;<a class="code" href="classMs_1_1Drumset.html#a0c116c7a1faa14e7d3f5b583561f5245">isValid</a>(is.<a class="code" href="classMs_1_1InputState.html#a055ef7159a7af443a067a3e067a69a79">drumNote</a>()))</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;            voice = is.<a class="code" href="classMs_1_1InputState.html#a325cb15dabdc8d28471d820cc28c39bd">drumset</a>()-&gt;<a class="code" href="classMs_1_1Drumset.html#a86efad5c5a2ed1b101524bed56206348">voice</a>(is.<a class="code" href="classMs_1_1InputState.html#a055ef7159a7af443a067a3e067a69a79">drumNote</a>());</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;            voice = is.<a class="code" href="classMs_1_1InputState.html#add56e365ff1a6963bc5ddb90d5c9909b">voice</a>();</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;      <a class="code" href="namespaceMs.html#a602ef082ffbbe2c4b11e2375cc4aa794">SymId</a> symNotehead;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      <a class="code" href="classMs_1_1TDuration.html">TDuration</a> d(is.<a class="code" href="classMs_1_1InputState.html#ad23b3283d9647903d82a42461989506e">duration</a>());</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;      <span class="keywordflow">if</span> (is.<a class="code" href="classMs_1_1InputState.html#ae4835eeb13675b160c460db38f326a86">rest</a>()) {</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;            <span class="keywordtype">int</span> yo;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;            <a class="code" href="classMs_1_1Rest.html">Rest</a> rest(<a class="code" href="namespaceMs.html#aba2aa505eb62a6a5600a3e55f0cc11eb">gscore</a>, d.<a class="code" href="classMs_1_1Score.html#acff6952d015f5f2928c5c1e0050abc86">type</a>());</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;            rest.<a class="code" href="classMs_1_1DurationElement.html#ab46be26ba621ac65774af1ad7bb07cd7">setTicks</a>(d.fraction());</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;            symNotehead = rest.getSymbol(is.<a class="code" href="classMs_1_1InputState.html#ad23b3283d9647903d82a42461989506e">duration</a>().<a class="code" href="classMs_1_1TDuration.html#a123168fe235332a63c716e041fc3ddd5">type</a>(), 0, staff-&gt;<a class="code" href="classMs_1_1Staff.html#a1a4d5789b71d29fd2e7c05311638aa7b">lines</a>(pos.<a class="code" href="structMs_1_1Position.html#a1e2a764aa7f3f0d219b06415f5abc93d">segment</a>-&gt;<a class="code" href="classMs_1_1Segment.html#a23cde3c97359266e2787b107aa0c8cdf">tick</a>()), &amp;yo);</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;            shadowNote-&gt;setState(symNotehead, voice, d, <span class="keyword">true</span>);</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;            }</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classMs_1_1NoteHead.html#a1d3e8faf3d3bc1d89d9d3485acde69d1ae539be55377c7c48043e1c5875d3e448">NoteHead::Group::HEAD_CUSTOM</a> == noteheadGroup)</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                  symNotehead = instr-&gt;<a class="code" href="classMs_1_1Instrument.html#ac377dcee9176d06151474454b0f3c265">drumset</a>()-&gt;<a class="code" href="classMs_1_1Drumset.html#aeb1d9b027161ed4f4c08f5c2abd2a642">noteHeads</a>(is.<a class="code" href="classMs_1_1InputState.html#a055ef7159a7af443a067a3e067a69a79">drumNote</a>(), noteHead);</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                  symNotehead = <a class="code" href="classMs_1_1Note.html#a4d3ebffc692e780226d816e6ce212582">Note::noteHead</a>(0, noteheadGroup, noteHead);</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;            shadowNote-&gt;setState(symNotehead, voice, d);</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;            }</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;      shadowNote-&gt;layout();</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;      shadowNote-&gt;setPos(pos.<a class="code" href="structMs_1_1Position.html#a4a5bb90e03f7ee0950a4303af8dc12c2">pos</a>);</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      }</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="comment">//   drawAnchorLines</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01070"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#ac7a887cb6391a0e5c655ef59718188ad"> 1070</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#ac7a887cb6391a0e5c655ef59718188ad">ScoreView::drawAnchorLines</a>(QPainter&amp; painter)</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      {</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;      <span class="keywordflow">if</span> (m_dropAnchorLines.isEmpty())</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> dropAnchorColor = <a class="code" href="namespaceMs.html#abe8f8da5976e3a727f1a3a7a117e73de">preferences</a>.<a class="code" href="structMs_1_1Preferences.html#a2663c94f483c146a45a34e9d2deb11d5">getColor</a>(PREF_UI_SCORE_VOICE4_COLOR);</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      QPen pen(QBrush(dropAnchorColor), 2.0 / painter.worldTransform().m11(), Qt::DotLine);</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> QLineF&amp; anchor : m_dropAnchorLines) {</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;            painter.setPen(pen);</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;            painter.drawLine(anchor);</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;            qreal d = 4.0 / painter.worldTransform().m11();</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;            QRectF rect(-d, -d, 2 * d, 2 * d);</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;            painter.setBrush(QBrush(dropAnchorColor));</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;            painter.setPen(Qt::NoPen);</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;            rect.moveCenter(anchor.p1());</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;            painter.drawEllipse(rect);</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;            rect.moveCenter(anchor.p2());</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;            painter.drawEllipse(rect);</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;            }</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      }</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;<span class="comment">//   paintEvent</span></div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;<span class="comment">//    Note: desktop background and paper background are not</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="comment">//    scaled</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01099"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a65d942be9aa38e46f0b9b7b5ff866b8f"> 1099</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a65d942be9aa38e46f0b9b7b5ff866b8f">ScoreView::paintEvent</a>(QPaintEvent* ev)</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;      {</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;      <span class="keywordflow">if</span> (!_score)</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;      QPainter vp(<span class="keyword">this</span>);</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;      vp.setRenderHint(QPainter::Antialiasing, <a class="code" href="namespaceMs.html#abe8f8da5976e3a727f1a3a7a117e73de">preferences</a>.<a class="code" href="structMs_1_1Preferences.html#a39e1e4d3d337de7dcafb14fd8c75c4a2">getBool</a>(PREF_UI_CANVAS_MISC_ANTIALIASEDDRAWING));</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;      vp.setRenderHint(QPainter::TextAntialiasing, <span class="keyword">true</span>);</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;      paint(ev-&gt;rect(), vp);</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      vp.setTransform(_matrix);</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      vp.setClipping(<span class="keyword">false</span>);</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;      _curLoopIn-&gt;paint(&amp;vp);</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;      _curLoopOut-&gt;paint(&amp;vp);</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;      _cursor-&gt;paint(&amp;vp);</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      <span class="keywordflow">if</span> (_score-&gt;layoutMode() == <a class="code" href="namespaceMs.html#a9b1fb02f916c554309371c6513550a1ba17b8ef2c330f1430e00c9de5469fc7e7">LayoutMode::LINE</a>)</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;            _controlCursor-&gt;paint(&amp;vp);</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;      <span class="keywordflow">if</span> (_score-&gt;layoutMode() == <a class="code" href="namespaceMs.html#a9b1fb02f916c554309371c6513550a1ba17b8ef2c330f1430e00c9de5469fc7e7">LayoutMode::LINE</a>)</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;            _continuousPanel-&gt;paint(ev-&gt;rect(), vp);</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;      <span class="keywordflow">if</span> (!lasso-&gt;bbox().isEmpty())</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;            lasso-&gt;draw(&amp;vp);</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;      shadowNote-&gt;draw(&amp;vp);</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;      drawAnchorLines(vp);</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;      }</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;<span class="comment">//   drawBackground</span></div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div><div class="line"><a name="l01132"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a757d2f7ee4f208f5b583ecf0348d506e"> 1132</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a757d2f7ee4f208f5b583ecf0348d506e">ScoreView::drawBackground</a>(QPainter* p, <span class="keyword">const</span> QRectF&amp; r)<span class="keyword"> const</span></div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="keyword">      </span>{</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;      <span class="keywordflow">if</span> (score()-&gt;printing()) {</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;            p-&gt;fillRect(r, Qt::white);</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;            }</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;      <span class="keywordflow">if</span> (_fgPixmap == 0 || _fgPixmap-&gt;isNull())</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;            p-&gt;fillRect(r, _fgColor);</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;            p-&gt;drawTiledPixmap(r, *_fgPixmap, r.topLeft()</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;               - QPoint(lrint(_matrix.dx()), lrint(_matrix.dy())));</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;            }</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;      }</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="comment">//   paintPageBorder</span></div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;</div><div class="line"><a name="l01150"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#aa53149346a651dce3f4678a9f7014f1f"> 1150</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#aa53149346a651dce3f4678a9f7014f1f">ScoreView::paintPageBorder</a>(QPainter&amp; p, <a class="code" href="classMs_1_1Page.html">Page</a>* page)</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;      {</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;      <span class="comment">//add a black border to pages</span></div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;      QRectF r(page-&gt;<a class="code" href="classMs_1_1Element.html#a6ca9221d8858907d3063fa58255fb804">canvasBoundingRect</a>());</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;      p.setBrush(Qt::NoBrush);</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      p.setPen(QPen(QColor(0,0,0,102), 1));</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;      p.drawRect(r);</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;      <span class="keywordflow">if</span> (_score-&gt;showPageborders()) {</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;            <span class="comment">// show page margins</span></div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;            p.setBrush(Qt::NoBrush);</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;            p.setPen(<a class="code" href="classMs_1_1MScore.html#ab56667808f0d632f2f7d6bfd1093e1f0">MScore::frameMarginColor</a>);</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;            QRectF f(page-&gt;<a class="code" href="classMs_1_1Element.html#a6ca9221d8858907d3063fa58255fb804">canvasBoundingRect</a>());</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;            f.adjust(page-&gt;<a class="code" href="classMs_1_1Page.html#acf51ebcba73d3f26a68a185565506ef9">lm</a>(), page-&gt;<a class="code" href="classMs_1_1Page.html#a27cbb69c1c1cdbe3f3a51f00283f465b">tm</a>(), -page-&gt;<a class="code" href="classMs_1_1Page.html#a4b37a2729b8043dea781641919ed4209">rm</a>(), -page-&gt;<a class="code" href="classMs_1_1Page.html#a7e188c4049e98cb251340317bedeb1c0">bm</a>());</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;            p.drawRect(f);</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;            <span class="keywordflow">if</span> (!page-&gt;<a class="code" href="classMs_1_1Page.html#a347bfa761f54d2d45e5890ffb9c369c9">isOdd</a>())</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                  p.drawLine(f.right(), 0.0, f.right(), f.bottom());</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;            }</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;      }</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;<span class="comment">//   drawDebugInfo</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;</div><div class="line"><a name="l01175"></a><span class="lineno"><a class="line" href="namespaceMs.html#a95ff6e2d794ab20e2a960e79f2d1637a"> 1175</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="namespaceMs.html#a95ff6e2d794ab20e2a960e79f2d1637a">drawDebugInfo</a>(QPainter&amp; p, <span class="keyword">const</span> <a class="code" href="classMs_1_1Element.html">Element</a>* _e)</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;      {</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classMs_1_1MScore.html#a0b36375e5c943b4dca91624f0cdd4c63">MScore::showBoundingRect</a>)</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;      <span class="keyword">const</span> <a class="code" href="classMs_1_1Element.html">Element</a>* e = _e;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;      <span class="comment">//  draw bounding box rectangle for all</span></div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;      <span class="comment">//  selected Elements</span></div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;      QPointF pos(e-&gt;<a class="code" href="classMs_1_1Element.html#a06cc027fe14db0cf896f02931356ae24">pagePos</a>());</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;      p.translate(pos);</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;      p.setBrush(Qt::NoBrush);</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;      p.setPen(QPen(Qt::red, 0.0));</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;<span class="comment">//      p.drawRect(e-&gt;bbox());</span></div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;      e-&gt;<a class="code" href="classMs_1_1Element.html#ad46a1fa8985b3d3897101b295a7a5d3e">shape</a>().<a class="code" href="classMs_1_1Shape.html#af605f5193bfe217ac0305a749fade8ff">paint</a>(p);</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;      p.setPen(QPen(Qt::red, 0.0));             <span class="comment">// red x at 0,0 of bbox</span></div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;      qreal w = 5.0 / p.worldTransform().toAffine().m11();</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;      qreal h = w;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;      qreal x = 0; <span class="comment">// e-&gt;bbox().x();</span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;      qreal y = 0; <span class="comment">// e-&gt;bbox().y();</span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;      p.drawLine(QLineF(x-w, y-h, x+w, y+h));</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      p.drawLine(QLineF(x+w, y-h, x-w, y+h));</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;      p.translate(-pos);</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;      <span class="keywordflow">if</span> (e-&gt;<a class="code" href="classMs_1_1Element.html#a52b30fdd589beba5b760a561a50ac601">parent</a>()) {</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;            <span class="keyword">const</span> <a class="code" href="classMs_1_1Element.html">Element</a>* ee = e-&gt;<a class="code" href="classMs_1_1Element.html#a52b30fdd589beba5b760a561a50ac601">parent</a>();</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;            <span class="keywordflow">if</span> (e-&gt;isNote())</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;                  ee = toNote(e)-&gt;chord()-&gt;segment();</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (e-&gt;isClef())</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;                  ee = toClef(e)-&gt;segment();</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;            p.setPen(QPen(Qt::green, 0.0));</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;            p.drawRect(ee-&gt;<a class="code" href="classMs_1_1Element.html#a97c6426acf5bd7303aef532c1d95f105">pageBoundingRect</a>());</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;            <span class="keywordflow">if</span> (ee-&gt;isSegment()) {</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;                  QPointF pt = ee-&gt;<a class="code" href="classMs_1_1Element.html#a06cc027fe14db0cf896f02931356ae24">pagePos</a>();</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;                  p.setPen(QPen(Qt::blue, 0.0));</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;                  p.drawLine(QLineF(pt.x()-w, pt.y()-h, pt.x()+w, pt.y()+h));</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;                  p.drawLine(QLineF(pt.x()+w, pt.y()-h, pt.x()-w, pt.y()+h));</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;                  }</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;            }</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;      }</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;<span class="comment">//   drawElements</span></div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;</div><div class="line"><a name="l01226"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a31bc492bacedfeeff81c8fbcc85b2858"> 1226</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a31bc492bacedfeeff81c8fbcc85b2858">ScoreView::drawElements</a>(QPainter&amp; painter, QList&lt;Element*&gt;&amp; el, <a class="code" href="classMs_1_1Element.html">Element</a>* editElement)</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;      {</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;      std::stable_sort(el.begin(), el.end(), <a class="code" href="namespaceMs.html#a043567da093e3157ef81be2d3d641bb2">elementLessThan</a>);</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classMs_1_1Element.html">Element</a>* e : el) {</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;            e-&gt;itemDiscovered = 0;</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;            <span class="comment">// harmony element representation is different in edit mode, so don&#39;t</span></div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;            <span class="comment">// all normal draw(). Complete drawing is done in drawEditMode()</span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;            <span class="keywordflow">if</span> (e == editElement)</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;                  <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;            <span class="keywordflow">if</span> (!e-&gt;visible() &amp;&amp; (score()-&gt;printing() || !score()-&gt;showInvisible()))</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                  <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;            <span class="keywordflow">if</span> (e-&gt;isRest() &amp;&amp; <a class="code" href="namespaceMs.html#aa7be8d92b4d54a840e62a3cd6dcfb08c">toRest</a>(e)-&gt;<a class="code" href="classMs_1_1Rest.html#ac3e5421836f4d0788e1b0abb44d860b1">isGap</a>())</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;                  <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;            QPointF pos(e-&gt;pagePos());</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;            painter.translate(pos);</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;            e-&gt;draw(&amp;painter);</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;            painter.translate(-pos);</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;            <span class="keywordflow">if</span> (e-&gt;selected())</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;                  <a class="code" href="namespaceMs.html#a95ff6e2d794ab20e2a960e79f2d1637a">drawDebugInfo</a>(painter, e);</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;            }</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;      }</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;<span class="comment">//   paint</span></div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;</div><div class="line"><a name="l01256"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#ad093fd9fad60eee8871821da28964f1a"> 1256</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#ad093fd9fad60eee8871821da28964f1a">ScoreView::paint</a>(<span class="keyword">const</span> QRect&amp; r, QPainter&amp; p)</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;      {</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;      p.save();</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;      <span class="keywordflow">if</span> (_fgPixmap == 0 || _fgPixmap-&gt;isNull())</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;            p.fillRect(r, _fgColor);</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;            p.drawTiledPixmap(r, *_fgPixmap, r.topLeft()</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;               - QPoint(lrint(_matrix.dx()), lrint(_matrix.dy())));</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;            }</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;      p.setTransform(_matrix);</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;      QRectF fr = imatrix.mapRect(QRectF(r));</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;      <a class="code" href="classMs_1_1Element.html">Element</a>* editElement = 0;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;      <a class="code" href="classMs_1_1Lasso.html">Lasso</a>* lassoToDraw = 0;</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;      <span class="keywordflow">if</span> (editData.element) {</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;            <span class="keywordflow">switch</span> (state) {</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;                  <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a1e23852820b9154316c7c06e2b7ba051">ViewState::NORMAL</a>:</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;                        <span class="keywordflow">if</span> (editData.element-&gt;normalModeEditBehavior() == <a class="code" href="classMs_1_1Element.html#a81f2c9509ccf414e30594abf843cbde2a7dce122004969d56ae2e0245cb754d35">Element::EditBehavior::Edit</a>)</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                              editData.element-&gt;drawEditMode(&amp;p, editData);</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;                  <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a1aa5dd7502c1d6ba1ca37f5bfd14fda6aff3480bb59f4249a9453a0caaa1b2236">ViewState::DRAG</a>:</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;                  <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a7783e8aebb6f509bcfe7b235b73cc39a">ViewState::DRAG_OBJECT</a>:</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                  <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea557e208074023b45441fc1604d6bf81d">ViewState::LASSO</a>:</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;                  <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a6dff4f0bcb369949446e0f3400db6d5c">ViewState::NOTE_ENTRY</a>:</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;                  <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#aa0f871cf8181cec31d68d20a39010655a6a216efc529825c60a4a4c0bc99ad77f">ViewState::PLAY</a>:</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;                  <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a6c97b3d6c91135b3a99f073595d20e5d">ViewState::ENTRY_PLAY</a>:</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;                  <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a93762d802eed04b3e1c59d1d46b35248">ViewState::EDIT</a>:</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;                  <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1ad4b1df12331eb50f79373b3e2bd284ce">ViewState::DRAG_EDIT</a>:</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;                  <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a8844bb893d3b16fa3365a5cfcde4edca">ViewState::FOTO</a>:</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;                  <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a6868244d4b7f8fc007f2cd5c7aa425df">ViewState::FOTO_DRAG</a>:</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;                  <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1aa1916b5141306345cf93539af6fcee5a">ViewState::FOTO_DRAG_EDIT</a>:</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;                  <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a03d31fd5672e63a74217a95dce360596">ViewState::FOTO_DRAG_OBJECT</a>:</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                  <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a64b23c0b6154207e74e72976b7367845">ViewState::FOTO_LASSO</a>:</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                        <span class="keywordflow">if</span> (editData.element-&gt;isLasso())</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;                              lassoToDraw = toLasso(editData.element);</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;                        <span class="keywordflow">else</span></div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;                              editData.element-&gt;<a class="code" href="classMs_1_1Element.html#aeacd589786e73e54e81ba2cc9a812126">drawEditMode</a>(&amp;p, editData);</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;                        <span class="keywordflow">if</span> (editData.element-&gt;isHarmony())</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;                              editElement = editData.element;     <span class="comment">// do not call paint() method</span></div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;                  }</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;            }</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;      <span class="comment">// AvsOmr -----</span></div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;<span class="preprocessor">#ifdef AVSOMR</span></div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;      <a class="code" href="classMs_1_1Avs_1_1AvsOmrDrawer.html">Avs::AvsOmrDrawer</a> omrDrawer;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;      std::shared_ptr&lt;Avs::AvsOmrDrawer::Context&gt; omrDrawCtx = omrDrawer.<a class="code" href="classMs_1_1Avs_1_1AvsOmrDrawer.html#afe0bcf50dbfafde66b3c7ffde708461e">makeContext</a>(&amp;p, _score);</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      <span class="keyword">auto</span> pageMeasures = [](<a class="code" href="classMs_1_1Page.html">Page</a>* page) -&gt; QList&lt;const Measure*&gt; {</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;            QList&lt;const Measure*&gt; ml;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classMs_1_1System.html">System</a>* s : page-&gt;systems()) {</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;                  <span class="keyword">const</span> std::vector&lt;MeasureBase*&gt;&amp; measures = s-&gt;measures();</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;                  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classMs_1_1MeasureBase.html">MeasureBase</a>* mb : measures) {</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;                        <span class="keywordflow">if</span> (mb-&gt;isMeasure())</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;                              ml &lt;&lt; toMeasure(mb);</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;                        }</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;                  }</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;            <span class="keywordflow">return</span> ml;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;            };</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      <span class="comment">// ------------</span></div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;      QRegion r1(r);</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;      <span class="keywordflow">if</span> ((_score-&gt;layoutMode() == <a class="code" href="namespaceMs.html#a9b1fb02f916c554309371c6513550a1ba17b8ef2c330f1430e00c9de5469fc7e7">LayoutMode::LINE</a>) || (_score-&gt;layoutMode() == <a class="code" href="namespaceMs.html#a9b1fb02f916c554309371c6513550a1bafa177138f94a7ea01f549b1aa7893d03">LayoutMode::SYSTEM</a>)) {</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;            <span class="keywordflow">if</span> (_score-&gt;pages().size() &gt; 0) {</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;                  <a class="code" href="classMs_1_1Page.html">Page</a>* page = _score-&gt;pages().front();</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;                  QList&lt;Element*&gt; ell = page-&gt;<a class="code" href="classMs_1_1Page.html#a531a2daae4ad65988a04ae199ebdf179">items</a>(fr);</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;                  <span class="comment">// AvsOmr -----</span></div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;<span class="preprocessor">#ifdef AVSOMR</span></div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;                  <span class="keywordflow">if</span> (omrDrawCtx) {</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;                        QList&lt;const Measure*&gt; ml = pageMeasures(page);</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;                        omrDrawer.<a class="code" href="classMs_1_1Avs_1_1AvsOmrDrawer.html#a675a223fc96976c7e7a8be55642d7f38">draw</a>(omrDrawCtx, ml);</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;                        }</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;                  <span class="comment">// ------------</span></div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;                  drawElements(p, ell, editElement);</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;                  }</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;            }</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1Page.html">Page</a>* page : _score-&gt;pages()) {</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;                  QRectF pr(page-&gt;abbox().translated(page-&gt;pos()));</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;                  <span class="keywordflow">if</span> (pr.right() &lt; fr.left())</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;                        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;                  <span class="keywordflow">if</span> (pr.left() &gt; fr.right())</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;                  <span class="keywordflow">if</span> (!score()-&gt;printing())</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;                        paintPageBorder(p, page);</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;                  QList&lt;Element*&gt; ell = page-&gt;items(fr.translated(-page-&gt;pos()));</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;                  QPointF pos(page-&gt;pos());</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;                  p.translate(pos);</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;                  <span class="comment">// AvsOmr -----</span></div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;<span class="preprocessor">#ifdef AVSOMR</span></div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;                  <span class="keywordflow">if</span> (omrDrawCtx) {</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;                        QList&lt;const Measure*&gt; ml = pageMeasures(page);</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;                        omrDrawer.<a class="code" href="classMs_1_1Avs_1_1AvsOmrDrawer.html#a675a223fc96976c7e7a8be55642d7f38">draw</a>(omrDrawCtx, ml);</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;                        }</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;                  <span class="comment">// ------------</span></div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;                  drawElements(p, ell, editElement);</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;                  <span class="keywordflow">if</span> (!score()-&gt;printing()) {</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="classMs_1_1MScore.html#adeb6788e9d1fa98ce1e3ebfeb686a72d">MScore::showSystemBoundingRect</a>) {</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;                              <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classMs_1_1System.html">System</a>* system : page-&gt;systems()) {</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;                                    QPointF pt(system-&gt;ipos());</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;                                    qreal h = system-&gt;height() + system-&gt;minBottom() + system-&gt;minTop();</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;                                    p.translate(pt);</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;                                    QRectF rect(0.0, -system-&gt;minTop(), system-&gt;width(), h);</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;                                    p.drawRect(rect);</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;                                    p.translate(-pt);</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;                                    }</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;                              }</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="classMs_1_1MScore.html#a0a2c87368a022590120e2e25848d4320">MScore::showSegmentShapes</a>) {</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;                              <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classMs_1_1System.html">System</a>* system : page-&gt;systems()) {</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;                                    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classMs_1_1MeasureBase.html">MeasureBase</a>* mb : system-&gt;measures()) {</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;                                          <span class="keywordflow">if</span> (mb-&gt;type() == <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea84e4213ee54478574ea15a166ea10152">ElementType::MEASURE</a>) {</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;                                                <span class="keyword">const</span> <a class="code" href="classMs_1_1Measure.html">Measure</a>* m = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classMs_1_1Measure.html">Measure</a>*<span class="keyword">&gt;</span>(mb);</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;                                                p.setBrush(Qt::NoBrush);</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;                                                p.setPen(QPen(QBrush(Qt::darkYellow), 0.5));</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;                                                <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classMs_1_1Segment.html">Segment</a>* s = m-&gt;<a class="code" href="classMs_1_1Measure.html#a3c5e55d2f2291d5ee433a093c0b1dd04">first</a>(); s; s = s-&gt;<a class="code" href="classMs_1_1Segment.html#a1c4c00c6b1052c6c122f5fc665ec8a20">next</a>()) {</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;                                                      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; score()-&gt;nstaves(); ++i) {</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;                                                            QPointF pt(s-&gt;pos().x() + m-&gt;<a class="code" href="classMs_1_1Element.html#a19157e811d0d2a0e3c94dc844039ba2f">pos</a>().x() + system-&gt;pos().x(),</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;                                                               system-&gt;staffYpage(i));</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;                                                            p.translate(pt);</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;                                                            s-&gt;shapes().at(i).paint(p);</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;                                                            p.translate(-pt);</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;                                                            }</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;                                                      }</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;                                                }</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;                                          }</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;                                    }</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;                              }</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="classMs_1_1MScore.html#ae096be4858e62f8e63814d0f364b9180">MScore::showSkylines</a>) {</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;                              <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classMs_1_1System.html">System</a>* system : page-&gt;systems()) {</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;                                    <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1SysStaff.html">SysStaff</a>* ss : *system-&gt;staves()) {</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;                                          <span class="keywordflow">if</span> (!ss-&gt;show())</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;                                                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;                                          QPointF pt(system-&gt;ipos().x(), system-&gt;ipos().y() + ss-&gt;y());</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;                                          p.translate(pt);</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;                                          ss-&gt;skyline().paint(p);</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;                                          p.translate(-pt);</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;                                          }</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;                                    }</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;                              }</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="classMs_1_1MScore.html#a6dad4596647775c77a597679fb98cb45">MScore::showCorruptedMeasures</a>) {</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;                              <span class="keywordtype">double</span> _spatium = score()-&gt;<a class="code" href="classMs_1_1Element.html#a9f375d79304c4cec5b45ea883c9efc86">spatium</a>();</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;                              QPen pen;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;                              pen.setColor(Qt::red);</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;                              pen.setWidthF(4);</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;                              pen.setStyle(Qt::SolidLine);</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;                              p.setPen(pen);</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;                              p.setBrush(Qt::NoBrush);</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;                              <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classMs_1_1System.html">System</a>* system : page-&gt;systems()) {</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;                                    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classMs_1_1MeasureBase.html">MeasureBase</a>* mb : system-&gt;measures()) {</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;                                          <span class="keywordflow">if</span> (mb-&gt;type() == <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea84e4213ee54478574ea15a166ea10152">ElementType::MEASURE</a>) {</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;                                                <span class="keyword">const</span> <a class="code" href="classMs_1_1Measure.html">Measure</a>* m = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classMs_1_1Measure.html">Measure</a>*<span class="keyword">&gt;</span>(mb);</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;                                                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> staffIdx = 0; staffIdx &lt; m-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a70883d048b0884821ac779d9ab168151">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#ab39888225a9fe0533558a379b1545cb1">nstaves</a>(); staffIdx++) {</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;                                                      <span class="keywordflow">if</span> (m-&gt;<a class="code" href="classMs_1_1Measure.html#a05f61e821fcc878e4442039f8170ac74">corrupted</a>(staffIdx)) {</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;                                                            p.drawRect(m-&gt;<a class="code" href="classMs_1_1Measure.html#af1e8fd79a9de3d2e12bbda91e1a82aff">staffabbox</a>(staffIdx).adjusted(0, -_spatium, 0, _spatium));</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;                                                            }</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;                                                      }</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;                                                }</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;                                          }</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;                                    }</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;                              }</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;                        }</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;                  p.translate(-pos);</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;                  r1 -= _matrix.mapRect(pr).toAlignedRect();</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;                  }</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;            }</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;      <span class="keywordflow">if</span> (dropRectangle.isValid())</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;            p.fillRect(dropRectangle, QColor(80, 0, 0, 80));</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;      <span class="keyword">const</span> <a class="code" href="classMs_1_1Selection.html">Selection</a>&amp; sel = _score-&gt;selection();</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;      <span class="keywordflow">if</span> (sel.<a class="code" href="classMs_1_1Selection.html#a884ac586a99a211a55eab115a2c3d95f">isRange</a>()) {</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;            <a class="code" href="classMs_1_1Segment.html">Segment</a>* ss = sel.<a class="code" href="classMs_1_1Selection.html#a52a5707191f5035bfda106c54df906d7">startSegment</a>();</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;            <a class="code" href="classMs_1_1Segment.html">Segment</a>* es = sel.<a class="code" href="classMs_1_1Selection.html#a125e47fae45ef55211b0297dc96754ad">endSegment</a>();</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;            <span class="keywordflow">if</span> (!ss)</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;                  <span class="keywordflow">return</span>;</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;            <span class="keywordflow">if</span> (!ss-&gt;<a class="code" href="classMs_1_1Element.html#adbcd81f12f80859fdaf2ca1bd24d23d1">enabled</a>())</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;                  ss = ss-&gt;<a class="code" href="classMs_1_1Segment.html#aacaa89821976f55a33688d3a19e69565">next1MMenabled</a>();</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;            <span class="keywordflow">if</span> (es &amp;&amp; !es-&gt;<a class="code" href="classMs_1_1Element.html#adbcd81f12f80859fdaf2ca1bd24d23d1">enabled</a>())</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;                  es = es-&gt;<a class="code" href="classMs_1_1Segment.html#aacaa89821976f55a33688d3a19e69565">next1MMenabled</a>();</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;            <span class="keywordflow">if</span> (es &amp;&amp; ss-&gt;<a class="code" href="classMs_1_1Segment.html#a23cde3c97359266e2787b107aa0c8cdf">tick</a>() &gt; es-&gt;<a class="code" href="classMs_1_1Segment.html#a23cde3c97359266e2787b107aa0c8cdf">tick</a>())  <span class="comment">// start after end?</span></div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;                  <span class="keywordflow">return</span>;</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;            <span class="keywordflow">if</span> (!ss-&gt;<a class="code" href="classMs_1_1Segment.html#a44dc6d5b22a75152673060bc059acfb9">measure</a>()-&gt;<a class="code" href="classMs_1_1Measure.html#a9c4de13b592b3e0cc6a2398641da99ed">system</a>()) {</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;                  <span class="comment">// segment is in a measure that has not been laid out yet</span></div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;                  <span class="comment">// this can happen in mmrests</span></div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;                  <span class="comment">// first chordrest segment of mmrest instead</span></div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;                  <span class="keyword">const</span> <a class="code" href="classMs_1_1Measure.html">Measure</a>* mmr = ss-&gt;<a class="code" href="classMs_1_1Segment.html#a44dc6d5b22a75152673060bc059acfb9">measure</a>()-&gt;<a class="code" href="classMs_1_1Measure.html#a7dd90eaf72439bf012349d7e8f476425">mmRest1</a>();</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;                  <span class="keywordflow">if</span> (mmr &amp;&amp; mmr-&gt;<a class="code" href="classMs_1_1Measure.html#a9c4de13b592b3e0cc6a2398641da99ed">system</a>())</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;                        ss = mmr-&gt;<a class="code" href="classMs_1_1Measure.html#a3c5e55d2f2291d5ee433a093c0b1dd04">first</a>(<a class="code" href="namespaceMs.html#a24593d5bc01ac95fdbec3d354d258894a7884fad7b22d960efd4e9d84e61e7fe0">SegmentType::ChordRest</a>);</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;                  <span class="keywordflow">else</span></div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;                        <span class="keywordflow">return</span>;                 <span class="comment">// still no system?</span></div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;                  <span class="keywordflow">if</span> (!ss)</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;                        <span class="keywordflow">return</span>;                 <span class="comment">// no chordrest segment?</span></div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;                  }</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;            p.setBrush(Qt::NoBrush);</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;            QPen pen;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;            pen.<a class="code" href="classMs_1_1Element.html#a22907ac84ae65fb5b6c3bc2b14f3b23c">setColor</a>(<a class="code" href="classMs_1_1MScore.html#aa0db4fc96c165225d1a05d87f9ac90cd">MScore::selectColor</a>[0]);</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;            pen.setWidthF(2.0 / p.worldTransform().toAffine().m11());</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;            pen.setStyle(Qt::SolidLine);</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;            p.setPen(pen);</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;            <span class="keywordtype">double</span> _spatium = score()-&gt;spatium();</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;            <span class="keywordtype">double</span> x2      = ss-&gt;<a class="code" href="classMs_1_1Element.html#a06cc027fe14db0cf896f02931356ae24">pagePos</a>().x() - _spatium;</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;            <span class="keywordtype">int</span> staffStart = sel.<a class="code" href="classMs_1_1Selection.html#a009257797226b07065d8a225184178b3">staffStart</a>();</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;            <span class="keywordtype">int</span> staffEnd   = sel.<a class="code" href="classMs_1_1Selection.html#a18aa92607a7bc75a64262bbfd2746d51">staffEnd</a>();</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;            <a class="code" href="classMs_1_1System.html">System</a>* system2 = ss-&gt;<a class="code" href="classMs_1_1Segment.html#a44dc6d5b22a75152673060bc059acfb9">measure</a>()-&gt;<a class="code" href="classMs_1_1Measure.html#a9c4de13b592b3e0cc6a2398641da99ed">system</a>();</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;            QPointF pt      = ss-&gt;<a class="code" href="classMs_1_1Element.html#a06cc027fe14db0cf896f02931356ae24">pagePos</a>();</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;            <span class="keywordtype">double</span> y        = pt.y();</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;            <a class="code" href="classMs_1_1SysStaff.html">SysStaff</a>* ss1   = system2-&gt;<a class="code" href="classMs_1_1System.html#a51fa420463d9aadfbdc0839fb781ff1e">staff</a>(staffStart);</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;            <span class="comment">// find last visible staff:</span></div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;            <span class="keywordtype">int</span> lastStaff = 0;</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = staffEnd-1; i &gt;= 0; --i) {</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;                  <span class="keywordflow">if</span> (score()-&gt;staff(i)-&gt;show()) {</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;                        lastStaff = i;</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;                        }</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;                  }</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;            <a class="code" href="classMs_1_1SysStaff.html">SysStaff</a>* ss2 = system2-&gt;<a class="code" href="classMs_1_1System.html#a51fa420463d9aadfbdc0839fb781ff1e">staff</a>(lastStaff);</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;            <span class="keywordtype">double</span> y1 = ss1-&gt;<a class="code" href="classMs_1_1SysStaff.html#aee9868a0f2bc566af571f4fd377d6741">y</a>() - 2 * score()-&gt;staff(staffStart)-&gt;spatium(<a class="code" href="classMs_1_1Fraction.html">Fraction</a>(0,1)) + y;</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;            <span class="keywordtype">double</span> y2 = ss2-&gt;<a class="code" href="classMs_1_1SysStaff.html#aee9868a0f2bc566af571f4fd377d6741">y</a>() + ss2-&gt;<a class="code" href="classMs_1_1SysStaff.html#aa79ca5523125cce73baf2b3783d0dd32">bbox</a>().height() + 2 * score()-&gt;staff(lastStaff)-&gt;spatium(<a class="code" href="classMs_1_1Fraction.html">Fraction</a>(0,1)) + y;</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;            <span class="comment">// drag vertical start line</span></div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;            p.drawLine(QLineF(x2, y1, x2, y2).translated(system2-&gt;<a class="code" href="classMs_1_1System.html#a57af65dafb20c1282ea78ba3d74725a0">page</a>()-&gt;<a class="code" href="classMs_1_1Element.html#a19157e811d0d2a0e3c94dc844039ba2f">pos</a>()));</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;            <a class="code" href="classMs_1_1System.html">System</a>* system1 = system2;</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;            <span class="keywordtype">double</span> x1;</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1Segment.html">Segment</a>* s = ss; s &amp;&amp; (s != es); ) {</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;                  <a class="code" href="classMs_1_1Segment.html">Segment</a>* ns = s-&gt;<a class="code" href="classMs_1_1Segment.html#aacaa89821976f55a33688d3a19e69565">next1MMenabled</a>();</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;                  system1  = system2;</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;                  system2  = s-&gt;<a class="code" href="classMs_1_1System.html#a6ba93d243368e9e08b10ab5c1803bb70">measure</a>()-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a0e9a0473e5ed4cc38a1dead12bf4c2f3">system</a>();</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;                  <span class="keywordflow">if</span> (!system2) {</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;                        <span class="comment">// as before, use mmrest if necessary</span></div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classMs_1_1Measure.html">Measure</a>* mmr = s-&gt;measure()-&gt;<a class="code" href="classMs_1_1Measure.html#a7dd90eaf72439bf012349d7e8f476425">mmRest1</a>();</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;                        <span class="keywordflow">if</span> (mmr)</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;                              system2 = mmr-&gt;<a class="code" href="classMs_1_1Measure.html#a9c4de13b592b3e0cc6a2398641da99ed">system</a>();</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;                        <span class="keywordflow">if</span> (!system2)</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;                              <span class="keywordflow">break</span>;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;                        <span class="comment">// extend rectangle to end of mmrest</span></div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;                        pt = mmr-&gt;<a class="code" href="classMs_1_1Measure.html#a251d5169092a1437befbec204fa0efe9">last</a>()-&gt;<a class="code" href="classMs_1_1Element.html#a06cc027fe14db0cf896f02931356ae24">pagePos</a>();</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;                        }</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;                  <span class="keywordflow">else</span></div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;                        pt = s-&gt;pagePos();</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;                  x1  = x2;</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;                  x2  = pt.x() + _spatium * 2;</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;                  <span class="keywordflow">if</span> (ns == 0 || ns == es) {    <span class="comment">// last segment?</span></div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;                        <span class="comment">// if any staff in selection has measure rest or repeat measure in last measure,</span></div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;                        <span class="comment">// extend rectangle to bar line</span></div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;                        <a class="code" href="classMs_1_1Segment.html">Segment</a>* fs = s-&gt;<a class="code" href="classMs_1_1Segment.html#a44dc6d5b22a75152673060bc059acfb9">measure</a>()-&gt;<a class="code" href="classMs_1_1Measure.html#a3c5e55d2f2291d5ee433a093c0b1dd04">first</a>(<a class="code" href="namespaceMs.html#a24593d5bc01ac95fdbec3d354d258894a7884fad7b22d960efd4e9d84e61e7fe0">SegmentType::ChordRest</a>);</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;                        <span class="keywordflow">if</span> (fs) {</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;                              <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = staffStart; i &lt; staffEnd; ++i) {</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;                                    <span class="keywordflow">if</span> (!score()-&gt;staff(i)-&gt;show())</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;                                          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;                                    <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr = <span class="keyword">static_cast&lt;</span><a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>*<span class="keyword">&gt;</span>(fs-&gt;<a class="code" href="classMs_1_1Segment.html#a4e9ad4c47081dec0aebcd2aea96b309f">element</a>(i * <a class="code" href="mscore_8h.html#a7b14c16d0b45fd100ee97e74cfd907c0">VOICES</a>));</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;                                    <span class="keywordflow">if</span> (cr &amp;&amp; (cr-&gt;<a class="code" href="classMs_1_1ChordRest.html#a47a641f4c229f43d67ed5154fdebc05c">type</a>() == <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9eaf00e5bc95e18be1ab839e6f51d8c3f3b">ElementType::REPEAT_MEASURE</a> || cr-&gt;<a class="code" href="classMs_1_1ChordRest.html#a4c0205b5940976cc9f7cb9eb543fbc08">durationType</a>() == <a class="code" href="classMs_1_1TDuration.html#ad9263bf173856b77421e83a48a7bf68cac23bf58f35bf1fdfa910d9de6dba47f4">TDuration::DurationType::V_MEASURE</a>)) {</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;                                          x2 = s-&gt;<a class="code" href="classMs_1_1ChordRest.html#aaa704d32c5e4253d54d722276f507e2d">measure</a>()-&gt;<a class="code" href="classMs_1_1Element.html#ac64eee038c2d81d1ae934be877d8acc5">abbox</a>().right() - _spatium * 0.5;</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;                                          <span class="keywordflow">break</span>;</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;                                          }</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;                                    }</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                              }</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;                        }</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;                  <span class="keywordflow">if</span> (system2 != system1)</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;                        x1  = x2 - 2 * _spatium;</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;                  y   = pt.y();</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;                  ss1 = system2-&gt;<a class="code" href="classMs_1_1System.html#a51fa420463d9aadfbdc0839fb781ff1e">staff</a>(staffStart);</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;                  ss2 = system2-&gt;<a class="code" href="classMs_1_1System.html#a51fa420463d9aadfbdc0839fb781ff1e">staff</a>(lastStaff);</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;                  y1  = ss1-&gt;<a class="code" href="classMs_1_1SysStaff.html#aee9868a0f2bc566af571f4fd377d6741">y</a>() - 2 * score()-&gt;staff(staffStart)-&gt;spatium(s-&gt;tick()) + y;</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;                  y2  = ss2-&gt;<a class="code" href="classMs_1_1SysStaff.html#aee9868a0f2bc566af571f4fd377d6741">y</a>() + ss2-&gt;<a class="code" href="classMs_1_1SysStaff.html#aa79ca5523125cce73baf2b3783d0dd32">bbox</a>().height() + 2 * score()-&gt;staff(lastStaff)-&gt;spatium(s-&gt;tick()) + y;</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;                  p.drawLine(QLineF(x1, y1, x2, y1).translated(system2-&gt;<a class="code" href="classMs_1_1System.html#a57af65dafb20c1282ea78ba3d74725a0">page</a>()-&gt;<a class="code" href="classMs_1_1Element.html#a19157e811d0d2a0e3c94dc844039ba2f">pos</a>()));</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;                  p.drawLine(QLineF(x1, y2, x2, y2).translated(system2-&gt;<a class="code" href="classMs_1_1System.html#a57af65dafb20c1282ea78ba3d74725a0">page</a>()-&gt;<a class="code" href="classMs_1_1Element.html#a19157e811d0d2a0e3c94dc844039ba2f">pos</a>()));</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;                  s = ns;</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;                  }</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;            <span class="comment">//</span></div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;            <span class="comment">// draw vertical end line</span></div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;            <span class="comment">//</span></div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;            p.drawLine(QLineF(x2, y1, x2, y2).translated(system2-&gt;<a class="code" href="classMs_1_1System.html#a57af65dafb20c1282ea78ba3d74725a0">page</a>()-&gt;<a class="code" href="classMs_1_1Element.html#a19157e811d0d2a0e3c94dc844039ba2f">pos</a>()));</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;            }</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;      <span class="comment">// Draw foto lasso to ensure that it is above everything else</span></div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;      <span class="keywordflow">if</span> (lassoToDraw)</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;            lassoToDraw-&gt;<a class="code" href="classMs_1_1Element.html#aeacd589786e73e54e81ba2cc9a812126">drawEditMode</a>(&amp;p, editData);</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;      p.setWorldMatrixEnabled(<span class="keyword">false</span>);</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;      <span class="keywordflow">if</span> (_score-&gt;layoutMode() != <a class="code" href="namespaceMs.html#a9b1fb02f916c554309371c6513550a1ba17b8ef2c330f1430e00c9de5469fc7e7">LayoutMode::LINE</a> &amp;&amp; _score-&gt;layoutMode() != <a class="code" href="namespaceMs.html#a9b1fb02f916c554309371c6513550a1bafa177138f94a7ea01f549b1aa7893d03">LayoutMode::SYSTEM</a> &amp;&amp; !r1.isEmpty()) {</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;            p.setClipRegion(r1);  <span class="comment">// only background</span></div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;            <span class="keywordflow">if</span> (_bgPixmap == 0 || _bgPixmap-&gt;isNull())</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;                  p.fillRect(r, _bgColor);</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;                  p.drawTiledPixmap(r, *_bgPixmap, r.topLeft() - QPoint(_matrix.m31(), _matrix.m32()));</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;            }</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;      p.restore();</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;      }</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;<span class="comment">//   zoomBySteps</span></div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;<span class="comment">//    Zooms in or out by the specified number of keyboard- or mouse-based zoom steps (positive to zoom in, negative to zoom out).</span></div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;<span class="comment">//    usingMouse is optional and may be omitted to zoom by keyboard-based steps.</span></div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;<span class="comment">//    pos is optional and may be omitted to zoom relative to the top-left corner.</span></div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;</div><div class="line"><a name="l01581"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a7f1d97d8cc1533ee3867fbd666dbb395"> 1581</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a7f1d97d8cc1533ee3867fbd666dbb395">ScoreView::zoomBySteps</a>(<span class="keyword">const</span> qreal numSteps, <span class="keyword">const</span> <span class="keywordtype">bool</span> usingMouse<span class="comment">/* = false*/</span>, <span class="keyword">const</span> QPointF&amp; pos<span class="comment">/* = QPointF()*/</span>)</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;      {</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;      <span class="comment">// Calculate the new logical zoom level by multiplying it the current logical zoom level by the factor necessary to get it</span></div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;      <span class="comment">// to double every N steps, where N is the user&#39;s preferred &quot;precision&quot; for the specified zoom method (keyboard or mouse).</span></div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> precision = <a class="code" href="namespaceMs.html#abe8f8da5976e3a727f1a3a7a117e73de">preferences</a>.<a class="code" href="structMs_1_1Preferences.html#a435c522d4eae2e8436b22f42919efd7b">getInt</a>(usingMouse ? PREF_UI_CANVAS_ZOOM_PRECISION_MOUSE : PREF_UI_CANVAS_ZOOM_PRECISION_KEYBOARD);</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> stepFactor = std::pow(2.0, 1.0 / qBound(<a class="code" href="namespaceMs.html#a9697db2bfce866009163010d19ad3267">ZOOM_PRECISION_MIN</a>, precision, <a class="code" href="namespaceMs.html#a016355598eeae7955dbcb44133094c22">ZOOM_PRECISION_MAX</a>));</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;      <span class="keyword">auto</span> logicalLevel = logicalZoomLevel() * std::pow(stepFactor, numSteps);</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;      <span class="comment">// Floating-point calculations inevitably introduce rounding errors. Check if the new logical zoom level is very close to</span></div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;      <span class="comment">// the mathematically correct value based on the current step; if it is, snap it to the right value. This is necessary in</span></div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;      <span class="comment">// order to avoid accumulating rounding errors as the user repeatedly zooms in and out.</span></div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;      <span class="keyword">static</span> constexpr qreal epsilon = 0.0001;</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> levelCheck = precision * std::log2(logicalLevel);</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;      <span class="keywordflow">if</span> (std::abs(std::remainder(levelCheck, 1.0)) &lt; epsilon)</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;            logicalLevel = std::pow(2.0, (levelCheck - std::remainder(levelCheck, 1.0)) / precision);</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;      <span class="comment">// If the new zoom level is exactly equal to one of the numeric presets, use the preset; otherwise, it&#39;s free zoom.</span></div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> i = std::find(<a class="code" href="namespaceMs.html#aa17da6d3d99d94476a61e04a750ee52f">zoomEntries</a>.cbegin(), <a class="code" href="namespaceMs.html#aa17da6d3d99d94476a61e04a750ee52f">zoomEntries</a>.cend(), <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(100.0 * logicalLevel));</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> index = ((i != <a class="code" href="namespaceMs.html#aa17da6d3d99d94476a61e04a750ee52f">zoomEntries</a>.cend()) &amp;&amp; i-&gt;isNumericPreset() &amp;&amp; (i-&gt;level == 100.0 * logicalLevel)) ? i-&gt;index : <a class="code" href="namespaceMs.html#ac12fb12074fc86d33abf8fb00d37bc86a2cee454ffbaad8446033c0c951975004">ZoomIndex::ZOOM_FREE</a>;</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;      setLogicalZoom(index, logicalLevel, pos);</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;      }</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;<span class="comment">//   constraintCanvas</span></div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;</div><div class="line"><a name="l01608"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#aa891ef802b360f4c5b7cd73013ca152d"> 1608</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#aa891ef802b360f4c5b7cd73013ca152d">ScoreView::constraintCanvas</a> (<span class="keywordtype">int</span>* dxx, <span class="keywordtype">int</span>* dyy)</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;      {</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;      <span class="keywordflow">if</span> (score()-&gt;layoutMode() == <a class="code" href="namespaceMs.html#a9b1fb02f916c554309371c6513550a1bafa177138f94a7ea01f549b1aa7893d03">LayoutMode::SYSTEM</a>)</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;      <span class="keywordflow">if</span> (score()-&gt;pages().isEmpty())</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;      <span class="keywordtype">int</span> dx = *dxx;</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;      <span class="keywordtype">int</span> dy = *dyy;</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;      QRectF rect = QRectF(0, 0, width(), height());</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;      <a class="code" href="classMs_1_1Page.html">Page</a>* firstPage = score()-&gt;pages().front();</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;      <a class="code" href="classMs_1_1Page.html">Page</a>* lastPage  = score()-&gt;pages().back();</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;      <span class="keywordflow">if</span> (firstPage &amp;&amp; lastPage) {</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;            QPointF offsetPt(xoffset(), yoffset());</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;            QRectF firstPageRect(firstPage-&gt;<a class="code" href="classMs_1_1Element.html#a19157e811d0d2a0e3c94dc844039ba2f">pos</a>().x() * physicalZoomLevel(),</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;                                      firstPage-&gt;<a class="code" href="classMs_1_1Element.html#a19157e811d0d2a0e3c94dc844039ba2f">pos</a>().y() * physicalZoomLevel(),</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;                                      firstPage-&gt;<a class="code" href="classMs_1_1Element.html#abd781d11186d1951028a0efaf6d5cf5a">width</a>() * physicalZoomLevel(),</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;                                      firstPage-&gt;<a class="code" href="classMs_1_1Element.html#a2a8ba8af6817e602c27c154e93542028">height</a>() * physicalZoomLevel());</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;            QRectF lastPageRect(lastPage-&gt;<a class="code" href="classMs_1_1Element.html#a19157e811d0d2a0e3c94dc844039ba2f">pos</a>().x() * physicalZoomLevel(),</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;                                         lastPage-&gt;<a class="code" href="classMs_1_1Element.html#a19157e811d0d2a0e3c94dc844039ba2f">pos</a>().y() * physicalZoomLevel(),</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;                                         lastPage-&gt;<a class="code" href="classMs_1_1Element.html#abd781d11186d1951028a0efaf6d5cf5a">width</a>() * physicalZoomLevel(),</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;                                         lastPage-&gt;<a class="code" href="classMs_1_1Element.html#a2a8ba8af6817e602c27c154e93542028">height</a>() * physicalZoomLevel());</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;            QRectF pagesRect     = firstPageRect.united(lastPageRect).translated(offsetPt);</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;            <span class="keywordtype">bool</span> limitScrollArea = <a class="code" href="namespaceMs.html#abe8f8da5976e3a727f1a3a7a117e73de">preferences</a>.<a class="code" href="structMs_1_1Preferences.html#a39e1e4d3d337de7dcafb14fd8c75c4a2">getBool</a>(PREF_UI_CANVAS_SCROLL_LIMITSCROLLAREA);</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;            <span class="keywordflow">if</span> (!limitScrollArea) {</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;                  qreal hmargin = this-&gt;width() * 0.75;</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;                  qreal vmargin = this-&gt;height() * 0.75;</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;                  pagesRect.adjust(-hmargin, -vmargin, hmargin, vmargin);</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;                  }</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;            QRectF toPagesRect = pagesRect.translated(dx, dy);</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;            <span class="keywordflow">if</span> (limitScrollArea) {</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;                  <span class="keywordflow">if</span> (pagesRect.width() &lt;= rect.width()) {</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;                        <span class="keywordflow">if</span> (score()-&gt;layoutMode() == <a class="code" href="namespaceMs.html#a9b1fb02f916c554309371c6513550a1ba17b8ef2c330f1430e00c9de5469fc7e7">LayoutMode::LINE</a>)</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;                              <span class="comment">// keep score fixed in place horizontally</span></div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;                              dx = 0;</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;                        <span class="keywordflow">else</span></div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;                              <span class="comment">// center horizontally on screen</span></div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;                              dx = (rect.width() - pagesRect.width()) / 2 - pagesRect.left();</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;                        }</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;                  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (toPagesRect.left() &gt; rect.left())</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;                        <span class="comment">// get rid of the left margin</span></div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;                        dx = rect.left() - pagesRect.left();</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;                  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (toPagesRect.right() &lt; rect.right())</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;                        <span class="comment">// get rid of the right margin</span></div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;                        dx = rect.right() - pagesRect.right();</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;                  }</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dx &gt; 0) { <span class="comment">// move right</span></div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;                  <span class="keywordflow">if</span> (toPagesRect.right() &gt; rect.right() &amp;&amp; toPagesRect.left() &gt; rect.left()) {</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;                        <span class="keywordflow">if</span>(pagesRect.width() &lt;= rect.width()) {</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;                              dx = rect.right() - pagesRect.right();</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;                              }</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;                        <span class="keywordflow">else</span> {</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;                              dx = rect.left() - pagesRect.left();</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;                              }</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;                        }</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;                  }</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dx &lt; 0) { <span class="comment">// move left</span></div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;                  <span class="keywordflow">if</span> (toPagesRect.left() &lt; rect.left() &amp;&amp; toPagesRect.right() &lt; rect.right()) {</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;                        <span class="keywordflow">if</span> (pagesRect.width() &lt;= rect.width()) {</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;                              dx = rect.left() - pagesRect.left();</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;                              }</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;                        <span class="keywordflow">else</span> {</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;                              dx = rect.right() - pagesRect.right();</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;                              }</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;                        }</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;                  }</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;            <span class="keywordflow">if</span> (limitScrollArea) {</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;                  <span class="keywordflow">if</span> (pagesRect.height() &lt;= rect.height()) {</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;                        <span class="keywordflow">if</span> (score()-&gt;layoutMode() == <a class="code" href="namespaceMs.html#a9b1fb02f916c554309371c6513550a1ba17b8ef2c330f1430e00c9de5469fc7e7">LayoutMode::LINE</a>)</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;                              <span class="comment">// keep score fixed in place vertically</span></div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;                              dy = 0;</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;                        <span class="keywordflow">else</span></div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;                              <span class="comment">// center vertically on screen</span></div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;                              dy = (rect.height() - pagesRect.height()) / 2 - pagesRect.top();</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;                        }</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;                  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (toPagesRect.top() &gt; rect.top())</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;                        <span class="comment">// get rid of the top margin</span></div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;                        dy = rect.top() - pagesRect.top();</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;                  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (toPagesRect.bottom() &lt; rect.bottom())</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;                        <span class="comment">// get rid of the bottom margin</span></div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;                        dy = rect.bottom() - pagesRect.bottom();</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;                  }</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dy &gt; 0) { <span class="comment">// move down</span></div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;                  <span class="keywordflow">if</span> (toPagesRect.bottom() &gt; rect.bottom() &amp;&amp; toPagesRect.top() &gt; rect.top()) {</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;                        <span class="keywordflow">if</span> (pagesRect.height() &lt;= rect.height()) {</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;                              dy = rect.bottom() - pagesRect.bottom();</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;                              }</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;                        <span class="keywordflow">else</span> {</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;                              dy = rect.top() - pagesRect.top();</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;                              }</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;                        }</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;                  }</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dy &lt; 0) { <span class="comment">// move up</span></div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;                  <span class="keywordflow">if</span> (toPagesRect.top() &lt; rect.top() &amp;&amp; toPagesRect.bottom() &lt; rect.bottom()) {</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;                        <span class="keywordflow">if</span> (pagesRect.height() &lt;= rect.height()) {</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;                              dy = rect.top() - pagesRect.top();</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;                              }</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;                        <span class="keywordflow">else</span> {</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;                              dy = rect.bottom() - pagesRect.bottom();</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;                              }</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;                        }</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;                  }</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;            }</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;      *dxx = dx;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;      *dyy = dy;</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;      }</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;<span class="comment">//   setPhysicalZoomLevel</span></div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;</div><div class="line"><a name="l01722"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#ae7d06361c8e7d7d355889e8125abd871"> 1722</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#ae7d06361c8e7d7d355889e8125abd871">ScoreView::setPhysicalZoomLevel</a>(<span class="keyword">const</span> qreal physicalLevel)</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;      {</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;      <span class="keyword">const</span> qreal currentPhysicalLevel = _matrix.m11();</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;      <span class="keywordflow">if</span> (physicalLevel == currentPhysicalLevel)</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">double</span> deltaPhysicalLevel = physicalLevel / currentPhysicalLevel;</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;      _matrix.setMatrix(physicalLevel, _matrix.m12(), _matrix.m13(), _matrix.m21(),</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;            physicalLevel, _matrix.m23(), _matrix.dx() * deltaPhysicalLevel, _matrix.dy() * deltaPhysicalLevel, _matrix.m33());</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;      imatrix = _matrix.inverted();</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;      emit scaleChanged(physicalLevel * score()-&gt;<a class="code" href="namespaceMs.html#a2bac757437d1a9e364db27de8f9c9e2eae3c647ad6cb1602e679b6f4e3d5e8e32">spatium</a>());</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;      <span class="keywordflow">if</span> (editData.grips) {</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;            qreal w = 8.0 / physicalLevel;</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;            qreal h = 8.0 / physicalLevel;</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;            QRectF r(-w*.5, -h*.5, w, h);</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; editData.grips; ++i) {</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;                  QPointF p(editData.grip[i].center());</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;                  editData.grip[i] = r.translated(p);</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;                  }</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;            }</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;      update();</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;      }</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;<span class="comment">//   setLogicalZoom</span></div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;<span class="comment">//    Sets the zoom type and logical zoom level. pos is optional and may be omitted to zoom relative to the top-left corner.</span></div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;</div><div class="line"><a name="l01752"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#ae5512da94d1a2baacd493a34899e9548"> 1752</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#ae5512da94d1a2baacd493a34899e9548">ScoreView::setLogicalZoom</a>(<a class="code" href="namespaceMs.html#ac12fb12074fc86d33abf8fb00d37bc86">ZoomIndex</a> index, qreal logicalLevel, <span class="keyword">const</span> QPointF&amp; pos<span class="comment">/* = QPointF()*/</span>)</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;      {</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;      _zoomIndex = index;</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;      <span class="keyword">const</span> qreal newLogicalLevel = qBound(<a class="code" href="namespaceMs.html#ac201ae58f81f322edf18a44aef8d4ca8">ZOOM_LEVEL_MIN</a>, logicalLevel, <a class="code" href="namespaceMs.html#ad90065615b21f2118f67f3574f151169">ZOOM_LEVEL_MAX</a>);</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;      <span class="keyword">const</span> qreal newPhysicalLevel = newLogicalLevel * <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;physicalDotsPerInch() / <a class="code" href="namespaceMs.html#ab7904232a877db2441531871cf3f5108">DPI</a>;</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;      <span class="keyword">const</span> QPointF p1 = pos.isNull() ? pos : imatrix.map(pos);</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;      setPhysicalZoomLevel(newPhysicalLevel);</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;      <span class="keywordtype">int</span> dx = 0;</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;      <span class="keywordtype">int</span> dy = 0;</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;      <span class="keywordflow">if</span> (!pos.isNull()) {</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;            <span class="keyword">const</span> QPointF p2 = imatrix.map(pos);</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;            <span class="keyword">const</span> QPointF p3 = p2 - p1;</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;            dx = lrint(p3.x() * newPhysicalLevel);</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;            dy = lrint(p3.y() * newPhysicalLevel);</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;            }</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;      constraintCanvas(&amp;dx, &amp;dy);</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;      <span class="keywordflow">if</span> (dx != 0 || dy != 0) {</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;            _matrix.setMatrix(_matrix.m11(), _matrix.m12(), _matrix.m13(), _matrix.m21(),</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;               _matrix.m22(), _matrix.m23(), _matrix.dx()+dx, _matrix.dy()+dy, _matrix.m33());</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;            imatrix = _matrix.inverted();</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;            scroll(dx, dy, QRect(0, 0, width(), height()));</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;            emit offsetChanged(_matrix.dx(), _matrix.dy());</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;            }</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;      emit viewRectChanged();</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;      update();</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;      <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;updateZoomBox(index, newLogicalLevel);</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;      }</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;<span class="comment">//   calculateLogicalZoomLevel</span></div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;<span class="comment">//    Calculates the logical zoom level. logicalFreeZoomLevel is optional and may be omitted unless index is ZoomIndex::ZOOM_FREE.</span></div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;</div><div class="line"><a name="l01795"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#afa2b3594d7a3da79995ece44092f0b5c"> 1795</a></span>&#160;qreal <a class="code" href="classMs_1_1ScoreView.html#afa2b3594d7a3da79995ece44092f0b5c">ScoreView::calculateLogicalZoomLevel</a>(<span class="keyword">const</span> <a class="code" href="namespaceMs.html#ac12fb12074fc86d33abf8fb00d37bc86">ZoomIndex</a> index, <span class="keyword">const</span> qreal logicalFreeZoomLevel<span class="comment">/* = 0.0*/</span>)<span class="keyword"> const</span></div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;<span class="keyword">      </span>{</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;      <span class="keywordflow">return</span> calculatePhysicalZoomLevel(index, logicalFreeZoomLevel) / (<a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;physicalDotsPerInch() / <a class="code" href="namespaceMs.html#ab7904232a877db2441531871cf3f5108">DPI</a>);</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;      }</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;<span class="comment">//   calculatePhysicalZoomLevel</span></div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;<span class="comment">//    Calculates the physical zoom level. logicalFreeZoomLevel is optional and may be omitted unless index is ZoomIndex::ZOOM_FREE.</span></div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;</div><div class="line"><a name="l01805"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a305f267437093a7464c5ccd1d9ae48ce"> 1805</a></span>&#160;qreal <a class="code" href="classMs_1_1ScoreView.html#a305f267437093a7464c5ccd1d9ae48ce">ScoreView::calculatePhysicalZoomLevel</a>(<span class="keyword">const</span> <a class="code" href="namespaceMs.html#ac12fb12074fc86d33abf8fb00d37bc86">ZoomIndex</a> index, <span class="keyword">const</span> qreal logicalFreeZoomLevel<span class="comment">/* = 0.0*/</span>)<span class="keyword"> const</span></div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;<span class="keyword">      </span>{</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;      <span class="keywordflow">if</span> (!_score)</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;            <span class="keywordflow">return</span> 1.0;</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;      <span class="keyword">const</span> qreal l2p = <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;physicalDotsPerInch() / <a class="code" href="namespaceMs.html#ab7904232a877db2441531871cf3f5108">DPI</a>;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;      <span class="keyword">const</span> qreal cw = width();</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;      <span class="keyword">const</span> qreal ch = height();</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;      <span class="keyword">const</span> qreal pw = _score-&gt;styleD(<a class="code" href="namespaceMs.html#a2bac757437d1a9e364db27de8f9c9e2ea94da04fab9582e6a796d54284da5e407">Sid::pageWidth</a>);</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;      <span class="keyword">const</span> qreal ph = _score-&gt;styleD(<a class="code" href="namespaceMs.html#a2bac757437d1a9e364db27de8f9c9e2eac2ed9b2e814c2fc8828662eda7639753">Sid::pageHeight</a>);</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;      qreal result = 0.0;</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;      <span class="keywordflow">switch</span> (index) {</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#ac12fb12074fc86d33abf8fb00d37bc86a8684c6e13ab436794879f63b5ed89ec1">ZoomIndex::ZOOM_PAGE_WIDTH</a>:</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;                  result = cw / (pw * <a class="code" href="namespaceMs.html#ab7904232a877db2441531871cf3f5108">DPI</a>);</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#ac12fb12074fc86d33abf8fb00d37bc86a4fe2e7c5638514d1e165cf5eab2ed1ef">ZoomIndex::ZOOM_WHOLE_PAGE</a>: {</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;                  <span class="keyword">const</span> qreal mag1 = cw / (pw * <a class="code" href="namespaceMs.html#ab7904232a877db2441531871cf3f5108">DPI</a>);</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;                  <span class="keyword">const</span> qreal mag2 = ch / (ph * <a class="code" href="namespaceMs.html#ab7904232a877db2441531871cf3f5108">DPI</a>);</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;                  result = std::min(mag1, mag2);</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;                  }</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#ac12fb12074fc86d33abf8fb00d37bc86a086ce865dca88eb7c133056ea99ce130">ZoomIndex::ZOOM_TWO_PAGES</a>: {</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;                  qreal mag1 = 0.0;</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;                  qreal mag2 = 0.0;</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="classMs_1_1MScore.html#aca131f1f53787e9bfa4fa5e3b564e7de">MScore::verticalOrientation</a>()) {</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;                        mag1 = ch / (ph * 2.0 * <a class="code" href="namespaceMs.html#ab7904232a877db2441531871cf3f5108">DPI</a> + <a class="code" href="classMs_1_1MScore.html#a2d1e149be3385c5540ef31af5d4fb20e">MScore::verticalPageGap</a>);</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;                        mag2 = cw / (pw * <a class="code" href="namespaceMs.html#ab7904232a877db2441531871cf3f5108">DPI</a>);</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;                        }</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;                  <span class="keywordflow">else</span> {</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;                        mag1 = cw / (pw * 2.0 * <a class="code" href="namespaceMs.html#ab7904232a877db2441531871cf3f5108">DPI</a> + std::max(<a class="code" href="classMs_1_1MScore.html#ac9d042a7decd57dbcea04544594b33c1">MScore::horizontalPageGapEven</a>, <a class="code" href="classMs_1_1MScore.html#a4869cc8207f7c0ad6772120a1ec78c56">MScore::horizontalPageGapOdd</a>));</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;                        mag2 = ch / (ph * <a class="code" href="namespaceMs.html#ab7904232a877db2441531871cf3f5108">DPI</a>);</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;                        }</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;                  result = std::min(mag1, mag2);</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;                  }</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#ac12fb12074fc86d33abf8fb00d37bc86a2cee454ffbaad8446033c0c951975004">ZoomIndex::ZOOM_FREE</a>:</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;                  <span class="comment">// If the zoom type is free zoom, the caller is required to pass the logical free-zoom level.</span></div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;                  Q_ASSERT(logicalFreeZoomLevel != 0.0);</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;                  result = logicalFreeZoomLevel * l2p;</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;            <span class="keywordflow">default</span>: {</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;                  <span class="comment">// If the selected zoom entry is one of the numeric presets, set the physical zoom level accordingly; otherwise,</span></div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;                  <span class="comment">// initialize the physical zoom level to 0.0 so that it can be overridden below with the actual current value.</span></div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;                  <span class="keyword">const</span> <span class="keyword">auto</span> i = std::find(<a class="code" href="namespaceMs.html#aa17da6d3d99d94476a61e04a750ee52f">zoomEntries</a>.cbegin(), <a class="code" href="namespaceMs.html#aa17da6d3d99d94476a61e04a750ee52f">zoomEntries</a>.cend(), index);</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;                  result = ((i != <a class="code" href="namespaceMs.html#aa17da6d3d99d94476a61e04a750ee52f">zoomEntries</a>.cend()) &amp;&amp; i-&gt;isNumericPreset()) ? (i-&gt;level / 100.0 * l2p) : 0.0;</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;                  }</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;            }</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;      <span class="keywordflow">if</span> (result &lt; 0.0001)</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;            result = physicalZoomLevel();</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;      <span class="keywordflow">return</span> result;</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;      }</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;<span class="comment">//   setFocusRect</span></div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;</div><div class="line"><a name="l01870"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#ac8fc4dd5e390b168a3a25159c654a840"> 1870</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#ac8fc4dd5e390b168a3a25159c654a840">ScoreView::setFocusRect</a>()</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;      {</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;splitScreen()) {</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;            <span class="keywordflow">if</span> (!focusFrame) {</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;                  focusFrame = <span class="keyword">new</span> QFocusFrame;</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;                  QPalette p(focusFrame-&gt;palette());</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;                  p.setColor(QPalette::WindowText, <a class="code" href="classMs_1_1MScore.html#aa0db4fc96c165225d1a05d87f9ac90cd">MScore::selectColor</a>[0]);</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;                  focusFrame-&gt;setPalette(p);</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;                  }</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;            focusFrame-&gt;setWidget(static_cast&lt;QWidget*&gt;(<span class="keyword">this</span>));</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;            focusFrame-&gt;show();</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;            }</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;            <span class="keywordflow">if</span> (focusFrame)</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;                  focusFrame-&gt;setWidget(0);</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;            }</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;      }</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;<span class="comment">//   editCopy</span></div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;</div><div class="line"><a name="l01892"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a46f6805e9dd2eb2811f64ee1e11cdce5"> 1892</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a46f6805e9dd2eb2811f64ee1e11cdce5">ScoreView::editCopy</a>()</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;      {</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;      <span class="keywordflow">if</span> (editData.element)</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;            editData.element-&gt;editCopy(editData);</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;      }</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;<span class="comment">//   editCut</span></div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;</div><div class="line"><a name="l01902"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a63116d66773e923b967530e1fba9d028"> 1902</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a63116d66773e923b967530e1fba9d028">ScoreView::editCut</a>()</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;      {</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;      _score-&gt;startCmd();</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;      <span class="keywordflow">if</span> (editData.element)</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;            editData.element-&gt;editCut(editData);</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;      _score-&gt;endCmd();</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;      }</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;<span class="comment">//   checkCopyOrCut</span></div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;</div><div class="line"><a name="l01914"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a1a9f5ed5cf322cf68d5d0df853b3369a"> 1914</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classMs_1_1ScoreView.html#a1a9f5ed5cf322cf68d5d0df853b3369a">ScoreView::checkCopyOrCut</a>()</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;      {</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;      <span class="keywordflow">if</span> (!_score-&gt;selection().canCopy()) {</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;            QMessageBox::information(0, <span class="stringliteral">&quot;MuseScore&quot;</span>,</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;               tr(<span class="stringliteral">&quot;Please select the complete tuplet/tremolo and retry the command&quot;</span>),</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;               QMessageBox::Ok, QMessageBox::NoButton);</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;            }</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;      }</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;<span class="comment">//   normalCopy</span></div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;</div><div class="line"><a name="l01929"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a09b79a6ac0b13eb38d93a6c9b78149be"> 1929</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a09b79a6ac0b13eb38d93a6c9b78149be">ScoreView::normalCopy</a>()</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;      {</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;      <span class="keywordflow">if</span> (!checkCopyOrCut())</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;      QString mimeType = _score-&gt;selection().mimeType();</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;      <span class="keywordflow">if</span> (!mimeType.isEmpty()) {</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;            QMimeData* <a class="code" href="namespaceMs.html#abd83f3147d5fadc937a40931c56620cd">mimeData</a> = <span class="keyword">new</span> QMimeData;</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;            mimeData-&gt;setData(mimeType, _score-&gt;selection().mimeData());</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classMs_1_1MScore.html#a58e52c0bece662fbd932efcee0ebdb67">MScore::debugMode</a>)</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;                  qDebug(<span class="stringliteral">&quot;cmd copy: &lt;%s&gt;&quot;</span>, mimeData-&gt;data(mimeType).data());</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;            QApplication::clipboard()-&gt;setMimeData(mimeData);</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;            }</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;      }</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;<span class="comment">//   normalCut</span></div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;</div><div class="line"><a name="l01947"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a8a5cc0612c5b0787dfc75f7f122c7220"> 1947</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a8a5cc0612c5b0787dfc75f7f122c7220">ScoreView::normalCut</a>()</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;      {</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;      <span class="keywordflow">if</span> (!checkCopyOrCut())</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;      _score-&gt;startCmd();</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;      normalCopy();</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;      _score-&gt;cmdDeleteSelection();</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;      _score-&gt;endCmd();</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;      }</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;<span class="comment">//   editSwap</span></div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;</div><div class="line"><a name="l01961"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#ae2e69645835d742be2cc273308593d7f"> 1961</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#ae2e69645835d742be2cc273308593d7f">ScoreView::editSwap</a>()</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;      {</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;<span class="preprocessor">#if 0 // TODO</span></div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;      <span class="keywordflow">if</span> (editData.element &amp;&amp; editData.element-&gt;isText() &amp;&amp; !editData.element-&gt;isLyrics()) {</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;            <a class="code" href="classMs_1_1Text.html">Text</a>* text = toText(editData.element);</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;            QString s = text-&gt;selectedText();</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;            text-&gt;<a class="code" href="classMs_1_1TextBase.html#a784b53f52f53f9b17f41bb9ddcf5a2ac">paste</a>(<span class="keyword">this</span>);</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;            <span class="keywordflow">if</span> (!s.isEmpty())</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;                  QApplication::clipboard()-&gt;setText(s, QClipboard::Clipboard);</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;            }</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;      }</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;<span class="comment">//   editPaste</span></div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;</div><div class="line"><a name="l01978"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#ac472aad2e547b4f9ab772ada8e8c4319"> 1978</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#ac472aad2e547b4f9ab772ada8e8c4319">ScoreView::editPaste</a>()</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;      {</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;      <span class="keywordflow">if</span> (textEditMode())</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;            <a class="code" href="namespaceMs.html#a0ae7680d3dcd8f5ece7e7c9985988c06">toTextBase</a>(editData.element)-&gt;<a class="code" href="classMs_1_1TextBase.html#a784b53f52f53f9b17f41bb9ddcf5a2ac">paste</a>(editData);</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;      }</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;<span class="comment">//   normalSwap</span></div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;</div><div class="line"><a name="l01988"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a99958594c126940e7da653f2e11d0fab"> 1988</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a99958594c126940e7da653f2e11d0fab">ScoreView::normalSwap</a>()</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;      {</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;      <span class="keywordflow">if</span> (!checkCopyOrCut())</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;      QString mimeType = _score-&gt;selection().mimeType();</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;      <span class="keyword">const</span> QMimeData* ms = QApplication::clipboard()-&gt;mimeData();</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;      <span class="keywordflow">if</span> (mimeType == <a class="code" href="namespaceMs.html#a46459b09cb8d7b0c58c5db7fbb0d7150">mimeStaffListFormat</a>) { <span class="comment">// determine size of clipboard selection</span></div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;            <a class="code" href="classMs_1_1Fraction.html">Fraction</a> tickLen = <a class="code" href="classMs_1_1Fraction.html">Fraction</a>(0,1);</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;            <span class="keywordtype">int</span> staves = 0;</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;            QByteArray d(ms-&gt;data(<a class="code" href="namespaceMs.html#a46459b09cb8d7b0c58c5db7fbb0d7150">mimeStaffListFormat</a>));</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;            <a class="code" href="classMs_1_1XmlReader.html">XmlReader</a> e(d);</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;            e.readNextStartElement();</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;            <span class="keywordflow">if</span> (e.name() == <span class="stringliteral">&quot;StaffList&quot;</span>) {</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;                  tickLen = <a class="code" href="classMs_1_1Fraction.html#a63e242155373d30a2de43750ea718368">Fraction::fromTicks</a>(e.intAttribute(<span class="stringliteral">&quot;len&quot;</span>, 0));</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;                  staves  = e.intAttribute(<span class="stringliteral">&quot;staves&quot;</span>, 0);</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;                  }</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;            <span class="keywordflow">if</span> (tickLen &gt; <a class="code" href="classMs_1_1Fraction.html">Fraction</a>(0,1)) { <span class="comment">// attempt to extend selection to match clipboard size</span></div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;                  <a class="code" href="classMs_1_1Segment.html">Segment</a>* seg = _score-&gt;selection().startSegment();</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;                  <a class="code" href="classMs_1_1Fraction.html">Fraction</a> <a class="code" href="click_8h.html#a23377ea277c7aef62f6cf3c640f7155c">tick</a> = _score-&gt;selection().tickStart() + tickLen;</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;                  <a class="code" href="classMs_1_1Segment.html">Segment</a>* segAfter = _score-&gt;tick2leftSegment(tick);</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;                  <span class="keywordtype">int</span> staffIdx = _score-&gt;selection().staffStart() + staves - 1;</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;                  <span class="keywordflow">if</span> (staffIdx &gt;= _score-&gt;nstaves())</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;                        staffIdx = _score-&gt;nstaves() - 1;</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;                  tick = _score-&gt;selection().tickStart();</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;                  <a class="code" href="classMs_1_1Fraction.html">Fraction</a>  etick = tick + tickLen;</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="classMs_1_1MScore.html#a58e52c0bece662fbd932efcee0ebdb67">MScore::debugMode</a>)</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;                        _score-&gt;selection().dump();</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;                  _score-&gt;selection().extendRangeSelection(seg, segAfter, staffIdx, tick, etick);</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;                  _score-&gt;selection().update();</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="classMs_1_1MScore.html#a58e52c0bece662fbd932efcee0ebdb67">MScore::debugMode</a>)</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;                        _score-&gt;selection().dump();</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;                  <span class="keywordflow">if</span> (!checkCopyOrCut())</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;                        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;                  ms = QApplication::clipboard()-&gt;mimeData();</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;                  }</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;            }</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;      QByteArray d(_score-&gt;selection().mimeData());</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;      <span class="keywordflow">if</span> (this-&gt;normalPaste()) {</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;            QMimeData* <a class="code" href="namespaceMs.html#abd83f3147d5fadc937a40931c56620cd">mimeData</a> = <span class="keyword">new</span> QMimeData;</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;            mimeData-&gt;setData(mimeType, d);</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;            QApplication::clipboard()-&gt;setMimeData(mimeData);</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;            }</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;      }</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;<span class="comment">//   normalPaste</span></div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;</div><div class="line"><a name="l02036"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#acf601afde4a34bd505007046e0b0d776"> 2036</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classMs_1_1ScoreView.html#acf601afde4a34bd505007046e0b0d776">ScoreView::normalPaste</a>(<a class="code" href="classMs_1_1Fraction.html">Fraction</a> scale)</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;      {</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;      _score-&gt;startCmd();</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;      <span class="keyword">const</span> QMimeData* ms = QApplication::clipboard()-&gt;mimeData();</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;      _score-&gt;cmdPaste(ms, <span class="keyword">this</span>, scale);</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;      <span class="keywordtype">bool</span> rv = <a class="code" href="classMs_1_1MScore.html#a7490ecd88338d8ff3ffc39f5545171a4">MScore::_error</a> == <a class="code" href="namespaceMs.html#ad1b1585b0038ede29126efd627daae91ad34256405b037dd4a85817fbea2430fa">MS_NO_ERROR</a>;</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;      _score-&gt;endCmd();</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;      <span class="keywordflow">return</span> rv;</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;      }</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;<span class="comment">//   cmdGotoElement</span></div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;</div><div class="line"><a name="l02050"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a44222486dab8ce9252cff7a089a42e86"> 2050</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a44222486dab8ce9252cff7a089a42e86">ScoreView::cmdGotoElement</a>(<a class="code" href="classMs_1_1Element.html">Element</a>* e)</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;      {</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;      <span class="keywordflow">if</span> (e) {</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;            <span class="keywordflow">if</span> (e-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#aeccc894c5a64aba67bbfaf8fe1b755d5a10de4bc81f754b19b0d27246a0589c05">ElementType::NOTE</a> || e-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea9c6a910141dd674271df4ebacccaeed0">ElementType::HARMONY</a>)</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;                  score()-&gt;setPlayNote(<span class="keyword">true</span>);</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;            score()-&gt;select(e, <a class="code" href="namespaceMs.html#a1066451ad9dc9959bedb76978f4f30c8a0679273e201afd0bf57af3961f8a23b8">SelectType::SINGLE</a>, 0);</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;            <span class="keywordflow">if</span> (e)</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;                  adjustCanvasPosition(e, <span class="keyword">false</span>);</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;            <span class="keywordflow">if</span> (noteEntryMode())</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;                  moveCursor();</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;            updateAll();</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;            }</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;      }</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;<span class="comment">//   ticksTab</span></div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;</div><div class="line"><a name="l02068"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a3510962e79179066a6568ebff6cf359e"> 2068</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a3510962e79179066a6568ebff6cf359e">ScoreView::ticksTab</a>(<span class="keyword">const</span> <a class="code" href="classMs_1_1Fraction.html">Fraction</a>&amp; ticks)</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;      {</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;      <span class="keywordflow">if</span> (editData.element-&gt;isHarmony())</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;            harmonyTicksTab(ticks);</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (editData.element-&gt;isFiguredBass())</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;            figuredBassTicksTab(ticks);</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;      }</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;<span class="comment">//   cmd</span></div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;</div><div class="line"><a name="l02080"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#aee2c8e5acab0616edede09c224417af6"> 2080</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#aee2c8e5acab0616edede09c224417af6">ScoreView::cmd</a>(<span class="keyword">const</span> QAction* a)</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;      {</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span>* s = a ? a-&gt;data().toByteArray().constData() : <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;      cmd(s);</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;      updateEditElement();</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;      }</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;</div><div class="line"><a name="l02087"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a9e71c1fe71c46c64b51e42899d88fb93"> 2087</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#aee2c8e5acab0616edede09c224417af6">ScoreView::cmd</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* s)</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;      {</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;      <span class="keyword">struct </span>ScoreViewCmd {</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;            std::vector&lt;const char*&gt; commands;</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;            std::function&lt;void(ScoreView*, const QByteArray&amp; cmd)&gt; exec;</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;            };</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;      <span class="keyword">const</span> QByteArray cmd(s);</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;      shadowNote-&gt;setVisible(<span class="keyword">false</span>);</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classMs_1_1MScore.html#a58e52c0bece662fbd932efcee0ebdb67">MScore::debugMode</a>)</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;            qDebug(<span class="stringliteral">&quot;ScoreView::cmd &lt;%s&gt;&quot;</span>, s);</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;      <span class="keyword">static</span> <span class="keyword">const</span> std::vector&lt;ScoreViewCmd&gt; cmdList {</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;            {{<span class="stringliteral">&quot;escape&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#aab67fb7861f0980d04fbae4c5348f3a6">escapeCmd</a>();</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;                  }},</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;            {{<span class="stringliteral">&quot;note-input&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;                  <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ae47cb4db4ed5cdfaf6fbe97b49c9794a">state</a> == <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a1e23852820b9154316c7c06e2b7ba051">ViewState::NORMAL</a>)</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ae8b0b20a69a6cf9d2ba89e03158d4671">changeState</a>(<a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a6dff4f0bcb369949446e0f3400db6d5c">ViewState::NOTE_ENTRY</a>);</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;                  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ae47cb4db4ed5cdfaf6fbe97b49c9794a">state</a> == <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a6dff4f0bcb369949446e0f3400db6d5c">ViewState::NOTE_ENTRY</a>)</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ae8b0b20a69a6cf9d2ba89e03158d4671">changeState</a>(<a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a1e23852820b9154316c7c06e2b7ba051">ViewState::NORMAL</a>);</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;                  }},</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;            {{<span class="stringliteral">&quot;copy&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;                  <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a920bfb0637f25f850df1c5483a0cff5b">fotoMode</a>())</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a2be6afdc4e50ebb9562554089fd54f07">fotoModeCopy</a>();</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;                  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ae47cb4db4ed5cdfaf6fbe97b49c9794a">state</a> == <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a1e23852820b9154316c7c06e2b7ba051">ViewState::NORMAL</a>)</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a09b79a6ac0b13eb38d93a6c9b78149be">normalCopy</a>();</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;                  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ae47cb4db4ed5cdfaf6fbe97b49c9794a">state</a> == <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a93762d802eed04b3e1c59d1d46b35248">ViewState::EDIT</a>)</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a46f6805e9dd2eb2811f64ee1e11cdce5">editCopy</a>();</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;                  }},</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;            {{<span class="stringliteral">&quot;cut&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;                  <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ae47cb4db4ed5cdfaf6fbe97b49c9794a">state</a> == <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a1e23852820b9154316c7c06e2b7ba051">ViewState::NORMAL</a>)</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a8a5cc0612c5b0787dfc75f7f122c7220">normalCut</a>();</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;                  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ae47cb4db4ed5cdfaf6fbe97b49c9794a">state</a> == <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a93762d802eed04b3e1c59d1d46b35248">ViewState::EDIT</a>)</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a63116d66773e923b967530e1fba9d028">editCut</a>();</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;                  }},</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;            {{<span class="stringliteral">&quot;paste&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;                  <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ae47cb4db4ed5cdfaf6fbe97b49c9794a">state</a> == <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a1e23852820b9154316c7c06e2b7ba051">ViewState::NORMAL</a>)</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#acf601afde4a34bd505007046e0b0d776">normalPaste</a>();</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;                  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ae47cb4db4ed5cdfaf6fbe97b49c9794a">state</a> == <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a93762d802eed04b3e1c59d1d46b35248">ViewState::EDIT</a>)</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ac472aad2e547b4f9ab772ada8e8c4319">editPaste</a>();</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;                  }},</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;            {{<span class="stringliteral">&quot;paste-half&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#acf601afde4a34bd505007046e0b0d776">normalPaste</a>(<a class="code" href="classMs_1_1Fraction.html">Fraction</a>(1, 2));</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;                  }},</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;            {{<span class="stringliteral">&quot;paste-double&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#acf601afde4a34bd505007046e0b0d776">normalPaste</a>(<a class="code" href="classMs_1_1Fraction.html">Fraction</a>(2, 1));</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;                  }},</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;            {{<span class="stringliteral">&quot;paste-special&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;                  <a class="code" href="classMs_1_1Fraction.html">Fraction</a> scale = <a class="code" href="classMs_1_1Fraction.html">Fraction</a>(1, 1);</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;                  <a class="code" href="classMs_1_1Fraction.html">Fraction</a> duration = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a67a1f22da74237b491206ae705ebb688">inputState</a>().<a class="code" href="classMs_1_1InputState.html#ad23b3283d9647903d82a42461989506e">duration</a>().<a class="code" href="classMs_1_1TDuration.html#a5f699dd041973be93c8bef472927ee5f">fraction</a>();</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;                  <span class="keywordflow">if</span> (duration.<a class="code" href="classMs_1_1Fraction.html#acc3076889cb6d4019cd1406411c3656c">isValid</a>() &amp;&amp; !duration.<a class="code" href="classMs_1_1Fraction.html#ac3244c876739eef5fa17e93e053bc599">isZero</a>()) {</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;                        scale = duration * 4;</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;                        scale.<a class="code" href="classMs_1_1Fraction.html#a65efbab334943fc56b8a7444ea087415">reduce</a>();</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;                        }</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#acf601afde4a34bd505007046e0b0d776">normalPaste</a>(scale);</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;                  }},</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;            {{<span class="stringliteral">&quot;swap&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;                  <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ae47cb4db4ed5cdfaf6fbe97b49c9794a">state</a> == <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a1e23852820b9154316c7c06e2b7ba051">ViewState::NORMAL</a>)</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a99958594c126940e7da653f2e11d0fab">normalSwap</a>();</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;                  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ae47cb4db4ed5cdfaf6fbe97b49c9794a">state</a> == <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a93762d802eed04b3e1c59d1d46b35248">ViewState::EDIT</a>)</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ae2e69645835d742be2cc273308593d7f">editSwap</a>();</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;                  }},</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;            {{<span class="stringliteral">&quot;lyrics&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a687f074b331fe27ebec4b4d596f91e0e">startCmd</a>();</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;                  <a class="code" href="classMs_1_1Lyrics.html">Lyrics</a>* lyrics = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a8ab1c2eb8f17f4f020d21506a6188000">addLyrics</a>();</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#ae629bd6513248811b5c7823836982ee8">endCmd</a>();</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;                  <span class="keywordflow">if</span> (lyrics) {</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#abe6533d03566869716a0fe0fdc34f0bf">startEditMode</a>(lyrics);</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;                        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;                        }</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;                  }},</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;            {{<span class="stringliteral">&quot;figured-bass&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;                  <a class="code" href="classMs_1_1FiguredBass.html">FiguredBass</a>* fb = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a81bde69ca9cf6a9bade63ac525eac9ce">addFiguredBass</a>();</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;                  <span class="keywordflow">if</span> (fb) {</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#abe6533d03566869716a0fe0fdc34f0bf">startEditMode</a>(fb);</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;                        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;                        }</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;                  }},</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;            {{<span class="stringliteral">&quot;mag&quot;</span>}, <span class="comment">/*[](ScoreView* cv, const QByteArray&amp;)*/</span> {</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;                  <span class="comment">// ??</span></div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;                  }},</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;            {{<span class="stringliteral">&quot;play&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="namespaceMs.html#a1a43a84e57fe33057a3e17aa85488d5f">seq</a> &amp;&amp; <a class="code" href="namespaceMs.html#a1a43a84e57fe33057a3e17aa85488d5f">seq</a>-&gt;<a class="code" href="classMs_1_1Seq.html#a3e2066fafa6413eaaf0843a12ff96e2a">canStart</a>()) {</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;                        <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ae47cb4db4ed5cdfaf6fbe97b49c9794a">state</a> == <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a1e23852820b9154316c7c06e2b7ba051">ViewState::NORMAL</a> || cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ae47cb4db4ed5cdfaf6fbe97b49c9794a">state</a> == <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a6dff4f0bcb369949446e0f3400db6d5c">ViewState::NOTE_ENTRY</a>)</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;                              cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ae8b0b20a69a6cf9d2ba89e03158d4671">changeState</a>(<a class="code" href="namespaceMs.html#aa0f871cf8181cec31d68d20a39010655a6a216efc529825c60a4a4c0bc99ad77f">ViewState::PLAY</a>);</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ae47cb4db4ed5cdfaf6fbe97b49c9794a">state</a> == <a class="code" href="namespaceMs.html#aa0f871cf8181cec31d68d20a39010655a6a216efc529825c60a4a4c0bc99ad77f">ViewState::PLAY</a>)</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;                              cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ae8b0b20a69a6cf9d2ba89e03158d4671">changeState</a>(<a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a1e23852820b9154316c7c06e2b7ba051">ViewState::NORMAL</a>);</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;                        }</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;                  <span class="keywordflow">else</span></div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;                        <a class="code" href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">getAction</a>(<span class="stringliteral">&quot;play&quot;</span>)-&gt;setChecked(<span class="keyword">false</span>);</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;                  }},</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;            {{<span class="stringliteral">&quot;fotomode&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;                  <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ae47cb4db4ed5cdfaf6fbe97b49c9794a">state</a> == <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a1e23852820b9154316c7c06e2b7ba051">ViewState::NORMAL</a>)</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ae8b0b20a69a6cf9d2ba89e03158d4671">changeState</a>(<a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a8844bb893d3b16fa3365a5cfcde4edca">ViewState::FOTO</a>);</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;                  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a920bfb0637f25f850df1c5483a0cff5b">fotoMode</a>())</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ae8b0b20a69a6cf9d2ba89e03158d4671">changeState</a>(<a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a1e23852820b9154316c7c06e2b7ba051">ViewState::NORMAL</a>);</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;                  }},</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;            {{<span class="stringliteral">&quot;add-slur&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#abbdc0afd25bb61ad920486f5415c46be">cmdAddSlur</a>();</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;                  }},</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;            {{<span class="stringliteral">&quot;add-hairpin&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a9a2bb9cc4c5b513c37161738cb456509">cmdAddHairpin</a>(<a class="code" href="namespaceMs.html#ab8c991c362b4c6671323072bdeb9c912a50dee7fcaa6b7b85fba1758b62a3cec5">HairpinType::CRESC_HAIRPIN</a>);</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;                  }},</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;            {{<span class="stringliteral">&quot;add-hairpin-reverse&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a9a2bb9cc4c5b513c37161738cb456509">cmdAddHairpin</a>(<a class="code" href="namespaceMs.html#ab8c991c362b4c6671323072bdeb9c912a5f56117a3440c5d1aefb3efa0e827672">HairpinType::DECRESC_HAIRPIN</a>);</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;                  }},</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;            {{<span class="stringliteral">&quot;add-noteline&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ac4b421c6a812ee23383268d2dab74bff">cmdAddNoteLine</a>();</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;                  }},</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;            {{<span class="stringliteral">&quot;chord-text&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ae8b0b20a69a6cf9d2ba89e03158d4671">changeState</a>(<a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a1e23852820b9154316c7c06e2b7ba051">ViewState::NORMAL</a>);</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ade6f94fbbe9267df4d80e609191e1d6c">cmdAddChordName</a>(<a class="code" href="namespaceMs.html#aad3918cfddca91d981504ae55c0f19b0a94e94133f4bdc1794c6b647b8ea134d0">HarmonyType::STANDARD</a>);</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;                  }},</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;            {{<span class="stringliteral">&quot;roman-numeral-text&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ae8b0b20a69a6cf9d2ba89e03158d4671">changeState</a>(<a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a1e23852820b9154316c7c06e2b7ba051">ViewState::NORMAL</a>);</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ade6f94fbbe9267df4d80e609191e1d6c">cmdAddChordName</a>(<a class="code" href="namespaceMs.html#a9ac3d39c415913ce40aa7e57a5f3fb55a65c329d60e40fb588c19c91b8bba597a">HarmonyType::ROMAN</a>);</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;                  }},</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;            {{<span class="stringliteral">&quot;nashville-number-text&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ae8b0b20a69a6cf9d2ba89e03158d4671">changeState</a>(<a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a1e23852820b9154316c7c06e2b7ba051">ViewState::NORMAL</a>);</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ade6f94fbbe9267df4d80e609191e1d6c">cmdAddChordName</a>(<a class="code" href="namespaceMs.html#a9ac3d39c415913ce40aa7e57a5f3fb55ad0f5bb7cf646230bb691403d52fe2448">HarmonyType::NASHVILLE</a>);</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;                  }},</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;            {{<span class="stringliteral">&quot;title-text&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a958198aa0c66eb36e304342164166fd8">cmdAddText</a>(<a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aa6f9dccd85b2e0786c8d522045365eb48">Tid::TITLE</a>);</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;                  }},</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;            {{<span class="stringliteral">&quot;subtitle-text&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a958198aa0c66eb36e304342164166fd8">cmdAddText</a>(<a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aa4755a6fd5219c602faa261bb02e0aa82">Tid::SUBTITLE</a>);</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;                  }},</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;            {{<span class="stringliteral">&quot;composer-text&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a958198aa0c66eb36e304342164166fd8">cmdAddText</a>(<a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aa5e25078623973232ebcdabaca6ed82c3">Tid::COMPOSER</a>);</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;                  }},</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;            {{<span class="stringliteral">&quot;poet-text&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a958198aa0c66eb36e304342164166fd8">cmdAddText</a>(<a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aaf08c95b54eefa7d745685856db641133">Tid::POET</a>);</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;                  }},</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;            {{<span class="stringliteral">&quot;part-text&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a958198aa0c66eb36e304342164166fd8">cmdAddText</a>(<a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aa591aa8ad7eccb940ed9ed21d61cb61f6">Tid::INSTRUMENT_EXCERPT</a>);</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;                  }},</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;            {{<span class="stringliteral">&quot;system-text&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a958198aa0c66eb36e304342164166fd8">cmdAddText</a>(<a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aafa177138f94a7ea01f549b1aa7893d03">Tid::SYSTEM</a>);</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;                  }},</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;            {{<span class="stringliteral">&quot;staff-text&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a958198aa0c66eb36e304342164166fd8">cmdAddText</a>(<a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aa8e2ef94cad245adb8089356242f49e55">Tid::STAFF</a>);</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;                  }},</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;            {{<span class="stringliteral">&quot;expression-text&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a958198aa0c66eb36e304342164166fd8">cmdAddText</a>(<a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aaea8ec660a4ff1a0cf378ac911be7efb2">Tid::EXPRESSION</a>);</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;                  }},</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;            {{<span class="stringliteral">&quot;rehearsalmark-text&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a958198aa0c66eb36e304342164166fd8">cmdAddText</a>(<a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea096a4e9d4aa1495cdf3dabcc1ddbfbe1">Tid::REHEARSAL_MARK</a>);</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;                  }},</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;            {{<span class="stringliteral">&quot;instrument-change-text&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a958198aa0c66eb36e304342164166fd8">cmdAddText</a>(<a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9eadff611def40f842cc2fc5c5b48e0d7f4">Tid::INSTRUMENT_CHANGE</a>);</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;                  }},</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;            {{<span class="stringliteral">&quot;fingering-text&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a958198aa0c66eb36e304342164166fd8">cmdAddText</a>(<a class="code" href="namespaceMs.html#a175bedec052e1c2fd09257ffde43d847a9b5778b423deab938ac37574ae543e56">Tid::FINGERING</a>);</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;                  }},</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;            {{<span class="stringliteral">&quot;sticking-text&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a958198aa0c66eb36e304342164166fd8">cmdAddText</a>(<a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9eafec1fffeb63a24b31b41a5e941132ca9">Tid::STICKING</a>);</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;                  }},</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;            {{<span class="stringliteral">&quot;edit-element&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;                  <a class="code" href="classMs_1_1Element.html">Element</a>* e = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#abf55316b1de3db4e71efba968ec280f6">element</a>();</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;                  <span class="keywordflow">if</span> (e &amp;&amp; e-&gt;<a class="code" href="classMs_1_1Element.html#accef4917f0fce522b94b90a3ccd0f76b">isEditable</a>() &amp;&amp; !cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a6585f1b1fc0f252c1e349f0fa5f3d77c">popupActive</a>) {</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#abe6533d03566869716a0fe0fdc34f0bf">startEditMode</a>(e);</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;                        }</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;                  }},</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;            {{<span class="stringliteral">&quot;select-similar&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;                  <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#a38ebdcd0c523014365b5c0855f9e3d80">isSingle</a>()) {</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;                        <a class="code" href="classMs_1_1Element.html">Element</a>* e = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#abf55316b1de3db4e71efba968ec280f6">element</a>();</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;                        <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;selectSimilar(e, <span class="keyword">false</span>);</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;                        }</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;                  }},</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;            {{<span class="stringliteral">&quot;select-similar-staff&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;                  <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#a38ebdcd0c523014365b5c0855f9e3d80">isSingle</a>()) {</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;                        <a class="code" href="classMs_1_1Element.html">Element</a>* e = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#abf55316b1de3db4e71efba968ec280f6">element</a>();</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;                        <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;selectSimilar(e, <span class="keyword">true</span>);</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;                        }</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;                  }},</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;            {{<span class="stringliteral">&quot;select-dialog&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;                  <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#a38ebdcd0c523014365b5c0855f9e3d80">isSingle</a>()) {</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;                        <a class="code" href="classMs_1_1Element.html">Element</a>* e = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#abf55316b1de3db4e71efba968ec280f6">element</a>();</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;                        <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;selectElementDialog(e);</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;                        }</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;                  }},</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;      <span class="comment">//      {{&quot;find&quot;}, [](ScoreView* cv, const QByteArray&amp;) {</span></div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;      <span class="comment">//            ; // TODO:state         sm-&gt;postEvent(new CommandEvent(cmd));</span></div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;      <span class="comment">//            }},</span></div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;            {{<span class="stringliteral">&quot;scr-prev&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a2fc591b6529db05c03da165588a0d533">screenPrev</a>();</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;                  }},</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;            {{<span class="stringliteral">&quot;scr-next&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a230edc68abde8030cbea26c1436e0c65">screenNext</a>();</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;                  }},</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;            {{<span class="stringliteral">&quot;page-prev&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#afef24f41f99ba313d20ff8187e4d5232">pagePrev</a>();</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;                  }},</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;            {{<span class="stringliteral">&quot;page-next&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#abad632b129432186a9b5c84b3ef096f3">pageNext</a>();</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;                  }},</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;            {{<span class="stringliteral">&quot;page-top&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ab6a68eed7d8a3a5cb2fc2b2bdadcedda">pageTop</a>();</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;                  }},</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;            {{<span class="stringliteral">&quot;page-end&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a978708122185fbb15bb9a6cae3f18681">pageEnd</a>();</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;                  }},</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;            {{<span class="stringliteral">&quot;select-next-chord&quot;</span>,</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;              <span class="stringliteral">&quot;select-prev-chord&quot;</span>,</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;              <span class="stringliteral">&quot;select-next-measure&quot;</span>,</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;              <span class="stringliteral">&quot;select-prev-measure&quot;</span>,</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;              <span class="stringliteral">&quot;select-begin-line&quot;</span>,</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;              <span class="stringliteral">&quot;select-end-line&quot;</span>,</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;              <span class="stringliteral">&quot;select-begin-score&quot;</span>,</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;              <span class="stringliteral">&quot;select-end-score&quot;</span>,</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;              <span class="stringliteral">&quot;select-staff-above&quot;</span>,</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;              <span class="stringliteral">&quot;select-staff-below&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp; cmd) {</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;                  <a class="code" href="classMs_1_1Element.html">Element</a>* el = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a64bcbb3dbfc6a89701c5c2d560d6fff2">selectMove</a>(cmd);</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;                  <span class="keywordflow">if</span> (el)</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#abb85c34d7002f2f9bd49bb57e6afd689">adjustCanvasPosition</a>(el, <span class="keyword">false</span>);</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afe065fc6ab404a52234aa463aa3ed8c3">setPlayChord</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a34b7ca83b68623778f5668c03b64ee35">updateAll</a>();</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;                  }},</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;            {{<span class="stringliteral">&quot;next-chord&quot;</span>,</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;              <span class="stringliteral">&quot;prev-chord&quot;</span>,</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;              <span class="stringliteral">&quot;next-track&quot;</span>,</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;              <span class="stringliteral">&quot;prev-track&quot;</span>,</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;              <span class="stringliteral">&quot;next-measure&quot;</span>,</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;              <span class="stringliteral">&quot;prev-measure&quot;</span>,</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;              <span class="stringliteral">&quot;next-system&quot;</span>,</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;              <span class="stringliteral">&quot;prev-system&quot;</span>,</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;              <span class="stringliteral">&quot;next-frame&quot;</span>,</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;              <span class="stringliteral">&quot;prev-frame&quot;</span>,</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;              <span class="stringliteral">&quot;next-section&quot;</span>,</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;              <span class="stringliteral">&quot;prev-section&quot;</span>,</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;              <span class="stringliteral">&quot;empty-trailing-measure&quot;</span>,</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;              <span class="stringliteral">&quot;top-staff&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp; cmd) {</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;                  <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#a575e251b4d2315e53a2ad9a6c51b0c59">isLocked</a>()) {</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;                        <a class="code" href="avslog_8h.html#a90284ee45bce6d3f26e10946dd622af1">LOGW</a>() &lt;&lt; <span class="stringliteral">&quot;unable exec cmd: &quot;</span> &lt;&lt; cmd &lt;&lt; <span class="stringliteral">&quot;, selection locked, reason: &quot;</span> &lt;&lt; cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#a53446bcb1fe1977d950cd066df8edece">lockReason</a>();</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;                        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;                        }</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;                  <a class="code" href="classMs_1_1Element.html">Element</a>* el = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#abf55316b1de3db4e71efba968ec280f6">element</a>();</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;                  <span class="keywordflow">if</span> (el &amp;&amp; (el-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a979b6e1bc10cf790e755aa8641feb4cf">isTextBase</a>())) {</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a687f074b331fe27ebec4b4d596f91e0e">startCmd</a>();</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;                        <span class="keyword">const</span> <a class="code" href="namespaceMs.html#a56785a0f227cf3d1d0a4891656a35daa">PropertyFlags</a> pf = <a class="code" href="namespaceMs.html#a56785a0f227cf3d1d0a4891656a35daaa2816296dc4ec68b74aa2aa62cfe49e21">PropertyFlags::UNSTYLED</a>;</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;                        <span class="keywordflow">if</span> (cmd == <span class="stringliteral">&quot;prev-chord&quot;</span>)</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;                              el-&gt;<a class="code" href="classMs_1_1Element.html#ab3227faba09a745523ba6748d9f94ab5">undoChangeProperty</a>(<a class="code" href="namespaceMs.html#aa0f871cf8181cec31d68d20a39010655a1b8a8605d2ff5670a215e55c6645e0d9">Pid::OFFSET</a>, el-&gt;<a class="code" href="classMs_1_1Element.html#a2ba48a5bec00a30fe829a9e6e477d1d0">offset</a>() - QPointF (<a class="code" href="classMs_1_1MScore.html#a8df15d21836a82f3655265f5a8b5e2ad">MScore::nudgeStep</a> * el-&gt;<a class="code" href="classMs_1_1Element.html#a9f375d79304c4cec5b45ea883c9efc86">spatium</a>(), 0.0), pf);</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd == <span class="stringliteral">&quot;next-chord&quot;</span>)</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;                              el-&gt;<a class="code" href="classMs_1_1Element.html#ab3227faba09a745523ba6748d9f94ab5">undoChangeProperty</a>(<a class="code" href="namespaceMs.html#aa0f871cf8181cec31d68d20a39010655a1b8a8605d2ff5670a215e55c6645e0d9">Pid::OFFSET</a>, el-&gt;<a class="code" href="classMs_1_1Element.html#a2ba48a5bec00a30fe829a9e6e477d1d0">offset</a>() + QPointF (<a class="code" href="classMs_1_1MScore.html#a8df15d21836a82f3655265f5a8b5e2ad">MScore::nudgeStep</a> * el-&gt;<a class="code" href="classMs_1_1Element.html#a9f375d79304c4cec5b45ea883c9efc86">spatium</a>(), 0.0), pf);</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd == <span class="stringliteral">&quot;prev-measure&quot;</span>)</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;                              el-&gt;<a class="code" href="classMs_1_1Element.html#ab3227faba09a745523ba6748d9f94ab5">undoChangeProperty</a>(<a class="code" href="namespaceMs.html#aa0f871cf8181cec31d68d20a39010655a1b8a8605d2ff5670a215e55c6645e0d9">Pid::OFFSET</a>, el-&gt;<a class="code" href="classMs_1_1Element.html#a2ba48a5bec00a30fe829a9e6e477d1d0">offset</a>() - QPointF (<a class="code" href="classMs_1_1MScore.html#a69bdf5fa192ef7ce156a07497e67cda1">MScore::nudgeStep10</a> * el-&gt;<a class="code" href="classMs_1_1Element.html#a9f375d79304c4cec5b45ea883c9efc86">spatium</a>(), 0.0), pf);</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd == <span class="stringliteral">&quot;next-measure&quot;</span>)</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;                              el-&gt;<a class="code" href="classMs_1_1Element.html#ab3227faba09a745523ba6748d9f94ab5">undoChangeProperty</a>(<a class="code" href="namespaceMs.html#aa0f871cf8181cec31d68d20a39010655a1b8a8605d2ff5670a215e55c6645e0d9">Pid::OFFSET</a>, el-&gt;<a class="code" href="classMs_1_1Element.html#a2ba48a5bec00a30fe829a9e6e477d1d0">offset</a>() + QPointF (<a class="code" href="classMs_1_1MScore.html#a69bdf5fa192ef7ce156a07497e67cda1">MScore::nudgeStep10</a> * el-&gt;<a class="code" href="classMs_1_1Element.html#a9f375d79304c4cec5b45ea883c9efc86">spatium</a>(), 0.0), pf);</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#ae629bd6513248811b5c7823836982ee8">endCmd</a>();</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;                        }</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;                  <span class="keywordflow">else</span> {</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;                        <a class="code" href="classMs_1_1Element.html">Element</a>* ele = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a229ec32c64e743ef265e720ac0c44df3">move</a>(cmd);</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;                        <span class="keywordflow">if</span> (cmd == <span class="stringliteral">&quot;empty-trailing-measure&quot;</span>)</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;                              cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ae8b0b20a69a6cf9d2ba89e03158d4671">changeState</a>(<a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a6dff4f0bcb369949446e0f3400db6d5c">ViewState::NOTE_ENTRY</a>);</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;                        <span class="keywordflow">if</span> (ele)</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;                              cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#abb85c34d7002f2f9bd49bb57e6afd689">adjustCanvasPosition</a>(ele, <span class="keyword">false</span>);</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afe065fc6ab404a52234aa463aa3ed8c3">setPlayChord</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a34b7ca83b68623778f5668c03b64ee35">updateAll</a>();</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;                        }</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;                  }},</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;            {{<span class="stringliteral">&quot;pitch-up-diatonic&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a7c6f99b935e5d58e642250d876d5ec55">upDown</a>(<span class="keyword">true</span>, <a class="code" href="namespaceMs.html#aa56d24b082133246f25b43b7bef7f959af3fb4b2c999493d3d65c2377e47c0fee">UpDownMode::DIATONIC</a>);</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;                  }},</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;            {{<span class="stringliteral">&quot;pitch-down-diatonic&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a7c6f99b935e5d58e642250d876d5ec55">upDown</a>(<span class="keyword">false</span>, <a class="code" href="namespaceMs.html#aa56d24b082133246f25b43b7bef7f959af3fb4b2c999493d3d65c2377e47c0fee">UpDownMode::DIATONIC</a>);</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;                  }},</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;            {{<span class="stringliteral">&quot;move-up&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray) {</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;                  QList&lt;Element*&gt; el = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#a10222c86689ca16007f4cd453cad3080">uniqueElements</a>();</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;                  <span class="keywordflow">foreach</span> (<a class="code" href="classMs_1_1Element.html">Element</a>* e, el) {</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;                        <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;                        <span class="keywordflow">if</span> (e-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#aeccc894c5a64aba67bbfaf8fe1b755d5a10de4bc81f754b19b0d27246a0589c05">ElementType::NOTE</a>)</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;                              cr = static_cast&lt;Note*&gt;(e)-&gt;chord();</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (e-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#a28863123e439c88c35086eb7dd963c9aa50780f47f6839d47d60bc4555ee00c3f">ElementType::REST</a>)</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;                              cr = static_cast&lt;Rest*&gt;(e);</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;                        <span class="keywordflow">if</span> (cr)</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;                              cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a42bc8186d9c05767fcc585b4e0b8eb5a">moveUp</a>(cr);</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;                        }</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;                  }},</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;            {{<span class="stringliteral">&quot;move-down&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;                  QList&lt;Element*&gt; el = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#a10222c86689ca16007f4cd453cad3080">uniqueElements</a>();</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;                  <span class="keywordflow">foreach</span> (<a class="code" href="classMs_1_1Element.html">Element</a>* e, el) {</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;                        <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;                        <span class="keywordflow">if</span> (e-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#aeccc894c5a64aba67bbfaf8fe1b755d5a10de4bc81f754b19b0d27246a0589c05">ElementType::NOTE</a>)</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;                              cr = static_cast&lt;Note*&gt;(e)-&gt;chord();</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (e-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#a28863123e439c88c35086eb7dd963c9aa50780f47f6839d47d60bc4555ee00c3f">ElementType::REST</a>)</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;                              cr = static_cast&lt;Rest*&gt;(e);</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;                        <span class="keywordflow">if</span> (cr)</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;                              cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a7d7f12f78fa77fa82109180eb8aeec00">moveDown</a>(cr);</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;                        }</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;                  }},</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;            {{<span class="stringliteral">&quot;up-chord&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;                  <a class="code" href="classMs_1_1Element.html">Element</a>* el = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#abf55316b1de3db4e71efba968ec280f6">element</a>();</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;                  <a class="code" href="classMs_1_1Element.html">Element</a>* oel = el;</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;                  <span class="keywordflow">if</span> (el &amp;&amp; (el-&gt;isNote() || el-&gt;isRest()))</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a44222486dab8ce9252cff7a089a42e86">cmdGotoElement</a>(cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#ad3571dd2769ff183c2beba6f7cdb3313">upAlt</a>(el));</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;                  el = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#abf55316b1de3db4e71efba968ec280f6">element</a>();</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;                  <span class="keywordflow">while</span> (el &amp;&amp; el-&gt;isRest() &amp;&amp; <a class="code" href="namespaceMs.html#aa7be8d92b4d54a840e62a3cd6dcfb08c">toRest</a>(el)-&gt;<a class="code" href="classMs_1_1Rest.html#ac3e5421836f4d0788e1b0abb44d860b1">isGap</a>()) {</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;                        <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#ad3571dd2769ff183c2beba6f7cdb3313">upAlt</a>(el) == el) {</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;                              cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a44222486dab8ce9252cff7a089a42e86">cmdGotoElement</a>(oel);</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;                              <span class="keywordflow">break</span>;</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;                              }</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;                        el = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#ad3571dd2769ff183c2beba6f7cdb3313">upAlt</a>(el);</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a44222486dab8ce9252cff7a089a42e86">cmdGotoElement</a>(el);</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;                        }</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;                  }},</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;            {{<span class="stringliteral">&quot;down-chord&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;                  <a class="code" href="classMs_1_1Element.html">Element</a>* el = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#abf55316b1de3db4e71efba968ec280f6">element</a>();</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;                  <a class="code" href="classMs_1_1Element.html">Element</a>* oel = el;</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;                  <span class="keywordflow">if</span> (el &amp;&amp; (el-&gt;isNote() || el-&gt;isRest()))</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a44222486dab8ce9252cff7a089a42e86">cmdGotoElement</a>(cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#ab88c19ed2126343d40f3a118d71a2bd2">downAlt</a>(el));</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;                  el = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#abf55316b1de3db4e71efba968ec280f6">element</a>();</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;                  <span class="keywordflow">while</span> (el &amp;&amp; el-&gt;isRest() &amp;&amp; <a class="code" href="namespaceMs.html#aa7be8d92b4d54a840e62a3cd6dcfb08c">toRest</a>(el)-&gt;<a class="code" href="classMs_1_1Rest.html#ac3e5421836f4d0788e1b0abb44d860b1">isGap</a>()) {</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;                        <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#ab88c19ed2126343d40f3a118d71a2bd2">downAlt</a>(el) == el) {</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;                              cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a44222486dab8ce9252cff7a089a42e86">cmdGotoElement</a>(oel);</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;                              <span class="keywordflow">break</span>;</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;                              }</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;                        el = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#ab88c19ed2126343d40f3a118d71a2bd2">downAlt</a>(el);</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a44222486dab8ce9252cff7a089a42e86">cmdGotoElement</a>(el);</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;                        }</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;                  }},</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;            {{<span class="stringliteral">&quot;top-chord&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;                  <a class="code" href="classMs_1_1Element.html">Element</a>* el = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#abf55316b1de3db4e71efba968ec280f6">element</a>();</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;                  <span class="keywordflow">if</span> (el &amp;&amp; el-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#aeccc894c5a64aba67bbfaf8fe1b755d5a10de4bc81f754b19b0d27246a0589c05">ElementType::NOTE</a>)</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a44222486dab8ce9252cff7a089a42e86">cmdGotoElement</a>(cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a139c3b3e2e59f504eb23157f2bcec731">upAltCtrl</a>(static_cast&lt;Note*&gt;(el)));</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;                  }},</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;            {{<span class="stringliteral">&quot;bottom-chord&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;                  <a class="code" href="classMs_1_1Element.html">Element</a>* el = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#abf55316b1de3db4e71efba968ec280f6">element</a>();</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;                  <span class="keywordflow">if</span> (el &amp;&amp; el-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#aeccc894c5a64aba67bbfaf8fe1b755d5a10de4bc81f754b19b0d27246a0589c05">ElementType::NOTE</a>)</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a44222486dab8ce9252cff7a089a42e86">cmdGotoElement</a>(cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a10b3dcb51582bccbc41e61a39df811df">downAltCtrl</a>(static_cast&lt;Note*&gt;(el)));</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;                  }},</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;            {{<span class="stringliteral">&quot;next-segment-element&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;                  <a class="code" href="classMs_1_1Element.html">Element</a>* el = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#abf55316b1de3db4e71efba968ec280f6">element</a>();</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;                  <span class="keywordflow">if</span> (!el &amp;&amp; !cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#aabf6157f4dbda5a9b86a9c4cae8c167f">elements</a>().isEmpty() )</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;                      el = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#aabf6157f4dbda5a9b86a9c4cae8c167f">elements</a>().first();</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;                  <span class="keywordflow">if</span> (el)</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a44222486dab8ce9252cff7a089a42e86">cmdGotoElement</a>(el-&gt;<a class="code" href="classMs_1_1Element.html#ad5e377ed9b055434956aa3ee92a3b3a9">nextSegmentElement</a>());</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;                  <span class="keywordflow">else</span></div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a44222486dab8ce9252cff7a089a42e86">cmdGotoElement</a>(cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a07d03c1fad7a5d7fa419725726674086">firstElement</a>());</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;                  }},</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;            {{<span class="stringliteral">&quot;prev-segment-element&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;                  <a class="code" href="classMs_1_1Element.html">Element</a>* el = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#abf55316b1de3db4e71efba968ec280f6">element</a>();</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;                  <span class="keywordflow">if</span> (!el &amp;&amp; !cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#aabf6157f4dbda5a9b86a9c4cae8c167f">elements</a>().isEmpty())</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;                      el = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#aabf6157f4dbda5a9b86a9c4cae8c167f">elements</a>().last();</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;                  <span class="keywordflow">if</span> (el)</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a44222486dab8ce9252cff7a089a42e86">cmdGotoElement</a>(el-&gt;<a class="code" href="classMs_1_1Element.html#a31599e271170912967669cfddd1e49b4">prevSegmentElement</a>());</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;                  <span class="keywordflow">else</span></div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a44222486dab8ce9252cff7a089a42e86">cmdGotoElement</a>(cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#ada1e6822ac83e28e36b73c8e4a589fa4">lastElement</a>());</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;                  }},</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;            {{<span class="stringliteral">&quot;next-element&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;                  <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a5669436c1fd4244ffcd9483ae0f14303">editMode</a>()) {</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#aa585cd70b6ca2bf1654e0af4de552ec6">textTab</a>(<span class="keyword">false</span>);</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;                        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;                        }</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;                  <a class="code" href="classMs_1_1Element.html">Element</a>* el = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#abf55316b1de3db4e71efba968ec280f6">element</a>();</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;                  <span class="keywordflow">if</span> (!el &amp;&amp; !cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#aabf6157f4dbda5a9b86a9c4cae8c167f">elements</a>().isEmpty() )</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;                      el = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#aabf6157f4dbda5a9b86a9c4cae8c167f">elements</a>().first();</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;                  <span class="keywordflow">if</span> (!el) {</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;                        <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#a2a7b60d5638a66f4a990d3122dcc234d">currentCR</a>();</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;                        <span class="keywordflow">if</span> (cr) {</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;                              <span class="keywordflow">if</span> (cr-&gt;isChord())</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;                                    el = toChord(cr)-&gt;downNote();</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;                              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cr-&gt;isRest())</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;                                    el = cr;</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;                              cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#aa3b85eb58a8f7f4476fbd05b59253585">select</a>(el);</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;                              }</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;                        }</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;                  <span class="keywordflow">if</span> (el)</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a44222486dab8ce9252cff7a089a42e86">cmdGotoElement</a>(cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a2d7629bfb31d6b8ff03f435eca80ebe8">nextElement</a>());</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;                  <span class="keywordflow">else</span></div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a44222486dab8ce9252cff7a089a42e86">cmdGotoElement</a>(cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a07d03c1fad7a5d7fa419725726674086">firstElement</a>());</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;                  }},</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;            {{<span class="stringliteral">&quot;prev-element&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;                  <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a5669436c1fd4244ffcd9483ae0f14303">editMode</a>()) {</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#aa585cd70b6ca2bf1654e0af4de552ec6">textTab</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;                        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;                        }</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;                  <a class="code" href="classMs_1_1Element.html">Element</a>* el = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#abf55316b1de3db4e71efba968ec280f6">element</a>();</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;                  <span class="keywordflow">if</span> (!el &amp;&amp; !cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#aabf6157f4dbda5a9b86a9c4cae8c167f">elements</a>().isEmpty())</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;                      el = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#aabf6157f4dbda5a9b86a9c4cae8c167f">elements</a>().last();</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;                  <span class="keywordflow">if</span> (!el) {</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;                        <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#a2a7b60d5638a66f4a990d3122dcc234d">currentCR</a>();</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;                        <span class="keywordflow">if</span> (cr) {</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;                              <span class="keywordflow">if</span> (cr-&gt;isChord())</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;                                    el = toChord(cr)-&gt;upNote();</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;                              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cr-&gt;isRest())</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;                                    el = cr;</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;                              cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#aa3b85eb58a8f7f4476fbd05b59253585">select</a>(el);</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;                              }</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;                        }</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;                  <span class="keywordflow">if</span> (el)</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a44222486dab8ce9252cff7a089a42e86">cmdGotoElement</a>(cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a7652f9571dcfccf70cfd2c14e4531c5b">prevElement</a>());</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;                  <span class="keywordflow">else</span></div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a44222486dab8ce9252cff7a089a42e86">cmdGotoElement</a>(cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#ada1e6822ac83e28e36b73c8e4a589fa4">lastElement</a>());</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;                  }},</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;            {{<span class="stringliteral">&quot;first-element&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a44222486dab8ce9252cff7a089a42e86">cmdGotoElement</a>(cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a07d03c1fad7a5d7fa419725726674086">firstElement</a>(<span class="keyword">false</span>));</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;                  }},</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;            {{<span class="stringliteral">&quot;last-element&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a44222486dab8ce9252cff7a089a42e86">cmdGotoElement</a>(cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#ada1e6822ac83e28e36b73c8e4a589fa4">lastElement</a>(<span class="keyword">false</span>));</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;                  }},</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;            {{<span class="stringliteral">&quot;get-location&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;                  <span class="comment">// get current selection</span></div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;                  <a class="code" href="classMs_1_1Element.html">Element</a>* e = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#abf55316b1de3db4e71efba968ec280f6">element</a>();</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;                  <span class="keywordflow">if</span> (!e) {</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;                        <span class="comment">// no current selection - restore lost selection</span></div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;                        e = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#a2a7b60d5638a66f4a990d3122dcc234d">currentCR</a>();</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;                        <span class="keywordflow">if</span> (e &amp;&amp; e-&gt;isChord())</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;                              e = toChord(e)-&gt;upNote();</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;                        }</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;                  <span class="keywordflow">if</span> (!e) {</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;                        <span class="comment">// no current or last selection - fall back to first element</span></div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;                        e = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a07d03c1fad7a5d7fa419725726674086">firstElement</a>(<span class="keyword">false</span>);</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;                        }</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;                  <span class="comment">// TODO: find &amp; read current key &amp; time signatures</span></div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;                  <span class="keywordflow">if</span> (e) {</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;                        <a class="code" href="classMs_1_1ScoreAccessibility.html#ae738485b5f6979cd0f41ca231a6bea12">ScoreAccessibility::instance</a>()-&gt;<a class="code" href="classMs_1_1ScoreAccessibility.html#ab599dd1d2ea8a07138e0d34e46abe4bb">clearAccessibilityInfo</a>();</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a44222486dab8ce9252cff7a089a42e86">cmdGotoElement</a>(e);</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;                        }</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;                  }},</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;            {{<span class="stringliteral">&quot;playback-position&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;                  <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr { <span class="keyword">nullptr</span> };</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;                  <a class="code" href="classMs_1_1Element.html">Element</a>* el { <span class="keyword">nullptr</span> };</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;                  <span class="keywordtype">int</span> currentTrack = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a3606ad504a055013fd8c9867b2f2f146">getSelectedElement</a>() ?</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;                                     cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a3606ad504a055013fd8c9867b2f2f146">getSelectedElement</a>()-&gt;<a class="code" href="classMs_1_1Element.html#ab4986d1b4f0d45b8e84cf52c46885c36">track</a>() : 0;</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;                  currentTrack = (currentTrack &gt;= 0) ? currentTrack : 0;</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;                  <span class="keyword">auto</span> considerAllTracks { <span class="keyword">true</span> }; <span class="comment">// True : Consider all tracks instead of only voice-1 of first instrument</span></div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;                  <span class="keyword">auto</span> next { <span class="keyword">false</span> };             <span class="comment">// False: Get current (rather than next) segment of playback cursor</span></div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;                  <span class="keyword">auto</span> cursorPosition = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a0ce7ea8d2a58e47e21e61798593e7284">repeatList</a>().<a class="code" href="classMs_1_1RepeatList.html#a85c9f5c6573154f1749e31f09432ccc1">tick2utick</a>(cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#ab9d683de661febe9ad00ae37f7cd5012">playPos</a>().<a class="code" href="classMs_1_1Fraction.html#a1d92a73ce7f9b7f895a9a083f6fe1eb2">ticks</a>());</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;                  <a class="code" href="classMs_1_1Fraction.html">Fraction</a> frac { <a class="code" href="classMs_1_1Fraction.html#a63e242155373d30a2de43750ea718368">Fraction::fromTicks</a>(cursorPosition) };</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;                  <a class="code" href="classMs_1_1Segment.html">Segment</a>* seg = next ? cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a1147e4dd0925960bd9ebf8124c2b5d7a">tick2rightSegment</a>(frac, <span class="keyword">false</span>) : cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a3a1c7e250183ca12912b4df157df6bc6">tick2leftSegment</a>(frac, <span class="keyword">false</span>);</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;                  <span class="keywordflow">if</span> (seg) {</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;                        <span class="keywordflow">if</span> (seg-&gt;<a class="code" href="classMs_1_1Segment.html#a12875266ecd46db59c8ba3a12857c944">isChordRestType</a>()) {</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;                              <span class="keywordflow">if</span> ((cr = seg-&gt;<a class="code" href="classMs_1_1Segment.html#a9adaf3b1b191b949ca562d891c4c5a49">cr</a>(currentTrack)))</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;                                    el = cr;</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;                              <span class="keywordflow">else</span> {</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;                                    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> t = 0; t &lt; cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#aa7ea8f4f050ba44ed0cf95ad4f5d3c06">ntracks</a>(); t++) {</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;                                          <span class="keywordflow">if</span> ((cr = seg-&gt;<a class="code" href="classMs_1_1Segment.html#a9adaf3b1b191b949ca562d891c4c5a49">cr</a>(t))) {</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;                                                el = cr;</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;                                                <span class="keywordflow">break</span>;</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;                                                }</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;                                          }</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;                                    }</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;                              }</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;                        <span class="keywordflow">else</span> {</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;                              <span class="comment">// Cycle through tracks if no CR* found</span></div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;                              <span class="keywordflow">if</span> (considerAllTracks) {</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;                                    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> t = 0; t &lt; cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#aa7ea8f4f050ba44ed0cf95ad4f5d3c06">ntracks</a>(); t++) {</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;                                          <span class="keywordflow">if</span> ((cr = seg-&gt;<a class="code" href="classMs_1_1Segment.html#a9adaf3b1b191b949ca562d891c4c5a49">cr</a>(t))) {</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;                                                el = cr;</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;                                                <span class="keywordflow">break</span>;</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;                                                }</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;                                          }</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;                                    }</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;                              <span class="comment">// If still nothing found, get next CR*</span></div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;                              <span class="keywordflow">else</span> el = seg-&gt;<a class="code" href="classMs_1_1Segment.html#a9f84e65ea1cc200227a75b058ab8e8d8">nextChordRest</a>(0, <span class="keyword">false</span>);</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;                              }</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;                        }</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;                  <span class="keywordflow">if</span> (el) {</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;                        <span class="keywordflow">if</span> (el-&gt;isChord())</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;                              el = toChord(el)-&gt;upNote();</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a44222486dab8ce9252cff7a089a42e86">cmdGotoElement</a>(el);</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;                        }</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;                  }},</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;            {{<span class="stringliteral">&quot;rest&quot;</span>, <span class="stringliteral">&quot;rest-TAB&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#adb795730e534b4d78e99c5139be9a95f">cmdEnterRest</a>();</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;                  }},</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;            {{<span class="stringliteral">&quot;rest-1&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#adb795730e534b4d78e99c5139be9a95f">cmdEnterRest</a>(<a class="code" href="classMs_1_1TDuration.html">TDuration</a>(<a class="code" href="classMs_1_1TDuration.html#ad9263bf173856b77421e83a48a7bf68ca68a1baf6d6e825773e6dc8cdaf7b1dba">TDuration::DurationType::V_WHOLE</a>));</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;                  }},</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;            {{<span class="stringliteral">&quot;rest-2&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#adb795730e534b4d78e99c5139be9a95f">cmdEnterRest</a>(<a class="code" href="classMs_1_1TDuration.html">TDuration</a>(<a class="code" href="classMs_1_1TDuration.html#ad9263bf173856b77421e83a48a7bf68cac5f539d8ae1a90e7d2c1489ae20048dc">TDuration::DurationType::V_HALF</a>));</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;                  }},</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;            {{<span class="stringliteral">&quot;rest-4&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#adb795730e534b4d78e99c5139be9a95f">cmdEnterRest</a>(<a class="code" href="classMs_1_1TDuration.html">TDuration</a>(<a class="code" href="classMs_1_1TDuration.html#ad9263bf173856b77421e83a48a7bf68ca05e8f1c139e16d278117c17e7fc13ef6">TDuration::DurationType::V_QUARTER</a>));</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;                  }},</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;            {{<span class="stringliteral">&quot;rest-8&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#adb795730e534b4d78e99c5139be9a95f">cmdEnterRest</a>(<a class="code" href="classMs_1_1TDuration.html">TDuration</a>(<a class="code" href="classMs_1_1TDuration.html#ad9263bf173856b77421e83a48a7bf68caedb942968b04a93a934e1e7300694ed5">TDuration::DurationType::V_EIGHTH</a>));</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;                  }},</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;            {{<span class="stringliteral">&quot;interval1&quot;</span>,</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;              <span class="stringliteral">&quot;interval2&quot;</span>, <span class="stringliteral">&quot;interval-2&quot;</span>,</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;              <span class="stringliteral">&quot;interval3&quot;</span>, <span class="stringliteral">&quot;interval-3&quot;</span>,</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;              <span class="stringliteral">&quot;interval4&quot;</span>, <span class="stringliteral">&quot;interval-4&quot;</span>,</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;              <span class="stringliteral">&quot;interval5&quot;</span>, <span class="stringliteral">&quot;interval-5&quot;</span>,</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;              <span class="stringliteral">&quot;interval6&quot;</span>, <span class="stringliteral">&quot;interval-6&quot;</span>,</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;              <span class="stringliteral">&quot;interval7&quot;</span>, <span class="stringliteral">&quot;interval-7&quot;</span>,</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;              <span class="stringliteral">&quot;interval8&quot;</span>, <span class="stringliteral">&quot;interval-8&quot;</span>,</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;              <span class="stringliteral">&quot;interval9&quot;</span>, <span class="stringliteral">&quot;interval-9&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp; cmd) {</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;                  <span class="keywordtype">int</span> n = cmd.mid(8).toInt();</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;                  std::vector&lt;Note*&gt; nl;</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;                  <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#a884ac586a99a211a55eab115a2c3d95f">isRange</a>()) {</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;                        <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr : cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a45f203d4720642f1765b382b237d51b8">getSelectedChordRests</a>()) {</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;                              <span class="keywordflow">if</span> (cr-&gt;isChord())</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;                                    nl.push_back(n &gt; 0 ? toChord(cr)-&gt;upNote() : toChord(cr)-&gt;downNote());</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;                              }</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;                        }</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;                  <span class="keywordflow">else</span> {</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;                        nl = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#acb1497cbea90aadadfdfe9d21067e878">noteList</a>();</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;                        }</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;                  <span class="keywordflow">if</span> (!nl.empty()) {</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;                        <span class="comment">//if (!noteEntryMode())</span></div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;                        <span class="comment">//      ;     // TODO: state    sm-&gt;postEvent(new CommandEvent(&quot;note-input&quot;));</span></div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a3a7ad4b062f625d9f7192c335ddfe289">cmdAddInterval</a>(n, nl);</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;                        }</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;                  }},</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;            {{<span class="stringliteral">&quot;tie&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;                  <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a766fb53e10ee7e2ef96a0140e4163538">noteEntryMode</a>()) {</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a85103aa981859b10e793eb03d5216afe">cmdAddTie</a>();</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a232d837eb35d66b42561d349d5716117">moveCursor</a>();</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;                        }</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;                  <span class="keywordflow">else</span></div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a8351cb8cbffdb4381de1f7dd34fe3dfa">cmdToggleTie</a>();</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;                  }},</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;            {{<span class="stringliteral">&quot;chord-tie&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a85103aa981859b10e793eb03d5216afe">cmdAddTie</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a232d837eb35d66b42561d349d5716117">moveCursor</a>();</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;                  }},</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;            {{<span class="stringliteral">&quot;duplet&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ab95eddf0f09e0b3e6e669ed12031d4d2">cmdTuplet</a>(2);</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;                  }},</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;            {{<span class="stringliteral">&quot;triplet&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ab95eddf0f09e0b3e6e669ed12031d4d2">cmdTuplet</a>(3);</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;                  }},</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;            {{<span class="stringliteral">&quot;quadruplet&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ab95eddf0f09e0b3e6e669ed12031d4d2">cmdTuplet</a>(4);</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;                  }},</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;            {{<span class="stringliteral">&quot;quintuplet&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ab95eddf0f09e0b3e6e669ed12031d4d2">cmdTuplet</a>(5);</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;                  }},</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;            {{<span class="stringliteral">&quot;sextuplet&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ab95eddf0f09e0b3e6e669ed12031d4d2">cmdTuplet</a>(6);</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;                  }},</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;            {{<span class="stringliteral">&quot;septuplet&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ab95eddf0f09e0b3e6e669ed12031d4d2">cmdTuplet</a>(7);</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;                  }},</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;            {{<span class="stringliteral">&quot;octuplet&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ab95eddf0f09e0b3e6e669ed12031d4d2">cmdTuplet</a>(8);</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;                  }},</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;            {{<span class="stringliteral">&quot;nonuplet&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ab95eddf0f09e0b3e6e669ed12031d4d2">cmdTuplet</a>(9);</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;                  }},</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;            {{<span class="stringliteral">&quot;tuplet-dialog&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a687f074b331fe27ebec4b4d596f91e0e">startCmd</a>();</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;                  <a class="code" href="classMs_1_1Tuplet.html">Tuplet</a>* tuplet = <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;tupletDialog();</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;                  <span class="keywordflow">if</span> (tuplet)</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#aa157659e972829e263e8835c3df4c931">cmdCreateTuplet</a>(cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#af5e6bac5107fc313d59d07c8dbe28dfe">getSelectedChordRest</a>(), tuplet);</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#ae629bd6513248811b5c7823836982ee8">endCmd</a>();</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a232d837eb35d66b42561d349d5716117">moveCursor</a>();</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;                  }},</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;            {{<span class="stringliteral">&quot;repeat-sel&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a4dbc7c19c3ea32d3542dabfcba5ba30f">cmdRepeatSelection</a>();</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;                  }},</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;            {{<span class="stringliteral">&quot;voice-1&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#aa9f1f9e5918591039639de8d4d56e4cf">changeVoice</a>(0);</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;                  }},</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;            {{<span class="stringliteral">&quot;voice-2&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#aa9f1f9e5918591039639de8d4d56e4cf">changeVoice</a>(1);</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;                  }},</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;            {{<span class="stringliteral">&quot;voice-3&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray) {</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#aa9f1f9e5918591039639de8d4d56e4cf">changeVoice</a>(2);</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;                  }},</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;            {{<span class="stringliteral">&quot;voice-4&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#aa9f1f9e5918591039639de8d4d56e4cf">changeVoice</a>(3);</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;                  }},</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;            {{<span class="stringliteral">&quot;enh-both&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a5957ec3c53b8631677b3ec5640648aa5">cmdChangeEnharmonic</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;                  }},</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;            {{<span class="stringliteral">&quot;enh-current&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a5957ec3c53b8631677b3ec5640648aa5">cmdChangeEnharmonic</a>(<span class="keyword">false</span>);</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;                  }},</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;            {{<span class="stringliteral">&quot;revision&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;                  <a class="code" href="classMs_1_1Score.html">Score</a>* sc = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#aac5cfbf34cbd22da196fd31944a260da">masterScore</a>();</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;                  sc-&gt;<a class="code" href="classMs_1_1Score.html#ae429073049b54476891e1ea08ea4f66f">createRevision</a>();</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;                  }},</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;            {{<span class="stringliteral">&quot;append-measure&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a336033b7ff252caa99dca592b20805de">cmdAppendMeasures</a>(1, <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea84e4213ee54478574ea15a166ea10152">ElementType::MEASURE</a>);</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;                  }},</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;            {{<span class="stringliteral">&quot;insert-measure&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;                cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#aab9661da3b01fe82845f0a1c839bede9">cmdInsertMeasures</a>(1, <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea84e4213ee54478574ea15a166ea10152">ElementType::MEASURE</a>);</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;                }},</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;            {{<span class="stringliteral">&quot;insert-hbox&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;                cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#aab9661da3b01fe82845f0a1c839bede9">cmdInsertMeasures</a>(1, <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea2c1e7e81a01ed3fa8c227e344c4f6662">ElementType::HBOX</a>);</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;                }},</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;            {{<span class="stringliteral">&quot;insert-vbox&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;                cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#aab9661da3b01fe82845f0a1c839bede9">cmdInsertMeasures</a>(1, <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea77a3d52d60bccb4c3cd3da2a1779ce51">ElementType::VBOX</a>);</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;                }},</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;            {{<span class="stringliteral">&quot;append-hbox&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;                <a class="code" href="classMs_1_1MeasureBase.html">MeasureBase</a>* mb = cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ad03ba69d6727361b1e148fea06535a95">appendMeasure</a>(<a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea2c1e7e81a01ed3fa8c227e344c4f6662">ElementType::HBOX</a>);</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#aa3b85eb58a8f7f4476fbd05b59253585">select</a>(mb, <a class="code" href="namespaceMs.html#a1066451ad9dc9959bedb76978f4f30c8a0679273e201afd0bf57af3961f8a23b8">SelectType::SINGLE</a>, 0);</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;                  }},</div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;            {{<span class="stringliteral">&quot;append-vbox&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;                <a class="code" href="classMs_1_1MeasureBase.html">MeasureBase</a>* mb = cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ad03ba69d6727361b1e148fea06535a95">appendMeasure</a>(<a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea77a3d52d60bccb4c3cd3da2a1779ce51">ElementType::VBOX</a>);</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#aa3b85eb58a8f7f4476fbd05b59253585">select</a>(mb, <a class="code" href="namespaceMs.html#a1066451ad9dc9959bedb76978f4f30c8a0679273e201afd0bf57af3961f8a23b8">SelectType::SINGLE</a>, 0);</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;                  }},</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;            {{<span class="stringliteral">&quot;insert-textframe&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a18d575f9db6807580ee6cee3b5bb2b72">cmdInsertMeasure</a>(<a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea53e518b6393904e797819c7a941f9ddc">ElementType::TBOX</a>);</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;                  }},</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;            {{<span class="stringliteral">&quot;append-textframe&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;                  <a class="code" href="classMs_1_1MeasureBase.html">MeasureBase</a>* mb = cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ad03ba69d6727361b1e148fea06535a95">appendMeasure</a>(<a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea53e518b6393904e797819c7a941f9ddc">ElementType::TBOX</a>);</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;                  <span class="keywordflow">if</span> (mb) {</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;                        <a class="code" href="classMs_1_1TBox.html">TBox</a>* tf = <span class="keyword">static_cast&lt;</span><a class="code" href="classMs_1_1TBox.html">TBox</a>*<span class="keyword">&gt;</span>(mb);</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;                        <a class="code" href="classMs_1_1Text.html">Text</a>* text = 0;</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;                        <span class="keywordflow">foreach</span>(<a class="code" href="classMs_1_1Element.html">Element</a>* e, tf-&gt;<a class="code" href="classMs_1_1MeasureBase.html#ab0832f1270b77762f3c12758fe22c3c2">el</a>()) {</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;                              <span class="keywordflow">if</span> (e-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#a6b5aa179fb8d7a11ec316c01a2fdf6e1a61a96ffcb251bb9bf0abf8fec19d0ea8">ElementType::TEXT</a>) {</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;                                    text = <span class="keyword">static_cast&lt;</span><a class="code" href="classMs_1_1Text.html">Text</a>*<span class="keyword">&gt;</span>(e);</div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;                                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;                                    }</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;                              }</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;                        <span class="keywordflow">if</span> (text) {</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;                              cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#aa3b85eb58a8f7f4476fbd05b59253585">select</a>(text, <a class="code" href="namespaceMs.html#a1066451ad9dc9959bedb76978f4f30c8a0679273e201afd0bf57af3961f8a23b8">SelectType::SINGLE</a>, 0);</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;                              cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#abe6533d03566869716a0fe0fdc34f0bf">startEditMode</a>(text);</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;                              }</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;                        }</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;                  }},</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;            {{<span class="stringliteral">&quot;insert-fretframe&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;                  <span class="keywordflow">if</span> (!<a class="code" href="namespaceMs.html#a80af7e281899de1319da9691bc9c13bd">enableExperimental</a>)</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;                        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a18d575f9db6807580ee6cee3b5bb2b72">cmdInsertMeasure</a>(<a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea1a34f2a487515f44d55d279dd4f3f2b9">ElementType::FBOX</a>);</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;                  }},</div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;            {{<span class="stringliteral">&quot;move-left&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a1ba0a11fa38c1b9aae97c33e314b1eb2">cmdMoveCR</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;                  }},</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;            {{<span class="stringliteral">&quot;move-right&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a1ba0a11fa38c1b9aae97c33e314b1eb2">cmdMoveCR</a>(<span class="keyword">false</span>);</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;                  }},</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;            {{<span class="stringliteral">&quot;reset&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;                  <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a5669436c1fd4244ffcd9483ae0f14303">editMode</a>()) {</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a64fbe9d2a6d143b1068a61d1eb03eac7">editData</a>.<a class="code" href="classMs_1_1EditData.html#a07230d29679583b1e4e23a7bfa4078ec">element</a>-&gt;<a class="code" href="classMs_1_1Element.html#aaa90bc751111ad8ec041e2004321fbfe">reset</a>();</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afb07851d16c730290086fcf3a32f522c">update</a>();</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;                        }</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;                  <span class="keywordflow">else</span> {</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a687f074b331fe27ebec4b4d596f91e0e">startCmd</a>();</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;                        <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1Element.html">Element</a>* e : cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#aabf6157f4dbda5a9b86a9c4cae8c167f">elements</a>()) {</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;                              e-&gt;reset();</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;                              <span class="keywordflow">if</span> (e-&gt;isSpanner()) {</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;                                    <a class="code" href="classMs_1_1Spanner.html">Spanner</a>* sp = toSpanner(e);</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;                                    <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1SpannerSegment.html">SpannerSegment</a>* ss : sp-&gt;<a class="code" href="classMs_1_1Spanner.html#a821182163a4bfdf98b47121451de6aea">spannerSegments</a>())</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;                                          ss-&gt;reset();</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;                                    }</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;                              }</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#ae629bd6513248811b5c7823836982ee8">endCmd</a>();</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;                        }</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a6f8765f4d1cc3b25d4f9f84fc0cf98a3">updateGrips</a>();</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;                  }},</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;<span class="preprocessor">      #ifdef OMR</span></div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;            {{<span class="stringliteral">&quot;show-omr&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;                  <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#aac5cfbf34cbd22da196fd31944a260da">masterScore</a>()-&gt;<a class="code" href="classMs_1_1MasterScore.html#a8bb5fd596eb01729ba5f47f52c2fc11c">omr</a>())</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a42b6cf66302e9e231aed43340fc8ec74">showOmr</a>(!cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#aac5cfbf34cbd22da196fd31944a260da">masterScore</a>()-&gt;<a class="code" href="classMs_1_1MasterScore.html#ab55f2df03a0cce61e49cf13ec6122840">showOmr</a>());</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;                  }},</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;<span class="preprocessor">      #endif</span></div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;            {{<span class="stringliteral">&quot;split-measure&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;                  <a class="code" href="classMs_1_1Element.html">Element</a>* e = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#abf55316b1de3db4e71efba968ec280f6">element</a>();</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;                  <span class="keywordflow">if</span> (!(e &amp;&amp; (e-&gt;isNote() || e-&gt;isRest())))</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;                        <a class="code" href="classMs_1_1MScore.html#a5fc44789b80db3de16a23846532181d2">MScore::setError</a>(<a class="code" href="namespaceMs.html#ad1b1585b0038ede29126efd627daae91ab90cb5808ab539112c7b40d55db99535">NO_CHORD_REST_SELECTED</a>);</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;                  <span class="keywordflow">else</span> {</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;                        <span class="keywordflow">if</span> (e-&gt;isNote())</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;                              e = toNote(e)-&gt;chord();</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;                        <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr = <a class="code" href="namespaceMs.html#a580f85ffcff35b12462cbfb60a8728b7">toChordRest</a>(e);</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#ac4ec0a0b6466642c3ded222399790040">cmdSplitMeasure</a>(cr);</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;                        }</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;                  }},</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;            {{<span class="stringliteral">&quot;join-measures&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;                  <a class="code" href="classMs_1_1Measure.html">Measure</a>* m1;</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;                  <a class="code" href="classMs_1_1Measure.html">Measure</a>* m2;</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;                  <span class="keywordflow">if</span> (!cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">selection</a>().<a class="code" href="classMs_1_1Selection.html#aa8f7f63c5dc2fb6f1d52d3338481a451">measureRange</a>(&amp;m1, &amp;m2) || m1 == m2) {</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;                        QMessageBox::warning(0, <span class="stringliteral">&quot;MuseScore&quot;</span>,</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;                           tr(<span class="stringliteral">&quot;No measures selected:\n&quot;</span></div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;                           <span class="stringliteral">&quot;Please select a range of measures to join and try again&quot;</span>));</div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;                        }</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;                  <span class="keywordflow">else</span> {</div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#aba6085db1523002d9aee019775846aec">cmdJoinMeasure</a>(m1, m2);</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;                        }</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;                  }},</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;            {{<span class="stringliteral">&quot;next-lyric&quot;</span>, <span class="stringliteral">&quot;prev-lyric&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp; cmd) {</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#ac2611b75294773cfc1cfa30285d9dd1e">editCmd</a>(cmd);</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;                  }},</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;            {{<span class="stringliteral">&quot;add-remove-breaks&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a1dc0206a240c5b5e4b014fead61e8d6c">cmdAddRemoveBreaks</a>();</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;                  }},</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;            {{<span class="stringliteral">&quot;copy-lyrics-to-clipboard&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a89d82d8e3e9eebf0ec8d360053df5633">cmdCopyLyricsToClipboard</a>();</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;                  }},</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;            <span class="comment">// STATE_NOTE_ENTRY_REALTIME actions (auto or manual)</span></div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;            {{<span class="stringliteral">&quot;realtime-advance&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a3f280531f1f8fd348c89cb4f428e8d47">realtimeAdvance</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;                  }},</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;            <span class="comment">// STATE_HARMONY_FIGBASS_EDIT actions</span></div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;            {{<span class="stringliteral">&quot;advance-longa&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a3510962e79179066a6568ebff6cf359e">ticksTab</a>(<a class="code" href="classMs_1_1Fraction.html">Fraction</a>(4,1));</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;                  }},</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;            {{<span class="stringliteral">&quot;advance-breve&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a3510962e79179066a6568ebff6cf359e">ticksTab</a>(<a class="code" href="classMs_1_1Fraction.html">Fraction</a>(2,1));</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;                  }},</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;            {{<span class="stringliteral">&quot;advance-1&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a3510962e79179066a6568ebff6cf359e">ticksTab</a>(<a class="code" href="classMs_1_1Fraction.html">Fraction</a>(1,1));</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;                  }},</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;            {{<span class="stringliteral">&quot;advance-2&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a3510962e79179066a6568ebff6cf359e">ticksTab</a>(<a class="code" href="classMs_1_1Fraction.html">Fraction</a>(1,2));</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;                  }},</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;            {{<span class="stringliteral">&quot;advance-4&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a3510962e79179066a6568ebff6cf359e">ticksTab</a>(<a class="code" href="classMs_1_1Fraction.html">Fraction</a>(1,4));</div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;                  }},</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;            {{<span class="stringliteral">&quot;advance-8&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a3510962e79179066a6568ebff6cf359e">ticksTab</a>(<a class="code" href="classMs_1_1Fraction.html">Fraction</a>(1,8));</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;                  }},</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;            {{<span class="stringliteral">&quot;advance-16&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a3510962e79179066a6568ebff6cf359e">ticksTab</a>(<a class="code" href="classMs_1_1Fraction.html">Fraction</a>(1,16));</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;                  }},</div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;            {{<span class="stringliteral">&quot;advance-32&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a3510962e79179066a6568ebff6cf359e">ticksTab</a>(<a class="code" href="classMs_1_1Fraction.html">Fraction</a>(1,32));</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;                  }},</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;            {{<span class="stringliteral">&quot;advance-64&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;                  cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a3510962e79179066a6568ebff6cf359e">ticksTab</a>(<a class="code" href="classMs_1_1Fraction.html">Fraction</a>(1,64));</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;                  }},</div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;            {{<span class="stringliteral">&quot;prev-measure-TEXT&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;                  <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a64fbe9d2a6d143b1068a61d1eb03eac7">editData</a>.<a class="code" href="classMs_1_1EditData.html#a07230d29679583b1e4e23a7bfa4078ec">element</a>-&gt;isHarmony())</div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#adb4d90e15dabb71a7dd16c357f4bea49">harmonyTab</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;                  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a64fbe9d2a6d143b1068a61d1eb03eac7">editData</a>.<a class="code" href="classMs_1_1EditData.html#a07230d29679583b1e4e23a7bfa4078ec">element</a>-&gt;isFiguredBass())</div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a3b0ebe7e7559cb8b28b944169abb4dc7">figuredBassTab</a>(<span class="keyword">true</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;                  }},</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;            {{<span class="stringliteral">&quot;next-measure-TEXT&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;                  <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a64fbe9d2a6d143b1068a61d1eb03eac7">editData</a>.<a class="code" href="classMs_1_1EditData.html#a07230d29679583b1e4e23a7bfa4078ec">element</a>-&gt;isHarmony())</div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#adb4d90e15dabb71a7dd16c357f4bea49">harmonyTab</a>(<span class="keyword">false</span>);</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;                  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a64fbe9d2a6d143b1068a61d1eb03eac7">editData</a>.<a class="code" href="classMs_1_1EditData.html#a07230d29679583b1e4e23a7bfa4078ec">element</a>-&gt;isFiguredBass())</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a3b0ebe7e7559cb8b28b944169abb4dc7">figuredBassTab</a>(<span class="keyword">true</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;                  }},</div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;            {{<span class="stringliteral">&quot;prev-beat-TEXT&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;                  <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a64fbe9d2a6d143b1068a61d1eb03eac7">editData</a>.<a class="code" href="classMs_1_1EditData.html#a07230d29679583b1e4e23a7bfa4078ec">element</a>-&gt;isHarmony())</div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a81ff7d4cdedb1b3193c4ab719b6a198d">harmonyBeatsTab</a>(<span class="keyword">false</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;                  }},</div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;            {{<span class="stringliteral">&quot;next-beat-TEXT&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;                  <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a64fbe9d2a6d143b1068a61d1eb03eac7">editData</a>.<a class="code" href="classMs_1_1EditData.html#a07230d29679583b1e4e23a7bfa4078ec">element</a>-&gt;isHarmony())</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a81ff7d4cdedb1b3193c4ab719b6a198d">harmonyBeatsTab</a>(<span class="keyword">false</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;                  }},</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;</div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;            <span class="comment">// STATE_NOTE_ENTRY_TAB actions</span></div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;            <span class="comment">// move input state string up or down, within the number of strings of the instrument;</span></div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;            <span class="comment">// this may move the input state cursor outside of the tab line range to accommodate</span></div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;            <span class="comment">// instrument strings not represented in the tab (e.g.: lute bass strings):</span></div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;            <span class="comment">// the appropriate visual rendition of the input cursor in those cases will be managed by moveCursor()</span></div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;            {{<span class="stringliteral">&quot;string-above&quot;</span>,</div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;              <span class="stringliteral">&quot;string-below&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp; cmd) {</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;                  <a class="code" href="classMs_1_1InputState.html">InputState</a>&amp; is          = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a67a1f22da74237b491206ae705ebb688">inputState</a>();</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;                  <a class="code" href="classMs_1_1Staff.html">Staff</a>*      staff       = cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#ad1de1c246a7f35e5b63781630e3c7d58">staff</a>(is.<a class="code" href="classMs_1_1InputState.html#a15cf2602df222da8558a2d6a43e66b19">track</a>() / <a class="code" href="mscore_8h.html#a7b14c16d0b45fd100ee97e74cfd907c0">VOICES</a>);</div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;                  <span class="keywordtype">int</span>         instrStrgs  = staff-&gt;<a class="code" href="classMs_1_1Staff.html#ae31dc0de799c1e206af979e65bf837ab">part</a>()-&gt;<a class="code" href="classMs_1_1Part.html#a6cae82662abe64d683dff09b3c7874f8">instrument</a>(is.<a class="code" href="classMs_1_1InputState.html#a79d562ec34847c3154ec4c6c5073d464">tick</a>())-&gt;stringData()-&gt;strings();</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;                  <span class="comment">// assume &quot;string-below&quot;: if tab is upside-down, &#39;below&#39; means toward instrument top (-1)</span></div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;                  <span class="comment">// if not, &#39;below&#39; means toward instrument bottom (+1)</span></div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;                  <span class="keywordtype">int</span>         delta       = (staff-&gt;<a class="code" href="classMs_1_1Staff.html#ad248bef7f25a4fe152ce281372a24d3f">staffType</a>(is.<a class="code" href="classMs_1_1InputState.html#a79d562ec34847c3154ec4c6c5073d464">tick</a>())-&gt;upsideDown() ? -1 : +1);</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;                  <span class="keywordflow">if</span> (cmd == <span class="stringliteral">&quot;string-above&quot;</span>)                      <span class="comment">// if &quot;above&quot;, reverse delta</span></div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;                        delta = -delta;</div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;                  <span class="keywordtype">int</span>         strg        = is.<a class="code" href="classMs_1_1InputState.html#a3b873c338079a3da35310c7dc79bd5a2">string</a>() + delta;  <span class="comment">// dest. physical string</span></div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;                  <span class="keywordflow">if</span> (strg &gt;= 0 &amp;&amp; strg &lt; instrStrgs) {            <span class="comment">// if dest. string within instrument limits</span></div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;                        is.<a class="code" href="classMs_1_1InputState.html#a29a52f461eddb54abda0ef2214599fee">setString</a>(strg);                       <span class="comment">// update status</span></div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a232d837eb35d66b42561d349d5716117">moveCursor</a>();</div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;                        }</div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;                  }},</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;            {{<span class="stringliteral">&quot;text-word-left&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;                  <a class="code" href="namespaceMs.html#a0ae7680d3dcd8f5ece7e7c9985988c06">toTextBase</a>(cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a64fbe9d2a6d143b1068a61d1eb03eac7">editData</a>.<a class="code" href="classMs_1_1EditData.html#a07230d29679583b1e4e23a7bfa4078ec">element</a>)-&gt;<a class="code" href="classMs_1_1TextBase.html#abc35bbd384acee59bc2911fdb6c3581f">movePosition</a>(cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a64fbe9d2a6d143b1068a61d1eb03eac7">editData</a>, QTextCursor::WordLeft);</div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;                  }},</div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;            {{<span class="stringliteral">&quot;text-word-right&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp;) {</div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;                  <a class="code" href="namespaceMs.html#a0ae7680d3dcd8f5ece7e7c9985988c06">toTextBase</a>(cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a64fbe9d2a6d143b1068a61d1eb03eac7">editData</a>.<a class="code" href="classMs_1_1EditData.html#a07230d29679583b1e4e23a7bfa4078ec">element</a>)-&gt;<a class="code" href="classMs_1_1TextBase.html#abc35bbd384acee59bc2911fdb6c3581f">movePosition</a>(cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a64fbe9d2a6d143b1068a61d1eb03eac7">editData</a>, QTextCursor::NextWord);</div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;                  }},</div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;            {{<span class="stringliteral">&quot;concert-pitch&quot;</span>}, [](<a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv, <span class="keyword">const</span> QByteArray&amp; cmd) {</div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;                  QAction* a = <a class="code" href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">getAction</a>(cmd);</div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;                  <span class="keywordflow">if</span> (cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a369f7689a1a21e8b0aa07e5bbacb3d76">styleB</a>(<a class="code" href="namespaceMs.html#a2bac757437d1a9e364db27de8f9c9e2ea92f4fe2c3c172220a2992018a69246b9">Sid::concertPitch</a>) != a-&gt;isChecked()) {</div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a687f074b331fe27ebec4b4d596f91e0e">startCmd</a>();</div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a800b18cf10876b1497e1bc43a2a72ac0">cmdConcertPitchChanged</a>(a-&gt;isChecked(), <span class="keyword">true</span>);</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;                        cv-&gt;<a class="code" href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#ae629bd6513248811b5c7823836982ee8">endCmd</a>();</div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;                        }</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;                  }},</div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;            };</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;</div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;      <span class="keyword">auto</span> c = std::find_if(cmdList.begin(), cmdList.end(), [cmd](<span class="keyword">const</span> ScoreViewCmd&amp; cc) {</div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; name : cc.commands) {</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;                  <span class="keywordflow">if</span> (cmd == name)</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;                  }</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;            });</div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;</div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;      <span class="keywordflow">if</span> (c != cmdList.end()) {</div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;            c-&gt;exec(<span class="keyword">this</span>, cmd);</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;            }</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;            editData.view = <span class="keyword">this</span>;</div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;            QAction* a = <a class="code" href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">getAction</a>(cmd);</div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;            _score-&gt;cmd(a, editData);</div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;            }</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;      <span class="keywordflow">if</span> (_score-&gt;processMidiInput())</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;            <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;endCmd();</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;      }</div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;<span class="comment">//   textTab</span></div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;</div><div class="line"><a name="l02896"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#aa585cd70b6ca2bf1654e0af4de552ec6"> 2896</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#aa585cd70b6ca2bf1654e0af4de552ec6">ScoreView::textTab</a>(<span class="keywordtype">bool</span> back)</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;      {</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;      <span class="keywordflow">if</span> (!editMode())</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;      <a class="code" href="classMs_1_1Element.html">Element</a>* oe = editData.element;</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;      <span class="keywordflow">if</span> (!oe || !oe-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a979b6e1bc10cf790e755aa8641feb4cf">isTextBase</a>())</div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;</div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;      <span class="keywordflow">if</span> (oe-&gt;isHarmony()) {</div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;            harmonyBeatsTab(<span class="keyword">true</span>, back);</div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;            }</div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (oe-&gt;isFiguredBass()) {</div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;            figuredBassTab(<span class="keyword">false</span>, back);</div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;            }</div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (oe-&gt;isLyrics()) {</div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;            <span class="comment">// not actually hit, left/right handled elsewhere</span></div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;            lyricsTab(back, <span class="keyword">false</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;            }</div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;      <a class="code" href="classMs_1_1Element.html">Element</a>* op = oe-&gt;<a class="code" href="classMs_1_1Element.html#a52b30fdd589beba5b760a561a50ac601">parent</a>();</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;      <span class="keywordflow">if</span> (!(op-&gt;isSegment() || op-&gt;isNote()))</div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;</div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;      <a class="code" href="classMs_1_1TextBase.html">TextBase</a>* ot = <a class="code" href="namespaceMs.html#a0ae7680d3dcd8f5ece7e7c9985988c06">toTextBase</a>(oe);</div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;      <a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5a">Tid</a> defaultTid = <a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5a">Tid</a>(ot-&gt;<a class="code" href="classMs_1_1TextBase.html#ad438fe216fbb719fbec8e44ae7fc6d5a">propertyDefault</a>(<a class="code" href="namespaceMs.html#aa0f871cf8181cec31d68d20a39010655a6467064bd66ffef86b5daa25f5869248">Pid::SUB_STYLE</a>).toInt());</div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;      <a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5a">Tid</a> tid = ot-&gt;<a class="code" href="classMs_1_1TextBase.html#a26aa5eb322375f093ff39146890478d4">tid</a>();</div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;      <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9e">ElementType</a> type = ot-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>();</div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;      <span class="keywordtype">int</span> staffIdx = ot-&gt;<a class="code" href="classMs_1_1Element.html#a3c37abb86b5dfb5b16fe74155154bab8">staffIdx</a>();</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;      <span class="comment">// get prev/next element now, as current element may be deleted if empty</span></div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;      <a class="code" href="classMs_1_1Element.html">Element</a>* el = back ? score()-&gt;<a class="code" href="classMs_1_1Element.html#ad48ce06a988e98b0da7d4cf1e6f56ded">prevElement</a>() : score()-&gt;<a class="code" href="classMs_1_1Element.html#a81092ae7891eb2ac2d43d6fe86e1e749">nextElement</a>();</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;      <span class="comment">// end edit mode</span></div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;      changeState(<a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a1e23852820b9154316c7c06e2b7ba051">ViewState::NORMAL</a>);</div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;      <span class="comment">// find new note to add text to</span></div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;      <span class="keywordtype">bool</span> here = <span class="keyword">false</span>;      <span class="comment">// prevent infinite loop (relevant if navigation is allowed to wrap around end of score)</span></div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;      <span class="keywordflow">while</span> (el) {</div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;            <span class="keywordflow">if</span> (el-&gt;isNote()) {</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;                  <a class="code" href="classMs_1_1Note.html">Note</a>* n = toNote(el);</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;                  <span class="keywordflow">if</span> (op-&gt;isNote() &amp;&amp; n != op)</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;                  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op-&gt;isSegment() &amp;&amp; n-&gt;<a class="code" href="classMs_1_1Note.html#ac1fe59b8f92c11fc6b662855fc8d9316">chord</a>()-&gt;<a class="code" href="classMs_1_1Chord.html#a0d74c6da05f4744a4dcdf7b08b5eb33f">segment</a>() != op)</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;                  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (here)</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;                  here = <span class="keyword">true</span>;</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;                  }</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (el-&gt;isRest() &amp;&amp; op-&gt;isSegment()) {</div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;                  <span class="comment">// skip rests, but still check for infinite loop</span></div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;                  <a class="code" href="classMs_1_1Rest.html">Rest</a>* r = <a class="code" href="namespaceMs.html#aa7be8d92b4d54a840e62a3cd6dcfb08c">toRest</a>(el);</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;                  <span class="keywordflow">if</span> (r-&gt;<a class="code" href="classMs_1_1ChordRest.html#a94a3a697e4767c1e0ed46c205a81ac24">segment</a>() != op)</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;                        ;</div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;                  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (here)</div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;                  here = <span class="keyword">true</span>;</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;                  }</div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;            <span class="comment">// get prev/next note</span></div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;            score()-&gt;select(el);</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;            <a class="code" href="classMs_1_1Element.html">Element</a>* el2 = back ? score()-&gt;<a class="code" href="classMs_1_1Element.html#ad48ce06a988e98b0da7d4cf1e6f56ded">prevElement</a>() : score()-&gt;<a class="code" href="classMs_1_1Element.html#a81092ae7891eb2ac2d43d6fe86e1e749">nextElement</a>();</div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;            <span class="comment">// start/end of score reached</span></div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;            <span class="keywordflow">if</span> (el2 == el)</div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;            el = el2;</div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;            }</div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;      <span class="keywordflow">if</span> (!el || !el-&gt;isNote()) {</div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;            <span class="comment">// nothing found, exit cleanly</span></div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;            <span class="keywordflow">if</span> (op-&gt;<a class="code" href="classMs_1_1Element.html#a7b4ff51eff905fed21705445958253c1">selectable</a>())</div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;                  score()-&gt;select(op);</div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;                  score()-&gt;deselectAll();</div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;            }</div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;      <a class="code" href="classMs_1_1Note.html">Note</a>* nn = toNote(el);</div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;</div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;      <span class="comment">// go to note</span></div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;      cmdGotoElement(nn);</div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;</div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;      <span class="comment">// get existing text to edit</span></div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;      el = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;      <span class="keywordflow">if</span> (op-&gt;isNote()) {</div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;            <span class="comment">// check element list of new note</span></div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1Element.html">Element</a>* e : nn-&gt;<a class="code" href="classMs_1_1Note.html#a6003ba6106243f773ea7ae88abe5dc14">el</a>()) {</div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;                  <span class="keywordflow">if</span> (e-&gt;type() != type)</div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;                        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;                  <a class="code" href="classMs_1_1TextBase.html">TextBase</a>* nt = <a class="code" href="namespaceMs.html#a0ae7680d3dcd8f5ece7e7c9985988c06">toTextBase</a>(e);</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;                  <span class="keywordflow">if</span> (nt-&gt;<a class="code" href="classMs_1_1TextBase.html#a26aa5eb322375f093ff39146890478d4">tid</a>() == tid) {</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;                        el = e;</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;                        }</div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;                  }</div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;            }</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op-&gt;isSegment()) {</div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;            <span class="comment">// check annotation list of new segment</span></div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;            <a class="code" href="classMs_1_1Segment.html">Segment</a>* ns = nn-&gt;<a class="code" href="classMs_1_1Note.html#ac1fe59b8f92c11fc6b662855fc8d9316">chord</a>()-&gt;<a class="code" href="classMs_1_1Chord.html#a0d74c6da05f4744a4dcdf7b08b5eb33f">segment</a>();</div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1Element.html">Element</a>* e : ns-&gt;<a class="code" href="classMs_1_1Segment.html#ac30bce62d008049b47f408497d32dccc">annotations</a>()) {</div><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;                  <span class="keywordflow">if</span> (e-&gt;staffIdx() != staffIdx || e-&gt;type() != type)</div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;                        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;                  <a class="code" href="classMs_1_1TextBase.html">TextBase</a>* nt = <a class="code" href="namespaceMs.html#a0ae7680d3dcd8f5ece7e7c9985988c06">toTextBase</a>(e);</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;                  <span class="keywordflow">if</span> (nt-&gt;<a class="code" href="classMs_1_1TextBase.html#a26aa5eb322375f093ff39146890478d4">tid</a>() == tid) {</div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;                        el = e;</div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;                        }</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;                  }</div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;            }</div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;      <span class="keywordflow">if</span> (el) {</div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;            <span class="comment">// edit existing text</span></div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;            score()-&gt;select(el);</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;            startEditMode(el);</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;            }</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;            <span class="comment">// add new text if no existing element to edit</span></div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;            <span class="comment">// TODO: for tempo text, mscore-&gt;addTempo() could be called</span></div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;            <span class="comment">// but it pre-fills the text</span></div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;            <span class="comment">// would be better to create empty tempo element</span></div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;            <span class="keywordflow">if</span> (type != <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea9ce833bcf3061cd326b2a3d7528a7699">ElementType::TEMPO_TEXT</a>) {</div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;                  <a class="code" href="namespaceMs.html#a56785a0f227cf3d1d0a4891656a35daa">PropertyFlags</a> pf = oe ? oe-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a9b9c00757c23cba103638b4ab63df03e">propertyFlags</a>(<a class="code" href="namespaceMs.html#aa0f871cf8181cec31d68d20a39010655ad5829bb83e9a51bb48fb0a1e5d77423e">Pid::PLACEMENT</a>) : <a class="code" href="namespaceMs.html#a56785a0f227cf3d1d0a4891656a35daaae36a8b0bff422df195ae7b5e2738e7d6">PropertyFlags::STYLED</a>;</div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;                  <a class="code" href="namespaceMs.html#a5340e53ea850ac4e67c071825916e469">Placement</a> oePlacement = oe ? oe-&gt;<a class="code" href="classMs_1_1Element.html#a951493711a51487f7f3c1786703b1a20">placement</a>() : <a class="code" href="namespaceMs.html#a239e390cba4ba2b19296c2995da44976ac2d92b81beeac9bfc89fb870c1a20767">Placement::ABOVE</a>;</div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;                  cmdAddText(defaultTid, tid, pf, oePlacement);</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;                  }</div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;            }</div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;      }</div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;</div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;<span class="comment">//   editKeySticking</span></div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;</div><div class="line"><a name="l03026"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#ab18b18a898987cd0173d0695da09532a"> 3026</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classMs_1_1ScoreView.html#ab18b18a898987cd0173d0695da09532a">ScoreView::editKeySticking</a>()</div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;      {</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;      Q_ASSERT(editData.element-&gt;isSticking());</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;</div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;      <span class="keywordflow">switch</span> (editData.key) {</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;            <span class="keywordflow">case</span> Qt::Key_Space:</div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;                  textTab(editData.modifiers &amp; Qt::ShiftModifier);</div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;                  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;            <span class="keywordflow">case</span> Qt::Key_Left:</div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;                  textTab(<span class="keyword">true</span>);</div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;                  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;            <span class="keywordflow">case</span> Qt::Key_Right:</div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;            <span class="keywordflow">case</span> Qt::Key_Return:</div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;                  textTab(<span class="keyword">false</span>);</div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;                  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;            }</div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;</div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;      }</div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;</div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;<span class="comment">//   showOmr</span></div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;</div><div class="line"><a name="l03052"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a42b6cf66302e9e231aed43340fc8ec74"> 3052</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a42b6cf66302e9e231aed43340fc8ec74">ScoreView::showOmr</a>(<span class="keywordtype">bool</span> flag)</div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;      {</div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;      _score-&gt;masterScore()-&gt;setShowOmr(flag);</div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;      <a class="code" href="classMs_1_1ScoreTab.html">ScoreTab</a>* t = <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;getTab1();</div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;      <span class="keywordflow">if</span> (t-&gt;<a class="code" href="classMs_1_1ScoreTab.html#a261c98022c1b2e0134b47fc92c5b1d13">view</a>() != <span class="keyword">this</span>)</div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;            t = <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;getTab2();</div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;      <span class="keywordflow">if</span> (t-&gt;<a class="code" href="classMs_1_1ScoreTab.html#a261c98022c1b2e0134b47fc92c5b1d13">view</a>() == <span class="keyword">this</span>)</div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;            t-&gt;<a class="code" href="classMs_1_1ScoreTab.html#aac889bef7bb86520dfce92b3464c9d40">setCurrentIndex</a>(t-&gt;<a class="code" href="classMs_1_1ScoreTab.html#a92a67736a8eff82a18de4e524904377f">currentIndex</a>());</div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;            qDebug(<span class="stringliteral">&quot;view not found&quot;</span>);</div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;      }</div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;</div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;<span class="comment">//   startNoteEntry</span></div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;</div><div class="line"><a name="l03068"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a3a0ec1a078110ae7de1a173c02e1df0c"> 3068</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a3a0ec1a078110ae7de1a173c02e1df0c">ScoreView::startNoteEntry</a>()</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;      {</div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;      <a class="code" href="classMs_1_1InputState.html">InputState</a>&amp; is = _score-&gt;inputState();</div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;      is.<a class="code" href="classMs_1_1InputState.html#accb27700fe1fe82e0bcf96ea0e5f0974">setSegment</a>(0);</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;      <a class="code" href="classMs_1_1Note.html">Note</a>* note  = 0;</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;      <span class="keywordflow">if</span> (_score-&gt;selection().isNone()) {</div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;            <span class="comment">// no selection</span></div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;            <span class="comment">// choose page in current view (favor top left quadrant if possible)</span></div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;            <span class="comment">// select first (top/left) chordrest of that page in current view</span></div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;            <span class="comment">// or, CR at last selected position if that is in view</span></div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;            <a class="code" href="classMs_1_1Page.html">Page</a>* p = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;            QList&lt;QPointF&gt; points;</div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;            points.append(toLogical(QPoint(width() * 0.25, height() * 0.25)));</div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;            points.append(toLogical(QPoint(0.0, 0.0)));</div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;            points.append(toLogical(QPoint(0.0, height())));</div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;            points.append(toLogical(QPoint(width(), 0.0)));</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;            points.append(toLogical(QPoint(width(), height())));</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;            <span class="keywordtype">int</span> i = 0;</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;            <span class="keywordflow">while</span> (!p &amp;&amp; i &lt; points.size()) {</div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;                  p = point2page(points[i]);</div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;                  i++;</div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;                  }</div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;            <span class="keywordflow">if</span> (p) {</div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;                  <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* topLeft = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;                  qreal tlY = 0.0;</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;                  <a class="code" href="classMs_1_1Fraction.html">Fraction</a> tlTick = <a class="code" href="classMs_1_1Fraction.html">Fraction</a>(0,1);</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;                  QRectF viewRect  = toLogical(QRectF(0.0, 0.0, width(), height()));</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;                  QRectF pageRect  = p-&gt;<a class="code" href="classMs_1_1Element.html#adc4d7b66745fbb0335dc73f0c3996994">bbox</a>().translated(p-&gt;<a class="code" href="classMs_1_1Element.html#a6f850cd0581c46bee4661210b7a7777c">x</a>(), p-&gt;<a class="code" href="classMs_1_1Element.html#a30c056051bbce9e867a512b8cbc1f912">y</a>());</div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;                  QRectF intersect = viewRect &amp; pageRect;</div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;                  intersect.translate(-p-&gt;<a class="code" href="classMs_1_1Element.html#a6f850cd0581c46bee4661210b7a7777c">x</a>(), -p-&gt;<a class="code" href="classMs_1_1Element.html#a30c056051bbce9e867a512b8cbc1f912">y</a>());</div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;                  QList&lt;Element*&gt; el = p-&gt;<a class="code" href="classMs_1_1Page.html#a531a2daae4ad65988a04ae199ebdf179">items</a>(intersect);</div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;                  <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* lastSelected = score()-&gt;selection().currentCR();</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;                  <span class="keywordflow">if</span> (lastSelected &amp;&amp; lastSelected-&gt;<a class="code" href="classMs_1_1Element.html#a7e7ba0487a1113884ed218ba74c6a7d6">voice</a>()) {</div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;                        <span class="comment">// if last selected CR was not in voice 1,</span></div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;                        <span class="comment">// find CR in voice 1 instead</span></div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;                        <span class="keywordtype">int</span> track = <a class="code" href="namespaceMs.html#a469dd00a292aca0acb3e57ad0222715f">trackZeroVoice</a>(lastSelected-&gt;<a class="code" href="classMs_1_1Element.html#ab4986d1b4f0d45b8e84cf52c46885c36">track</a>());</div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;                        <a class="code" href="classMs_1_1Segment.html">Segment</a>* s = lastSelected-&gt;<a class="code" href="classMs_1_1ChordRest.html#a94a3a697e4767c1e0ed46c205a81ac24">segment</a>();</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;                        <span class="keywordflow">if</span> (s)</div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;                              lastSelected = s-&gt;nextChordRest(track, <span class="keyword">true</span>);</div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;                        }</div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;                  <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1Element.html">Element</a>* e : el) {</div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;                        <span class="comment">// loop through visible elements</span></div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;                        <span class="comment">// looking for the CR in voice 1 with earliest tick and highest staff position</span></div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;                        <span class="comment">// but stop if we find the last selected CR</span></div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;                        <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9e">ElementType</a> et = e-&gt;<a class="code" href="classMs_1_1ChordRest.html#a47a641f4c229f43d67ed5154fdebc05c">type</a>();</div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;                        <span class="keywordflow">if</span> (et == <a class="code" href="namespaceMs.html#aeccc894c5a64aba67bbfaf8fe1b755d5a10de4bc81f754b19b0d27246a0589c05">ElementType::NOTE</a> || et == <a class="code" href="namespaceMs.html#a28863123e439c88c35086eb7dd963c9aa50780f47f6839d47d60bc4555ee00c3f">ElementType::REST</a>) {</div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;                              <span class="keywordflow">if</span> (e-&gt;voice())</div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;                                    <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;                              <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr;</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;                              <span class="keywordflow">if</span> (et == <a class="code" href="namespaceMs.html#aeccc894c5a64aba67bbfaf8fe1b755d5a10de4bc81f754b19b0d27246a0589c05">ElementType::NOTE</a>) {</div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;                                    cr = <span class="keyword">static_cast&lt;</span><a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>*<span class="keyword">&gt;</span>(e-&gt;parent());</div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;                                    <span class="keywordflow">if</span> (!cr)</div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;                                          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;                                    }</div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;                              <span class="keywordflow">else</span> {</div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;                                    cr = <span class="keyword">static_cast&lt;</span><a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>*<span class="keyword">&gt;</span>(e);</div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;                                    }</div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;                              <span class="keywordflow">if</span> (cr == lastSelected) {</div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;                                    topLeft = cr;</div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;                                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;                                    }</div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;                              <span class="comment">// compare ticks rather than x position</span></div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;                              <span class="comment">// to make sure we favor earlier rather than later systems</span></div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;                              <span class="comment">// even though later system might have note farther to left</span></div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;                              <a class="code" href="classMs_1_1Fraction.html">Fraction</a> crTick = <a class="code" href="classMs_1_1Fraction.html">Fraction</a>(0,1);</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;                              <span class="keywordflow">if</span> (cr-&gt;<a class="code" href="classMs_1_1ChordRest.html#a94a3a697e4767c1e0ed46c205a81ac24">segment</a>())</div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;                                    crTick = cr-&gt;<a class="code" href="classMs_1_1ChordRest.html#a94a3a697e4767c1e0ed46c205a81ac24">segment</a>()-&gt;<a class="code" href="classMs_1_1Segment.html#a23cde3c97359266e2787b107aa0c8cdf">tick</a>();</div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;                              <span class="keywordflow">else</span></div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;                                    <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;                              <span class="comment">// compare staff Y position rather than note Y position</span></div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;                              <span class="comment">// to be sure we do not reject earliest note</span></div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;                              <span class="comment">// just because it is lower in pitch than subsequent notes</span></div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;                              qreal crY = 0.0;</div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;                              <span class="keywordflow">if</span> (cr-&gt;<a class="code" href="classMs_1_1ChordRest.html#aaa704d32c5e4253d54d722276f507e2d">measure</a>() &amp;&amp; cr-&gt;<a class="code" href="classMs_1_1ChordRest.html#aaa704d32c5e4253d54d722276f507e2d">measure</a>()-&gt;<a class="code" href="classMs_1_1Measure.html#a9c4de13b592b3e0cc6a2398641da99ed">system</a>())</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;                                    crY = cr-&gt;<a class="code" href="classMs_1_1ChordRest.html#aaa704d32c5e4253d54d722276f507e2d">measure</a>()-&gt;<a class="code" href="classMs_1_1Measure.html#a9c4de13b592b3e0cc6a2398641da99ed">system</a>()-&gt;<a class="code" href="classMs_1_1System.html#ad93df8d8b2f2fb6d8d88c1d4b590156c">staffYpage</a>(cr-&gt;<a class="code" href="classMs_1_1Element.html#a3c37abb86b5dfb5b16fe74155154bab8">staffIdx</a>());</div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;                              <span class="keywordflow">else</span></div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;                                    <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;                              <span class="keywordflow">if</span> (topLeft) {</div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;                                    <span class="keywordflow">if</span> (crTick &lt;= tlTick &amp;&amp; crY &lt;= tlY) {</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;                                          topLeft = cr;</div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;                                          tlTick = crTick;</div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;                                          tlY = crY;</div><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;                                          }</div><div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;                                    }</div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;                              <span class="keywordflow">else</span> {</div><div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;                                    topLeft = cr;</div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;                                    tlTick = crTick;</div><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;                                    tlY = crY;</div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;                                    }</div><div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;                              }</div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;                        }</div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;                  <span class="keywordflow">if</span> (topLeft)</div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;                        _score-&gt;select(topLeft, <a class="code" href="namespaceMs.html#a1066451ad9dc9959bedb76978f4f30c8a0679273e201afd0bf57af3961f8a23b8">SelectType::SINGLE</a>);</div><div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;                  }</div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;            }</div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;</div><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;      <a class="code" href="classMs_1_1Element.html">Element</a>* el = _score-&gt;selection().element();</div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;      <span class="keywordflow">if</span> (!el)</div><div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;            el = _score-&gt;selection().firstChordRest();</div><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;      <span class="keywordflow">if</span> (el == 0 || (el-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() != <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea45d886b842022787183a308e0200d336">ElementType::CHORD</a> &amp;&amp; el-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() != <a class="code" href="namespaceMs.html#a28863123e439c88c35086eb7dd963c9aa50780f47f6839d47d60bc4555ee00c3f">ElementType::REST</a> &amp;&amp; el-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() != <a class="code" href="namespaceMs.html#aeccc894c5a64aba67bbfaf8fe1b755d5a10de4bc81f754b19b0d27246a0589c05">ElementType::NOTE</a>)) {</div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;            <span class="comment">// if no note/rest is selected, start with voice 0</span></div><div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;            <span class="keywordtype">int</span> track = is.<a class="code" href="classMs_1_1InputState.html#a15cf2602df222da8558a2d6a43e66b19">track</a>() == -1 ? 0 : (is.<a class="code" href="classMs_1_1InputState.html#a15cf2602df222da8558a2d6a43e66b19">track</a>() / <a class="code" href="mscore_8h.html#a7b14c16d0b45fd100ee97e74cfd907c0">VOICES</a>) * <a class="code" href="mscore_8h.html#a7b14c16d0b45fd100ee97e74cfd907c0">VOICES</a>;</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;            <span class="comment">// try to find an appropriate measure to start in</span></div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;            <a class="code" href="classMs_1_1Fraction.html">Fraction</a> <a class="code" href="click_8h.html#a23377ea277c7aef62f6cf3c640f7155c">tick</a> = el ? el-&gt;<a class="code" href="classMs_1_1Element.html#a4cc362a42bad65483b59d3a8e0df374f">tick</a>() : <a class="code" href="classMs_1_1Fraction.html">Fraction</a>(0,1);</div><div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;            el = _score-&gt;searchNote(tick, track);</div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;            <span class="keywordflow">if</span> (!el)</div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;                  el = _score-&gt;searchNote(<a class="code" href="classMs_1_1Fraction.html">Fraction</a>(0,1), track);</div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;            }</div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;      <span class="keywordflow">if</span> (!el)</div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;      <span class="keywordflow">if</span> (el-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea45d886b842022787183a308e0200d336">ElementType::CHORD</a>) {</div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;            <a class="code" href="classMs_1_1Chord.html">Chord</a>* c = <span class="keyword">static_cast&lt;</span><a class="code" href="classMs_1_1Chord.html">Chord</a>*<span class="keyword">&gt;</span>(el);</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;            note = c-&gt;<a class="code" href="classMs_1_1Chord.html#ace8797d2ee2406c3c6a58f011e6b3e04">selectedNote</a>();</div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;            <span class="keywordflow">if</span> (note == 0)</div><div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;                  note = c-&gt;<a class="code" href="classMs_1_1Chord.html#a1a35e7598d783204faa93ba261b5909d">upNote</a>();</div><div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;            el = note;</div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;            }</div><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;      <a class="code" href="classMs_1_1TDuration.html">TDuration</a> d(is.<a class="code" href="classMs_1_1InputState.html#ad23b3283d9647903d82a42461989506e">duration</a>());</div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;      <span class="keywordflow">if</span> (!d.isValid() || d.isZero() || d.type() == <a class="code" href="classMs_1_1TDuration.html#ad9263bf173856b77421e83a48a7bf68cac23bf58f35bf1fdfa910d9de6dba47f4">TDuration::DurationType::V_MEASURE</a>)</div><div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;            is.<a class="code" href="classMs_1_1InputState.html#a06f803b5c2481d3cb34019698a8861bd">setDuration</a>(<a class="code" href="classMs_1_1TDuration.html">TDuration</a>(<a class="code" href="classMs_1_1TDuration.html#ad9263bf173856b77421e83a48a7bf68ca05e8f1c139e16d278117c17e7fc13ef6">TDuration::DurationType::V_QUARTER</a>));</div><div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;      is.<a class="code" href="classMs_1_1InputState.html#a82552c2c441e7d9fad1834ff3bd8b613">setAccidentalType</a>(<a class="code" href="namespaceMs.html#a3f252aa86f2284ccdc8ccfa26db5523bab50339a10e1de285ac99d4c3990b8693">AccidentalType::NONE</a>);</div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;</div><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;      _score-&gt;select(el, <a class="code" href="namespaceMs.html#a1066451ad9dc9959bedb76978f4f30c8a0679273e201afd0bf57af3961f8a23b8">SelectType::SINGLE</a>, 0);</div><div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;      is.<a class="code" href="classMs_1_1InputState.html#a185cc2920a232317a5543ad71f2abc21">setRest</a>(<span class="keyword">false</span>);</div><div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;      is.<a class="code" href="classMs_1_1InputState.html#a2b598e99509560ee141496e415f5bffb">setNoteEntryMode</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;      adjustCanvasPosition(el, <span class="keyword">false</span>);</div><div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;      setEditElement(el);</div><div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;</div><div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;      <a class="code" href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">getAction</a>(<span class="stringliteral">&quot;pad-rest&quot;</span>)-&gt;setChecked(<span class="keyword">false</span>);</div><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;      setMouseTracking(<span class="keyword">true</span>);</div><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;      shadowNote-&gt;setVisible(<span class="keyword">true</span>);</div><div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;      _score-&gt;setUpdateAll();</div><div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;      _score-&gt;update();</div><div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;</div><div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;      <a class="code" href="classMs_1_1Staff.html">Staff</a>* staff = _score-&gt;staff(is.<a class="code" href="classMs_1_1InputState.html#a15cf2602df222da8558a2d6a43e66b19">track</a>() / <a class="code" href="mscore_8h.html#a7b14c16d0b45fd100ee97e74cfd907c0">VOICES</a>);</div><div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;</div><div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;      <span class="comment">// if not tab, pitched/unpitched depends on instrument (override StaffGroup to allow pitched/unpitched changes)</span></div><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;      <a class="code" href="namespaceMs.html#aad3918cfddca91d981504ae55c0f19b0">StaffGroup</a> staffGroup = staff-&gt;<a class="code" href="classMs_1_1Staff.html#ad248bef7f25a4fe152ce281372a24d3f">staffType</a>(is.<a class="code" href="classMs_1_1InputState.html#a79d562ec34847c3154ec4c6c5073d464">tick</a>())-&gt;group();</div><div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;      <span class="keywordflow">if</span> (staffGroup != <a class="code" href="namespaceMs.html#a3b085ddb3e3b890843f2e33874b9fa4baf684bf05fa3e81528c84d1d281d839f1">StaffGroup::TAB</a>)</div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;            staffGroup = staff-&gt;<a class="code" href="classMs_1_1Staff.html#ae31dc0de799c1e206af979e65bf837ab">part</a>()-&gt;<a class="code" href="classMs_1_1Part.html#a6cae82662abe64d683dff09b3c7874f8">instrument</a>(is.<a class="code" href="classMs_1_1InputState.html#a79d562ec34847c3154ec4c6c5073d464">tick</a>())-&gt;useDrumset() ? <a class="code" href="namespaceMs.html#a3369cc1ece2bbd874c148455b5db4b86a4c1e3a498a71f85d23ea30283022c6a3">StaffGroup::PERCUSSION</a> : <a class="code" href="namespaceMs.html#aad3918cfddca91d981504ae55c0f19b0a94e94133f4bdc1794c6b647b8ea134d0">StaffGroup::STANDARD</a>;</div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;</div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;      <span class="keywordflow">switch</span> (staffGroup) {</div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#aad3918cfddca91d981504ae55c0f19b0a94e94133f4bdc1794c6b647b8ea134d0">StaffGroup::STANDARD</a>:</div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a3b085ddb3e3b890843f2e33874b9fa4baf684bf05fa3e81528c84d1d281d839f1">StaffGroup::TAB</a>: {</div><div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;                  <span class="keywordtype">int</span> strg = 0;                 <span class="comment">// assume topmost string as current string</span></div><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;                  <span class="comment">// if entering note entry with a note selected and the note has a string</span></div><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;                  <span class="comment">// set InputState::_string to note physical string</span></div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;                  <span class="keywordflow">if</span> (el-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#aeccc894c5a64aba67bbfaf8fe1b755d5a10de4bc81f754b19b0d27246a0589c05">ElementType::NOTE</a>) {</div><div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;                        strg = (<span class="keyword">static_cast&lt;</span><a class="code" href="classMs_1_1Note.html">Note</a>*<span class="keyword">&gt;</span>(el))-&gt;string();</div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;                        }</div><div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;                  is.<a class="code" href="classMs_1_1InputState.html#a29a52f461eddb54abda0ef2214599fee">setString</a>(strg);</div><div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;                  }</div><div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a3369cc1ece2bbd874c148455b5db4b86a4c1e3a498a71f85d23ea30283022c6a3">StaffGroup::PERCUSSION</a>:</div><div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;            }</div><div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;      <span class="comment">// set cursor after setting the stafftype-dependent state</span></div><div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;      moveCursor();</div><div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;      <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;updateInputState(_score);</div><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;      shadowNote-&gt;setVisible(<span class="keyword">false</span>);</div><div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;      setCursorOn(<span class="keyword">true</span>);</div><div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;      }</div><div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;</div><div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;<span class="comment">//   endNoteEntry</span></div><div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;</div><div class="line"><a name="l03238"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a0857568aea0bf9897ecf5387a5bd41fc"> 3238</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a0857568aea0bf9897ecf5387a5bd41fc">ScoreView::endNoteEntry</a>()</div><div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;      {</div><div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;      <a class="code" href="classMs_1_1InputState.html">InputState</a>&amp; is = _score-&gt;inputState();</div><div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;      is.<a class="code" href="classMs_1_1InputState.html#a2b598e99509560ee141496e415f5bffb">setNoteEntryMode</a>(<span class="keyword">false</span>);</div><div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;      <span class="keywordflow">if</span> (is.<a class="code" href="classMs_1_1InputState.html#aa3c2705f1c6bbae2937ff66e367da527">slur</a>()) {</div><div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;            <span class="keyword">const</span> std::vector&lt;SpannerSegment*&gt;&amp; el = is.<a class="code" href="classMs_1_1InputState.html#aa3c2705f1c6bbae2937ff66e367da527">slur</a>()-&gt;<a class="code" href="classMs_1_1Spanner.html#a821182163a4bfdf98b47121451de6aea">spannerSegments</a>();</div><div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;            <span class="keywordflow">if</span> (!el.empty())</div><div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;                  el.front()-&gt;setSelected(<span class="keyword">false</span>);</div><div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;            is.<a class="code" href="classMs_1_1InputState.html#af31048b03da7dd0dab6554f8acd8e399">setSlur</a>(0);</div><div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;            }</div><div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;      setMouseTracking(<span class="keyword">false</span>);</div><div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;      shadowNote-&gt;setVisible(<span class="keyword">false</span>);</div><div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;      setCursorOn(<span class="keyword">false</span>);</div><div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;      _score-&gt;setUpdateAll();</div><div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;      _score-&gt;update();</div><div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;      }</div><div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;</div><div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;<span class="comment">//   dragScoreView</span></div><div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;</div><div class="line"><a name="l03259"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a4892156600af3c4f984c9834b8bab17d"> 3259</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a4892156600af3c4f984c9834b8bab17d">ScoreView::dragScoreView</a>(QMouseEvent* ev)</div><div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;      {</div><div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;      QPoint d = ev-&gt;pos() - _matrix.map(editData.startMove).toPoint();</div><div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;      <span class="keywordtype">int</span> dx   = d.x();</div><div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;      <span class="keywordtype">int</span> dy   = d.y();</div><div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;</div><div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;      <span class="keywordflow">if</span> (dx == 0 &amp;&amp; dy == 0)</div><div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;</div><div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;      constraintCanvas(&amp;dx, &amp;dy);</div><div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;</div><div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;      <a class="code" href="classMs_1_1TourHandler.html#ad76d9649ea2b543417df5e44b3cebd54">TourHandler::startTour</a>(<span class="stringliteral">&quot;navigate-tour&quot;</span>);</div><div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;</div><div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;      _matrix.setMatrix(_matrix.m11(), _matrix.m12(), _matrix.m13(), _matrix.m21(),</div><div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;         _matrix.m22(), _matrix.m23(), _matrix.dx()+dx, _matrix.dy()+dy, _matrix.m33());</div><div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;      imatrix = _matrix.inverted();</div><div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;      scroll(dx, dy, QRect(0, 0, width(), height()));</div><div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;      <span class="comment">// scroll schedules an update which is probably too small</span></div><div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;      <span class="comment">// hack around:</span></div><div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;      <span class="keywordflow">if</span> (dx &gt; 0)</div><div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;            update(-10, 0, dx + 50, height());</div><div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dx &lt; 0)</div><div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;            update(width() - 50 + dx, 0, width() + 10, height());</div><div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;      emit offsetChanged(_matrix.dx(), _matrix.dy());</div><div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;      emit viewRectChanged();</div><div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;      }</div><div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;</div><div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;<span class="comment">//   doDragLasso</span></div><div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;</div><div class="line"><a name="l03290"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a3dc36593be9301e1e5461fecfdbee728"> 3290</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a3dc36593be9301e1e5461fecfdbee728">ScoreView::doDragLasso</a>(QMouseEvent* ev)</div><div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;      {</div><div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;      <a class="code" href="classMs_1_1TourHandler.html#ad76d9649ea2b543417df5e44b3cebd54">TourHandler::startTour</a>(<span class="stringliteral">&quot;select-tour&quot;</span>);</div><div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;      QPointF p = toLogical(ev-&gt;pos());</div><div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;      _score-&gt;addRefresh(lasso-&gt;canvasBoundingRect());</div><div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;      QRectF r;</div><div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;      r.setCoords(editData.startMove.x(), editData.startMove.y(), p.x(), p.y());</div><div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;      lasso-&gt;setbbox(r.normalized());</div><div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;      QRectF _lassoRect(lasso-&gt;bbox());</div><div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;      r = _matrix.mapRect(_lassoRect);</div><div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;      QSize sz(r.size().toSize());</div><div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;      <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;statusBar()-&gt;showMessage(QString(<span class="stringliteral">&quot;%1 x %2&quot;</span>).arg(sz.width()).arg(sz.height()), 3000);</div><div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;      _score-&gt;addRefresh(lasso-&gt;canvasBoundingRect());</div><div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;      _score-&gt;lassoSelect(lasso-&gt;bbox());</div><div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;      _score-&gt;update();</div><div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;      }</div><div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;</div><div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;<span class="comment">//   endLasso</span></div><div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;</div><div class="line"><a name="l03311"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#aa05c08b2242f9c4a523044beddd2bea3"> 3311</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#aa05c08b2242f9c4a523044beddd2bea3">ScoreView::endLasso</a>()</div><div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;      {</div><div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;      _score-&gt;addRefresh(lasso-&gt;canvasBoundingRect());</div><div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;      lasso-&gt;setbbox(QRectF());</div><div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;      _score-&gt;lassoSelectEnd();</div><div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;      _score-&gt;update();</div><div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;      <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;endCmd();</div><div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;      }</div><div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;</div><div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;<span class="comment">//   deselectAll</span></div><div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;</div><div class="line"><a name="l03324"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a719c6e2966c4a8a15c29f85fc7ef688b"> 3324</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a719c6e2966c4a8a15c29f85fc7ef688b">ScoreView::deselectAll</a>()</div><div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;      {</div><div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;      _score-&gt;deselectAll();</div><div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;      _score-&gt;update();</div><div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;      <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;endCmd();</div><div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;      }</div><div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;</div><div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;<span class="comment">//   inputMethodQuery</span></div><div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;</div><div class="line"><a name="l03335"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a804ddae9ab90338b17272e5cb470cda0"> 3335</a></span>&#160;QVariant <a class="code" href="classMs_1_1ScoreView.html#a804ddae9ab90338b17272e5cb470cda0">ScoreView::inputMethodQuery</a>(Qt::InputMethodQuery query)<span class="keyword"> const</span></div><div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;<span class="keyword">      </span>{</div><div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;<span class="comment">//      qDebug(&quot;0x%x  %s&quot;, int(query), editData.element ? editData.element-&gt;name() : &quot;-no element-&quot;);</span></div><div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;      <span class="keywordflow">if</span> (editData.element &amp;&amp; editData.element-&gt;isTextBase()) {</div><div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;            <a class="code" href="classMs_1_1TextBase.html">TextBase</a>* text = <a class="code" href="namespaceMs.html#a0ae7680d3dcd8f5ece7e7c9985988c06">toTextBase</a>(editData.element);</div><div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;            <span class="keywordflow">switch</span> (query) {</div><div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;                  <span class="keywordflow">case</span> Qt::ImCursorRectangle: {</div><div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;                        QRectF r;</div><div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;                        <span class="keywordflow">if</span> (editMode()) {</div><div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;                              <a class="code" href="classMs_1_1TextCursor.html">TextCursor</a>* cursor = text-&gt;<a class="code" href="classMs_1_1TextBase.html#a523bd153f59fec4d0f45139da3ffa5e7">cursor</a>(editData);</div><div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;                              r = toPhysical(cursor-&gt;<a class="code" href="classMs_1_1TextCursor.html#a4edbcbcd5699b08957c2869c32af433e">cursorRect</a>().translated(text-&gt;<a class="code" href="classMs_1_1Element.html#aafc617f0cd5069a406a83da394b15e53">canvasPos</a>()));</div><div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;                              r.setWidth(1); <span class="comment">// InputMethod doesn&#39;t display properly if width left at 0</span></div><div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;                              }</div><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;                        <span class="keywordflow">else</span></div><div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;                              r = toPhysical(text-&gt;<a class="code" href="classMs_1_1Element.html#a6ca9221d8858907d3063fa58255fb804">canvasBoundingRect</a>());</div><div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;                        r.setHeight(r.height() + 10); <span class="comment">// add a little margin under the cursor</span></div><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;                        qDebug(<span class="stringliteral">&quot;ScoreView::inputMethodQuery() updating cursorRect to: (%3f, %3f) + (%3f, %3f)&quot;</span>, r.x(), r.y(), r.width(), r.height());</div><div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;                        <span class="keywordflow">return</span> QVariant(r);</div><div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;                        }</div><div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;                  <span class="keywordflow">case</span> Qt::ImEnabled:</div><div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// TextBase will always accept input method input</span></div><div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;                  <span class="keywordflow">case</span> Qt::ImHints:</div><div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;                        <span class="keywordflow">return</span> Qt::ImhNone; <span class="comment">// No hints for now, but maybe in future will give hints</span></div><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;                  <span class="keywordflow">case</span> Qt::ImInputItemClipRectangle: <span class="comment">// maybe give clip rect hint in future, but for now use default parent clipping rect</span></div><div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;                  <span class="keywordflow">default</span>:</div><div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;                        <span class="keywordflow">return</span> QWidget::inputMethodQuery(query); <span class="comment">// fall back to QWidget&#39;s version as default</span></div><div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;                  }</div><div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;            }</div><div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;      QVariant d = QWidget::inputMethodQuery(query); <span class="comment">// fall back to QWidget&#39;s version as default</span></div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;<span class="comment">//      qDebug() &lt;&lt; &quot;   &quot; &lt;&lt; d;</span></div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;      <span class="keywordflow">return</span> d;</div><div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;      }</div><div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;</div><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;<span class="comment">//   logicalZoomLevel</span></div><div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;</div><div class="line"><a name="l03372"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#aec20db38e504ce57480f8163c7b3c4e5"> 3372</a></span>&#160;qreal <a class="code" href="classMs_1_1ScoreView.html#aec20db38e504ce57480f8163c7b3c4e5">ScoreView::logicalZoomLevel</a>()<span class="keyword"> const</span></div><div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;<span class="keyword">      </span>{</div><div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;      <span class="keywordflow">return</span> _matrix.m11() / (<a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;physicalDotsPerInch() / <a class="code" href="namespaceMs.html#ab7904232a877db2441531871cf3f5108">DPI</a>);</div><div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;      }</div><div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;</div><div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;<span class="comment">//   physicalZoomLevel</span></div><div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;</div><div class="line"><a name="l03381"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#af49b0ad7154217f60bf3ed22e00a3cee"> 3381</a></span>&#160;qreal <a class="code" href="classMs_1_1ScoreView.html#af49b0ad7154217f60bf3ed22e00a3cee">ScoreView::physicalZoomLevel</a>()<span class="keyword"> const</span></div><div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;<span class="keyword">      </span>{</div><div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;      <span class="keywordflow">return</span> _matrix.m11();</div><div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;      }</div><div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;</div><div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;<span class="comment">//   setOffset</span></div><div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;</div><div class="line"><a name="l03390"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a60ba9b7e2b84c28a8dbdfc3549f52544"> 3390</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a60ba9b7e2b84c28a8dbdfc3549f52544">ScoreView::setOffset</a>(qreal x, qreal y)</div><div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;      {</div><div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;      _matrix.setMatrix(_matrix.m11(), _matrix.m12(), _matrix.m13(), _matrix.m21(),</div><div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;         _matrix.m22(), _matrix.m23(), x, y, _matrix.m33());</div><div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;      imatrix = _matrix.inverted();</div><div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;      emit viewRectChanged();</div><div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;      emit offsetChanged(x, y);</div><div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;      }</div><div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;</div><div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;<span class="comment">//   xoffset</span></div><div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;</div><div class="line"><a name="l03403"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#affd680e8fef37423dcd00caa17d375e5"> 3403</a></span>&#160;qreal <a class="code" href="classMs_1_1ScoreView.html#affd680e8fef37423dcd00caa17d375e5">ScoreView::xoffset</a>()<span class="keyword"> const</span></div><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;<span class="keyword">      </span>{</div><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;      <span class="keywordflow">return</span> _matrix.dx();</div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;      }</div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;</div><div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;<span class="comment">//   yoffset</span></div><div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;</div><div class="line"><a name="l03412"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a44c6bd40d3aa305ab04894c56f47d972"> 3412</a></span>&#160;qreal <a class="code" href="classMs_1_1ScoreView.html#a44c6bd40d3aa305ab04894c56f47d972">ScoreView::yoffset</a>()<span class="keyword"> const</span></div><div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;<span class="keyword">      </span>{</div><div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;      <span class="keywordflow">return</span> _matrix.dy();</div><div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;      }</div><div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;</div><div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;<span class="comment">//   fsize</span></div><div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;</div><div class="line"><a name="l03421"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#ac5d599777a2d7b5e9750bfad3ddb8c14"> 3421</a></span>&#160;QSizeF <a class="code" href="classMs_1_1ScoreView.html#ac5d599777a2d7b5e9750bfad3ddb8c14">ScoreView::fsize</a>()<span class="keyword"> const</span></div><div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;<span class="keyword">      </span>{</div><div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;      QSize s = size();</div><div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;      <span class="keywordflow">return</span> QSizeF(s.width() * imatrix.m11(), s.height() * imatrix.m22());</div><div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;      }</div><div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;</div><div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;<span class="comment">//   keyboard nav constants</span></div><div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;</div><div class="line"><a name="l03431"></a><span class="lineno"><a class="line" href="namespaceMs.html#a1f2a0152a1bad8e53e685e4b821d89c9"> 3431</a></span>&#160;constexpr qreal <a class="code" href="namespaceMs.html#a1f2a0152a1bad8e53e685e4b821d89c9">scrollStep</a>   {   .8 };</div><div class="line"><a name="l03432"></a><span class="lineno"><a class="line" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba"> 3432</a></span>&#160;constexpr qreal <a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a>  { 10.0 };</div><div class="line"><a name="l03433"></a><span class="lineno"><a class="line" href="namespaceMs.html#a69e4fa7a19b16bb41903f725726760bf"> 3433</a></span>&#160;constexpr qreal <a class="code" href="namespaceMs.html#a69e4fa7a19b16bb41903f725726760bf">thickPadding</a> { 25.0 };</div><div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;</div><div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;<span class="comment">//   pageNext</span></div><div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;</div><div class="line"><a name="l03439"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#abad632b129432186a9b5c84b3ef096f3"> 3439</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#abad632b129432186a9b5c84b3ef096f3">ScoreView::pageNext</a>()</div><div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;      {</div><div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;      <span class="keywordflow">if</span> (score()-&gt;pages().empty())</div><div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;      <span class="keywordflow">if</span> (score()-&gt;layoutMode() != <a class="code" href="namespaceMs.html#a9b1fb02f916c554309371c6513550a1ba22311203d44b308bd2d607cdc2dcb72c">LayoutMode::PAGE</a>) {</div><div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;            screenNext();</div><div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;            }</div><div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;      <a class="code" href="classMs_1_1Page.html">Page</a>* page = score()-&gt;pages().back();</div><div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;      qreal x, y;</div><div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classMs_1_1MScore.html#aca131f1f53787e9bfa4fa5e3b564e7de">MScore::verticalOrientation</a>()) {</div><div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;            x        = <a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a>;</div><div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;            y        = yoffset() - (page-&gt;<a class="code" href="classMs_1_1Element.html#a2a8ba8af6817e602c27c154e93542028">height</a>() + <a class="code" href="namespaceMs.html#a69e4fa7a19b16bb41903f725726760bf">thickPadding</a>) * physicalZoomLevel();</div><div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;            qreal ly = <a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a> - page-&gt;<a class="code" href="classMs_1_1Element.html#a19157e811d0d2a0e3c94dc844039ba2f">pos</a>().y() * physicalZoomLevel();</div><div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;            <span class="keywordflow">if</span> (y &lt;= ly - height() * <a class="code" href="namespaceMs.html#a1f2a0152a1bad8e53e685e4b821d89c9">scrollStep</a>) {</div><div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;                  pageEnd();</div><div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;                  <span class="keywordflow">return</span>;</div><div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;                  }</div><div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;            }</div><div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;            y        = <a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a>;</div><div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;            x        = xoffset() - (page-&gt;<a class="code" href="classMs_1_1Element.html#abd781d11186d1951028a0efaf6d5cf5a">width</a>() + <a class="code" href="namespaceMs.html#a69e4fa7a19b16bb41903f725726760bf">thickPadding</a>) * physicalZoomLevel();</div><div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;            qreal lx = <a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a> - page-&gt;<a class="code" href="classMs_1_1Element.html#a19157e811d0d2a0e3c94dc844039ba2f">pos</a>().x() * physicalZoomLevel();</div><div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;            <span class="keywordflow">if</span> (x &lt;= lx - width() * <a class="code" href="namespaceMs.html#a1f2a0152a1bad8e53e685e4b821d89c9">scrollStep</a>) {</div><div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;                  pageEnd();</div><div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;                  <span class="keywordflow">return</span>;</div><div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;                  }</div><div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;            }</div><div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;      setOffset(x, y);</div><div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;      update();</div><div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;      }</div><div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;</div><div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;<span class="comment">//   screenNext</span></div><div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;</div><div class="line"><a name="l03475"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a230edc68abde8030cbea26c1436e0c65"> 3475</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a230edc68abde8030cbea26c1436e0c65">ScoreView::screenNext</a>()</div><div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;      {</div><div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;      <span class="keywordflow">if</span> (score()-&gt;pages().empty())</div><div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;      qreal x { xoffset() };</div><div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;      qreal y { yoffset() };</div><div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;      <span class="keywordflow">if</span> (score()-&gt;layoutMode() == <a class="code" href="namespaceMs.html#a9b1fb02f916c554309371c6513550a1ba17b8ef2c330f1430e00c9de5469fc7e7">LayoutMode::LINE</a>) {</div><div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;            x -= width() * <a class="code" href="namespaceMs.html#a1f2a0152a1bad8e53e685e4b821d89c9">scrollStep</a>;</div><div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;            <a class="code" href="classMs_1_1MeasureBase.html">MeasureBase</a>* lm = score()-&gt;lastMeasureMM();</div><div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;            <span class="comment">// Vertical frames aren&#39;t laid out in continuous view</span></div><div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;            <span class="keywordflow">while</span> (lm-&gt;<a class="code" href="classMs_1_1ScoreElement.html#aac3320320d350a161ed3f9a601160451">isVBoxBase</a>())</div><div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;                  lm = lm-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a362a1699d39b7f1684c13a1a8c75c376">prev</a>();</div><div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;            qreal lx = (lm-&gt;<a class="code" href="classMs_1_1Element.html#a19157e811d0d2a0e3c94dc844039ba2f">pos</a>().x() + lm-&gt;<a class="code" href="classMs_1_1Element.html#abd781d11186d1951028a0efaf6d5cf5a">width</a>()) * physicalZoomLevel() - width() * <a class="code" href="namespaceMs.html#a1f2a0152a1bad8e53e685e4b821d89c9">scrollStep</a>;</div><div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;            <span class="keywordflow">if</span> (x &lt; -lx)</div><div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;                  x = -lx;</div><div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;            }</div><div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;            y -= height() * <a class="code" href="namespaceMs.html#a1f2a0152a1bad8e53e685e4b821d89c9">scrollStep</a>;</div><div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;            <a class="code" href="classMs_1_1MeasureBase.html">MeasureBase</a>* lm { score()-&gt;lastMeasureMM() };</div><div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;            qreal ly { (lm-&gt;canvasPos().y() + lm-&gt;height()) * physicalZoomLevel() - height() * <a class="code" href="namespaceMs.html#a1f2a0152a1bad8e53e685e4b821d89c9">scrollStep</a> };</div><div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;            <span class="comment">// Special case to jump to top of next page in horizontal view.</span></div><div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;            <span class="keywordflow">if</span> (score()-&gt;layoutMode() == <a class="code" href="namespaceMs.html#a9b1fb02f916c554309371c6513550a1ba22311203d44b308bd2d607cdc2dcb72c">LayoutMode::PAGE</a> &amp;&amp; !<a class="code" href="classMs_1_1MScore.html#aca131f1f53787e9bfa4fa5e3b564e7de">MScore::verticalOrientation</a>()</div><div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;               &amp;&amp; y &lt;= -ly - height() * <a class="code" href="namespaceMs.html#a1f2a0152a1bad8e53e685e4b821d89c9">scrollStep</a>) {</div><div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;                  pageNext();</div><div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;                  <span class="keywordflow">return</span>;</div><div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;                  }</div><div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;            <span class="keywordflow">if</span> (y &lt; -ly)</div><div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;                  y = -ly;</div><div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;            }</div><div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;      setOffset(x, y);</div><div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;      update();</div><div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;      }</div><div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;</div><div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;<span class="comment">//   pagePrev</span></div><div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;</div><div class="line"><a name="l03512"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#afef24f41f99ba313d20ff8187e4d5232"> 3512</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#afef24f41f99ba313d20ff8187e4d5232">ScoreView::pagePrev</a>()</div><div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;      {</div><div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;      <span class="keywordflow">if</span> (score()-&gt;pages().empty())</div><div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;      <span class="keywordflow">if</span> (score()-&gt;layoutMode() != <a class="code" href="namespaceMs.html#a9b1fb02f916c554309371c6513550a1ba22311203d44b308bd2d607cdc2dcb72c">LayoutMode::PAGE</a>) {</div><div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;            screenPrev();</div><div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;            }</div><div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;      <a class="code" href="classMs_1_1Page.html">Page</a>* page = score()-&gt;pages().front();</div><div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;      qreal x, y;</div><div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classMs_1_1MScore.html#aca131f1f53787e9bfa4fa5e3b564e7de">MScore::verticalOrientation</a>()) {</div><div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;            x  = <a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a>;</div><div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;            y  = yoffset() + (page-&gt;<a class="code" href="classMs_1_1Element.html#a2a8ba8af6817e602c27c154e93542028">height</a>() + <a class="code" href="namespaceMs.html#a69e4fa7a19b16bb41903f725726760bf">thickPadding</a>) * physicalZoomLevel();</div><div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;            <span class="keywordflow">if</span> (y &gt; <a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a>)</div><div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;                  y = <a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a>;</div><div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;            }</div><div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;            y  = <a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a>;</div><div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;            x  = xoffset() + (page-&gt;<a class="code" href="classMs_1_1Element.html#abd781d11186d1951028a0efaf6d5cf5a">width</a>() + <a class="code" href="namespaceMs.html#a69e4fa7a19b16bb41903f725726760bf">thickPadding</a>) * physicalZoomLevel();</div><div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;            <span class="keywordflow">if</span> (x &gt; <a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a>)</div><div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;                  x = <a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a>;</div><div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;            }</div><div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;      setOffset(x, y);</div><div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;      update();</div><div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;      }</div><div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;</div><div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;<span class="comment">//   screenPrev</span></div><div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;</div><div class="line"><a name="l03542"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a2fc591b6529db05c03da165588a0d533"> 3542</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a2fc591b6529db05c03da165588a0d533">ScoreView::screenPrev</a>()</div><div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;      {</div><div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;      <span class="keywordflow">if</span> (score()-&gt;pages().empty())</div><div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;      qreal x { xoffset() };</div><div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;      qreal y { yoffset() };</div><div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;      <span class="keywordflow">if</span> (score()-&gt;layoutMode() == <a class="code" href="namespaceMs.html#a9b1fb02f916c554309371c6513550a1ba17b8ef2c330f1430e00c9de5469fc7e7">LayoutMode::LINE</a>) {</div><div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;            x += width() * <a class="code" href="namespaceMs.html#a1f2a0152a1bad8e53e685e4b821d89c9">scrollStep</a>;</div><div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;            <span class="keywordflow">if</span> (x &gt; <a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a>)</div><div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;                  x = <a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a>;</div><div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;            }</div><div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;            y += height() * <a class="code" href="namespaceMs.html#a1f2a0152a1bad8e53e685e4b821d89c9">scrollStep</a>;</div><div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;            <span class="comment">// Special casing for jumping to bottom of prev page in horizontal view</span></div><div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;            <span class="keywordflow">if</span> (score()-&gt;layoutMode() == <a class="code" href="namespaceMs.html#a9b1fb02f916c554309371c6513550a1ba22311203d44b308bd2d607cdc2dcb72c">LayoutMode::PAGE</a> &amp;&amp; !<a class="code" href="classMs_1_1MScore.html#aca131f1f53787e9bfa4fa5e3b564e7de">MScore::verticalOrientation</a>()</div><div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;               &amp;&amp; y &gt;= <a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a> + height() * <a class="code" href="namespaceMs.html#a1f2a0152a1bad8e53e685e4b821d89c9">scrollStep</a>) {</div><div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;                  <a class="code" href="classMs_1_1Page.html">Page</a>* page { score()-&gt;pages().front() };</div><div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;                  x += (page-&gt;width() + <a class="code" href="namespaceMs.html#a69e4fa7a19b16bb41903f725726760bf">thickPadding</a>) * physicalZoomLevel();</div><div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;                  <span class="comment">// The condition prevents jumping to the bottom of the</span></div><div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;                  <span class="comment">// first page after reaching the top</span></div><div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;                  <span class="keywordflow">if</span> (x &lt; <a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a> + (page-&gt;width() + <a class="code" href="namespaceMs.html#a69e4fa7a19b16bb41903f725726760bf">thickPadding</a>) * physicalZoomLevel()) {</div><div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;                        <a class="code" href="classMs_1_1MeasureBase.html">MeasureBase</a>* lm { score()-&gt;lastMeasureMM() };</div><div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;                        y = -(lm-&gt;canvasPos().y() + lm-&gt;height()) * physicalZoomLevel() + height() * <a class="code" href="namespaceMs.html#a1f2a0152a1bad8e53e685e4b821d89c9">scrollStep</a>;</div><div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;                        }</div><div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;                  <span class="keywordflow">if</span> (x &gt; <a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a>)</div><div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;                        x = <a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a>;</div><div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;                  }</div><div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;            <span class="keywordflow">if</span> (y &gt; <a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a>)</div><div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;                y = <a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a>;</div><div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;            }</div><div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;      setOffset(x, y);</div><div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;      update();</div><div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;      }</div><div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;</div><div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;<span class="comment">//   pageTop</span></div><div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;</div><div class="line"><a name="l03580"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#ab6a68eed7d8a3a5cb2fc2b2bdadcedda"> 3580</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#ab6a68eed7d8a3a5cb2fc2b2bdadcedda">ScoreView::pageTop</a>()</div><div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;      {</div><div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;      <span class="keywordflow">switch</span> (score()-&gt;layoutMode()) {</div><div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a9b1fb02f916c554309371c6513550a1ba22311203d44b308bd2d607cdc2dcb72c">LayoutMode::PAGE</a>:</div><div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;                  {</div><div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;                  qreal dx = <a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a>, dy = <a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a>;</div><div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;                  <a class="code" href="classMs_1_1Page.html">Page</a>* firstPage = score()-&gt;pages().front();</div><div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;                  <a class="code" href="classMs_1_1Page.html">Page</a>* lastPage  = score()-&gt;pages().back();</div><div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;                  <span class="keywordflow">if</span> (firstPage &amp;&amp; lastPage) {</div><div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;                        QPointF offsetPt(xoffset(), yoffset());</div><div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;                        QRectF firstPageRect(firstPage-&gt;<a class="code" href="classMs_1_1Element.html#a19157e811d0d2a0e3c94dc844039ba2f">pos</a>().x() * physicalZoomLevel(),</div><div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;                                             firstPage-&gt;<a class="code" href="classMs_1_1Element.html#a19157e811d0d2a0e3c94dc844039ba2f">pos</a>().y() * physicalZoomLevel(),</div><div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;                                             firstPage-&gt;<a class="code" href="classMs_1_1Element.html#abd781d11186d1951028a0efaf6d5cf5a">width</a>() * physicalZoomLevel(),</div><div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;                                             firstPage-&gt;<a class="code" href="classMs_1_1Element.html#a2a8ba8af6817e602c27c154e93542028">height</a>() * physicalZoomLevel());</div><div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;                        QRectF lastPageRect(lastPage-&gt;<a class="code" href="classMs_1_1Element.html#a19157e811d0d2a0e3c94dc844039ba2f">pos</a>().x() * physicalZoomLevel(),</div><div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;                                            lastPage-&gt;<a class="code" href="classMs_1_1Element.html#a19157e811d0d2a0e3c94dc844039ba2f">pos</a>().y() * physicalZoomLevel(),</div><div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;                                            lastPage-&gt;<a class="code" href="classMs_1_1Element.html#abd781d11186d1951028a0efaf6d5cf5a">width</a>() * physicalZoomLevel(),</div><div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;                                            lastPage-&gt;<a class="code" href="classMs_1_1Element.html#a2a8ba8af6817e602c27c154e93542028">height</a>() * physicalZoomLevel());</div><div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;                        QRectF pagesRect = firstPageRect.united(lastPageRect);</div><div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;                        dx = qMax(<a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a>, (width() - pagesRect.width()) / 2);</div><div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;                        dy = qMax(<a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a>, (height() - pagesRect.height()) / 2);</div><div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;                        }</div><div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;                  setOffset(dx, dy);</div><div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;                  }</div><div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a9b1fb02f916c554309371c6513550a1ba17b8ef2c330f1430e00c9de5469fc7e7">LayoutMode::LINE</a>:</div><div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;                  setOffset(<a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a>, 0.0);</div><div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a9b1fb02f916c554309371c6513550a1bafa177138f94a7ea01f549b1aa7893d03">LayoutMode::SYSTEM</a>:</div><div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;                  {</div><div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;                  qreal dx = <a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a>, dy = <a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a>;</div><div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;                  <a class="code" href="classMs_1_1Page.html">Page</a>* page = score()-&gt;pages().front();</div><div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;                  <span class="keywordflow">if</span> (page) {</div><div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;                        dx = qMax(<a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a>, (width() - page-&gt;<a class="code" href="classMs_1_1Element.html#abd781d11186d1951028a0efaf6d5cf5a">width</a>() * physicalZoomLevel()) / 2);</div><div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;                        }</div><div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;                  setOffset(dx, dy);</div><div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;                  }</div><div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;                  setOffset(<a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a>, <a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a>);</div><div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;      }</div><div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;      update();</div><div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;      }</div><div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;</div><div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;<span class="comment">//   pageEnd</span></div><div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;</div><div class="line"><a name="l03629"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a978708122185fbb15bb9a6cae3f18681"> 3629</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a978708122185fbb15bb9a6cae3f18681">ScoreView::pageEnd</a>()</div><div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;      {</div><div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;      <span class="keywordflow">if</span> (score()-&gt;pages().empty())</div><div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;      <a class="code" href="classMs_1_1MeasureBase.html">MeasureBase</a>* lm = score()-&gt;lastMeasureMM();</div><div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;      <span class="keywordflow">if</span> (score()-&gt;layoutMode() == <a class="code" href="namespaceMs.html#a9b1fb02f916c554309371c6513550a1ba17b8ef2c330f1430e00c9de5469fc7e7">LayoutMode::LINE</a>) {</div><div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;            <span class="comment">// Vertical frames aren&#39;t laid out in continuous view</span></div><div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;            <span class="keywordflow">while</span> (lm-&gt;<a class="code" href="classMs_1_1ScoreElement.html#aac3320320d350a161ed3f9a601160451">isVBoxBase</a>())</div><div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;                  lm = lm-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a362a1699d39b7f1684c13a1a8c75c376">prev</a>();</div><div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;            qreal lx = (lm-&gt;<a class="code" href="classMs_1_1Element.html#a19157e811d0d2a0e3c94dc844039ba2f">pos</a>().x() + lm-&gt;<a class="code" href="classMs_1_1Element.html#abd781d11186d1951028a0efaf6d5cf5a">width</a>()) * physicalZoomLevel() - <a class="code" href="namespaceMs.html#a1f2a0152a1bad8e53e685e4b821d89c9">scrollStep</a> * width();</div><div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;            setOffset(-lx, yoffset());</div><div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;            }</div><div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;            qreal lx { -<a class="code" href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">thinPadding</a> };</div><div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;            <span class="keywordflow">if</span> (score()-&gt;layoutMode() == <a class="code" href="namespaceMs.html#a9b1fb02f916c554309371c6513550a1ba22311203d44b308bd2d607cdc2dcb72c">LayoutMode::PAGE</a> &amp;&amp; !<a class="code" href="classMs_1_1MScore.html#aca131f1f53787e9bfa4fa5e3b564e7de">MScore::verticalOrientation</a>()) {</div><div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;                  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i { 0 }; i &lt; score()-&gt;npages() - 1; ++i)</div><div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;                        lx += score()-&gt;pages().at(i)-&gt;width() * physicalZoomLevel();</div><div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;                  }</div><div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;            <span class="keywordflow">if</span> (lm-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a0e9a0473e5ed4cc38a1dead12bf4c2f3">system</a>() &amp;&amp; lm-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a0e9a0473e5ed4cc38a1dead12bf4c2f3">system</a>()-&gt;<a class="code" href="classMs_1_1System.html#a57af65dafb20c1282ea78ba3d74725a0">page</a>()-&gt;<a class="code" href="classMs_1_1Element.html#abd781d11186d1951028a0efaf6d5cf5a">width</a>() * physicalZoomLevel() &gt; width())</div><div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;                  lx = (lm-&gt;<a class="code" href="classMs_1_1Element.html#aafc617f0cd5069a406a83da394b15e53">canvasPos</a>().x() + lm-&gt;<a class="code" href="classMs_1_1Element.html#abd781d11186d1951028a0efaf6d5cf5a">width</a>()) * physicalZoomLevel() - width() * <a class="code" href="namespaceMs.html#a1f2a0152a1bad8e53e685e4b821d89c9">scrollStep</a>;</div><div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;</div><div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;            qreal ly { (lm-&gt;<a class="code" href="classMs_1_1Element.html#aafc617f0cd5069a406a83da394b15e53">canvasPos</a>().y() + lm-&gt;<a class="code" href="classMs_1_1Element.html#a2a8ba8af6817e602c27c154e93542028">height</a>()) * physicalZoomLevel() - height() * <a class="code" href="namespaceMs.html#a1f2a0152a1bad8e53e685e4b821d89c9">scrollStep</a> };</div><div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;            setOffset(-lx, -ly);</div><div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;            }</div><div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;      update();</div><div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;      }</div><div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;</div><div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;<span class="comment">//   adjustCanvasPosition</span></div><div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;</div><div class="line"><a name="l03660"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#abb85c34d7002f2f9bd49bb57e6afd689"> 3660</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#abb85c34d7002f2f9bd49bb57e6afd689">ScoreView::adjustCanvasPosition</a>(<span class="keyword">const</span> <a class="code" href="classMs_1_1Element.html">Element</a>* el, <span class="keywordtype">bool</span> playBack, <span class="keywordtype">int</span> staff )</div><div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;      {</div><div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">this</span> != <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;currentScoreView() &amp;&amp; !_moveWhenInactive)</div><div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;      <span class="comment">// TODO: change icon, or add panning options</span></div><div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;panDuringPlayback())</div><div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;</div><div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;      <span class="keywordflow">if</span> (score()-&gt;layoutMode() == <a class="code" href="namespaceMs.html#a9b1fb02f916c554309371c6513550a1ba17b8ef2c330f1430e00c9de5469fc7e7">LayoutMode::LINE</a>) {</div><div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;</div><div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;            <span class="keywordflow">if</span> (!el)</div><div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;                  <span class="keywordflow">return</span>;</div><div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;</div><div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;            <span class="comment">/* Not used, because impossible to get panel width beforehand</span></div><div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;<span class="comment">            const MeasureBase* m = 0;</span></div><div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;<span class="comment">            if (el-&gt;type() == ElementType::MEASURE)</span></div><div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;<span class="comment">                  m = static_cast&lt;const MeasureBase*&gt;(el);</span></div><div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;<span class="comment">            else</span></div><div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;<span class="comment">                  m = static_cast&lt;const Measure*&gt;(el-&gt;parent()-&gt;findMeasure());</span></div><div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;<span class="comment">            */</span></div><div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;</div><div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;            qreal xo = 0.0;  <span class="comment">// new x offset</span></div><div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;            QRectF curPos = playBack ? _cursor-&gt;rect() : el-&gt;<a class="code" href="classMs_1_1Element.html#a6ca9221d8858907d3063fa58255fb804">canvasBoundingRect</a>();</div><div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;            <span class="keywordflow">if</span> (playBack &amp;&amp; _cursor &amp;&amp; <a class="code" href="namespaceMs.html#a1a43a84e57fe33057a3e17aa85488d5f">seq</a>-&gt;<a class="code" href="classMs_1_1Seq.html#abb1e3673970733b8564170ccee3c3b6e">isPlaying</a>() &amp;&amp; panSettings().enabled)</div><div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;                  curPos = _controlCursor-&gt;rect();</div><div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;            <span class="comment">// keep current note in view as well if applicable (note input mode)</span></div><div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;            <a class="code" href="classMs_1_1Element.html">Element</a>* current = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;            <span class="keywordflow">if</span> (noteEntryMode()) {</div><div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;                  current = score()-&gt;selection().cr();</div><div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;                  <span class="keywordflow">if</span> (current &amp;&amp; current != el)</div><div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;                        curPos |= current-&gt;<a class="code" href="classMs_1_1Element.html#a6ca9221d8858907d3063fa58255fb804">canvasBoundingRect</a>();</div><div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;                  }</div><div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;</div><div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;            qreal curPosR = curPos.right();                    <span class="comment">// Position on the canvas</span></div><div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;            qreal curPosL = curPos.left();                     <span class="comment">// Position on the canvas</span></div><div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;            qreal curPosScrR = curPosR * physicalZoomLevel() + xoffset(); <span class="comment">// Position in the screen</span></div><div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;            qreal curPosScrL = curPosL * physicalZoomLevel() + xoffset(); <span class="comment">// Position in the screen</span></div><div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;            qreal marginLeft = width() * 0.05;</div><div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;            qreal marginRight = width() * 0.05; <span class="comment">// leaves 5% margin to the right</span></div><div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;</div><div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;<span class="comment">//            if (_continuousPanel-&gt;active())                           causes jump</span></div><div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;<span class="comment">//                  marginLeft += _continuousPanel-&gt;width() * physicalZoomLevel();</span></div><div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;</div><div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;            <span class="comment">// this code implements &quot;continuous&quot; panning</span></div><div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;            <span class="comment">// it could potentially be enabled via more panning options</span></div><div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;            <span class="keywordflow">if</span> (playBack &amp;&amp; _cursor &amp;&amp; <a class="code" href="namespaceMs.html#a1a43a84e57fe33057a3e17aa85488d5f">seq</a>-&gt;<a class="code" href="classMs_1_1Seq.html#abb1e3673970733b8564170ccee3c3b6e">isPlaying</a>() &amp;&amp; <a class="code" href="namespaceMs.html#abe8f8da5976e3a727f1a3a7a117e73de">preferences</a>.<a class="code" href="structMs_1_1Preferences.html#a39e1e4d3d337de7dcafb14fd8c75c4a2">getBool</a>(PREF_PAN_SMOOTHLY_ENABLED)) {</div><div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;                  <span class="comment">// keep playback cursor pinned at 35% (or at the percent of controlCursorScreenPos + 5%)</span></div><div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;                  xo = -curPosL * physicalZoomLevel() + marginLeft + width() * _panSettings.controlCursorScreenPos;</div><div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;                  }</div><div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (round(curPosScrR) &gt; round(width() - marginRight)) {</div><div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;                  <span class="comment">// focus in or beyond right margin</span></div><div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;                  <span class="comment">// pan to left margin in playback,</span></div><div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;                  <span class="comment">// most of the way left in note entry,</span></div><div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;                  <span class="comment">// otherwise just enforce right margin</span></div><div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;                  <span class="keywordflow">if</span> (playBack)</div><div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;                        xo = -curPosL * physicalZoomLevel() + marginLeft;</div><div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;                  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (noteEntryMode())</div><div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;                        xo = -curPosL * physicalZoomLevel() + marginLeft + width() * 0.2;</div><div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;                  <span class="keywordflow">else</span></div><div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;                        xo = -curPosR * physicalZoomLevel() + width() - marginRight;</div><div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;                  }</div><div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (round(curPosScrL) &lt; round(marginLeft) ) {</div><div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;                  <span class="comment">// focus in or beyond left margin</span></div><div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;                  <span class="comment">// enforce left margin</span></div><div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;                  <span class="comment">// (previously we moved canvas all the way right,</span></div><div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;                  <span class="comment">// but this made sense only when navigating right-to-left)</span></div><div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;                  xo = -curPosL * physicalZoomLevel() + marginLeft;</div><div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;                  }</div><div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;                  <span class="comment">// focus is within margins, so do nothing</span></div><div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;                  <span class="keywordflow">return</span>;</div><div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;                  }</div><div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;            <span class="comment">// avoid empty space on either side of &quot;page&quot;</span></div><div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;            qreal scoreEnd = score()-&gt;pages().front()-&gt;width() * physicalZoomLevel() + xo;</div><div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;            <span class="keywordflow">if</span> (xo &gt; 10)</div><div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;                  xo = 10;</div><div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (scoreEnd &lt; width())</div><div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;                  xo += width() - scoreEnd;</div><div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;</div><div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;            setOffset(xo, yoffset());</div><div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;            update();</div><div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;            }</div><div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;</div><div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;      <span class="keyword">const</span> <a class="code" href="classMs_1_1MeasureBase.html">MeasureBase</a>* m;</div><div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;      <span class="keywordflow">if</span> (!el)</div><div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (el-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#aeccc894c5a64aba67bbfaf8fe1b755d5a10de4bc81f754b19b0d27246a0589c05">ElementType::NOTE</a>)</div><div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;            m = static_cast&lt;const Note*&gt;(el)-&gt;chord()-&gt;measure();</div><div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (el-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#a28863123e439c88c35086eb7dd963c9aa50780f47f6839d47d60bc4555ee00c3f">ElementType::REST</a>)</div><div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;            m = static_cast&lt;const Rest*&gt;(el)-&gt;measure();</div><div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (el-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea45d886b842022787183a308e0200d336">ElementType::CHORD</a>)</div><div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;            m = static_cast&lt;const Chord*&gt;(el)-&gt;measure();</div><div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (el-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea49f1f9beb48e7b006a35b2377403bea8">ElementType::SEGMENT</a>)</div><div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;            m = static_cast&lt;const Segment*&gt;(el)-&gt;measure();</div><div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (el-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#a175bedec052e1c2fd09257ffde43d847a3cc1dc9c08cf02f04fa8bda18b489c70">ElementType::LYRICS</a>)</div><div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;            m = static_cast&lt;const Lyrics*&gt;(el)-&gt;measure();</div><div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (el-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea9c6a910141dd674271df4ebacccaeed0">ElementType::HARMONY</a> || el-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#a175bedec052e1c2fd09257ffde43d847ac8232229a477d4710dddc56eb98ed44e">ElementType::FIGURED_BASS</a>)</div><div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;         &amp;&amp; el-&gt;<a class="code" href="classMs_1_1Element.html#a52b30fdd589beba5b760a561a50ac601">parent</a>()-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea49f1f9beb48e7b006a35b2377403bea8">ElementType::SEGMENT</a>)</div><div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;            m = static_cast&lt;const Segment*&gt;(el-&gt;<a class="code" href="classMs_1_1Element.html#a52b30fdd589beba5b760a561a50ac601">parent</a>())-&gt;measure();</div><div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (el-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea9c6a910141dd674271df4ebacccaeed0">ElementType::HARMONY</a> &amp;&amp; el-&gt;<a class="code" href="classMs_1_1Element.html#a52b30fdd589beba5b760a561a50ac601">parent</a>()-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#a175bedec052e1c2fd09257ffde43d847ada98229f91cb296787194d3b3c265bbe">ElementType::FRET_DIAGRAM</a></div><div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;         &amp;&amp; el-&gt;<a class="code" href="classMs_1_1Element.html#a52b30fdd589beba5b760a561a50ac601">parent</a>()-&gt;<a class="code" href="classMs_1_1Element.html#a52b30fdd589beba5b760a561a50ac601">parent</a>()-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea49f1f9beb48e7b006a35b2377403bea8">ElementType::SEGMENT</a>)</div><div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;            m = static_cast&lt;const Segment*&gt;(el-&gt;<a class="code" href="classMs_1_1Element.html#a52b30fdd589beba5b760a561a50ac601">parent</a>()-&gt;<a class="code" href="classMs_1_1Element.html#a52b30fdd589beba5b760a561a50ac601">parent</a>())-&gt;measure();</div><div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (el-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a06e5d7c169bf6eb01f5f723cbdae973f">isMeasureBase</a>())</div><div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;            m = static_cast&lt;const MeasureBase*&gt;(el);</div><div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (el-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a5aa58f96618edb0e3ff660e1c96c5d4e">isSpannerSegment</a>()) {</div><div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;            <a class="code" href="classMs_1_1Element.html">Element</a>* se = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classMs_1_1SpannerSegment.html">SpannerSegment</a>*<span class="keyword">&gt;</span>(el)-&gt;spanner()-&gt;startElement();</div><div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;            m = <span class="keyword">static_cast&lt;</span><a class="code" href="classMs_1_1Measure.html">Measure</a>*<span class="keyword">&gt;</span>(se-&gt;<a class="code" href="classMs_1_1Element.html#aa1f1ac02b360d2d4f30e14aaa5ca2564">findMeasure</a>());</div><div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;            }</div><div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (el-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a98f8c58df0f5baafe63414bedf84514f">isSpanner</a>()) {</div><div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;            <a class="code" href="classMs_1_1Element.html">Element</a>* se = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classMs_1_1Spanner.html">Spanner</a>*<span class="keyword">&gt;</span>(el)-&gt;startElement();</div><div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;            m = <span class="keyword">static_cast&lt;</span><a class="code" href="classMs_1_1Measure.html">Measure</a>*<span class="keyword">&gt;</span>(se-&gt;<a class="code" href="classMs_1_1Element.html#aa1f1ac02b360d2d4f30e14aaa5ca2564">findMeasure</a>());</div><div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;            }</div><div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;            <span class="comment">// attempt to find measure</span></div><div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;            <a class="code" href="classMs_1_1Element.html">Element</a>* e = el-&gt;<a class="code" href="classMs_1_1Element.html#a52b30fdd589beba5b760a561a50ac601">parent</a>();</div><div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;            <span class="keywordflow">while</span> (e &amp;&amp; !e-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a06e5d7c169bf6eb01f5f723cbdae973f">isMeasureBase</a>())</div><div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;                  e = e-&gt;<a class="code" href="classMs_1_1Element.html#a52b30fdd589beba5b760a561a50ac601">parent</a>();</div><div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;            <span class="keywordflow">if</span> (e)</div><div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;                  m = <a class="code" href="namespaceMs.html#a0170d0c2acdf047caab45053aec53588">toMeasureBase</a>(e);</div><div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;                  <span class="keywordflow">return</span>;</div><div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;            }</div><div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;      <span class="keywordflow">if</span> (!m)</div><div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;</div><div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;      <span class="keywordtype">int</span> staffIdx = el-&gt;<a class="code" href="classMs_1_1Element.html#a3c37abb86b5dfb5b16fe74155154bab8">staffIdx</a>();</div><div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;      <a class="code" href="classMs_1_1System.html">System</a>* sys = m-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a0e9a0473e5ed4cc38a1dead12bf4c2f3">system</a>();</div><div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;      <span class="keywordflow">if</span> (!sys)</div><div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;</div><div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;      QPointF p(el-&gt;<a class="code" href="classMs_1_1Element.html#aafc617f0cd5069a406a83da394b15e53">canvasPos</a>());</div><div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;      QRectF r(canvasViewport());</div><div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;      QRectF mRect(m-&gt;<a class="code" href="classMs_1_1Element.html#a6ca9221d8858907d3063fa58255fb804">canvasBoundingRect</a>());</div><div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;      QRectF sysRect;</div><div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;      <span class="keywordflow">if</span> (staffIdx == -1)</div><div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;            sysRect = sys-&gt;<a class="code" href="classMs_1_1Element.html#a6ca9221d8858907d3063fa58255fb804">canvasBoundingRect</a>();</div><div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;            sysRect = sys-&gt;<a class="code" href="classMs_1_1System.html#a51fa420463d9aadfbdc0839fb781ff1e">staff</a>(staffIdx)-&gt;<a class="code" href="classMs_1_1SysStaff.html#aa79ca5523125cce73baf2b3783d0dd32">bbox</a>();</div><div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;</div><div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;      <span class="comment">// only try to track measure if not during playback</span></div><div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;      <span class="keywordflow">if</span> (!playBack)</div><div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;            sysRect = mRect;</div><div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;</div><div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;      <span class="keywordtype">double</span> _spatium    = score()-&gt;spatium();</div><div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;      <span class="keyword">const</span> qreal border = _spatium * 3;</div><div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;      QRectF showRect;</div><div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;      <span class="keywordflow">if</span> (staff == -1) {</div><div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;            showRect = QRectF(mRect.x(), sysRect.y(), mRect.width(), sysRect.height())</div><div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;                        .adjusted(-border, -border, border, border);</div><div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;            }</div><div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;            <span class="comment">// find a box for the individual stave in a system</span></div><div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;            QRectF stave = QRectF(sys-&gt;<a class="code" href="classMs_1_1Element.html#a6ca9221d8858907d3063fa58255fb804">canvasBoundingRect</a>().left(),</div><div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;                                  sys-&gt;<a class="code" href="classMs_1_1System.html#a57ae7602a440ece25a56b8c99530c728">staffCanvasYpage</a>(staff),</div><div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;                                  sys-&gt;<a class="code" href="classMs_1_1Element.html#abd781d11186d1951028a0efaf6d5cf5a">width</a>(),</div><div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;                                  sys-&gt;<a class="code" href="classMs_1_1System.html#a51fa420463d9aadfbdc0839fb781ff1e">staff</a>(staff)-&gt;<a class="code" href="classMs_1_1SysStaff.html#aa79ca5523125cce73baf2b3783d0dd32">bbox</a>().height());</div><div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;            showRect = mRect.intersected(stave).adjusted(-border, -border, border, border);</div><div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;            }</div><div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;</div><div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;<span class="comment">/*printf(&quot;%f %f %f %f   %f %f %f %f  %d\n&quot;,</span></div><div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;<span class="comment">   showRect.x(), showRect.y(), showRect.width(), showRect.height(),</span></div><div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;<span class="comment">   r.x(), r.y(), r.width(), r.height(),</span></div><div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;<span class="comment">   r.contains(showRect)</span></div><div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;<span class="comment">   );</span></div><div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;      <span class="comment">// canvas is not as wide as measure, track note instead</span></div><div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;      <span class="keywordflow">if</span> (r.width() &lt; showRect.width()) {</div><div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;            QRectF eRect(el-&gt;<a class="code" href="classMs_1_1Element.html#a6ca9221d8858907d3063fa58255fb804">canvasBoundingRect</a>());</div><div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;            showRect.setX(eRect.x());</div><div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;            showRect.setWidth(eRect.width());</div><div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;            }</div><div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;</div><div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;      <span class="comment">// canvas is not as tall as system</span></div><div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;      <span class="keywordflow">if</span> (r.height() &lt; showRect.height()) {</div><div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;            <span class="keywordflow">if</span> (sys-&gt;<a class="code" href="classMs_1_1System.html#a436845d5d0032348dfe5f9618d12cb0c">staves</a>()-&gt;size() == 1 || !playBack) {</div><div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;                  <span class="comment">// track note if single staff</span></div><div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;                  showRect.setY(p.y());</div><div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;                  showRect.setHeight(el-&gt;<a class="code" href="classMs_1_1Element.html#a2a8ba8af6817e602c27c154e93542028">height</a>());</div><div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;                  }</div><div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sys-&gt;<a class="code" href="classMs_1_1System.html#a57af65dafb20c1282ea78ba3d74725a0">page</a>()-&gt;<a class="code" href="classMs_1_1Page.html#a4406043135c1ea0028f010710ebe9774">systems</a>().size() == 1) {</div><div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;                  <span class="comment">// otherwise, just keep current vertical position if possible</span></div><div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;                  <span class="comment">// see issue #7724</span></div><div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;                  showRect.setY(r.y());</div><div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;                  showRect.setHeight(r.height());</div><div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;                  }</div><div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;            }</div><div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;      <span class="keywordflow">if</span> (shadowNote-&gt;visible())</div><div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;            setShadowNote(p);</div><div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;</div><div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;      <span class="keywordflow">if</span> (r.contains(showRect))</div><div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;</div><div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;      qreal x  = - xoffset() / physicalZoomLevel();</div><div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;      qreal y  = - yoffset() / physicalZoomLevel();</div><div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;</div><div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;      qreal oldX = x, oldY = y;</div><div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;</div><div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;      <span class="keywordflow">if</span> (showRect.left() &lt; r.left())</div><div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;            x = showRect.left() - border;</div><div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (showRect.left() &gt; r.right())</div><div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;            x = showRect.right() - width() / physicalZoomLevel() + border;</div><div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (r.width() &gt;= showRect.width() &amp;&amp; showRect.right() &gt; r.right())</div><div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;            x = showRect.left() - border;</div><div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;      <span class="keywordflow">if</span> (showRect.top() &lt; r.top() &amp;&amp; showRect.bottom() &lt; r.bottom())</div><div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;            y = showRect.top() - border;</div><div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (showRect.top() &gt; r.bottom())</div><div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;            y = showRect.bottom() - height() / physicalZoomLevel() + border;</div><div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (r.height() &gt;= showRect.height() &amp;&amp; showRect.bottom() &gt; r.bottom())</div><div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;            y = showRect.top() - border;</div><div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;</div><div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;      <span class="comment">// align to page borders if extends beyond</span></div><div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;      <a class="code" href="classMs_1_1Page.html">Page</a>* page = sys-&gt;<a class="code" href="classMs_1_1System.html#a57af65dafb20c1282ea78ba3d74725a0">page</a>();</div><div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;      <span class="keywordflow">if</span> (x &lt; page-&gt;x() || r.width() &gt;= page-&gt;<a class="code" href="classMs_1_1Element.html#abd781d11186d1951028a0efaf6d5cf5a">width</a>())</div><div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;            x = page-&gt;<a class="code" href="classMs_1_1Element.html#a6f850cd0581c46bee4661210b7a7777c">x</a>();</div><div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (r.width() &lt; page-&gt;<a class="code" href="classMs_1_1Element.html#abd781d11186d1951028a0efaf6d5cf5a">width</a>() &amp;&amp; r.width() + x &gt; page-&gt;<a class="code" href="classMs_1_1Element.html#abd781d11186d1951028a0efaf6d5cf5a">width</a>() + page-&gt;<a class="code" href="classMs_1_1Element.html#a6f850cd0581c46bee4661210b7a7777c">x</a>())</div><div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;            x = (page-&gt;<a class="code" href="classMs_1_1Element.html#abd781d11186d1951028a0efaf6d5cf5a">width</a>() + page-&gt;<a class="code" href="classMs_1_1Element.html#a6f850cd0581c46bee4661210b7a7777c">x</a>()) - r.width();</div><div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;      <span class="keywordflow">if</span> (y &lt; page-&gt;y() || r.height() &gt;= page-&gt;<a class="code" href="classMs_1_1Element.html#a2a8ba8af6817e602c27c154e93542028">height</a>())</div><div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;            y = page-&gt;<a class="code" href="classMs_1_1Element.html#a30c056051bbce9e867a512b8cbc1f912">y</a>();</div><div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (r.height() &lt; page-&gt;<a class="code" href="classMs_1_1Element.html#a2a8ba8af6817e602c27c154e93542028">height</a>() &amp;&amp; r.height() + y &gt; page-&gt;<a class="code" href="classMs_1_1Element.html#a2a8ba8af6817e602c27c154e93542028">height</a>() + page-&gt;<a class="code" href="classMs_1_1Element.html#a30c056051bbce9e867a512b8cbc1f912">y</a>())</div><div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;            y = (page-&gt;<a class="code" href="classMs_1_1Element.html#a2a8ba8af6817e602c27c154e93542028">height</a>() + page-&gt;<a class="code" href="classMs_1_1Element.html#a30c056051bbce9e867a512b8cbc1f912">y</a>()) - r.height();</div><div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;</div><div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;      <span class="comment">// hack: don&#39;t update if we haven&#39;t changed the offset</span></div><div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;      <span class="keywordflow">if</span> (oldX == x &amp;&amp; oldY == y)</div><div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;</div><div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;      setOffset(-x * physicalZoomLevel(), -y * physicalZoomLevel());</div><div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;      update();</div><div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;      }</div><div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;</div><div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;<span class="comment">//   cmdEnterRest</span></div><div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;</div><div class="line"><a name="l03894"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#ad24eacaee5aefa5cab5dc1fcded8307f"> 3894</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#ad24eacaee5aefa5cab5dc1fcded8307f">ScoreView::cmdEnterRest</a>()</div><div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;      {</div><div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;      <a class="code" href="classMs_1_1InputState.html">InputState</a>&amp; is = _score-&gt;inputState();</div><div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;      <span class="keywordflow">if</span> (is.<a class="code" href="classMs_1_1InputState.html#a15cf2602df222da8558a2d6a43e66b19">track</a>() == -1 || is.<a class="code" href="classMs_1_1InputState.html#a50906efca36b635813b754bff9b32f15">segment</a>() == 0)          <span class="comment">// invalid state</span></div><div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;      <span class="keywordflow">if</span> (!is.<a class="code" href="classMs_1_1InputState.html#ad23b3283d9647903d82a42461989506e">duration</a>().<a class="code" href="classMs_1_1TDuration.html#a2535725d2eb2060f255dda68d6d62d8a">isValid</a>() || is.<a class="code" href="classMs_1_1InputState.html#ad23b3283d9647903d82a42461989506e">duration</a>().<a class="code" href="classMs_1_1TDuration.html#a5bc114333d3029ce7b4f66f0f4486d76">isZero</a>() || is.<a class="code" href="classMs_1_1InputState.html#ad23b3283d9647903d82a42461989506e">duration</a>().<a class="code" href="classMs_1_1TDuration.html#a477b8c2ea4cd1914e605219b70fb7b13">isMeasure</a>())</div><div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;            is.<a class="code" href="classMs_1_1InputState.html#a06f803b5c2481d3cb34019698a8861bd">setDuration</a>(<a class="code" href="classMs_1_1TDuration.html#ad9263bf173856b77421e83a48a7bf68ca05e8f1c139e16d278117c17e7fc13ef6">TDuration::DurationType::V_QUARTER</a>);</div><div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;      cmdEnterRest(is.<a class="code" href="classMs_1_1InputState.html#ad23b3283d9647903d82a42461989506e">duration</a>());</div><div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;      }</div><div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;</div><div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;<span class="comment">//   cmdEnterRest</span></div><div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;</div><div class="line"><a name="l03908"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#adb795730e534b4d78e99c5139be9a95f"> 3908</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#ad24eacaee5aefa5cab5dc1fcded8307f">ScoreView::cmdEnterRest</a>(<span class="keyword">const</span> <a class="code" href="classMs_1_1TDuration.html">TDuration</a>&amp; d)</div><div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;      {</div><div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;      <span class="keywordflow">if</span> (!noteEntryMode())</div><div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;            cmd(<span class="stringliteral">&quot;note-input&quot;</span>);</div><div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;      <span class="keywordflow">if</span> (_score-&gt;usingNoteEntryMethod(<a class="code" href="namespaceMs.html#a55bf2366ce137fe11dcc963f9824ff09a2981e8499f73fe20e0ea11febc01a9c1">NoteEntryMethod::RHYTHM</a>))</div><div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;            _score-&gt;cmd(<a class="code" href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">getAction</a>(<span class="stringliteral">&quot;pad-rest&quot;</span>), editData);</div><div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;            _score-&gt;cmdEnterRest(d);</div><div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;      expandVoice();</div><div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;      <span class="keywordflow">if</span> (_is.cr() == 0) {</div><div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;            qDebug(<span class="stringliteral">&quot;cannot enter rest here&quot;</span>);</div><div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;            }</div><div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;</div><div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;      <span class="keywordtype">int</span> track = _is.track;</div><div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;      <a class="code" href="classMs_1_1Segment.html">Segment</a>* seg  = setNoteRest(_is.cr(), track, -1, d.<a class="code" href="classMs_1_1TDuration.html#a5f699dd041973be93c8bef472927ee5f">fraction</a>(), 0, <a class="code" href="namespaceMs.html#a33b0ae0c9acf6508e69ad9b0cd36038bae1f2d5134ed2543d38a0de9751cf75d9">AUTO</a>);</div><div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;      <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr = <span class="keyword">static_cast&lt;</span><a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>*<span class="keyword">&gt;</span>(seg-&gt;<a class="code" href="classMs_1_1Segment.html#a4e9ad4c47081dec0aebcd2aea96b309f">element</a>(track));</div><div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;      <span class="keywordflow">if</span> (cr)</div><div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;            nextInputPos(cr, <span class="keyword">false</span>);</div><div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;      _is.rest = <span class="keyword">false</span>;  <span class="comment">// continue with normal note entry</span></div><div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;      }</div><div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;</div><div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;<span class="comment">//   mscoreState</span></div><div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;</div><div class="line"><a name="l03936"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#af7b330b203a0ae0903e15f97a9e7643c"> 3936</a></span>&#160;<a class="code" href="namespaceMs.html#aba304e35acf732434f3c3d8b72562885">ScoreState</a> <a class="code" href="classMs_1_1ScoreView.html#af7b330b203a0ae0903e15f97a9e7643c">ScoreView::mscoreState</a>()<span class="keyword"> const</span></div><div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;<span class="keyword">      </span>{</div><div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;      <span class="keywordflow">if</span> (fotoMode())</div><div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespaceMs.html#aba304e35acf732434f3c3d8b72562885a9e1cb865c1ca3816054dea26aa36b5cd">STATE_FOTO</a>;</div><div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;      <span class="keywordflow">if</span> (state == <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a6dff4f0bcb369949446e0f3400db6d5c">ViewState::NOTE_ENTRY</a>) {</div><div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;            <span class="keyword">const</span> <a class="code" href="classMs_1_1InputState.html">InputState</a> is = _score-&gt;inputState();</div><div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;            <a class="code" href="classMs_1_1Staff.html">Staff</a>* staff = _score-&gt;staff(is.<a class="code" href="classMs_1_1InputState.html#a15cf2602df222da8558a2d6a43e66b19">track</a>() / <a class="code" href="mscore_8h.html#a7b14c16d0b45fd100ee97e74cfd907c0">VOICES</a>);</div><div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;</div><div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;            <span class="comment">// pitched/unpitched depending on instrument (override StaffGroup)</span></div><div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;            <a class="code" href="namespaceMs.html#aad3918cfddca91d981504ae55c0f19b0">StaffGroup</a> staffGroup = staff-&gt;<a class="code" href="classMs_1_1Staff.html#ad248bef7f25a4fe152ce281372a24d3f">staffType</a>(is.<a class="code" href="classMs_1_1InputState.html#a79d562ec34847c3154ec4c6c5073d464">tick</a>())-&gt;group();</div><div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;            <span class="keywordflow">if</span> (staffGroup != <a class="code" href="namespaceMs.html#a3b085ddb3e3b890843f2e33874b9fa4baf684bf05fa3e81528c84d1d281d839f1">StaffGroup::TAB</a>)</div><div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;                  staffGroup = staff-&gt;<a class="code" href="classMs_1_1Staff.html#ae31dc0de799c1e206af979e65bf837ab">part</a>()-&gt;<a class="code" href="classMs_1_1Part.html#a6cae82662abe64d683dff09b3c7874f8">instrument</a>(is.<a class="code" href="classMs_1_1InputState.html#a79d562ec34847c3154ec4c6c5073d464">tick</a>())-&gt;useDrumset() ? <a class="code" href="namespaceMs.html#a3369cc1ece2bbd874c148455b5db4b86a4c1e3a498a71f85d23ea30283022c6a3">StaffGroup::PERCUSSION</a> : <a class="code" href="namespaceMs.html#aad3918cfddca91d981504ae55c0f19b0a94e94133f4bdc1794c6b647b8ea134d0">StaffGroup::STANDARD</a>;</div><div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;            <span class="keywordflow">switch</span>( staffGroup ) {</div><div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;                  <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#aad3918cfddca91d981504ae55c0f19b0a94e94133f4bdc1794c6b647b8ea134d0">StaffGroup::STANDARD</a>:</div><div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;                        <span class="keywordflow">return</span> <a class="code" href="namespaceMs.html#aba304e35acf732434f3c3d8b72562885adb7b0a8e9e13ed775c293306dafdcca3">STATE_NOTE_ENTRY_STAFF_PITCHED</a>;</div><div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;                  <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a3b085ddb3e3b890843f2e33874b9fa4baf684bf05fa3e81528c84d1d281d839f1">StaffGroup::TAB</a>:</div><div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;                        <span class="keywordflow">return</span> <a class="code" href="namespaceMs.html#aba304e35acf732434f3c3d8b72562885a130366d4599cfbcecb504254314cc31f">STATE_NOTE_ENTRY_STAFF_TAB</a>;</div><div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;                  <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a3369cc1ece2bbd874c148455b5db4b86a4c1e3a498a71f85d23ea30283022c6a3">StaffGroup::PERCUSSION</a>:</div><div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;                        <span class="keywordflow">return</span> <a class="code" href="namespaceMs.html#aba304e35acf732434f3c3d8b72562885ae2abe15ad81637c074ea9b39e0c0cc45">STATE_NOTE_ENTRY_STAFF_DRUM</a>;</div><div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;                  }</div><div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;            }</div><div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;      <span class="keywordflow">if</span> (state == <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a93762d802eed04b3e1c59d1d46b35248">ViewState::EDIT</a> || state == <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1ad4b1df12331eb50f79373b3e2bd284ce">ViewState::DRAG_EDIT</a>) {</div><div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;            <span class="keywordflow">if</span> (editData.element &amp;&amp; editData.element-&gt;isLyrics())</div><div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;                  <span class="keywordflow">return</span> <a class="code" href="namespaceMs.html#aba304e35acf732434f3c3d8b72562885a6bd10e64c96ec7b0894a5c1c0ea8085a">STATE_LYRICS_EDIT</a>;</div><div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (editData.element &amp;&amp;</div><div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;                  ( (editData.element-&gt;isHarmony()) || editData.element-&gt;isFiguredBass()) )</div><div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;                  <span class="keywordflow">return</span> <a class="code" href="namespaceMs.html#aba304e35acf732434f3c3d8b72562885a4088550426e4be668ec986b2f25c96c5">STATE_HARMONY_FIGBASS_EDIT</a>;</div><div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (editData.element &amp;&amp; editData.element-&gt;isTextBase())</div><div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;                  <span class="keywordflow">return</span> <a class="code" href="namespaceMs.html#aba304e35acf732434f3c3d8b72562885a1609d1ec8361af8c738b3036be794da4">STATE_TEXT_EDIT</a>;</div><div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespaceMs.html#aba304e35acf732434f3c3d8b72562885a721f0a40ff396c82733370f8760f49f3">STATE_EDIT</a>;</div><div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;            }</div><div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;      <span class="keywordflow">if</span> (state == <a class="code" href="namespaceMs.html#aa0f871cf8181cec31d68d20a39010655a6a216efc529825c60a4a4c0bc99ad77f">ViewState::PLAY</a>)</div><div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespaceMs.html#aba304e35acf732434f3c3d8b72562885a376c7348e7b637fe5b9ddb868a5b54ac">STATE_PLAY</a>;</div><div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespaceMs.html#aba304e35acf732434f3c3d8b72562885a5afa6aea0aaa477fce19fa8e7be2834f">STATE_NORMAL</a>;</div><div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;      }</div><div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;</div><div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;<span class="comment">//   startUndoRedo</span></div><div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;</div><div class="line"><a name="l03976"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a6e1941e17c43a0fc02086b1a0a3dab71"> 3976</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a6e1941e17c43a0fc02086b1a0a3dab71">ScoreView::startUndoRedo</a>(<span class="keywordtype">bool</span> undo)</div><div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;      {</div><div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;      _score-&gt;undoRedo(undo, state == <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a93762d802eed04b3e1c59d1d46b35248">ViewState::EDIT</a> ? &amp;editData : 0);</div><div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;</div><div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;      <span class="keywordflow">if</span> (_score-&gt;inputState().segment())</div><div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;            <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;setPos(_score-&gt;inputState().tick());</div><div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;      <span class="keywordflow">if</span> (_score-&gt;noteEntryMode() &amp;&amp; !noteEntryMode())</div><div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;            cmd(<span class="stringliteral">&quot;note-input&quot;</span>);    <span class="comment">// enter note entry mode</span></div><div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!_score-&gt;noteEntryMode() &amp;&amp; noteEntryMode())</div><div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;            cmd(<span class="stringliteral">&quot;escape&quot;</span>);        <span class="comment">// leave note entry mode</span></div><div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;</div><div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;      updateEditElement();</div><div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;      }</div><div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;</div><div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;<span class="comment">//   cmdAddSlur</span></div><div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;<span class="comment">//    command invoked, or icon double clicked</span></div><div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;</div><div class="line"><a name="l03995"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#abbdc0afd25bb61ad920486f5415c46be"> 3995</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#abbdc0afd25bb61ad920486f5415c46be">ScoreView::cmdAddSlur</a>(<span class="keyword">const</span> <a class="code" href="classMs_1_1Slur.html">Slur</a>* slurTemplate)</div><div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;      {</div><div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;      <a class="code" href="classMs_1_1InputState.html">InputState</a>&amp; is = _score-&gt;inputState();</div><div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;      <span class="keywordflow">if</span> (noteEntryMode() &amp;&amp; is.<a class="code" href="classMs_1_1InputState.html#aa3c2705f1c6bbae2937ff66e367da527">slur</a>()) {</div><div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;            <span class="keyword">const</span> std::vector&lt;SpannerSegment*&gt;&amp; el = is.<a class="code" href="classMs_1_1InputState.html#aa3c2705f1c6bbae2937ff66e367da527">slur</a>()-&gt;<a class="code" href="classMs_1_1Spanner.html#a821182163a4bfdf98b47121451de6aea">spannerSegments</a>();</div><div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;            <span class="keywordflow">if</span> (!el.empty()) {</div><div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;                  el.front()-&gt;setSelected(<span class="keyword">false</span>);</div><div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;                  <span class="comment">// Now make sure that the slur segment is redrawn so that it does not *look* selected</span></div><div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;                  update();</div><div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;                  }</div><div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;            is.<a class="code" href="classMs_1_1InputState.html#af31048b03da7dd0dab6554f8acd8e399">setSlur</a>(<span class="keyword">nullptr</span>);</div><div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;            }</div><div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;</div><div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;      _score-&gt;startCmd();</div><div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;</div><div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;      <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr1;</div><div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;      <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr2;</div><div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; sel = _score-&gt;selection();</div><div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;      <span class="keyword">auto</span> el         = sel.uniqueElements();</div><div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;</div><div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;      <span class="keywordflow">if</span> (sel.isRange()) {</div><div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;            <span class="keywordtype">int</span> startTrack = sel.staffStart() * <a class="code" href="mscore_8h.html#a7b14c16d0b45fd100ee97e74cfd907c0">VOICES</a>;</div><div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;            <span class="keywordtype">int</span> endTrack   = sel.staffEnd() * <a class="code" href="mscore_8h.html#a7b14c16d0b45fd100ee97e74cfd907c0">VOICES</a>;</div><div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> track = startTrack; track &lt; endTrack; ++track) {</div><div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;                  cr1 = 0;</div><div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;                  cr2 = 0;</div><div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;                  <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1Element.html">Element</a>* e : el) {</div><div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;                        <span class="keywordflow">if</span> (e-&gt;track() != track)</div><div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;                              <span class="keywordflow">continue</span>;</div><div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;                        <span class="keywordflow">if</span> (e-&gt;isNote())</div><div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;                              e = toNote(e)-&gt;chord();</div><div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;                        <span class="keywordflow">if</span> (!e-&gt;isChord())</div><div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;                              <span class="keywordflow">continue</span>;</div><div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;                        <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr = <a class="code" href="namespaceMs.html#a580f85ffcff35b12462cbfb60a8728b7">toChordRest</a>(e);</div><div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;                        <span class="keywordflow">if</span> (!cr1 || cr1-&gt;<a class="code" href="classMs_1_1Element.html#a4cc362a42bad65483b59d3a8e0df374f">tick</a>() &gt; cr-&gt;<a class="code" href="classMs_1_1Element.html#a4cc362a42bad65483b59d3a8e0df374f">tick</a>())</div><div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;                              cr1 = cr;</div><div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;                        <span class="keywordflow">if</span> (!cr2 || cr2-&gt;<a class="code" href="classMs_1_1Element.html#a4cc362a42bad65483b59d3a8e0df374f">tick</a>() &lt; cr-&gt;<a class="code" href="classMs_1_1Element.html#a4cc362a42bad65483b59d3a8e0df374f">tick</a>())</div><div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;                              cr2 = cr;</div><div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;                        }</div><div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;                  <span class="keywordflow">if</span> (cr1 &amp;&amp; (cr1 != cr2))</div><div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;                        <a class="code" href="namespaceMs.html#a1e1231744bf13b1892573eaec52725f5">addSlur</a>(cr1, cr2, slurTemplate);</div><div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;                  }</div><div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;            }</div><div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;            cr1 = 0;</div><div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;            cr2 = 0;</div><div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1Element.html">Element</a>* e : el) {</div><div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;                  <span class="keywordflow">if</span> (e-&gt;isNote())</div><div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;                        e = toNote(e)-&gt;chord();</div><div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;                  <span class="keywordflow">if</span> (!e-&gt;isChord())</div><div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;                        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;                  <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr = <a class="code" href="namespaceMs.html#a580f85ffcff35b12462cbfb60a8728b7">toChordRest</a>(e);</div><div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;                  <span class="keywordflow">if</span> (!cr1 || cr-&gt;<a class="code" href="classMs_1_1ChordRest.html#a7ef00364bfc818f5ae0741af4589449a">isBefore</a>(cr1))</div><div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;                        cr1 = cr;</div><div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;                  <span class="keywordflow">if</span> (!cr2 || cr2-&gt;<a class="code" href="classMs_1_1ChordRest.html#a7ef00364bfc818f5ae0741af4589449a">isBefore</a>(cr))</div><div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;                        cr2 = cr;</div><div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;                  }</div><div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;            <span class="keywordflow">if</span> (cr1 == cr2)</div><div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;                  cr2 = 0;</div><div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;            <span class="keywordflow">if</span> (cr1)</div><div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;                  <a class="code" href="namespaceMs.html#a1e1231744bf13b1892573eaec52725f5">addSlur</a>(cr1, cr2, slurTemplate);</div><div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;            }</div><div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;      _score-&gt;endCmd();</div><div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;      }</div><div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;</div><div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;<span class="comment">//   addSlur</span></div><div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;</div><div class="line"><a name="l04065"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#add4f29480cc932274e217d0d12925a41"> 4065</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#add4f29480cc932274e217d0d12925a41">ScoreView::addSlur</a>(<a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr1, <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr2, <span class="keyword">const</span> <a class="code" href="classMs_1_1Slur.html">Slur</a>* slurTemplate)</div><div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;      {</div><div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;      <span class="keywordtype">bool</span> switchToSlur = <span class="keyword">false</span>;</div><div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;      <span class="keywordflow">if</span> (cr2 == 0) {</div><div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;            cr2 = <a class="code" href="namespaceMs.html#a60c3d8a61c63ab648c253442e51e804b">nextChordRest</a>(cr1);</div><div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;            <span class="keywordflow">if</span> (cr2 == 0)</div><div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;                  cr2 = cr1;</div><div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;            switchToSlur = <span class="keyword">true</span>; <span class="comment">// select slur for editing if last chord is not given</span></div><div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;            }</div><div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;</div><div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;      <a class="code" href="classMs_1_1Slur.html">Slur</a>* slur = slurTemplate ? slurTemplate-&gt;<a class="code" href="classMs_1_1Slur.html#a3d7984862158dfeaf3e430e8837e8609">clone</a>() : <span class="keyword">new</span> <a class="code" href="classMs_1_1Slur.html">Slur</a>(cr1-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a70883d048b0884821ac779d9ab168151">score</a>());</div><div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;      slur-&gt;<a class="code" href="classMs_1_1Spanner.html#a516e9a9ce16d41ef6f2585012c718d62">setScore</a>(cr1-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a70883d048b0884821ac779d9ab168151">score</a>());</div><div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;      slur-&gt;<a class="code" href="classMs_1_1Spanner.html#af1542368ed7ab82341987ae59acf5e4e">setTick</a>(cr1-&gt;<a class="code" href="classMs_1_1Element.html#a4cc362a42bad65483b59d3a8e0df374f">tick</a>());</div><div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;      slur-&gt;<a class="code" href="classMs_1_1Spanner.html#ab851975c9fb1b63da5272ac303ec641d">setTick2</a>(cr2-&gt;<a class="code" href="classMs_1_1Element.html#a4cc362a42bad65483b59d3a8e0df374f">tick</a>());</div><div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;      slur-&gt;<a class="code" href="classMs_1_1Slur.html#ae358b25c537dd8a8ccb95366a9d30272">setTrack</a>(cr1-&gt;<a class="code" href="classMs_1_1Element.html#ab4986d1b4f0d45b8e84cf52c46885c36">track</a>());</div><div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;      <span class="keywordflow">if</span> (cr2-&gt;<a class="code" href="classMs_1_1Element.html#a14581354d9bfc2c39c7dafbed79403da">staff</a>()-&gt;<a class="code" href="classMs_1_1Staff.html#ae31dc0de799c1e206af979e65bf837ab">part</a>() == cr1-&gt;<a class="code" href="classMs_1_1Element.html#a14581354d9bfc2c39c7dafbed79403da">staff</a>()-&gt;<a class="code" href="classMs_1_1Staff.html#ae31dc0de799c1e206af979e65bf837ab">part</a>() &amp;&amp; !cr2-&gt;<a class="code" href="classMs_1_1Element.html#a14581354d9bfc2c39c7dafbed79403da">staff</a>()-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a1d34473f54590e3d8c2a1bc78b560c21">isLinked</a>(cr1-&gt;<a class="code" href="classMs_1_1Element.html#a14581354d9bfc2c39c7dafbed79403da">staff</a>()))</div><div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;            slur-&gt;<a class="code" href="classMs_1_1Spanner.html#a6924785e59e53240f35c6da8e846bc7e">setTrack2</a>(cr2-&gt;<a class="code" href="classMs_1_1Element.html#ab4986d1b4f0d45b8e84cf52c46885c36">track</a>());</div><div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;            slur-&gt;<a class="code" href="classMs_1_1Spanner.html#a6924785e59e53240f35c6da8e846bc7e">setTrack2</a>(cr1-&gt;<a class="code" href="classMs_1_1Element.html#ab4986d1b4f0d45b8e84cf52c46885c36">track</a>());</div><div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;      slur-&gt;<a class="code" href="classMs_1_1Spanner.html#a6b9d4c455c837a6dc2c3c2f1540ff22d">setStartElement</a>(cr1);</div><div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;      slur-&gt;<a class="code" href="classMs_1_1Spanner.html#aa4950556dbbb619fae97f981251108e0">setEndElement</a>(cr2);</div><div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;</div><div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;      cr1-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a70883d048b0884821ac779d9ab168151">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#a88d1556bac485bde9b2d6ae3c1e6bd77">undoAddElement</a>(slur);</div><div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;      <a class="code" href="classMs_1_1SlurSegment.html">SlurSegment</a>* ss = <span class="keyword">new</span> <a class="code" href="classMs_1_1SlurSegment.html">SlurSegment</a>(cr1-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a70883d048b0884821ac779d9ab168151">score</a>());</div><div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;      ss-&gt;<a class="code" href="classMs_1_1SpannerSegment.html#aa8e443286d58d8d50a99cc891c61e72f">setSpannerSegmentType</a>(<a class="code" href="namespaceMs.html#a9acbf233ff363fe819865e5bdd0c8fdfa0679273e201afd0bf57af3961f8a23b8">SpannerSegmentType::SINGLE</a>);</div><div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;      <span class="keywordflow">if</span> (cr1 == cr2)</div><div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;            ss-&gt;<a class="code" href="classMs_1_1SlurTieSegment.html#a41449c7a71eb7fc42d4384b3e560fd72">setSlurOffset</a>(<a class="code" href="namespaceMs.html#a1aa5dd7502c1d6ba1ca37f5bfd14fda6ab1a326c06d88bf042f73d70f50197905">Grip::END</a>, QPointF(3.0 * cr1-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a70883d048b0884821ac779d9ab168151">score</a>()-&gt;<a class="code" href="classMs_1_1Score.html#aaa20fcc0a0a1f86b0b0d859648341c49">spatium</a>(), 0.0));</div><div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;      slur-&gt;<a class="code" href="classMs_1_1Spanner.html#afe04fd23f1b64719c91eb7b6ec42be69">add</a>(ss);</div><div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;</div><div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;      <span class="keywordflow">if</span> (noteEntryMode()) {</div><div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;            _score-&gt;inputState().setSlur(slur);</div><div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;            ss-&gt;<a class="code" href="classMs_1_1SpannerSegment.html#a478ec654aceaeb8e2a90196db7d02f60">setSelected</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;            }</div><div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (switchToSlur) {</div><div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;            startEditMode(ss);</div><div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;            }</div><div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;      }</div><div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;</div><div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;<span class="comment">//   cmdAddHairpin</span></div><div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;<span class="comment">//    &#39;&lt;&#39; typed on keyboard</span></div><div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;</div><div class="line"><a name="l04108"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a9a2bb9cc4c5b513c37161738cb456509"> 4108</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a9a2bb9cc4c5b513c37161738cb456509">ScoreView::cmdAddHairpin</a>(<a class="code" href="namespaceMs.html#ab8c991c362b4c6671323072bdeb9c912">HairpinType</a> type)</div><div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;      {</div><div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;      <span class="keyword">const</span> <a class="code" href="classMs_1_1Selection.html">Selection</a>&amp; selection = _score-&gt;selection();</div><div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;      <span class="comment">// special case for two selected chordrests on same staff</span></div><div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;      <span class="keywordtype">bool</span> twoNotesSameStaff = <span class="keyword">false</span>;</div><div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;      <span class="keywordflow">if</span> (selection.<a class="code" href="classMs_1_1Selection.html#ad758bc5c1eadc3b1d99b4a79f07f60cb">isList</a>() &amp;&amp; selection.<a class="code" href="classMs_1_1Selection.html#aabf6157f4dbda5a9b86a9c4cae8c167f">elements</a>().size() == 2) {</div><div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;            <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr1 = selection.<a class="code" href="classMs_1_1Selection.html#aa987ed47ede867a2ed6b1015a09ea3a9">firstChordRest</a>();</div><div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;            <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr2 = selection.<a class="code" href="classMs_1_1Selection.html#a832d71c0a01cd82c2ed9a8f8d1e29cfc">lastChordRest</a>();</div><div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;            <span class="keywordflow">if</span> (cr1 &amp;&amp; cr2 &amp;&amp; cr1 != cr2 &amp;&amp; cr1-&gt;<a class="code" href="classMs_1_1Element.html#a3c37abb86b5dfb5b16fe74155154bab8">staffIdx</a>() == cr2-&gt;<a class="code" href="classMs_1_1Element.html#a3c37abb86b5dfb5b16fe74155154bab8">staffIdx</a>())</div><div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;                  twoNotesSameStaff = <span class="keyword">true</span>;</div><div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;            }</div><div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;      <span class="comment">// add hairpin on each staff if possible</span></div><div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;      <span class="keywordflow">if</span> (selection.<a class="code" href="classMs_1_1Selection.html#a884ac586a99a211a55eab115a2c3d95f">isRange</a>() &amp;&amp; selection.<a class="code" href="classMs_1_1Selection.html#a009257797226b07065d8a225184178b3">staffStart</a>() != selection.<a class="code" href="classMs_1_1Selection.html#a18aa92607a7bc75a64262bbfd2746d51">staffEnd</a>() - 1) {</div><div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;            _score-&gt;startCmd();</div><div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> staffIdx = selection.<a class="code" href="classMs_1_1Selection.html#a009257797226b07065d8a225184178b3">staffStart</a>() ; staffIdx &lt; selection.<a class="code" href="classMs_1_1Selection.html#a18aa92607a7bc75a64262bbfd2746d51">staffEnd</a>(); ++staffIdx) {</div><div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;                  <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr1 = selection.<a class="code" href="classMs_1_1Selection.html#aa987ed47ede867a2ed6b1015a09ea3a9">firstChordRest</a>(staffIdx * <a class="code" href="mscore_8h.html#a7b14c16d0b45fd100ee97e74cfd907c0">VOICES</a>);</div><div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;                  <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr2 = selection.<a class="code" href="classMs_1_1Selection.html#a832d71c0a01cd82c2ed9a8f8d1e29cfc">lastChordRest</a>(staffIdx * VOICES);</div><div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;                  _score-&gt;addHairpin(type, cr1, cr2, <span class="comment">/* toCr2End */</span> <span class="keyword">true</span>);</div><div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;                  }</div><div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;            _score-&gt;endCmd();</div><div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;            }</div><div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (selection.<a class="code" href="classMs_1_1Selection.html#a884ac586a99a211a55eab115a2c3d95f">isRange</a>() || selection.<a class="code" href="classMs_1_1Selection.html#a38ebdcd0c523014365b5c0855f9e3d80">isSingle</a>() || twoNotesSameStaff) {</div><div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;            <span class="comment">// for single staff range selection, or single selection,</span></div><div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;            <span class="comment">// find start &amp; end elements elements</span></div><div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;            <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr1;</div><div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;            <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr2;</div><div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;            _score-&gt;getSelectedChordRest2(&amp;cr1, &amp;cr2);</div><div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;            _score-&gt;startCmd();</div><div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;            <a class="code" href="classMs_1_1Hairpin.html">Hairpin</a>* pin = _score-&gt;addHairpin(type, cr1, cr2, <span class="comment">/* toCr2End */</span> !twoNotesSameStaff);</div><div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;            _score-&gt;endCmd();</div><div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;            <span class="keywordflow">if</span> (!pin)</div><div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;                  <span class="keywordflow">return</span>;</div><div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;</div><div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;            <span class="keyword">const</span> std::vector&lt;SpannerSegment*&gt;&amp; el = pin-&gt;<a class="code" href="classMs_1_1Spanner.html#a821182163a4bfdf98b47121451de6aea">spannerSegments</a>();</div><div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;            <span class="keywordflow">if</span> (!noteEntryMode()) {</div><div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;                  <span class="keywordflow">if</span> (!el.empty()) {</div><div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;                        startEditMode(el.front());</div><div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;                        }</div><div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;                  }</div><div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;            }</div><div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;            <span class="comment">// do not attempt for list selection</span></div><div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;            <span class="comment">// or we will keep adding hairpins to the same chordrests</span></div><div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;            }</div><div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;      }</div><div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;</div><div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;<span class="comment">//   cmdAddNoteLine</span></div><div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;</div><div class="line"><a name="l04159"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#ac4b421c6a812ee23383268d2dab74bff"> 4159</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#ac4b421c6a812ee23383268d2dab74bff">ScoreView::cmdAddNoteLine</a>()</div><div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;      {</div><div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;      <a class="code" href="classMs_1_1Note.html">Note</a>* firstNote = 0;</div><div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;      <a class="code" href="classMs_1_1Note.html">Note</a>* lastNote  = 0;</div><div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;      <span class="keywordflow">if</span> (_score-&gt;selection().isRange()) {</div><div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;            <span class="keywordtype">int</span> startTrack = _score-&gt;selection().staffStart() * <a class="code" href="mscore_8h.html#a7b14c16d0b45fd100ee97e74cfd907c0">VOICES</a>;</div><div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;            <span class="keywordtype">int</span> endTrack   = _score-&gt;selection().staffEnd() * <a class="code" href="mscore_8h.html#a7b14c16d0b45fd100ee97e74cfd907c0">VOICES</a>;</div><div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> track = startTrack; track &lt; endTrack; ++track) {</div><div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;                  <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1Note.html">Note</a>* n : _score-&gt;selection().noteList(track)) {</div><div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;                        <span class="keywordflow">if</span> (firstNote == 0 || firstNote-&gt;<a class="code" href="classMs_1_1Note.html#ac1fe59b8f92c11fc6b662855fc8d9316">chord</a>()-&gt;<a class="code" href="classMs_1_1Element.html#a4cc362a42bad65483b59d3a8e0df374f">tick</a>() &gt; n-&gt;chord()-&gt;tick())</div><div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;                              firstNote = n;</div><div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;                        <span class="keywordflow">if</span> (lastNote == 0 || lastNote-&gt;<a class="code" href="classMs_1_1Note.html#ac1fe59b8f92c11fc6b662855fc8d9316">chord</a>()-&gt;<a class="code" href="classMs_1_1Element.html#a4cc362a42bad65483b59d3a8e0df374f">tick</a>() &lt; n-&gt;chord()-&gt;tick())</div><div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;                              lastNote = n;</div><div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;                        }</div><div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;                  }</div><div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;            }</div><div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1Note.html">Note</a>* n : _score-&gt;selection().noteList()) {</div><div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;                  <span class="keywordflow">if</span> (firstNote == 0 || firstNote-&gt;<a class="code" href="classMs_1_1Note.html#ac1fe59b8f92c11fc6b662855fc8d9316">chord</a>()-&gt;<a class="code" href="classMs_1_1Element.html#a4cc362a42bad65483b59d3a8e0df374f">tick</a>() &gt; n-&gt;chord()-&gt;tick())</div><div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;                        firstNote = n;</div><div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;                  <span class="keywordflow">if</span> (lastNote == 0 || lastNote-&gt;<a class="code" href="classMs_1_1Note.html#ac1fe59b8f92c11fc6b662855fc8d9316">chord</a>()-&gt;<a class="code" href="classMs_1_1Element.html#a4cc362a42bad65483b59d3a8e0df374f">tick</a>() &lt; n-&gt;chord()-&gt;tick())</div><div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;                        lastNote = n;</div><div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;                  }</div><div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;            }</div><div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;      <span class="keywordflow">if</span> (!firstNote || !lastNote) {</div><div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;            qDebug(<span class="stringliteral">&quot;addNoteLine: no note %p %p&quot;</span>, firstNote, lastNote);</div><div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;            }</div><div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;      <span class="keywordflow">if</span> (firstNote == lastNote) {</div><div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;           qDebug(<span class="stringliteral">&quot;addNoteLine: no support for note to same note line %p&quot;</span>, firstNote);</div><div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;           <span class="keywordflow">return</span>;</div><div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;           }</div><div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;      <a class="code" href="classMs_1_1TextLine.html">TextLine</a>* tl = <span class="keyword">new</span> <a class="code" href="classMs_1_1TextLine.html">TextLine</a>(_score);</div><div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;      tl-&gt;<a class="code" href="classMs_1_1Element.html#aa7757f6d62dc28447706ee8eb12da5ec">setParent</a>(firstNote);</div><div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;      tl-&gt;<a class="code" href="classMs_1_1Spanner.html#a6b9d4c455c837a6dc2c3c2f1540ff22d">setStartElement</a>(firstNote);</div><div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;      tl-&gt;<a class="code" href="classMs_1_1Spanner.html#aa4950556dbbb619fae97f981251108e0">setEndElement</a>(lastNote);</div><div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;      tl-&gt;<a class="code" href="classMs_1_1SLine.html#a3607607e62c180dd7572aaa39872f88c">setDiagonal</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;      tl-&gt;<a class="code" href="classMs_1_1Spanner.html#aa58ff572b3afa46620e63c5f240d5fe1">setAnchor</a>(<a class="code" href="classMs_1_1Spanner.html#a4dc69fc35fde4cd35118dde886f292aea10de4bc81f754b19b0d27246a0589c05">Spanner::Anchor::NOTE</a>);</div><div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;      tl-&gt;<a class="code" href="classMs_1_1Spanner.html#af1542368ed7ab82341987ae59acf5e4e">setTick</a>(firstNote-&gt;<a class="code" href="classMs_1_1Note.html#ac1fe59b8f92c11fc6b662855fc8d9316">chord</a>()-&gt;<a class="code" href="classMs_1_1Element.html#a4cc362a42bad65483b59d3a8e0df374f">tick</a>());</div><div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;      _score-&gt;startCmd();</div><div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;      _score-&gt;undoAddElement(tl);</div><div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;      _score-&gt;endCmd();</div><div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;      }</div><div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;</div><div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;<span class="comment">//   cmdChangeEnharmonic</span></div><div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;</div><div class="line"><a name="l04207"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a5957ec3c53b8631677b3ec5640648aa5"> 4207</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a5957ec3c53b8631677b3ec5640648aa5">ScoreView::cmdChangeEnharmonic</a>(<span class="keywordtype">bool</span> both)</div><div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;      {</div><div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;      _score-&gt;startCmd();</div><div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;      QList&lt;Note*&gt; notes = _score-&gt;selection().uniqueNotes();</div><div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1Note.html">Note</a>* n : notes) {</div><div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;            <a class="code" href="classMs_1_1Staff.html">Staff</a>* staff = n-&gt;staff();</div><div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;            <span class="keywordflow">if</span> (staff-&gt;<a class="code" href="classMs_1_1Staff.html#ae31dc0de799c1e206af979e65bf837ab">part</a>()-&gt;<a class="code" href="classMs_1_1Part.html#a6cae82662abe64d683dff09b3c7874f8">instrument</a>(n-&gt;tick())-&gt;useDrumset())</div><div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;                  <span class="keywordflow">continue</span>;</div><div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;            <span class="keywordflow">if</span> (staff-&gt;<a class="code" href="classMs_1_1Staff.html#afdd8a358b8e40b9e02bca11e9fbb8829">isTabStaff</a>(n-&gt;tick())) {</div><div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;                  <span class="keywordtype">int</span> <span class="keywordtype">string</span> = n-&gt;line() + (both ? 1 : -1);</div><div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;                  <span class="keywordtype">int</span> fret   = staff-&gt;<a class="code" href="classMs_1_1Staff.html#ae31dc0de799c1e206af979e65bf837ab">part</a>()-&gt;<a class="code" href="classMs_1_1Part.html#a6cae82662abe64d683dff09b3c7874f8">instrument</a>(n-&gt;tick())-&gt;stringData()-&gt;fret(n-&gt;pitch(), string, staff, n-&gt;chord()-&gt;tick());</div><div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;                  <span class="keywordflow">if</span> (fret != -1) {</div><div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;                        n-&gt;undoChangeProperty(<a class="code" href="namespaceMs.html#aa0f871cf8181cec31d68d20a39010655aeab4568c5c445379d34f5bdfb5148645">Pid::FRET</a>, fret);</div><div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;                        n-&gt;undoChangeProperty(<a class="code" href="namespaceMs.html#aa0f871cf8181cec31d68d20a39010655a63b588d5559f64f89a416e656880b949">Pid::STRING</a>, <span class="keywordtype">string</span>);</div><div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;                        }</div><div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;                  }</div><div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;                  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classMs_1_1ScoreTab.html#a6d0f51a15169d069e8c8f2784a343568">tab</a>[36] = {</div><div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;                        26, 14,  2,  <span class="comment">// 60  B#   C   Dbb</span></div><div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;                        21, 21,  9,  <span class="comment">// 61  C#   C#  Db</span></div><div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;                        28, 16,  4,  <span class="comment">// 62  C##  D   Ebb</span></div><div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;                        23, 23, 11,  <span class="comment">// 63  D#   D#  Eb</span></div><div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;                        30, 18,  6,  <span class="comment">// 64  D##  E   Fb</span></div><div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;                        25, 13,  1,  <span class="comment">// 65  E#   F   Gbb</span></div><div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;                        20, 20,  8,  <span class="comment">// 66  F#   F#  Gb</span></div><div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;                        27, 15,  3,  <span class="comment">// 67  F##  G   Abb</span></div><div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;                        22, 22, 10,  <span class="comment">// 68  G#   G#  Ab</span></div><div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;                        29, 17,  5,  <span class="comment">// 69  G##  A   Bbb</span></div><div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;                        24, 24, 12,  <span class="comment">// 70  A#   A#  Bb</span></div><div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;                        31, 19,  7,  <span class="comment">// 71  A##  B   Cb</span></div><div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;                        };</div><div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;                  <span class="keywordtype">int</span> <a class="code" href="namespaceMs.html#a2e97eaee358b108fee65ce7d9e414450">tpc</a> = n-&gt;tpc();</div><div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;                  <span class="keywordtype">int</span> i;</div><div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;                  <span class="keywordflow">for</span> (i = 0; i &lt; 36; ++i) {</div><div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;                        <span class="keywordflow">if</span> (tab[i] == tpc) {</div><div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;                              <span class="keywordflow">if</span> ((i % 3) &lt; 2) {</div><div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;                                    <span class="keywordflow">if</span> (tab[i] == tab[i + 1])</div><div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;                                          tpc = tab[i + 2];</div><div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;                                    <span class="keywordflow">else</span></div><div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;                                          tpc = tab[i + 1];</div><div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;                                    }</div><div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;                              <span class="keywordflow">else</span> {</div><div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;                                    tpc = tab[i - 2];</div><div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;                                    }</div><div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;                              <span class="keywordflow">break</span>;</div><div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;                              }</div><div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;                        }</div><div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;                  <span class="keywordflow">if</span> (i == 36) {</div><div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;                        qDebug(<span class="stringliteral">&quot;tpc %d not found&quot;</span>, tpc);</div><div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;                        }</div><div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;                  <span class="keywordflow">else</span> {</div><div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;                        n-&gt;undoSetTpc(tpc);</div><div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;                        <span class="keywordflow">if</span> (both || staff-&gt;<a class="code" href="classMs_1_1Staff.html#ae31dc0de799c1e206af979e65bf837ab">part</a>()-&gt;<a class="code" href="classMs_1_1Part.html#a6cae82662abe64d683dff09b3c7874f8">instrument</a>(n-&gt;chord()-&gt;tick())-&gt;transpose().isZero()) {</div><div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;                              <span class="comment">// change both spellings</span></div><div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;                              <span class="keywordtype">int</span> t = n-&gt;transposeTpc(tpc);</div><div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;                              <span class="keywordflow">if</span> (n-&gt;concertPitch())</div><div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;                                    n-&gt;undoChangeProperty(<a class="code" href="namespaceMs.html#aa0f871cf8181cec31d68d20a39010655acad84cf50449d72bac13a609c56ba102">Pid::TPC2</a>, t);</div><div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;                              <span class="keywordflow">else</span></div><div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;                                    n-&gt;undoChangeProperty(<a class="code" href="namespaceMs.html#aa0f871cf8181cec31d68d20a39010655a858ed2708924311f93980f5d09d078f2">Pid::TPC1</a>, t);</div><div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;                              }</div><div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;                        }</div><div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;                  }</div><div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;            }</div><div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;</div><div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;      <a class="code" href="classMs_1_1Selection.html">Selection</a>&amp; selection = _score-&gt;selection();</div><div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;      selection.<a class="code" href="classMs_1_1Selection.html#ac18d573f336887e1e49ba15a15f6d016">clear</a>();</div><div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1Note.html">Note</a>* n : notes)</div><div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;            selection.<a class="code" href="classMs_1_1Selection.html#a753b2a15f85c00694be997289b1b9c63">add</a>(n);</div><div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;      _score-&gt;endCmd();</div><div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;      }</div><div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;</div><div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;<span class="comment">//   cloneElement</span></div><div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;</div><div class="line"><a name="l04282"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#ad0e43e5b602ec3c2e9f6f98edb016d92"> 4282</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#ad0e43e5b602ec3c2e9f6f98edb016d92">ScoreView::cloneElement</a>(<a class="code" href="classMs_1_1Element.html">Element</a>* e)</div><div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;      {</div><div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;      <span class="keywordflow">if</span> (e-&gt;isMeasure() || e-&gt;isNote() || e-&gt;isVBox())</div><div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;      QDrag* drag = <span class="keyword">new</span> QDrag(<span class="keyword">this</span>);</div><div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;      QMimeData* <a class="code" href="namespaceMs.html#abd83f3147d5fadc937a40931c56620cd">mimeData</a> = <span class="keyword">new</span> QMimeData;</div><div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;      <span class="keywordflow">if</span> (e-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a5aa58f96618edb0e3ff660e1c96c5d4e">isSpannerSegment</a>())</div><div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;            e = <a class="code" href="namespaceMs.html#a8886182157e4e29202c1b22bbdc76ecb">toSpannerSegment</a>(e)-&gt;<a class="code" href="classMs_1_1SpannerSegment.html#aef566e6223c15bad8cba7de7a9bc63dc">spanner</a>();</div><div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;      mimeData-&gt;setData(<a class="code" href="namespaceMs.html#ab3839d46f6bf923e4702c8d98a11444e">mimeSymbolFormat</a>, e-&gt;<a class="code" href="classMs_1_1Element.html#a90f21ba358732f3c471069758d84a76f">mimeData</a>(QPointF()));</div><div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;      drag-&gt;setMimeData(mimeData);</div><div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;      <span class="keyword">static</span> QPixmap pixmap = QPixmap(2, 2);    <span class="comment">// null or 1x1 crashes on Linux under ChromeOS?!</span></div><div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;      pixmap.fill(Qt::white);</div><div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;      drag-&gt;setPixmap(pixmap);</div><div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;      drag-&gt;exec(Qt::CopyAction);</div><div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;      }</div><div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;</div><div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;<span class="comment">//   changeEditElement</span></div><div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;</div><div class="line"><a name="l04302"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a9ab989307fe6147eb549078026f8653e"> 4302</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a9ab989307fe6147eb549078026f8653e">ScoreView::changeEditElement</a>(<a class="code" href="classMs_1_1Element.html">Element</a>* e)</div><div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;      {</div><div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;      <span class="keywordflow">if</span> (editData.element == e)</div><div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;</div><div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;      <span class="keyword">const</span> <a class="code" href="namespaceMs.html#a1aa5dd7502c1d6ba1ca37f5bfd14fda6">Grip</a> <a class="code" href="namespaceMs.html#a3a9adffa5e5207751ca4d55f50c8a32a">grip</a> = editData.curGrip;</div><div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">bool</span> dragEdit = (state == <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1ad4b1df12331eb50f79373b3e2bd284ce">ViewState::DRAG_EDIT</a>);</div><div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;</div><div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;      <span class="keywordflow">if</span> (editData.element &amp;&amp; dragEdit)</div><div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;            editData.element-&gt;endEditDrag(editData);</div><div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;</div><div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;      endEdit();</div><div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;      startEdit(e, grip);</div><div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;</div><div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;      <span class="keywordflow">if</span> (editData.element &amp;&amp; dragEdit)</div><div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;            editData.element-&gt;startEditDrag(editData);</div><div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;      }</div><div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;</div><div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;<span class="comment">//   setCursorVisible</span></div><div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;</div><div class="line"><a name="l04324"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a8ebb01272b4e856e74658397e4ab05d3"> 4324</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a8ebb01272b4e856e74658397e4ab05d3">ScoreView::setCursorVisible</a>(<span class="keywordtype">bool</span> v)</div><div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;      {</div><div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;      _cursor-&gt;setVisible(v);</div><div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;      }</div><div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;</div><div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;<span class="comment">//   setContinuousCursorVisible</span></div><div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;</div><div class="line"><a name="l04333"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a175c7228e6bb882a90330a5b0e6fa41c"> 4333</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a175c7228e6bb882a90330a5b0e6fa41c">ScoreView::setControlCursorVisible</a>(<span class="keywordtype">bool</span> v)</div><div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;      {</div><div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;      _controlCursor-&gt;setVisible(v);</div><div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;      }</div><div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;</div><div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;<span class="comment">//   cmdTuplet</span></div><div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;</div><div class="line"><a name="l04342"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#ab95eddf0f09e0b3e6e669ed12031d4d2"> 4342</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#ab95eddf0f09e0b3e6e669ed12031d4d2">ScoreView::cmdTuplet</a>(<span class="keywordtype">int</span> n, <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr)</div><div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;      {</div><div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;      <span class="keywordflow">if</span> (cr-&gt;<a class="code" href="classMs_1_1ChordRest.html#a4c0205b5940976cc9f7cb9eb543fbc08">durationType</a>() &lt; <a class="code" href="classMs_1_1TDuration.html">TDuration</a>(<a class="code" href="classMs_1_1TDuration.html#ad9263bf173856b77421e83a48a7bf68ca0b87e0e85e0396ef98e1c4e7af8529e5">TDuration::DurationType::V_512TH</a>) &amp;&amp; cr-&gt;<a class="code" href="classMs_1_1ChordRest.html#a4c0205b5940976cc9f7cb9eb543fbc08">durationType</a>() != <a class="code" href="classMs_1_1TDuration.html">TDuration</a>(<a class="code" href="classMs_1_1TDuration.html#ad9263bf173856b77421e83a48a7bf68cac23bf58f35bf1fdfa910d9de6dba47f4">TDuration::DurationType::V_MEASURE</a>)) {</div><div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;            <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;noteTooShortForTupletDialog();</div><div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;            }</div><div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;      <a class="code" href="classMs_1_1Measure.html">Measure</a>* measure = cr-&gt;<a class="code" href="classMs_1_1ChordRest.html#aaa704d32c5e4253d54d722276f507e2d">measure</a>();</div><div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;      <span class="keywordflow">if</span> (measure &amp;&amp; measure-&gt;<a class="code" href="classMs_1_1Measure.html#ae92cfe704a9477074d0fbe1a3bb6ff61">isMMRest</a>())</div><div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;</div><div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;      <a class="code" href="classMs_1_1Fraction.html">Fraction</a> f(cr-&gt;<a class="code" href="classMs_1_1DurationElement.html#abd480ba4d052d040db56e1e504cf2596">ticks</a>());</div><div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;      <a class="code" href="classMs_1_1Tuplet.html">Tuplet</a>* ot  = cr-&gt;<a class="code" href="classMs_1_1DurationElement.html#a5eae2d4a8a4a01245e2a18d97ee7988a">tuplet</a>();</div><div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;</div><div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;      f.reduce();       <span class="comment">//measure duration might not be reduced</span></div><div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;      <a class="code" href="classMs_1_1Fraction.html">Fraction</a> ratio(n, f.numerator());</div><div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;      <a class="code" href="classMs_1_1Fraction.html">Fraction</a> fr(1, f.denominator());</div><div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;      <span class="keywordflow">while</span> (ratio.numerator() &gt;= ratio.denominator() * 2) {</div><div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;            ratio.<a class="code" href="classMs_1_1Fraction.html#ae671ef315b71166777d5f3feeb3e3e92">setDenominator</a>(ratio.denominator() * 2);  <span class="comment">// operator*= reduces, we don&#39;t want that here</span></div><div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;            fr    *= <a class="code" href="classMs_1_1Fraction.html">Fraction</a>(1,2);</div><div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;            }</div><div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;</div><div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;      <a class="code" href="classMs_1_1Tuplet.html">Tuplet</a>* tuplet = <span class="keyword">new</span> <a class="code" href="classMs_1_1Tuplet.html">Tuplet</a>(_score);</div><div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;      tuplet-&gt;<a class="code" href="classMs_1_1Tuplet.html#afe2203c33521ceb7dfb756e21dceac2b">setRatio</a>(ratio);</div><div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;</div><div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;      <span class="comment">// &quot;fr&quot; is the fraction value of one tuple element</span></div><div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;      <span class="comment">// &quot;tuplet time&quot; is &quot;normal time&quot; / tuplet-&gt;ratio()</span></div><div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;      <span class="comment">//    Example: an 1/8 has 240 midi ticks, in an 1/8 triplet the note</span></div><div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;      <span class="comment">//             has a tick duration of 240 / (3/2) = 160 ticks</span></div><div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;</div><div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;      tuplet-&gt;<a class="code" href="classMs_1_1DurationElement.html#ab46be26ba621ac65774af1ad7bb07cd7">setTicks</a>(f);</div><div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;      <a class="code" href="classMs_1_1TDuration.html">TDuration</a> baseLen(fr);</div><div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;      tuplet-&gt;<a class="code" href="classMs_1_1Tuplet.html#a1f6d0d4fbe2921476dc77bb9cf59f9e0">setBaseLen</a>(baseLen);</div><div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;</div><div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;      tuplet-&gt;<a class="code" href="classMs_1_1Tuplet.html#a400fcfe66e74cf8f9444a5d269c7bfb0">setTrack</a>(cr-&gt;<a class="code" href="classMs_1_1Element.html#ab4986d1b4f0d45b8e84cf52c46885c36">track</a>());</div><div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;      tuplet-&gt;<a class="code" href="classMs_1_1Tuplet.html#aa73835ab3d3b43501f4761576db56023">setTick</a>(cr-&gt;<a class="code" href="classMs_1_1Element.html#a4cc362a42bad65483b59d3a8e0df374f">tick</a>());</div><div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;      tuplet-&gt;<a class="code" href="classMs_1_1Element.html#aa7757f6d62dc28447706ee8eb12da5ec">setParent</a>(measure);</div><div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;</div><div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;      <span class="keywordflow">if</span> (ot)</div><div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;            tuplet-&gt;<a class="code" href="classMs_1_1DurationElement.html#ab33a18c124a4f211bf9754856916fb80">setTuplet</a>(ot);</div><div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;</div><div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;      cmdCreateTuplet(cr, tuplet);</div><div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;      }</div><div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;</div><div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;<span class="comment">//   cmdCreateTuplet</span></div><div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;</div><div class="line"><a name="l04392"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#aa157659e972829e263e8835c3df4c931"> 4392</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#aa157659e972829e263e8835c3df4c931">ScoreView::cmdCreateTuplet</a>(<a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr, <a class="code" href="classMs_1_1Tuplet.html">Tuplet</a>* tuplet)</div><div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;      {</div><div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;      _score-&gt;cmdCreateTuplet(cr, tuplet);</div><div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;</div><div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;      <span class="keyword">const</span> std::vector&lt;DurationElement*&gt;&amp; cl = tuplet-&gt;<a class="code" href="classMs_1_1Tuplet.html#a335f84666bd36e2bca5963785ae9759a">elements</a>();</div><div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;      <span class="keywordtype">size_t</span> ne = cl.size();</div><div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;      <a class="code" href="classMs_1_1DurationElement.html">DurationElement</a>* el = 0;</div><div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;      <span class="keywordflow">if</span> (ne &amp;&amp; cl[0]-&gt;type() == <a class="code" href="namespaceMs.html#a28863123e439c88c35086eb7dd963c9aa50780f47f6839d47d60bc4555ee00c3f">ElementType::REST</a>)</div><div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;            el  = cl[0];</div><div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ne &gt; 1)</div><div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;            el = cl[1];</div><div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;      <span class="keywordflow">if</span> (el) {</div><div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;            _score-&gt;select(el, <a class="code" href="namespaceMs.html#a1066451ad9dc9959bedb76978f4f30c8a0679273e201afd0bf57af3961f8a23b8">SelectType::SINGLE</a>, 0);</div><div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;            _score-&gt;inputState().setDuration(tuplet-&gt;<a class="code" href="classMs_1_1Tuplet.html#a28548e0ca46eaf9970fed3f7d3b51c58">baseLen</a>());</div><div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;            changeState(<a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a6dff4f0bcb369949446e0f3400db6d5c">ViewState::NOTE_ENTRY</a>);</div><div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;            }</div><div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;      }</div><div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;</div><div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;<span class="comment">//   changeVoice</span></div><div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;</div><div class="line"><a name="l04414"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#aa9f1f9e5918591039639de8d4d56e4cf"> 4414</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#aa9f1f9e5918591039639de8d4d56e4cf">ScoreView::changeVoice</a>(<span class="keywordtype">int</span> voice)</div><div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;      {</div><div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;      <a class="code" href="classMs_1_1InputState.html">InputState</a>* is = &amp;score()-&gt;inputState();</div><div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;      <span class="keywordtype">int</span> track = (is-&gt;<a class="code" href="classMs_1_1InputState.html#a15cf2602df222da8558a2d6a43e66b19">track</a>() / <a class="code" href="mscore_8h.html#a7b14c16d0b45fd100ee97e74cfd907c0">VOICES</a>) * <a class="code" href="mscore_8h.html#a7b14c16d0b45fd100ee97e74cfd907c0">VOICES</a> + voice;</div><div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;</div><div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;      <span class="keywordflow">if</span> (is-&gt;<a class="code" href="classMs_1_1InputState.html#ace2db17820748f92057d3a27bb2d31a8">noteEntryMode</a>()) {</div><div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;            is-&gt;<a class="code" href="classMs_1_1InputState.html#a5b1b389fc37280d1926ba401495ca5ce">setTrack</a>(track);</div><div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;            <span class="keywordflow">if</span> (is-&gt;<a class="code" href="classMs_1_1InputState.html#a50906efca36b635813b754bff9b32f15">segment</a>()) { <span class="comment">// can be null for eg repeatMeasure</span></div><div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;                  is-&gt;<a class="code" href="classMs_1_1InputState.html#accb27700fe1fe82e0bcf96ea0e5f0974">setSegment</a>(is-&gt;<a class="code" href="classMs_1_1InputState.html#a50906efca36b635813b754bff9b32f15">segment</a>()-&gt;<a class="code" href="classMs_1_1Segment.html#a44dc6d5b22a75152673060bc059acfb9">measure</a>()-&gt;<a class="code" href="classMs_1_1Measure.html#a3c5e55d2f2291d5ee433a093c0b1dd04">first</a>(<a class="code" href="namespaceMs.html#a24593d5bc01ac95fdbec3d354d258894a7884fad7b22d960efd4e9d84e61e7fe0">SegmentType::ChordRest</a>));</div><div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;                  moveCursor();</div><div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;                  score()-&gt;setUpdateAll();</div><div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;                  score()-&gt;update();</div><div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;                  <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;setPos(is-&gt;<a class="code" href="classMs_1_1InputState.html#a50906efca36b635813b754bff9b32f15">segment</a>()-&gt;<a class="code" href="classMs_1_1Segment.html#a23cde3c97359266e2787b107aa0c8cdf">tick</a>());</div><div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;                  }</div><div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;            }</div><div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;            <span class="comment">// treat as command to move notes to another voice</span></div><div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;            score()-&gt;changeVoice(voice);</div><div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;            <span class="comment">// modify the input state only if the command was successful</span></div><div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr : score()-&gt;getSelectedChordRests())</div><div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;                  <span class="keywordflow">if</span> (cr-&gt;voice() == voice) {</div><div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;                        is-&gt;<a class="code" href="classMs_1_1InputState.html#a5b1b389fc37280d1926ba401495ca5ce">setTrack</a>(track);</div><div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;                        }</div><div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;            }</div><div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;      }</div><div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;</div><div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;<span class="comment">//   cmdTuplet</span></div><div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;</div><div class="line"><a name="l04445"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a03e443669895abd38ef7758f802f4dca"> 4445</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#ab95eddf0f09e0b3e6e669ed12031d4d2">ScoreView::cmdTuplet</a>(<span class="keywordtype">int</span> n)</div><div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;      {</div><div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;      _score-&gt;startCmd();</div><div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;      <span class="keywordflow">if</span> (noteEntryMode()) {</div><div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;            _score-&gt;expandVoice();</div><div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;            <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr = _score-&gt;inputState().cr();</div><div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;            <span class="keywordflow">if</span> (cr) {</div><div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;                  _score-&gt;changeCRlen(cr, _score-&gt;inputState().duration());</div><div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;                  cmdTuplet(n, cr);</div><div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;                  }</div><div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;            }</div><div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr : _score-&gt;getSelectedChordRests()) {</div><div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;                  <span class="keywordflow">if</span> (!cr-&gt;isGrace()) {</div><div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;                        cmdTuplet(n, cr);</div><div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;                        }</div><div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;                  }</div><div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;            }</div><div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;      _score-&gt;endCmd();</div><div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;      moveCursor();     <span class="comment">// do this after endCmd to make sure segment has been laid out</span></div><div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;      }</div><div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;</div><div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;<span class="comment">//   midiNoteReceived</span></div><div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;</div><div class="line"><a name="l04471"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a3e4dce39cb7000ffb7b6b9624a08a553"> 4471</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a3e4dce39cb7000ffb7b6b9624a08a553">ScoreView::midiNoteReceived</a>(<span class="keywordtype">int</span> pitch, <span class="keywordtype">bool</span> chord, <span class="keywordtype">int</span> velocity)</div><div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;      {</div><div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;      qDebug(<span class="stringliteral">&quot;midiNoteReceived: pitch %d, chord %d, velocity %d&quot;</span>, pitch, chord, velocity);</div><div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;</div><div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;      <a class="code" href="structMs_1_1MidiInputEvent.html">MidiInputEvent</a> ev;</div><div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;      ev.<a class="code" href="structMs_1_1MidiInputEvent.html#a6b8831155a0bb92d7fdc0429ddc914e7">pitch</a> = pitch;</div><div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;      ev.<a class="code" href="structMs_1_1MidiInputEvent.html#ac722e2a45f6bf0e70111f7ccf8509297">chord</a> = chord;</div><div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;      ev.<a class="code" href="structMs_1_1MidiInputEvent.html#ad64a4c8a069d019aa6c9fdd1b4a365f0">velocity</a> = velocity;</div><div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;</div><div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;      score()-&gt;masterScore()-&gt;enqueueMidiEvent(ev);</div><div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;</div><div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;      <span class="keywordflow">if</span> (!score()-&gt;undoStack()-&gt;active())</div><div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;            cmd((<span class="keyword">const</span> <span class="keywordtype">char</span>*)0);</div><div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;</div><div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;      <span class="keywordflow">if</span> (!chord &amp;&amp; velocity &amp;&amp; !realtimeTimer-&gt;isActive() &amp;&amp; score()-&gt;usingNoteEntryMethod(<a class="code" href="namespaceMs.html#a33bc7982f565376d042918ae3c91d3d6a278ec37b01c1bd1ed9b5870f2e57e2c3">NoteEntryMethod::REALTIME_AUTO</a>)) {</div><div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;            <span class="comment">// First note pressed in automatic real-time mode.</span></div><div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;            extendNoteTimer-&gt;start(<a class="code" href="namespaceMs.html#abe8f8da5976e3a727f1a3a7a117e73de">preferences</a>.<a class="code" href="structMs_1_1Preferences.html#a435c522d4eae2e8436b22f42919efd7b">getInt</a>(PREF_IO_MIDI_REALTIMEDELAY)); <span class="comment">// set timer to trigger repeatedly</span></div><div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;            triggerCmdRealtimeAdvance(); <span class="comment">// also trigger once immediately</span></div><div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;            }</div><div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160;</div><div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;      }</div><div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;</div><div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;<span class="comment">//   extendCurrentNote</span></div><div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;<span class="comment">//    Called after user has held down a midi key for a while.</span></div><div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;<span class="comment">//    TODO: adapt to allow calling from StepTime mode.</span></div><div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;</div><div class="line"><a name="l04499"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#add8f756e67ed16b6a4e9b4719ddb2765"> 4499</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#add8f756e67ed16b6a4e9b4719ddb2765">ScoreView::extendCurrentNote</a>()</div><div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;      {</div><div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;      <span class="keywordflow">if</span> (!noteEntryMode() || realtimeTimer-&gt;isActive())</div><div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;</div><div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;      allowRealtimeRests = <span class="keyword">false</span>;</div><div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;      realtimeTimer-&gt;start(<a class="code" href="namespaceMs.html#abe8f8da5976e3a727f1a3a7a117e73de">preferences</a>.<a class="code" href="structMs_1_1Preferences.html#a435c522d4eae2e8436b22f42919efd7b">getInt</a>(PREF_IO_MIDI_REALTIMEDELAY)); <span class="comment">// set timer to trigger repeatedly</span></div><div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;      triggerCmdRealtimeAdvance(); <span class="comment">// also trigger once immediately</span></div><div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;      }</div><div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;</div><div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;<span class="comment">//   realtimeAdvance</span></div><div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;</div><div class="line"><a name="l04513"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a3f280531f1f8fd348c89cb4f428e8d47"> 4513</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a3f280531f1f8fd348c89cb4f428e8d47">ScoreView::realtimeAdvance</a>(<span class="keywordtype">bool</span> allowRests)</div><div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;      {</div><div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160;      <span class="keywordflow">if</span> (!noteEntryMode())</div><div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;      <a class="code" href="classMs_1_1InputState.html">InputState</a>&amp; is = score()-&gt;inputState();</div><div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;      <span class="keywordflow">switch</span> (is.<a class="code" href="classMs_1_1InputState.html#aa86bd802e3509aeecbad5d3756139c58">noteEntryMethod</a>()) {</div><div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a33bc7982f565376d042918ae3c91d3d6a7cb82508c8bf3f656f9943577d5b8d7a">NoteEntryMethod::REALTIME_MANUAL</a>:</div><div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;                  allowRealtimeRests = allowRests;</div><div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;                  triggerCmdRealtimeAdvance();</div><div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a33bc7982f565376d042918ae3c91d3d6a278ec37b01c1bd1ed9b5870f2e57e2c3">NoteEntryMethod::REALTIME_AUTO</a>:</div><div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;                  <span class="keywordflow">if</span> (realtimeTimer-&gt;isActive())</div><div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;                        realtimeTimer-&gt;stop();</div><div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;                  <span class="keywordflow">else</span> {</div><div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;                        allowRealtimeRests = allowRests;</div><div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;                        realtimeTimer-&gt;start(<a class="code" href="namespaceMs.html#abe8f8da5976e3a727f1a3a7a117e73de">preferences</a>.<a class="code" href="structMs_1_1Preferences.html#a435c522d4eae2e8436b22f42919efd7b">getInt</a>(PREF_IO_MIDI_REALTIMEDELAY));</div><div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;                        }</div><div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;            }</div><div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;      }</div><div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;</div><div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;<span class="comment">//   triggerCmdRealtimeAdvance</span></div><div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160;</div><div class="line"><a name="l04540"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#ac50b56fbdc402dd9f4008abcb9fd478c"> 4540</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#ac50b56fbdc402dd9f4008abcb9fd478c">ScoreView::triggerCmdRealtimeAdvance</a>()</div><div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;      {</div><div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;      <a class="code" href="classMs_1_1InputState.html">InputState</a>&amp; is = score()-&gt;inputState();</div><div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;      <span class="keywordtype">bool</span> realtime = is.<a class="code" href="classMs_1_1InputState.html#a317166f3795ace112c72ccdcdcb0b259">usingNoteEntryMethod</a>(<a class="code" href="namespaceMs.html#a33bc7982f565376d042918ae3c91d3d6a278ec37b01c1bd1ed9b5870f2e57e2c3">NoteEntryMethod::REALTIME_AUTO</a>) || is.<a class="code" href="classMs_1_1InputState.html#a317166f3795ace112c72ccdcdcb0b259">usingNoteEntryMethod</a>(<a class="code" href="namespaceMs.html#a33bc7982f565376d042918ae3c91d3d6a7cb82508c8bf3f656f9943577d5b8d7a">NoteEntryMethod::REALTIME_MANUAL</a>);</div><div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;      <span class="keywordflow">if</span> (!realtime || !noteEntryMode() || (!allowRealtimeRests &amp;&amp; score()-&gt;activeMidiPitches()-&gt;empty())) {</div><div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;            <span class="keywordflow">if</span> (realtimeTimer-&gt;isActive())</div><div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;                  realtimeTimer-&gt;stop();</div><div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;            allowRealtimeRests = <span class="keyword">true</span>;</div><div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;            }</div><div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;      <span class="comment">// give audible feedback immediately to indicate a beat, but don’t advance just yet.</span></div><div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;      <a class="code" href="namespaceMs.html#a1a43a84e57fe33057a3e17aa85488d5f">seq</a>-&gt;<a class="code" href="classMs_1_1Seq.html#a2c672a68273237eb7e211334e785b5d4">playMetronomeBeat</a>(_score-&gt;tick2beatType(is.<a class="code" href="classMs_1_1InputState.html#a79d562ec34847c3154ec4c6c5073d464">tick</a>()));</div><div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;      <span class="comment">// The user will want to press notes &quot;on the beat&quot; and not before the beat, so wait a</span></div><div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;      <span class="comment">// little in case midi input event is received just after realtime-advance was called.</span></div><div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;      QTimer::singleShot(100, Qt::PreciseTimer, <span class="keyword">this</span>, SLOT(cmdRealtimeAdvance()));</div><div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;      }</div><div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;</div><div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;<span class="comment">//   cmdRealtimeAdvance</span></div><div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;<span class="comment">//    move input forwards and extend current chord/rest.</span></div><div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;</div><div class="line"><a name="l04562"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#ae8423054a43ea21dbd267df926233a22"> 4562</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#ae8423054a43ea21dbd267df926233a22">ScoreView::cmdRealtimeAdvance</a>()</div><div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;      {</div><div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;      <a class="code" href="classMs_1_1InputState.html">InputState</a>&amp; is = _score-&gt;inputState();</div><div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;      <span class="keywordflow">if</span> (!is.<a class="code" href="classMs_1_1InputState.html#ace2db17820748f92057d3a27bb2d31a8">noteEntryMode</a>())</div><div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;      _score-&gt;startCmd();</div><div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;      <a class="code" href="classMs_1_1Fraction.html">Fraction</a> ticks2measureEnd = is.<a class="code" href="classMs_1_1InputState.html#a50906efca36b635813b754bff9b32f15">segment</a>()-&gt;<a class="code" href="classMs_1_1Segment.html#a44dc6d5b22a75152673060bc059acfb9">measure</a>()-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a6cab2bc583be79fa27b83390dd48bc7f">ticks</a>() - is.<a class="code" href="classMs_1_1InputState.html#a50906efca36b635813b754bff9b32f15">segment</a>()-&gt;<a class="code" href="classMs_1_1Segment.html#a8a396189ef9375898066fb2d30952d79">rtick</a>();</div><div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;      <span class="keywordflow">if</span> (!is.<a class="code" href="classMs_1_1InputState.html#a28047eb7c30748dd3111c4621eb1ea4d">cr</a>() || (is.<a class="code" href="classMs_1_1InputState.html#a28047eb7c30748dd3111c4621eb1ea4d">cr</a>()-&gt;<a class="code" href="classMs_1_1DurationElement.html#abd480ba4d052d040db56e1e504cf2596">ticks</a>() != is.<a class="code" href="classMs_1_1InputState.html#ad23b3283d9647903d82a42461989506e">duration</a>().<a class="code" href="classMs_1_1TDuration.html#a5f699dd041973be93c8bef472927ee5f">fraction</a>() &amp;&amp; is.<a class="code" href="classMs_1_1InputState.html#ad23b3283d9647903d82a42461989506e">duration</a>() &lt; ticks2measureEnd))</div><div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;            _score-&gt;setNoteRest(is.<a class="code" href="classMs_1_1InputState.html#a50906efca36b635813b754bff9b32f15">segment</a>(), is.<a class="code" href="classMs_1_1InputState.html#a15cf2602df222da8558a2d6a43e66b19">track</a>(), <a class="code" href="structMs_1_1NoteVal.html">NoteVal</a>(), is.<a class="code" href="classMs_1_1InputState.html#ad23b3283d9647903d82a42461989506e">duration</a>().<a class="code" href="classMs_1_1TDuration.html#a5f699dd041973be93c8bef472927ee5f">fraction</a>(), <a class="code" href="namespaceMs.html#a4ddd02afd2f797a6a269ddce7466a4d6ae1f2d5134ed2543d38a0de9751cf75d9">Direction::AUTO</a>);</div><div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;      <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* prevCR = <a class="code" href="namespaceMs.html#a580f85ffcff35b12462cbfb60a8728b7">toChordRest</a>(is.<a class="code" href="classMs_1_1InputState.html#a28047eb7c30748dd3111c4621eb1ea4d">cr</a>());</div><div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;      <span class="keywordflow">if</span> (_score-&gt;inputState().endOfScore())</div><div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;            _score-&gt;appendMeasures(1);</div><div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;      is.<a class="code" href="classMs_1_1InputState.html#ac2992a6014b8bfb377796e3300562ee4">moveToNextInputPos</a>();</div><div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;      <span class="keywordflow">if</span> (_score-&gt;activeMidiPitches()-&gt;empty())</div><div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;            _score-&gt;setNoteRest(is.<a class="code" href="classMs_1_1InputState.html#a50906efca36b635813b754bff9b32f15">segment</a>(), is.<a class="code" href="classMs_1_1InputState.html#a15cf2602df222da8558a2d6a43e66b19">track</a>(), <a class="code" href="structMs_1_1NoteVal.html">NoteVal</a>(), is.<a class="code" href="classMs_1_1InputState.html#ad23b3283d9647903d82a42461989506e">duration</a>().<a class="code" href="classMs_1_1TDuration.html#a5f699dd041973be93c8bef472927ee5f">fraction</a>(), <a class="code" href="namespaceMs.html#a4ddd02afd2f797a6a269ddce7466a4d6ae1f2d5134ed2543d38a0de9751cf75d9">Direction::AUTO</a>);</div><div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;            <a class="code" href="classMs_1_1Chord.html">Chord</a>* prevChord = prevCR-&gt;isChord() ? toChord(prevCR) : 0;</div><div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;            <span class="keywordtype">bool</span> partOfChord = <span class="keyword">false</span>;</div><div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="structMs_1_1MidiInputEvent.html">MidiInputEvent</a> &amp;ev : *_score-&gt;activeMidiPitches()) {</div><div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;                  _score-&gt;addTiedMidiPitch(ev.pitch, partOfChord, prevChord);</div><div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;                  partOfChord = <span class="keyword">true</span>;</div><div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;                  }</div><div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;            }</div><div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;      <span class="keywordflow">if</span> (prevCR-&gt;<a class="code" href="classMs_1_1ChordRest.html#aaa704d32c5e4253d54d722276f507e2d">measure</a>() != is.<a class="code" href="classMs_1_1InputState.html#a50906efca36b635813b754bff9b32f15">segment</a>()-&gt;<a class="code" href="classMs_1_1Segment.html#a44dc6d5b22a75152673060bc059acfb9">measure</a>()) {</div><div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;            <span class="comment">// just advanced across barline. Now simplify tied notes.</span></div><div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;            score()-&gt;regroupNotesAndRests(prevCR-&gt;<a class="code" href="classMs_1_1ChordRest.html#aaa704d32c5e4253d54d722276f507e2d">measure</a>()-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a4957f952a3eca95bba93abfe047420bd">tick</a>(), is.<a class="code" href="classMs_1_1InputState.html#a50906efca36b635813b754bff9b32f15">segment</a>()-&gt;<a class="code" href="classMs_1_1Segment.html#a44dc6d5b22a75152673060bc059acfb9">measure</a>()-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a4957f952a3eca95bba93abfe047420bd">tick</a>(), is.<a class="code" href="classMs_1_1InputState.html#a15cf2602df222da8558a2d6a43e66b19">track</a>());</div><div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;            }</div><div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;      _score-&gt;endCmd();</div><div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;      }</div><div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;</div><div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;<span class="comment">//   cmdAddChordName</span></div><div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;</div><div class="line"><a name="l04596"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#ade6f94fbbe9267df4d80e609191e1d6c"> 4596</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#ade6f94fbbe9267df4d80e609191e1d6c">ScoreView::cmdAddChordName</a>(<a class="code" href="namespaceMs.html#a9ac3d39c415913ce40aa7e57a5f3fb55">HarmonyType</a> ht)</div><div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;      {</div><div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;      <span class="keywordflow">if</span> (!_score-&gt;checkHasMeasures())</div><div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;</div><div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;      <span class="keywordtype">int</span> track = -1;</div><div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;      <a class="code" href="classMs_1_1Element.html">Element</a>* newParent = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;      <a class="code" href="classMs_1_1Element.html">Element</a>* el = _score-&gt;selection().element();</div><div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;      <span class="keywordflow">if</span> (el &amp;&amp; el-&gt;isFretDiagram()) {</div><div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;            <a class="code" href="classMs_1_1FretDiagram.html">FretDiagram</a>* fd = toFretDiagram(el);</div><div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;            track = fd-&gt;<a class="code" href="classMs_1_1Element.html#ab4986d1b4f0d45b8e84cf52c46885c36">track</a>();</div><div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;            newParent = fd;</div><div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;            }</div><div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;            <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr = _score-&gt;getSelectedChordRest();</div><div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;            <span class="keywordflow">if</span> (cr) {</div><div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;                  track = cr-&gt;<a class="code" href="classMs_1_1Element.html#ab4986d1b4f0d45b8e84cf52c46885c36">track</a>();</div><div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;                  newParent = toElement(cr-&gt;<a class="code" href="classMs_1_1ChordRest.html#a94a3a697e4767c1e0ed46c205a81ac24">segment</a>());</div><div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;                  }</div><div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;            }</div><div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160;      <span class="keywordflow">if</span> (track == -1 || !newParent)</div><div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;</div><div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;      _score-&gt;startCmd();</div><div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;      <a class="code" href="classMs_1_1Harmony.html">Harmony</a>* harmony = <span class="keyword">new</span> <a class="code" href="classMs_1_1Harmony.html">Harmony</a>(_score);</div><div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;      harmony-&gt;<a class="code" href="classMs_1_1Element.html#a884bf81982c8c302cbdf79ea567c3ced">setTrack</a>(track);</div><div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160;      harmony-&gt;<a class="code" href="classMs_1_1Element.html#aa7757f6d62dc28447706ee8eb12da5ec">setParent</a>(newParent);</div><div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160;      harmony-&gt;<a class="code" href="classMs_1_1Harmony.html#a7fa4692b8851bcdd4a45ccc3a62d6e36">setHarmonyType</a>(ht);</div><div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;      _score-&gt;undoAddElement(harmony);</div><div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;      _score-&gt;endCmd();</div><div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;</div><div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;      _score-&gt;select(harmony, <a class="code" href="namespaceMs.html#a1066451ad9dc9959bedb76978f4f30c8a0679273e201afd0bf57af3961f8a23b8">SelectType::SINGLE</a>, 0);</div><div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160;      startEditMode(harmony);</div><div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;      _score-&gt;update();</div><div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160;      }</div><div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160;</div><div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;<span class="comment">//   cmdAddText</span></div><div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;</div><div class="line"><a name="l04636"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a958198aa0c66eb36e304342164166fd8"> 4636</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a958198aa0c66eb36e304342164166fd8">ScoreView::cmdAddText</a>(<a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5a">Tid</a> tid, <a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5a">Tid</a> customTid, <a class="code" href="namespaceMs.html#a56785a0f227cf3d1d0a4891656a35daa">PropertyFlags</a> pf, <a class="code" href="namespaceMs.html#a5340e53ea850ac4e67c071825916e469">Placement</a> p)</div><div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;      {</div><div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;      <span class="keywordflow">if</span> (!_score-&gt;checkHasMeasures())</div><div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;      <span class="keywordflow">if</span> (noteEntryMode())          <span class="comment">// force out of entry mode</span></div><div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;            changeState(<a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a1e23852820b9154316c7c06e2b7ba051">ViewState::NORMAL</a>);</div><div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;</div><div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;      <a class="code" href="classMs_1_1TextBase.html">TextBase</a>* s = 0;</div><div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;      _score-&gt;startCmd();</div><div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160;      <span class="keywordflow">if</span> (tid == <a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aa8e2ef94cad245adb8089356242f49e55">Tid::STAFF</a> &amp;&amp; customTid == <a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aaea8ec660a4ff1a0cf378ac911be7efb2">Tid::EXPRESSION</a>)</div><div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;            tid = customTid;  <span class="comment">// expression is not first class element, but treat as such</span></div><div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;      <span class="keywordflow">switch</span> (tid) {</div><div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aa6f9dccd85b2e0786c8d522045365eb48">Tid::TITLE</a>:</div><div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aa4755a6fd5219c602faa261bb02e0aa82">Tid::SUBTITLE</a>:</div><div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aa5e25078623973232ebcdabaca6ed82c3">Tid::COMPOSER</a>:</div><div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aaf08c95b54eefa7d745685856db641133">Tid::POET</a>:</div><div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aa591aa8ad7eccb940ed9ed21d61cb61f6">Tid::INSTRUMENT_EXCERPT</a>:</div><div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160;                  {</div><div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;                  <a class="code" href="classMs_1_1MeasureBase.html">MeasureBase</a>* measure = _score-&gt;first();</div><div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;                  <span class="keywordflow">if</span> (!measure-&gt;isVBox()) {</div><div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;                        _score-&gt;insertMeasure(<a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea77a3d52d60bccb4c3cd3da2a1779ce51">ElementType::VBOX</a>, measure);</div><div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160;                        measure = measure-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a362a1699d39b7f1684c13a1a8c75c376">prev</a>();</div><div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160;                        }</div><div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;                  s = <span class="keyword">new</span> <a class="code" href="classMs_1_1Text.html">Text</a>(_score, tid);</div><div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;                  s-&gt;<a class="code" href="classMs_1_1Element.html#aa7757f6d62dc28447706ee8eb12da5ec">setParent</a>(measure);</div><div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;                  _score-&gt;undoAddElement(s);</div><div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160;                  }</div><div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;</div><div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea096a4e9d4aa1495cdf3dabcc1ddbfbe1">Tid::REHEARSAL_MARK</a>:</div><div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;                  {</div><div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;                  <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr = _score-&gt;getSelectedChordRest();</div><div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160;                  <span class="keywordflow">if</span> (!cr)</div><div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;                  s = <span class="keyword">new</span> <a class="code" href="classMs_1_1RehearsalMark.html">RehearsalMark</a>(_score);</div><div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;                  cr-&gt;<a class="code" href="classMs_1_1ChordRest.html#aea020692fd005da199a5bc982fe96792">undoAddAnnotation</a>(s);</div><div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;                  }</div><div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aa8e2ef94cad245adb8089356242f49e55">Tid::STAFF</a>:</div><div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160;                  {</div><div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;                  <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr = _score-&gt;getSelectedChordRest();</div><div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;                  <span class="keywordflow">if</span> (!cr)</div><div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;                  s = <span class="keyword">new</span> <a class="code" href="classMs_1_1StaffText.html">StaffText</a>(_score, <a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aa8e2ef94cad245adb8089356242f49e55">Tid::STAFF</a>);</div><div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160;                  <span class="comment">// if the previous text is UNSTYLED or NOSTYLE</span></div><div class="line"><a name="l04681"></a><span class="lineno"> 4681</span>&#160;                  <span class="comment">// and the next text is created using text tab command</span></div><div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160;                  <span class="comment">// (only those created in this way can make pf not STYLED, see definition of ScoreView::textTab())</span></div><div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160;                  <span class="comment">// it inherits the same PropertyFlags and Placement</span></div><div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;                  <span class="comment">// making it much easier to put all texts above/below staves</span></div><div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;                  <span class="keywordflow">if</span> (pf != <a class="code" href="namespaceMs.html#a56785a0f227cf3d1d0a4891656a35daaae36a8b0bff422df195ae7b5e2738e7d6">PropertyFlags::STYLED</a>) {</div><div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;                        s-&gt;<a class="code" href="classMs_1_1Element.html#ae13af03f0efac5348d139609cbadc826">setPlacement</a>(p);</div><div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;                        s-&gt;<a class="code" href="classMs_1_1ScoreElement.html#aceed92c262270a2a79d3f97d0f018a29">setPropertyFlags</a>(<a class="code" href="namespaceMs.html#aa0f871cf8181cec31d68d20a39010655ad5829bb83e9a51bb48fb0a1e5d77423e">Pid::PLACEMENT</a>, pf);</div><div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160;                        }</div><div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;                  cr-&gt;<a class="code" href="classMs_1_1ChordRest.html#aea020692fd005da199a5bc982fe96792">undoAddAnnotation</a>(s);</div><div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;                  }</div><div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aafa177138f94a7ea01f549b1aa7893d03">Tid::SYSTEM</a>:</div><div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;                  {</div><div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;                  <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr = _score-&gt;getSelectedChordRest();</div><div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;                  <span class="keywordflow">if</span> (!cr)</div><div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;                  s = <span class="keyword">new</span> <a class="code" href="classMs_1_1SystemText.html">SystemText</a>(_score, <a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aafa177138f94a7ea01f549b1aa7893d03">Tid::SYSTEM</a>);</div><div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160;                  <span class="keywordflow">if</span> (pf != <a class="code" href="namespaceMs.html#a56785a0f227cf3d1d0a4891656a35daaae36a8b0bff422df195ae7b5e2738e7d6">PropertyFlags::STYLED</a>) {</div><div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;                        s-&gt;<a class="code" href="classMs_1_1Element.html#ae13af03f0efac5348d139609cbadc826">setPlacement</a>(p);</div><div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160;                        s-&gt;<a class="code" href="classMs_1_1ScoreElement.html#aceed92c262270a2a79d3f97d0f018a29">setPropertyFlags</a>(<a class="code" href="namespaceMs.html#aa0f871cf8181cec31d68d20a39010655ad5829bb83e9a51bb48fb0a1e5d77423e">Pid::PLACEMENT</a>, pf);</div><div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;                        }</div><div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;                  cr-&gt;<a class="code" href="classMs_1_1ChordRest.html#aea020692fd005da199a5bc982fe96792">undoAddAnnotation</a>(s);</div><div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;                  }</div><div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aaea8ec660a4ff1a0cf378ac911be7efb2">Tid::EXPRESSION</a>:</div><div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160;                  {</div><div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;                  <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr = _score-&gt;getSelectedChordRest();</div><div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;                  <span class="keywordflow">if</span> (!cr)</div><div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;                  s = <span class="keyword">new</span> <a class="code" href="classMs_1_1StaffText.html">StaffText</a>(_score, <a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aaea8ec660a4ff1a0cf378ac911be7efb2">Tid::EXPRESSION</a>);</div><div class="line"><a name="l04711"></a><span class="lineno"> 4711</span>&#160;                  s-&gt;<a class="code" href="classMs_1_1Element.html#ae13af03f0efac5348d139609cbadc826">setPlacement</a>(<a class="code" href="namespaceMs.html#a239e390cba4ba2b19296c2995da44976aa25949e21299b84cc33c4b00c740f08f">Placement::BELOW</a>);</div><div class="line"><a name="l04712"></a><span class="lineno"> 4712</span>&#160;                  s-&gt;<a class="code" href="classMs_1_1ScoreElement.html#aceed92c262270a2a79d3f97d0f018a29">setPropertyFlags</a>(<a class="code" href="namespaceMs.html#aa0f871cf8181cec31d68d20a39010655ad5829bb83e9a51bb48fb0a1e5d77423e">Pid::PLACEMENT</a>, <a class="code" href="namespaceMs.html#a56785a0f227cf3d1d0a4891656a35daaa2816296dc4ec68b74aa2aa62cfe49e21">PropertyFlags::UNSTYLED</a>);</div><div class="line"><a name="l04713"></a><span class="lineno"> 4713</span>&#160;                  cr-&gt;<a class="code" href="classMs_1_1ChordRest.html#aea020692fd005da199a5bc982fe96792">undoAddAnnotation</a>(s);</div><div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160;                  }</div><div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9eadff611def40f842cc2fc5c5b48e0d7f4">Tid::INSTRUMENT_CHANGE</a>:</div><div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160;                  {</div><div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160;                  <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr = _score-&gt;getSelectedChordRest();</div><div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160;                  <span class="keywordflow">if</span> (!cr)</div><div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160;                  s = <span class="keyword">new</span> <a class="code" href="classMs_1_1InstrumentChange.html">InstrumentChange</a>(_score);</div><div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;                  cr-&gt;<a class="code" href="classMs_1_1ChordRest.html#aea020692fd005da199a5bc982fe96792">undoAddAnnotation</a>(s);</div><div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160;                  }</div><div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9eafec1fffeb63a24b31b41a5e941132ca9">Tid::STICKING</a>:</div><div class="line"><a name="l04726"></a><span class="lineno"> 4726</span>&#160;                  {</div><div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160;                  <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr = _score-&gt;getSelectedChordRest();</div><div class="line"><a name="l04728"></a><span class="lineno"> 4728</span>&#160;                  <span class="keywordflow">if</span> (!cr)</div><div class="line"><a name="l04729"></a><span class="lineno"> 4729</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160;                  s = <span class="keyword">new</span> <a class="code" href="classMs_1_1Sticking.html">Sticking</a>(_score);</div><div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160;                  cr-&gt;<a class="code" href="classMs_1_1ChordRest.html#aea020692fd005da199a5bc982fe96792">undoAddAnnotation</a>(s);</div><div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160;                  }</div><div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a175bedec052e1c2fd09257ffde43d847a9b5778b423deab938ac37574ae543e56">Tid::FINGERING</a>:</div><div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aa665b68be9b2bb1fe1ce8498a85da8064">Tid::LH_GUITAR_FINGERING</a>:</div><div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aab8f375d174a8caa14d48dda0ee15e49a">Tid::RH_GUITAR_FINGERING</a>:</div><div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aaf97f280fc46a662f2c66053ea3221d26">Tid::STRING_NUMBER</a>:</div><div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160;                  {</div><div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;                  <a class="code" href="classMs_1_1Element.html">Element</a>* e = _score-&gt;getSelectedElement();</div><div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160;                  <span class="keywordflow">if</span> (!e || !e-&gt;isNote())</div><div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160;                  <span class="keywordtype">bool</span> isTablature = e-&gt;<a class="code" href="classMs_1_1Element.html#a14581354d9bfc2c39c7dafbed79403da">staff</a>()-&gt;<a class="code" href="classMs_1_1Staff.html#afdd8a358b8e40b9e02bca11e9fbb8829">isTabStaff</a>(e-&gt;<a class="code" href="classMs_1_1Element.html#a4cc362a42bad65483b59d3a8e0df374f">tick</a>());</div><div class="line"><a name="l04743"></a><span class="lineno"> 4743</span>&#160;                  <span class="keywordtype">bool</span> tabFingering = e-&gt;<a class="code" href="classMs_1_1Element.html#a14581354d9bfc2c39c7dafbed79403da">staff</a>()-&gt;<a class="code" href="classMs_1_1Staff.html#ad248bef7f25a4fe152ce281372a24d3f">staffType</a>(e-&gt;<a class="code" href="classMs_1_1Element.html#a4cc362a42bad65483b59d3a8e0df374f">tick</a>())-&gt;showTabFingering();</div><div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160;                  <span class="keywordflow">if</span> (isTablature &amp;&amp; !tabFingering)</div><div class="line"><a name="l04745"></a><span class="lineno"> 4745</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04746"></a><span class="lineno"> 4746</span>&#160;                  s = <span class="keyword">new</span> <a class="code" href="classMs_1_1Fingering.html">Fingering</a>(_score, tid);</div><div class="line"><a name="l04747"></a><span class="lineno"> 4747</span>&#160;                  s-&gt;<a class="code" href="classMs_1_1Element.html#a884bf81982c8c302cbdf79ea567c3ced">setTrack</a>(e-&gt;<a class="code" href="classMs_1_1Element.html#ab4986d1b4f0d45b8e84cf52c46885c36">track</a>());</div><div class="line"><a name="l04748"></a><span class="lineno"> 4748</span>&#160;                  s-&gt;<a class="code" href="classMs_1_1Element.html#aa7757f6d62dc28447706ee8eb12da5ec">setParent</a>(e);</div><div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160;                  <span class="keywordflow">if</span> (pf != <a class="code" href="namespaceMs.html#a56785a0f227cf3d1d0a4891656a35daaae36a8b0bff422df195ae7b5e2738e7d6">PropertyFlags::STYLED</a>) {</div><div class="line"><a name="l04750"></a><span class="lineno"> 4750</span>&#160;                        s-&gt;<a class="code" href="classMs_1_1Element.html#ae13af03f0efac5348d139609cbadc826">setPlacement</a>(p);</div><div class="line"><a name="l04751"></a><span class="lineno"> 4751</span>&#160;                        s-&gt;<a class="code" href="classMs_1_1ScoreElement.html#aceed92c262270a2a79d3f97d0f018a29">setPropertyFlags</a>(<a class="code" href="namespaceMs.html#aa0f871cf8181cec31d68d20a39010655ad5829bb83e9a51bb48fb0a1e5d77423e">Pid::PLACEMENT</a>, pf);</div><div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160;                        }</div><div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;                  _score-&gt;undoAddElement(s);</div><div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160;                  }</div><div class="line"><a name="l04755"></a><span class="lineno"> 4755</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160;            }</div><div class="line"><a name="l04759"></a><span class="lineno"> 4759</span>&#160;</div><div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160;      <span class="keywordflow">if</span> (s) {</div><div class="line"><a name="l04761"></a><span class="lineno"> 4761</span>&#160;            <span class="keywordflow">if</span> (customTid != <a class="code" href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aa5b39c8b553c821e7cddc6da64b5bd2ee">Tid::DEFAULT</a> &amp;&amp; customTid != tid)</div><div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160;                  s-&gt;<a class="code" href="classMs_1_1TextBase.html#a71cffa380431f2f83d4fbecc2f8538b0">initTid</a>(customTid);</div><div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160;            _score-&gt;select(s, <a class="code" href="namespaceMs.html#a1066451ad9dc9959bedb76978f4f30c8a0679273e201afd0bf57af3961f8a23b8">SelectType::SINGLE</a>, 0);</div><div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160;            _score-&gt;endCmd();</div><div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160;            <a class="code" href="classMs_1_1Measure.html">Measure</a>* m = s-&gt;<a class="code" href="classMs_1_1Element.html#aa1f1ac02b360d2d4f30e14aaa5ca2564">findMeasure</a>();</div><div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160;            <span class="keywordflow">if</span> (m &amp;&amp; m-&gt;<a class="code" href="classMs_1_1Measure.html#a9491f66d4e4c82e05aaea063d3654ac8">hasMMRest</a>() &amp;&amp; s-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3d5c97191484848b3f10e754246f8758">links</a>()) {</div><div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160;                  <a class="code" href="classMs_1_1Measure.html">Measure</a>* mmRest = m-&gt;<a class="code" href="classMs_1_1Measure.html#a9109c2c9621f0cc9ecd86afcae54afe8">mmRest</a>();</div><div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160;                  <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1ScoreElement.html">ScoreElement</a>* se : *s-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3d5c97191484848b3f10e754246f8758">links</a>()) {</div><div class="line"><a name="l04769"></a><span class="lineno"> 4769</span>&#160;                        <a class="code" href="classMs_1_1TextBase.html">TextBase</a>* s1 = <a class="code" href="namespaceMs.html#a0ae7680d3dcd8f5ece7e7c9985988c06">toTextBase</a>(se);</div><div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160;                        <span class="keywordflow">if</span> (s != s1 &amp;&amp; s1-&gt;<a class="code" href="classMs_1_1Element.html#aa1f1ac02b360d2d4f30e14aaa5ca2564">findMeasure</a>() == mmRest) {</div><div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160;                              s = s1;</div><div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160;                              <span class="keywordflow">break</span>;</div><div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160;                              }</div><div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;                        }</div><div class="line"><a name="l04775"></a><span class="lineno"> 4775</span>&#160;                  }</div><div class="line"><a name="l04776"></a><span class="lineno"> 4776</span>&#160;            adjustCanvasPosition(s, <span class="keyword">false</span>);</div><div class="line"><a name="l04777"></a><span class="lineno"> 4777</span>&#160;            startEditMode(s);</div><div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;            }</div><div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160;            _score-&gt;endCmd();</div><div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160;      }</div><div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160;</div><div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;<span class="comment">//   cmdAppendMeasures</span><span class="comment"></span></div><div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;<span class="comment">///   Append \a n measures.</span></div><div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160;<span class="comment">///   Keyboard callback, called from pulldown menu.</span></div><div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;<span class="comment"></span><span class="comment">//</span></div><div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;<span class="comment">//    - called from pulldown menu</span></div><div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;</div><div class="line"><a name="l04792"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a336033b7ff252caa99dca592b20805de"> 4792</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a336033b7ff252caa99dca592b20805de">ScoreView::cmdAppendMeasures</a>(<span class="keywordtype">int</span> n, <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9e">ElementType</a> type)</div><div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;      {</div><div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;      _score-&gt;startCmd();</div><div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160;      appendMeasures(n, type);</div><div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;      _score-&gt;endCmd();</div><div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160;      }</div><div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160;</div><div class="line"><a name="l04799"></a><span class="lineno"> 4799</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160;<span class="comment">//   appendMeasure</span></div><div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;</div><div class="line"><a name="l04803"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#ad03ba69d6727361b1e148fea06535a95"> 4803</a></span>&#160;<a class="code" href="classMs_1_1MeasureBase.html">MeasureBase</a>* <a class="code" href="classMs_1_1ScoreView.html#ad03ba69d6727361b1e148fea06535a95">ScoreView::appendMeasure</a>(<a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9e">ElementType</a> type)</div><div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160;      {</div><div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160;      _score-&gt;startCmd();</div><div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;      _score-&gt;insertMeasure(type, 0);</div><div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160;      <a class="code" href="classMs_1_1MeasureBase.html">MeasureBase</a>* mb = _score-&gt;lastMeasureMM();</div><div class="line"><a name="l04808"></a><span class="lineno"> 4808</span>&#160;      _score-&gt;endCmd();</div><div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;      <span class="keywordflow">return</span> mb;</div><div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160;      }</div><div class="line"><a name="l04811"></a><span class="lineno"> 4811</span>&#160;</div><div class="line"><a name="l04812"></a><span class="lineno"> 4812</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04813"></a><span class="lineno"> 4813</span>&#160;<span class="comment">//   appendMeasures</span></div><div class="line"><a name="l04814"></a><span class="lineno"> 4814</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160;</div><div class="line"><a name="l04816"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a426bdc8db7540c7ea6ae8326f697076b"> 4816</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a426bdc8db7540c7ea6ae8326f697076b">ScoreView::appendMeasures</a>(<span class="keywordtype">int</span> n, <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9e">ElementType</a> type)</div><div class="line"><a name="l04817"></a><span class="lineno"> 4817</span>&#160;      {</div><div class="line"><a name="l04818"></a><span class="lineno"> 4818</span>&#160;      <span class="keywordflow">if</span> (_score-&gt;noStaves()) {</div><div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;            QMessageBox::warning(0, <span class="stringliteral">&quot;MuseScore&quot;</span>,</div><div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160;               tr(<span class="stringliteral">&quot;No staves found:\n&quot;</span></div><div class="line"><a name="l04821"></a><span class="lineno"> 4821</span>&#160;                  <span class="stringliteral">&quot;Please use the instruments dialog to\n&quot;</span></div><div class="line"><a name="l04822"></a><span class="lineno"> 4822</span>&#160;                  <span class="stringliteral">&quot;first create some staves&quot;</span>));</div><div class="line"><a name="l04823"></a><span class="lineno"> 4823</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160;            }</div><div class="line"><a name="l04825"></a><span class="lineno"> 4825</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; ++i)</div><div class="line"><a name="l04826"></a><span class="lineno"> 4826</span>&#160;            _score-&gt;insertMeasure(type, 0);</div><div class="line"><a name="l04827"></a><span class="lineno"> 4827</span>&#160;      }</div><div class="line"><a name="l04828"></a><span class="lineno"> 4828</span>&#160;</div><div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160;<span class="comment">//   cmdInsertMeasures</span></div><div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04832"></a><span class="lineno"> 4832</span>&#160;</div><div class="line"><a name="l04833"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#aab9661da3b01fe82845f0a1c839bede9"> 4833</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#aab9661da3b01fe82845f0a1c839bede9">ScoreView::cmdInsertMeasures</a>(<span class="keywordtype">int</span> n, <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9e">ElementType</a> type)</div><div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160;      {</div><div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160;      <a class="code" href="classMs_1_1MeasureBase.html">MeasureBase</a>* mb = checkSelectionStateForInsertMeasure();</div><div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;      <span class="keywordflow">if</span> (!mb)</div><div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160;      _score-&gt;startCmd();</div><div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; ++i)</div><div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160;            _score-&gt;insertMeasure(type, mb);</div><div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160;      _score-&gt;endCmd();</div><div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;</div><div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;      <span class="keywordflow">if</span> (mb-&gt;<a class="code" href="classMs_1_1MeasureBase.html#ab5f6111d12a058461be1fe560c2c41b9">type</a>() == <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea84e4213ee54478574ea15a166ea10152">ElementType::MEASURE</a>) {</div><div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160;            <span class="comment">// re-select the original measure (which may now be covered by an mmrest)</span></div><div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160;            <span class="comment">// do this after the layout so mmrests are updated</span></div><div class="line"><a name="l04846"></a><span class="lineno"> 4846</span>&#160;            <a class="code" href="classMs_1_1Measure.html">Measure</a>* m = _score-&gt;tick2measureMM(mb-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a4957f952a3eca95bba93abfe047420bd">tick</a>());</div><div class="line"><a name="l04847"></a><span class="lineno"> 4847</span>&#160;            _score-&gt;select(m, <a class="code" href="namespaceMs.html#a1066451ad9dc9959bedb76978f4f30c8a0679273e201afd0bf57af3961f8a23b8">SelectType::SINGLE</a>, 0);</div><div class="line"><a name="l04848"></a><span class="lineno"> 4848</span>&#160;            }</div><div class="line"><a name="l04849"></a><span class="lineno"> 4849</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l04850"></a><span class="lineno"> 4850</span>&#160;            <span class="comment">// original selection was not a measure, just re-select it</span></div><div class="line"><a name="l04851"></a><span class="lineno"> 4851</span>&#160;            _score-&gt;select(mb, <a class="code" href="namespaceMs.html#a1066451ad9dc9959bedb76978f4f30c8a0679273e201afd0bf57af3961f8a23b8">SelectType::SINGLE</a>, 0);</div><div class="line"><a name="l04852"></a><span class="lineno"> 4852</span>&#160;            }</div><div class="line"><a name="l04853"></a><span class="lineno"> 4853</span>&#160;      }</div><div class="line"><a name="l04854"></a><span class="lineno"> 4854</span>&#160;</div><div class="line"><a name="l04855"></a><span class="lineno"> 4855</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04856"></a><span class="lineno"> 4856</span>&#160;<span class="comment">//   cmdInsertMeasure</span></div><div class="line"><a name="l04857"></a><span class="lineno"> 4857</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04858"></a><span class="lineno"> 4858</span>&#160;</div><div class="line"><a name="l04859"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a18d575f9db6807580ee6cee3b5bb2b72"> 4859</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a18d575f9db6807580ee6cee3b5bb2b72">ScoreView::cmdInsertMeasure</a>(<a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9e">ElementType</a> type)</div><div class="line"><a name="l04860"></a><span class="lineno"> 4860</span>&#160;      {</div><div class="line"><a name="l04861"></a><span class="lineno"> 4861</span>&#160;      <a class="code" href="classMs_1_1MeasureBase.html">MeasureBase</a>* mb = checkSelectionStateForInsertMeasure();</div><div class="line"><a name="l04862"></a><span class="lineno"> 4862</span>&#160;      <span class="keywordflow">if</span> (!mb)</div><div class="line"><a name="l04863"></a><span class="lineno"> 4863</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l04864"></a><span class="lineno"> 4864</span>&#160;      _score-&gt;startCmd();</div><div class="line"><a name="l04865"></a><span class="lineno"> 4865</span>&#160;      _score-&gt;insertMeasure(type, mb);</div><div class="line"><a name="l04866"></a><span class="lineno"> 4866</span>&#160;      mb = mb-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a362a1699d39b7f1684c13a1a8c75c376">prev</a>();</div><div class="line"><a name="l04867"></a><span class="lineno"> 4867</span>&#160;      <span class="keywordflow">if</span> (mb-&gt;<a class="code" href="classMs_1_1MeasureBase.html#ab5f6111d12a058461be1fe560c2c41b9">type</a>() == <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea53e518b6393904e797819c7a941f9ddc">ElementType::TBOX</a>) {</div><div class="line"><a name="l04868"></a><span class="lineno"> 4868</span>&#160;            <a class="code" href="classMs_1_1TBox.html">TBox</a>* tbox = <span class="keyword">static_cast&lt;</span><a class="code" href="classMs_1_1TBox.html">TBox</a>*<span class="keyword">&gt;</span>(mb);</div><div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;            <a class="code" href="classMs_1_1Text.html">Text</a>* s = tbox-&gt;<a class="code" href="classMs_1_1TBox.html#a67a0d4ccc8145d56eb2ebd5b16add50a">text</a>();</div><div class="line"><a name="l04870"></a><span class="lineno"> 4870</span>&#160;            _score-&gt;select(s, <a class="code" href="namespaceMs.html#a1066451ad9dc9959bedb76978f4f30c8a0679273e201afd0bf57af3961f8a23b8">SelectType::SINGLE</a>, 0);</div><div class="line"><a name="l04871"></a><span class="lineno"> 4871</span>&#160;            _score-&gt;endCmd();</div><div class="line"><a name="l04872"></a><span class="lineno"> 4872</span>&#160;            startEditMode(s);</div><div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160;            }</div><div class="line"><a name="l04875"></a><span class="lineno"> 4875</span>&#160;      <span class="keywordflow">if</span> (mb)</div><div class="line"><a name="l04876"></a><span class="lineno"> 4876</span>&#160;           _score-&gt;select(mb, <a class="code" href="namespaceMs.html#a1066451ad9dc9959bedb76978f4f30c8a0679273e201afd0bf57af3961f8a23b8">SelectType::SINGLE</a>, 0);</div><div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160;      _score-&gt;endCmd();</div><div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160;      }</div><div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160;</div><div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160;<span class="comment">//   checkSelectionStateForInsertMeasure</span></div><div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160;</div><div class="line"><a name="l04884"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a9862650c532773456b7a4e8b74b9a1e6"> 4884</a></span>&#160;<a class="code" href="classMs_1_1MeasureBase.html">MeasureBase</a>* <a class="code" href="classMs_1_1ScoreView.html#a9862650c532773456b7a4e8b74b9a1e6">ScoreView::checkSelectionStateForInsertMeasure</a>()</div><div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160;      {</div><div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160;      <a class="code" href="classMs_1_1MeasureBase.html">MeasureBase</a>* mb = 0;</div><div class="line"><a name="l04887"></a><span class="lineno"> 4887</span>&#160;      <span class="keywordflow">if</span> (_score-&gt;selection().isRange()) {</div><div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;            mb = _score-&gt;selection().startSegment()-&gt;measure();</div><div class="line"><a name="l04889"></a><span class="lineno"> 4889</span>&#160;            <span class="keywordflow">return</span> mb;</div><div class="line"><a name="l04890"></a><span class="lineno"> 4890</span>&#160;            }</div><div class="line"><a name="l04891"></a><span class="lineno"> 4891</span>&#160;</div><div class="line"><a name="l04892"></a><span class="lineno"> 4892</span>&#160;      mb = _score-&gt;selection().<a class="code" href="classMs_1_1Element.html#aa1f1ac02b360d2d4f30e14aaa5ca2564">findMeasure</a>();</div><div class="line"><a name="l04893"></a><span class="lineno"> 4893</span>&#160;      <span class="keywordflow">if</span> (mb)</div><div class="line"><a name="l04894"></a><span class="lineno"> 4894</span>&#160;            <span class="keywordflow">return</span> mb;</div><div class="line"><a name="l04895"></a><span class="lineno"> 4895</span>&#160;</div><div class="line"><a name="l04896"></a><span class="lineno"> 4896</span>&#160;      <a class="code" href="classMs_1_1Element.html">Element</a>* e = _score-&gt;selection().element();</div><div class="line"><a name="l04897"></a><span class="lineno"> 4897</span>&#160;      <span class="keywordflow">if</span> (e) {</div><div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;            <span class="keywordflow">if</span> (e-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea77a3d52d60bccb4c3cd3da2a1779ce51">ElementType::VBOX</a> || e-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea53e518b6393904e797819c7a941f9ddc">ElementType::TBOX</a> || e-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea2c1e7e81a01ed3fa8c227e344c4f6662">ElementType::HBOX</a>)</div><div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;                  <span class="keywordflow">return</span> static_cast&lt;MeasureBase*&gt;(e);</div><div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160;            }</div><div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160;      QMessageBox::warning(0, <span class="stringliteral">&quot;MuseScore&quot;</span>,</div><div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;            tr(<span class="stringliteral">&quot;No measure selected:\n&quot;</span> <span class="stringliteral">&quot;Please select a measure and try again&quot;</span>));</div><div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;      }</div><div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;</div><div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160;<span class="comment">//   cmdRepeatSelection</span></div><div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160;</div><div class="line"><a name="l04910"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a4dbc7c19c3ea32d3542dabfcba5ba30f"> 4910</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a4dbc7c19c3ea32d3542dabfcba5ba30f">ScoreView::cmdRepeatSelection</a>()</div><div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160;      {</div><div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160;      <span class="keyword">const</span> <a class="code" href="classMs_1_1Selection.html">Selection</a>&amp; selection = _score-&gt;selection();</div><div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160;</div><div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;      <span class="keywordflow">if</span> (noteEntryMode() &amp;&amp; selection.<a class="code" href="classMs_1_1Selection.html#a38ebdcd0c523014365b5c0855f9e3d80">isSingle</a>()) {</div><div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160;            <a class="code" href="classMs_1_1Element.html">Element</a>* el = _score-&gt;selection().element();</div><div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;            <span class="keywordflow">if</span> (el &amp;&amp; el-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#aeccc894c5a64aba67bbfaf8fe1b755d5a10de4bc81f754b19b0d27246a0589c05">ElementType::NOTE</a>) {</div><div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160;                  <span class="keywordflow">if</span> (!_score-&gt;inputState().endOfScore()) {</div><div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;                        _score-&gt;startCmd();</div><div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160;                        <span class="keywordtype">bool</span> addTo = <span class="keyword">false</span>;</div><div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160;                        <a class="code" href="classMs_1_1Chord.html">Chord</a>* c = <span class="keyword">static_cast&lt;</span><a class="code" href="classMs_1_1Note.html">Note</a>*<span class="keyword">&gt;</span>(el)-&gt;chord();</div><div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;                        <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1Note.html">Note</a>* note : c-&gt;<a class="code" href="classMs_1_1Chord.html#a77eab400665dc934f24de11fc7ac1c4e">notes</a>()) {</div><div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;                              <a class="code" href="structMs_1_1NoteVal.html">NoteVal</a> nval = note-&gt;noteVal();</div><div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160;                              _score-&gt;addPitch(nval, addTo);</div><div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;                              addTo = <span class="keyword">true</span>;</div><div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;                              }</div><div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;                        _score-&gt;endCmd();</div><div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160;                        }</div><div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;                  }</div><div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;            }</div><div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;      <span class="keywordflow">if</span> (!selection.<a class="code" href="classMs_1_1Selection.html#a884ac586a99a211a55eab115a2c3d95f">isRange</a>()) {</div><div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160;            <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr = _score-&gt;getSelectedChordRest();</div><div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;            <span class="keywordflow">if</span> (!cr)</div><div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;                  <span class="keywordflow">return</span>;</div><div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;            _score-&gt;select(cr, <a class="code" href="namespaceMs.html#a1066451ad9dc9959bedb76978f4f30c8a01036ddcc971d02f6c32c3da31a119f2">SelectType::RANGE</a>);</div><div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160;            }</div><div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160;</div><div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160;      <span class="keywordflow">if</span> (!checkCopyOrCut())</div><div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;</div><div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160;      QString mimeType = selection.<a class="code" href="classMs_1_1Selection.html#a2f0da0a7ca2a9d2941293fd554ce7983">mimeType</a>();</div><div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160;      <span class="keywordflow">if</span> (mimeType.isEmpty()) {</div><div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160;            qDebug(<span class="stringliteral">&quot;mime type is empty&quot;</span>);</div><div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;            }</div><div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;      QMimeData* <a class="code" href="namespaceMs.html#abd83f3147d5fadc937a40931c56620cd">mimeData</a> = <span class="keyword">new</span> QMimeData;</div><div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;      mimeData-&gt;setData(mimeType, selection.<a class="code" href="classMs_1_1Selection.html#a240f8c2954141765a38e366e11c2fb6b">mimeData</a>());</div><div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classMs_1_1MScore.html#a58e52c0bece662fbd932efcee0ebdb67">MScore::debugMode</a>)</div><div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;            qDebug(<span class="stringliteral">&quot;cmdRepeatSelection: &lt;%s&gt;&quot;</span>, mimeData-&gt;data(mimeType).data());</div><div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;      QApplication::clipboard()-&gt;setMimeData(mimeData);</div><div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160;</div><div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;      QByteArray d(mimeData-&gt;data(mimeType));</div><div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160;      <a class="code" href="classMs_1_1XmlReader.html">XmlReader</a> xml(d);</div><div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;      xml.setPasteMode(<span class="keyword">true</span>);</div><div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;</div><div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;      <span class="keywordtype">int</span> dStaff = selection.<a class="code" href="classMs_1_1Selection.html#a009257797226b07065d8a225184178b3">staffStart</a>();</div><div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160;      <a class="code" href="classMs_1_1Segment.html">Segment</a>* endSegment = selection.<a class="code" href="classMs_1_1Selection.html#a125e47fae45ef55211b0297dc96754ad">endSegment</a>();</div><div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160;</div><div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;      <span class="keywordflow">if</span> (endSegment &amp;&amp; endSegment-&gt;<a class="code" href="classMs_1_1Segment.html#accf66d981db70ac1bd843ca5e03330a1">segmentType</a>() != <a class="code" href="namespaceMs.html#a24593d5bc01ac95fdbec3d354d258894a7884fad7b22d960efd4e9d84e61e7fe0">SegmentType::ChordRest</a>)</div><div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;            endSegment = endSegment-&gt;<a class="code" href="classMs_1_1Segment.html#a8c27ddfb0004417dd89b655e3480a6a0">next1</a>(<a class="code" href="namespaceMs.html#a24593d5bc01ac95fdbec3d354d258894a7884fad7b22d960efd4e9d84e61e7fe0">SegmentType::ChordRest</a>);</div><div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;      <span class="keywordflow">if</span> (endSegment &amp;&amp; endSegment-&gt;<a class="code" href="classMs_1_1Segment.html#a4e9ad4c47081dec0aebcd2aea96b309f">element</a>(dStaff * <a class="code" href="mscore_8h.html#a7b14c16d0b45fd100ee97e74cfd907c0">VOICES</a>)) {</div><div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160;            <a class="code" href="classMs_1_1Element.html">Element</a>* e = endSegment-&gt;<a class="code" href="classMs_1_1Segment.html#a4e9ad4c47081dec0aebcd2aea96b309f">element</a>(dStaff * VOICES);</div><div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;            <span class="keywordflow">if</span> (e) {</div><div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;                  <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr = <a class="code" href="namespaceMs.html#a580f85ffcff35b12462cbfb60a8728b7">toChordRest</a>(e);</div><div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160;                  _score-&gt;startCmd();</div><div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160;                  _score-&gt;pasteStaff(xml, cr-&gt;<a class="code" href="classMs_1_1ChordRest.html#a94a3a697e4767c1e0ed46c205a81ac24">segment</a>(), cr-&gt;<a class="code" href="classMs_1_1Element.html#a3c37abb86b5dfb5b16fe74155154bab8">staffIdx</a>());</div><div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160;                  _score-&gt;endCmd();</div><div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160;                  }</div><div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;                  qDebug(<span class="stringliteral">&quot;ScoreView::cmdRepeatSelection: cannot paste: %p &lt;%s&gt;&quot;</span>, e, e ? e-&gt;<a class="code" href="classMs_1_1ScoreElement.html#ad80dda73306d6b784b0cac4626f797d4">name</a>() : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160;            }</div><div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160;            qDebug(<span class="stringliteral">&quot;cmdRepeatSelection: cannot paste: endSegment: %p dStaff %d&quot;</span>, endSegment, dStaff);</div><div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160;            }</div><div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;      }</div><div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160;</div><div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;<span class="comment">//   searchPage</span></div><div class="line"><a name="l04979"></a><span class="lineno"> 4979</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160;</div><div class="line"><a name="l04981"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a2e13d7cbff67d9b4d07ed2c4eabeae59"> 4981</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classMs_1_1ScoreView.html#a2e13d7cbff67d9b4d07ed2c4eabeae59">ScoreView::searchPage</a>(<span class="keywordtype">int</span> n)</div><div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;      {</div><div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;      <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;</div><div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160;      n -= score()-&gt;pageNumberOffset();</div><div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;      <span class="keywordflow">if</span> (n &lt;= 0) {</div><div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160;            n = 1;</div><div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;            result = <span class="keyword">false</span>;</div><div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160;            }</div><div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;      n--;</div><div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;      <span class="keywordflow">if</span> (n &gt;= _score-&gt;npages()) {</div><div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;            result = <span class="keyword">false</span>;</div><div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160;            n = _score-&gt;npages() - 1;</div><div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160;            }</div><div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;      <span class="keyword">const</span> <a class="code" href="classMs_1_1Page.html">Page</a>* page = _score-&gt;pages()[n];</div><div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;      <span class="keywordflow">foreach</span> (<a class="code" href="classMs_1_1System.html">System</a>* s, page-&gt;<a class="code" href="classMs_1_1Page.html#a4406043135c1ea0028f010710ebe9774">systems</a>()) {</div><div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;            <span class="keywordflow">if</span> (s-&gt;<a class="code" href="classMs_1_1System.html#a706bf742c241c75854c66141cbba2ca5">firstMeasure</a>()) {</div><div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;                  gotoMeasure(s-&gt;<a class="code" href="classMs_1_1System.html#a706bf742c241c75854c66141cbba2ca5">firstMeasure</a>());</div><div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;                  }</div><div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160;            }</div><div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;      <span class="keywordflow">return</span> result;</div><div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;      }</div><div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;</div><div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;<span class="comment">//   searchMeasure</span></div><div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;</div><div class="line"><a name="l05008"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a108bf7df15d3b2a06d31ba22314cb70a"> 5008</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classMs_1_1ScoreView.html#a108bf7df15d3b2a06d31ba22314cb70a">ScoreView::searchMeasure</a>(<span class="keywordtype">int</span> n)</div><div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160;      {</div><div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160;      <span class="keywordflow">if</span> (n &lt;= 0)</div><div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l05012"></a><span class="lineno"> 5012</span>&#160;      <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;</div><div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160;      --n;</div><div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;      <span class="keywordtype">int</span> i = 0;</div><div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;      <a class="code" href="classMs_1_1Measure.html">Measure</a>* measure;</div><div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;      <span class="keywordflow">for</span> (measure = _score-&gt;firstMeasureMM(); measure; measure = measure-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a5e411c5bec8ab7b9120cf7f2ace28a89">nextMeasureMM</a>()) {</div><div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160;            <span class="keywordtype">int</span> nn = _score-&gt;styleB(<a class="code" href="namespaceMs.html#a2bac757437d1a9e364db27de8f9c9e2ea83a473e523160149b1f60621fcba0b5b">Sid::createMultiMeasureRests</a>) &amp;&amp; measure-&gt;<a class="code" href="classMs_1_1Measure.html#ae92cfe704a9477074d0fbe1a3bb6ff61">isMMRest</a>()</div><div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;               ? measure-&gt;<a class="code" href="classMs_1_1Measure.html#a4bc97255a366ad792cc65094767152c5">mmRestCount</a>() : 1;</div><div class="line"><a name="l05019"></a><span class="lineno"> 5019</span>&#160;            <span class="keywordflow">if</span> (n &gt;= i &amp;&amp; n &lt; (i+nn))</div><div class="line"><a name="l05020"></a><span class="lineno"> 5020</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l05021"></a><span class="lineno"> 5021</span>&#160;            i += nn;</div><div class="line"><a name="l05022"></a><span class="lineno"> 5022</span>&#160;            }</div><div class="line"><a name="l05023"></a><span class="lineno"> 5023</span>&#160;      <span class="keywordflow">if</span> (!measure) {</div><div class="line"><a name="l05024"></a><span class="lineno"> 5024</span>&#160;            measure = score()-&gt;lastMeasureMM();</div><div class="line"><a name="l05025"></a><span class="lineno"> 5025</span>&#160;            result = <span class="keyword">false</span>;</div><div class="line"><a name="l05026"></a><span class="lineno"> 5026</span>&#160;            }</div><div class="line"><a name="l05027"></a><span class="lineno"> 5027</span>&#160;      gotoMeasure(measure);</div><div class="line"><a name="l05028"></a><span class="lineno"> 5028</span>&#160;      <span class="keywordflow">return</span> result;</div><div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160;      }</div><div class="line"><a name="l05030"></a><span class="lineno"> 5030</span>&#160;</div><div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160;<span class="comment">//   searchRehearsalMark</span></div><div class="line"><a name="l05033"></a><span class="lineno"> 5033</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05034"></a><span class="lineno"> 5034</span>&#160;</div><div class="line"><a name="l05035"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a241c185eaedfa9b83e9eb5e195a7ce59"> 5035</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classMs_1_1ScoreView.html#a241c185eaedfa9b83e9eb5e195a7ce59">ScoreView::searchRehearsalMark</a>(<span class="keyword">const</span> QString&amp; s)</div><div class="line"><a name="l05036"></a><span class="lineno"> 5036</span>&#160;      {</div><div class="line"><a name="l05037"></a><span class="lineno"> 5037</span>&#160;      <span class="comment">//search rehearsal marks</span></div><div class="line"><a name="l05038"></a><span class="lineno"> 5038</span>&#160;      QString ss = s.toLower();</div><div class="line"><a name="l05039"></a><span class="lineno"> 5039</span>&#160;      <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;</div><div class="line"><a name="l05040"></a><span class="lineno"> 5040</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1Segment.html">Segment</a>* seg = score()-&gt;firstSegment(<a class="code" href="namespaceMs.html#a24593d5bc01ac95fdbec3d354d258894a7884fad7b22d960efd4e9d84e61e7fe0">SegmentType::ChordRest</a>); seg; seg = seg-&gt;<a class="code" href="classMs_1_1Segment.html#a8c27ddfb0004417dd89b655e3480a6a0">next1</a>(<a class="code" href="namespaceMs.html#a24593d5bc01ac95fdbec3d354d258894a7884fad7b22d960efd4e9d84e61e7fe0">SegmentType::ChordRest</a>)) {</div><div class="line"><a name="l05041"></a><span class="lineno"> 5041</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1Element.html">Element</a>* e : seg-&gt;annotations()){</div><div class="line"><a name="l05042"></a><span class="lineno"> 5042</span>&#160;                  <span class="keywordflow">if</span> (e-&gt;type() == <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea096a4e9d4aa1495cdf3dabcc1ddbfbe1">ElementType::REHEARSAL_MARK</a>) {</div><div class="line"><a name="l05043"></a><span class="lineno"> 5043</span>&#160;                        <a class="code" href="classMs_1_1RehearsalMark.html">RehearsalMark</a>* rm = <span class="keyword">static_cast&lt;</span><a class="code" href="classMs_1_1RehearsalMark.html">RehearsalMark</a>*<span class="keyword">&gt;</span>(e);</div><div class="line"><a name="l05044"></a><span class="lineno"> 5044</span>&#160;                        QString rms = rm-&gt;<a class="code" href="classMs_1_1TextBase.html#a947b23dce716abd08ef4367b3c7cd363">plainText</a>().toLower();</div><div class="line"><a name="l05045"></a><span class="lineno"> 5045</span>&#160;                        <span class="keywordflow">if</span> (rms.startsWith(ss)) {</div><div class="line"><a name="l05046"></a><span class="lineno"> 5046</span>&#160;                              gotoMeasure(seg-&gt;measure());</div><div class="line"><a name="l05047"></a><span class="lineno"> 5047</span>&#160;                              found = <span class="keyword">true</span>;</div><div class="line"><a name="l05048"></a><span class="lineno"> 5048</span>&#160;                              <span class="keywordflow">break</span>;</div><div class="line"><a name="l05049"></a><span class="lineno"> 5049</span>&#160;                              }</div><div class="line"><a name="l05050"></a><span class="lineno"> 5050</span>&#160;                        }</div><div class="line"><a name="l05051"></a><span class="lineno"> 5051</span>&#160;                  }</div><div class="line"><a name="l05052"></a><span class="lineno"> 5052</span>&#160;            <span class="keywordflow">if</span> (found)</div><div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;            }</div><div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160;      <span class="keywordflow">return</span> found;</div><div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;      }</div><div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160;</div><div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05059"></a><span class="lineno"> 5059</span>&#160;<span class="comment">//   gotoMeasure</span></div><div class="line"><a name="l05060"></a><span class="lineno"> 5060</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05061"></a><span class="lineno"> 5061</span>&#160;</div><div class="line"><a name="l05062"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a93abcdabfce49c3860197f5a126d4302"> 5062</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a93abcdabfce49c3860197f5a126d4302">ScoreView::gotoMeasure</a>(<a class="code" href="classMs_1_1Measure.html">Measure</a>* measure)</div><div class="line"><a name="l05063"></a><span class="lineno"> 5063</span>&#160;      {</div><div class="line"><a name="l05064"></a><span class="lineno"> 5064</span>&#160;      adjustCanvasPosition(measure, state != <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a1e23852820b9154316c7c06e2b7ba051">ViewState::NORMAL</a>);</div><div class="line"><a name="l05065"></a><span class="lineno"> 5065</span>&#160;      <span class="keywordtype">int</span> tracks = _score-&gt;nstaves() * <a class="code" href="mscore_8h.html#a7b14c16d0b45fd100ee97e74cfd907c0">VOICES</a>;</div><div class="line"><a name="l05066"></a><span class="lineno"> 5066</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1Segment.html">Segment</a>* segment = measure-&gt;<a class="code" href="classMs_1_1Measure.html#a3c5e55d2f2291d5ee433a093c0b1dd04">first</a>(); segment; segment = segment-&gt;<a class="code" href="classMs_1_1Segment.html#a1c4c00c6b1052c6c122f5fc665ec8a20">next</a>()) {</div><div class="line"><a name="l05067"></a><span class="lineno"> 5067</span>&#160;            <span class="keywordflow">if</span> (segment-&gt;segmentType() != <a class="code" href="namespaceMs.html#a24593d5bc01ac95fdbec3d354d258894a7884fad7b22d960efd4e9d84e61e7fe0">SegmentType::ChordRest</a>)</div><div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160;                  <span class="keywordflow">continue</span>;</div><div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160;            <span class="keywordtype">int</span> track;</div><div class="line"><a name="l05070"></a><span class="lineno"> 5070</span>&#160;            <span class="keywordflow">for</span> (track = 0; track &lt; tracks; ++track) {</div><div class="line"><a name="l05071"></a><span class="lineno"> 5071</span>&#160;                  <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr = <span class="keyword">static_cast&lt;</span><a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>*<span class="keyword">&gt;</span>(segment-&gt;element(track));</div><div class="line"><a name="l05072"></a><span class="lineno"> 5072</span>&#160;                  <span class="keywordflow">if</span> (cr) {</div><div class="line"><a name="l05073"></a><span class="lineno"> 5073</span>&#160;                        <a class="code" href="classMs_1_1Element.html">Element</a>* e;</div><div class="line"><a name="l05074"></a><span class="lineno"> 5074</span>&#160;                        <span class="keywordflow">if</span> (cr-&gt;<a class="code" href="classMs_1_1ChordRest.html#a47a641f4c229f43d67ed5154fdebc05c">type</a>() == <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea45d886b842022787183a308e0200d336">ElementType::CHORD</a>)</div><div class="line"><a name="l05075"></a><span class="lineno"> 5075</span>&#160;                              e =  static_cast&lt;Chord*&gt;(cr)-&gt;upNote();</div><div class="line"><a name="l05076"></a><span class="lineno"> 5076</span>&#160;                        <span class="keywordflow">else</span> <span class="comment">//REST</span></div><div class="line"><a name="l05077"></a><span class="lineno"> 5077</span>&#160;                              e = cr;</div><div class="line"><a name="l05078"></a><span class="lineno"> 5078</span>&#160;</div><div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160;                        _score-&gt;select(e, <a class="code" href="namespaceMs.html#a1066451ad9dc9959bedb76978f4f30c8a0679273e201afd0bf57af3961f8a23b8">SelectType::SINGLE</a>, 0);</div><div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160;                        }</div><div class="line"><a name="l05082"></a><span class="lineno"> 5082</span>&#160;                  }</div><div class="line"><a name="l05083"></a><span class="lineno"> 5083</span>&#160;            <span class="keywordflow">if</span> (track != tracks)</div><div class="line"><a name="l05084"></a><span class="lineno"> 5084</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l05085"></a><span class="lineno"> 5085</span>&#160;            }</div><div class="line"><a name="l05086"></a><span class="lineno"> 5086</span>&#160;      _score-&gt;setUpdateAll();</div><div class="line"><a name="l05087"></a><span class="lineno"> 5087</span>&#160;      _score-&gt;update();</div><div class="line"><a name="l05088"></a><span class="lineno"> 5088</span>&#160;      }</div><div class="line"><a name="l05089"></a><span class="lineno"> 5089</span>&#160;</div><div class="line"><a name="l05090"></a><span class="lineno"> 5090</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05091"></a><span class="lineno"> 5091</span>&#160;<span class="comment">//   layoutChanged</span></div><div class="line"><a name="l05092"></a><span class="lineno"> 5092</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05093"></a><span class="lineno"> 5093</span>&#160;</div><div class="line"><a name="l05094"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#aa67e400c9c8e3d1f8eab3cf97fb7e691"> 5094</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#aa67e400c9c8e3d1f8eab3cf97fb7e691">ScoreView::layoutChanged</a>()</div><div class="line"><a name="l05095"></a><span class="lineno"> 5095</span>&#160;      {</div><div class="line"><a name="l05096"></a><span class="lineno"> 5096</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;navigator())</div><div class="line"><a name="l05097"></a><span class="lineno"> 5097</span>&#160;            <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;navigator()-&gt;layoutChanged();</div><div class="line"><a name="l05098"></a><span class="lineno"> 5098</span>&#160;      _curLoopIn-&gt;move(_score-&gt;pos(<a class="code" href="namespaceMs.html#aa15d8b46ea58d6bb59b084d6d7bcff7da684d325a7303f52e64011467ff5c5758">POS::LEFT</a>));</div><div class="line"><a name="l05099"></a><span class="lineno"> 5099</span>&#160;      <a class="code" href="classMs_1_1Measure.html">Measure</a>* lm = _score-&gt;lastMeasure();</div><div class="line"><a name="l05100"></a><span class="lineno"> 5100</span>&#160;      <span class="keywordflow">if</span> (lm &amp;&amp; _score-&gt;<a class="code" href="classMs_1_1Element.html#a19157e811d0d2a0e3c94dc844039ba2f">pos</a>(<a class="code" href="namespaceMs.html#aa15d8b46ea58d6bb59b084d6d7bcff7da21507b40c80068eda19865706fdc2403">POS::RIGHT</a>) &gt; lm-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a6e80c952d019b265c81945b98c91fed2">endTick</a>())</div><div class="line"><a name="l05101"></a><span class="lineno"> 5101</span>&#160;            _score-&gt;<a class="code" href="classMs_1_1Element.html#a2a2ce2358cc23529d8f038a940062e62">setPos</a>(<a class="code" href="namespaceMs.html#aa15d8b46ea58d6bb59b084d6d7bcff7da21507b40c80068eda19865706fdc2403">POS::RIGHT</a>, lm-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a6e80c952d019b265c81945b98c91fed2">endTick</a>());</div><div class="line"><a name="l05102"></a><span class="lineno"> 5102</span>&#160;      _curLoopOut-&gt;move(_score-&gt;pos(<a class="code" href="namespaceMs.html#aa15d8b46ea58d6bb59b084d6d7bcff7da21507b40c80068eda19865706fdc2403">POS::RIGHT</a>));</div><div class="line"><a name="l05103"></a><span class="lineno"> 5103</span>&#160;      }</div><div class="line"><a name="l05104"></a><span class="lineno"> 5104</span>&#160;</div><div class="line"><a name="l05105"></a><span class="lineno"> 5105</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05106"></a><span class="lineno"> 5106</span>&#160;<span class="comment">//   elementLower</span></div><div class="line"><a name="l05107"></a><span class="lineno"> 5107</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05108"></a><span class="lineno"> 5108</span>&#160;</div><div class="line"><a name="l05109"></a><span class="lineno"><a class="line" href="namespaceMs.html#af04301d501c0fce5cd0c5bcdc4261286"> 5109</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceMs.html#af04301d501c0fce5cd0c5bcdc4261286">elementLower</a>(<span class="keyword">const</span> <a class="code" href="classMs_1_1Element.html">Element</a>* e1, <span class="keyword">const</span> <a class="code" href="classMs_1_1Element.html">Element</a>* e2)</div><div class="line"><a name="l05110"></a><span class="lineno"> 5110</span>&#160;      {</div><div class="line"><a name="l05111"></a><span class="lineno"> 5111</span>&#160;      <span class="keywordflow">if</span> (!e1-&gt;<a class="code" href="classMs_1_1Element.html#a7b4ff51eff905fed21705445958253c1">selectable</a>())</div><div class="line"><a name="l05112"></a><span class="lineno"> 5112</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l05113"></a><span class="lineno"> 5113</span>&#160;      <span class="keywordflow">if</span> (!e2-&gt;<a class="code" href="classMs_1_1Element.html#a7b4ff51eff905fed21705445958253c1">selectable</a>())</div><div class="line"><a name="l05114"></a><span class="lineno"> 5114</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l05115"></a><span class="lineno"> 5115</span>&#160;      <span class="keywordflow">if</span> (e1-&gt;isNote() &amp;&amp; e2-&gt;isStem())</div><div class="line"><a name="l05116"></a><span class="lineno"> 5116</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l05117"></a><span class="lineno"> 5117</span>&#160;      <span class="keywordflow">if</span> (e2-&gt;isNote() &amp;&amp; e1-&gt;isStem())</div><div class="line"><a name="l05118"></a><span class="lineno"> 5118</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l05119"></a><span class="lineno"> 5119</span>&#160;      <span class="keywordflow">if</span> (e1-&gt;<a class="code" href="classMs_1_1Element.html#a0e947d90ca39376fd98b995d34811126">z</a>() == e2-&gt;<a class="code" href="classMs_1_1Element.html#a0e947d90ca39376fd98b995d34811126">z</a>()) {</div><div class="line"><a name="l05120"></a><span class="lineno"> 5120</span>&#160;            <span class="comment">// same stacking order, prefer non-hidden elements</span></div><div class="line"><a name="l05121"></a><span class="lineno"> 5121</span>&#160;            <span class="keywordflow">if</span> (e1-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == e2-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>()) {</div><div class="line"><a name="l05122"></a><span class="lineno"> 5122</span>&#160;                  <span class="keywordflow">if</span> (e1-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9eaaa8453bcc6cf9cdd8d59eed1ae92759d">ElementType::NOTEDOT</a>) {</div><div class="line"><a name="l05123"></a><span class="lineno"> 5123</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classMs_1_1NoteDot.html">NoteDot</a>* n1 = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classMs_1_1NoteDot.html">NoteDot</a>*<span class="keyword">&gt;</span>(e1);</div><div class="line"><a name="l05124"></a><span class="lineno"> 5124</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classMs_1_1NoteDot.html">NoteDot</a>* n2 = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classMs_1_1NoteDot.html">NoteDot</a>*<span class="keyword">&gt;</span>(e2);</div><div class="line"><a name="l05125"></a><span class="lineno"> 5125</span>&#160;                        <span class="keywordflow">if</span> (n1-&gt;<a class="code" href="classMs_1_1NoteDot.html#a0ba418fdb5d637f3aa147be87e90de94">note</a>() &amp;&amp; n1-&gt;<a class="code" href="classMs_1_1NoteDot.html#a0ba418fdb5d637f3aa147be87e90de94">note</a>()-&gt;<a class="code" href="classMs_1_1Note.html#a185ab0f428111692b22a601be4026991">hidden</a>())</div><div class="line"><a name="l05126"></a><span class="lineno"> 5126</span>&#160;                              <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l05127"></a><span class="lineno"> 5127</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n2-&gt;<a class="code" href="classMs_1_1NoteDot.html#a0ba418fdb5d637f3aa147be87e90de94">note</a>() &amp;&amp; n2-&gt;<a class="code" href="classMs_1_1NoteDot.html#a0ba418fdb5d637f3aa147be87e90de94">note</a>()-&gt;<a class="code" href="classMs_1_1Note.html#a185ab0f428111692b22a601be4026991">hidden</a>())</div><div class="line"><a name="l05128"></a><span class="lineno"> 5128</span>&#160;                              <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l05129"></a><span class="lineno"> 5129</span>&#160;                        }</div><div class="line"><a name="l05130"></a><span class="lineno"> 5130</span>&#160;                  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (e1-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#aeccc894c5a64aba67bbfaf8fe1b755d5a10de4bc81f754b19b0d27246a0589c05">ElementType::NOTE</a>) {</div><div class="line"><a name="l05131"></a><span class="lineno"> 5131</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classMs_1_1Note.html">Note</a>* n1 = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classMs_1_1Note.html">Note</a>*<span class="keyword">&gt;</span>(e1);</div><div class="line"><a name="l05132"></a><span class="lineno"> 5132</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classMs_1_1Note.html">Note</a>* n2 = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classMs_1_1Note.html">Note</a>*<span class="keyword">&gt;</span>(e2);</div><div class="line"><a name="l05133"></a><span class="lineno"> 5133</span>&#160;                        <span class="keywordflow">if</span> (n1-&gt;<a class="code" href="classMs_1_1Note.html#a185ab0f428111692b22a601be4026991">hidden</a>())</div><div class="line"><a name="l05134"></a><span class="lineno"> 5134</span>&#160;                              <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l05135"></a><span class="lineno"> 5135</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n2-&gt;<a class="code" href="classMs_1_1Note.html#a185ab0f428111692b22a601be4026991">hidden</a>())</div><div class="line"><a name="l05136"></a><span class="lineno"> 5136</span>&#160;                              <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l05137"></a><span class="lineno"> 5137</span>&#160;                        }</div><div class="line"><a name="l05138"></a><span class="lineno"> 5138</span>&#160;                  }</div><div class="line"><a name="l05139"></a><span class="lineno"> 5139</span>&#160;            <span class="comment">// different types, or same type but nothing hidden - use track</span></div><div class="line"><a name="l05140"></a><span class="lineno"> 5140</span>&#160;            <span class="keywordflow">return</span> e1-&gt;<a class="code" href="classMs_1_1Element.html#ab4986d1b4f0d45b8e84cf52c46885c36">track</a>() &lt;= e2-&gt;<a class="code" href="classMs_1_1Element.html#ab4986d1b4f0d45b8e84cf52c46885c36">track</a>();</div><div class="line"><a name="l05141"></a><span class="lineno"> 5141</span>&#160;            }</div><div class="line"><a name="l05142"></a><span class="lineno"> 5142</span>&#160;</div><div class="line"><a name="l05143"></a><span class="lineno"> 5143</span>&#160;      <span class="comment">// default case, use stacking order</span></div><div class="line"><a name="l05144"></a><span class="lineno"> 5144</span>&#160;      <span class="keywordflow">return</span> e1-&gt;<a class="code" href="classMs_1_1Element.html#a0e947d90ca39376fd98b995d34811126">z</a>() &lt;= e2-&gt;<a class="code" href="classMs_1_1Element.html#a0e947d90ca39376fd98b995d34811126">z</a>();</div><div class="line"><a name="l05145"></a><span class="lineno"> 5145</span>&#160;      }</div><div class="line"><a name="l05146"></a><span class="lineno"> 5146</span>&#160;</div><div class="line"><a name="l05147"></a><span class="lineno"> 5147</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05148"></a><span class="lineno"> 5148</span>&#160;<span class="comment">//   elementsNear</span></div><div class="line"><a name="l05149"></a><span class="lineno"> 5149</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05150"></a><span class="lineno"> 5150</span>&#160;</div><div class="line"><a name="l05151"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#ac168037965f984d48c85b6739f37fb39"> 5151</a></span>&#160;QList&lt;Element*&gt; <a class="code" href="classMs_1_1ScoreView.html#ac168037965f984d48c85b6739f37fb39">ScoreView::elementsNear</a>(QPointF p)</div><div class="line"><a name="l05152"></a><span class="lineno"> 5152</span>&#160;      {</div><div class="line"><a name="l05153"></a><span class="lineno"> 5153</span>&#160;      QList&lt;Element*&gt; ll;</div><div class="line"><a name="l05154"></a><span class="lineno"> 5154</span>&#160;      <a class="code" href="classMs_1_1Page.html">Page</a>* page = point2page(p);</div><div class="line"><a name="l05155"></a><span class="lineno"> 5155</span>&#160;      <span class="keywordflow">if</span> (!page)</div><div class="line"><a name="l05156"></a><span class="lineno"> 5156</span>&#160;            <span class="keywordflow">return</span> ll;</div><div class="line"><a name="l05157"></a><span class="lineno"> 5157</span>&#160;</div><div class="line"><a name="l05158"></a><span class="lineno"> 5158</span>&#160;      p       -= page-&gt;<a class="code" href="classMs_1_1Element.html#a19157e811d0d2a0e3c94dc844039ba2f">pos</a>();</div><div class="line"><a name="l05159"></a><span class="lineno"> 5159</span>&#160;      <span class="keywordtype">double</span> w = (<a class="code" href="namespaceMs.html#abe8f8da5976e3a727f1a3a7a117e73de">preferences</a>.<a class="code" href="structMs_1_1Preferences.html#a435c522d4eae2e8436b22f42919efd7b">getInt</a>(PREF_UI_CANVAS_MISC_SELECTIONPROXIMITY) * .5) / matrix().m11();</div><div class="line"><a name="l05160"></a><span class="lineno"> 5160</span>&#160;      QRectF r(p.x() - w, p.y() - w, 3.0 * w, 3.0 * w);</div><div class="line"><a name="l05161"></a><span class="lineno"> 5161</span>&#160;</div><div class="line"><a name="l05162"></a><span class="lineno"> 5162</span>&#160;      QList&lt;Element*&gt; el = page-&gt;<a class="code" href="classMs_1_1Page.html#a531a2daae4ad65988a04ae199ebdf179">items</a>(r);</div><div class="line"><a name="l05163"></a><span class="lineno"> 5163</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="namespaceMs.html#a57d18b2b1d48c4af1fd15d73c2abe9be">MAX_HEADERS</a>; i++)</div><div class="line"><a name="l05164"></a><span class="lineno"> 5164</span>&#160;            <span class="keywordflow">if</span> (score()-&gt;headerText(i) != <span class="keyword">nullptr</span>)      <span class="comment">// gives the ability to select the header</span></div><div class="line"><a name="l05165"></a><span class="lineno"> 5165</span>&#160;                  el.push_back(score()-&gt;headerText(i));</div><div class="line"><a name="l05166"></a><span class="lineno"> 5166</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="namespaceMs.html#a5834db24580b29ecc04ba1e0cbd3c6fc">MAX_FOOTERS</a>; i++)</div><div class="line"><a name="l05167"></a><span class="lineno"> 5167</span>&#160;            <span class="keywordflow">if</span> (score()-&gt;footerText(i) != <span class="keyword">nullptr</span>)      <span class="comment">// gives the ability to select the footer</span></div><div class="line"><a name="l05168"></a><span class="lineno"> 5168</span>&#160;                  el.push_back(score()-&gt;footerText(i));</div><div class="line"><a name="l05169"></a><span class="lineno"> 5169</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1Element.html">Element</a>* e : el) {</div><div class="line"><a name="l05170"></a><span class="lineno"> 5170</span>&#160;            e-&gt;itemDiscovered = 0;</div><div class="line"><a name="l05171"></a><span class="lineno"> 5171</span>&#160;            <span class="keywordflow">if</span> (!e-&gt;selectable() || e-&gt;isPage())</div><div class="line"><a name="l05172"></a><span class="lineno"> 5172</span>&#160;                  <span class="keywordflow">continue</span>;</div><div class="line"><a name="l05173"></a><span class="lineno"> 5173</span>&#160;            <span class="keywordflow">if</span> (e-&gt;contains(p))</div><div class="line"><a name="l05174"></a><span class="lineno"> 5174</span>&#160;                  ll.append(e);</div><div class="line"><a name="l05175"></a><span class="lineno"> 5175</span>&#160;            }</div><div class="line"><a name="l05176"></a><span class="lineno"> 5176</span>&#160;      <span class="keywordtype">int</span> n = ll.size();</div><div class="line"><a name="l05177"></a><span class="lineno"> 5177</span>&#160;      <span class="keywordflow">if</span> ((n == 0) || ((n == 1) &amp;&amp; (ll[0]-&gt;isMeasure()))) {</div><div class="line"><a name="l05178"></a><span class="lineno"> 5178</span>&#160;            <span class="comment">//</span></div><div class="line"><a name="l05179"></a><span class="lineno"> 5179</span>&#160;            <span class="comment">// if no relevant element hit, look nearby</span></div><div class="line"><a name="l05180"></a><span class="lineno"> 5180</span>&#160;            <span class="comment">//</span></div><div class="line"><a name="l05181"></a><span class="lineno"> 5181</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1Element.html">Element</a>* e : el) {</div><div class="line"><a name="l05182"></a><span class="lineno"> 5182</span>&#160;                  <span class="keywordflow">if</span> (e-&gt;isPage() || !e-&gt;selectable())</div><div class="line"><a name="l05183"></a><span class="lineno"> 5183</span>&#160;                        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l05184"></a><span class="lineno"> 5184</span>&#160;                  <span class="keywordflow">if</span> (e-&gt;intersects(r))</div><div class="line"><a name="l05185"></a><span class="lineno"> 5185</span>&#160;                        ll.append(e);</div><div class="line"><a name="l05186"></a><span class="lineno"> 5186</span>&#160;                  }</div><div class="line"><a name="l05187"></a><span class="lineno"> 5187</span>&#160;            }</div><div class="line"><a name="l05188"></a><span class="lineno"> 5188</span>&#160;      <span class="keywordflow">if</span> (!ll.empty())</div><div class="line"><a name="l05189"></a><span class="lineno"> 5189</span>&#160;            <a class="code" href="namespaceMs.html#a4723eaf0d51b78054133d58d1a6935cb">std::sort</a>(ll.begin(), ll.end(), <a class="code" href="namespaceMs.html#af04301d501c0fce5cd0c5bcdc4261286">elementLower</a>);</div><div class="line"><a name="l05190"></a><span class="lineno"> 5190</span>&#160;      <span class="keywordflow">return</span> ll;</div><div class="line"><a name="l05191"></a><span class="lineno"> 5191</span>&#160;      }</div><div class="line"><a name="l05192"></a><span class="lineno"> 5192</span>&#160;</div><div class="line"><a name="l05193"></a><span class="lineno"> 5193</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05194"></a><span class="lineno"> 5194</span>&#160;<span class="comment">//   elementNear</span></div><div class="line"><a name="l05195"></a><span class="lineno"> 5195</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05196"></a><span class="lineno"> 5196</span>&#160;</div><div class="line"><a name="l05197"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#adbef3c30b425e73d82e92b56273ab1c1"> 5197</a></span>&#160;<a class="code" href="classMs_1_1Element.html">Element</a>* <a class="code" href="classMs_1_1ScoreView.html#adbef3c30b425e73d82e92b56273ab1c1">ScoreView::elementNear</a>(QPointF p)</div><div class="line"><a name="l05198"></a><span class="lineno"> 5198</span>&#160;      {</div><div class="line"><a name="l05199"></a><span class="lineno"> 5199</span>&#160;      QList&lt;Element*&gt; ll = elementsNear(p);</div><div class="line"><a name="l05200"></a><span class="lineno"> 5200</span>&#160;      <span class="keywordflow">if</span> (ll.empty()) {</div><div class="line"><a name="l05201"></a><span class="lineno"> 5201</span>&#160;            <span class="comment">// qDebug(&quot;  nothing found&quot;);</span></div><div class="line"><a name="l05202"></a><span class="lineno"> 5202</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05203"></a><span class="lineno"> 5203</span>&#160;            }</div><div class="line"><a name="l05204"></a><span class="lineno"> 5204</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l05205"></a><span class="lineno"> 5205</span>&#160;      qDebug(<span class="stringliteral">&quot;==&quot;</span>);</div><div class="line"><a name="l05206"></a><span class="lineno"> 5206</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classMs_1_1Element.html">Element</a>* e : ll)</div><div class="line"><a name="l05207"></a><span class="lineno"> 5207</span>&#160;            qDebug(<span class="stringliteral">&quot;  %s selected %d z %d&quot;</span>, e-&gt;name(), e-&gt;selected(), e-&gt;z());</div><div class="line"><a name="l05208"></a><span class="lineno"> 5208</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l05209"></a><span class="lineno"> 5209</span>&#160;      <a class="code" href="classMs_1_1Element.html">Element</a>* e = ll.at(0);</div><div class="line"><a name="l05210"></a><span class="lineno"> 5210</span>&#160;      <span class="keywordflow">return</span> e;</div><div class="line"><a name="l05211"></a><span class="lineno"> 5211</span>&#160;      }</div><div class="line"><a name="l05212"></a><span class="lineno"> 5212</span>&#160;</div><div class="line"><a name="l05213"></a><span class="lineno"> 5213</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05214"></a><span class="lineno"> 5214</span>&#160;<span class="comment">//   posChanged</span></div><div class="line"><a name="l05215"></a><span class="lineno"> 5215</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05216"></a><span class="lineno"> 5216</span>&#160;</div><div class="line"><a name="l05217"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a6cc379cc25680adcf704fa815386f9f2"> 5217</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a6cc379cc25680adcf704fa815386f9f2">ScoreView::posChanged</a>(<a class="code" href="namespaceMs.html#aa15d8b46ea58d6bb59b084d6d7bcff7d">POS</a> pos, <span class="keywordtype">unsigned</span> <a class="code" href="click_8h.html#a23377ea277c7aef62f6cf3c640f7155c">tick</a>)</div><div class="line"><a name="l05218"></a><span class="lineno"> 5218</span>&#160;      {</div><div class="line"><a name="l05219"></a><span class="lineno"> 5219</span>&#160;      <span class="keywordflow">switch</span> (pos) {</div><div class="line"><a name="l05220"></a><span class="lineno"> 5220</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#aa15d8b46ea58d6bb59b084d6d7bcff7daa2770969c827f0f2910f6179418462df">POS::CURRENT</a>:</div><div class="line"><a name="l05221"></a><span class="lineno"> 5221</span>&#160;                  <span class="comment">// draw playback cursor only in the currently active view</span></div><div class="line"><a name="l05222"></a><span class="lineno"> 5222</span>&#160;                  <span class="keywordflow">if</span> (<span class="keyword">this</span> != <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;currentScoreView() &amp;&amp; !_moveWhenInactive)</div><div class="line"><a name="l05223"></a><span class="lineno"> 5223</span>&#160;                        <span class="keywordflow">return</span>;</div><div class="line"><a name="l05224"></a><span class="lineno"> 5224</span>&#160;                  <span class="keywordflow">if</span> (noteEntryMode())</div><div class="line"><a name="l05225"></a><span class="lineno"> 5225</span>&#160;                        moveCursor();     <span class="comment">// update input cursor position</span></div><div class="line"><a name="l05226"></a><span class="lineno"> 5226</span>&#160;                  <span class="keywordflow">else</span></div><div class="line"><a name="l05227"></a><span class="lineno"> 5227</span>&#160;                        moveCursor(<a class="code" href="classMs_1_1Fraction.html#a63e242155373d30a2de43750ea718368">Fraction::fromTicks</a>(tick)); <span class="comment">// update play position</span></div><div class="line"><a name="l05228"></a><span class="lineno"> 5228</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l05229"></a><span class="lineno"> 5229</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#aa15d8b46ea58d6bb59b084d6d7bcff7da684d325a7303f52e64011467ff5c5758">POS::LEFT</a>:</div><div class="line"><a name="l05230"></a><span class="lineno"> 5230</span>&#160;                  _curLoopIn-&gt;move(_score-&gt;pos(<a class="code" href="namespaceMs.html#aa15d8b46ea58d6bb59b084d6d7bcff7da684d325a7303f52e64011467ff5c5758">POS::LEFT</a>));</div><div class="line"><a name="l05231"></a><span class="lineno"> 5231</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l05232"></a><span class="lineno"> 5232</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#aa15d8b46ea58d6bb59b084d6d7bcff7da21507b40c80068eda19865706fdc2403">POS::RIGHT</a>:</div><div class="line"><a name="l05233"></a><span class="lineno"> 5233</span>&#160;                  _curLoopOut-&gt;move(_score-&gt;pos(<a class="code" href="namespaceMs.html#aa15d8b46ea58d6bb59b084d6d7bcff7da21507b40c80068eda19865706fdc2403">POS::RIGHT</a>));</div><div class="line"><a name="l05234"></a><span class="lineno"> 5234</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l05235"></a><span class="lineno"> 5235</span>&#160;            }</div><div class="line"><a name="l05236"></a><span class="lineno"> 5236</span>&#160;      }</div><div class="line"><a name="l05237"></a><span class="lineno"> 5237</span>&#160;</div><div class="line"><a name="l05238"></a><span class="lineno"> 5238</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05239"></a><span class="lineno"> 5239</span>&#160;<span class="comment">//   loopToggled</span></div><div class="line"><a name="l05240"></a><span class="lineno"> 5240</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05241"></a><span class="lineno"> 5241</span>&#160;</div><div class="line"><a name="l05242"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a3042c1aa07e0321df617e7aaff37f67a"> 5242</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a3042c1aa07e0321df617e7aaff37f67a">ScoreView::loopToggled</a>(<span class="keywordtype">bool</span> val)</div><div class="line"><a name="l05243"></a><span class="lineno"> 5243</span>&#160;      {</div><div class="line"><a name="l05244"></a><span class="lineno"> 5244</span>&#160;      <span class="keywordflow">if</span> (_score-&gt;lastMeasure() == 0)</div><div class="line"><a name="l05245"></a><span class="lineno"> 5245</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l05246"></a><span class="lineno"> 5246</span>&#160;      <span class="keywordflow">if</span> (_score-&gt;pos(<a class="code" href="namespaceMs.html#aa15d8b46ea58d6bb59b084d6d7bcff7da684d325a7303f52e64011467ff5c5758">POS::LEFT</a>).isZero() &amp;&amp; _score-&gt;pos(<a class="code" href="namespaceMs.html#aa15d8b46ea58d6bb59b084d6d7bcff7da21507b40c80068eda19865706fdc2403">POS::RIGHT</a>).isZero())</div><div class="line"><a name="l05247"></a><span class="lineno"> 5247</span>&#160;            _score-&gt;setPos(<a class="code" href="namespaceMs.html#aa15d8b46ea58d6bb59b084d6d7bcff7da21507b40c80068eda19865706fdc2403">POS::RIGHT</a>, _score-&gt;lastMeasure()-&gt;endTick());</div><div class="line"><a name="l05248"></a><span class="lineno"> 5248</span>&#160;      _curLoopIn-&gt;move(_score-&gt;loopInTick());</div><div class="line"><a name="l05249"></a><span class="lineno"> 5249</span>&#160;      _curLoopOut-&gt;move(_score-&gt;loopOutTick());</div><div class="line"><a name="l05250"></a><span class="lineno"> 5250</span>&#160;      _curLoopIn-&gt;setVisible(val);</div><div class="line"><a name="l05251"></a><span class="lineno"> 5251</span>&#160;      _curLoopOut-&gt;setVisible(val);</div><div class="line"><a name="l05252"></a><span class="lineno"> 5252</span>&#160;      update();</div><div class="line"><a name="l05253"></a><span class="lineno"> 5253</span>&#160;      }</div><div class="line"><a name="l05254"></a><span class="lineno"> 5254</span>&#160;</div><div class="line"><a name="l05255"></a><span class="lineno"> 5255</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05256"></a><span class="lineno"> 5256</span>&#160;<span class="comment">//   cmdMoveCR</span></div><div class="line"><a name="l05257"></a><span class="lineno"> 5257</span>&#160;<span class="comment">//    swap selected cr with cr to the left or right</span></div><div class="line"><a name="l05258"></a><span class="lineno"> 5258</span>&#160;<span class="comment">//      - not across measure boundaries</span></div><div class="line"><a name="l05259"></a><span class="lineno"> 5259</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05260"></a><span class="lineno"> 5260</span>&#160;</div><div class="line"><a name="l05261"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a1ba0a11fa38c1b9aae97c33e314b1eb2"> 5261</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a1ba0a11fa38c1b9aae97c33e314b1eb2">ScoreView::cmdMoveCR</a>(<span class="keywordtype">bool</span> left)</div><div class="line"><a name="l05262"></a><span class="lineno"> 5262</span>&#160;      {</div><div class="line"><a name="l05263"></a><span class="lineno"> 5263</span>&#160;      <a class="code" href="classMs_1_1Element.html">Element</a>* e = _score-&gt;getSelectedElement();</div><div class="line"><a name="l05264"></a><span class="lineno"> 5264</span>&#160;      <span class="keywordflow">if</span> (e &amp;&amp; (e-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#aeccc894c5a64aba67bbfaf8fe1b755d5a10de4bc81f754b19b0d27246a0589c05">ElementType::NOTE</a> || e-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#a28863123e439c88c35086eb7dd963c9aa50780f47f6839d47d60bc4555ee00c3f">ElementType::REST</a>)) {</div><div class="line"><a name="l05265"></a><span class="lineno"> 5265</span>&#160;            <span class="keywordflow">if</span> (e-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">type</a>() == <a class="code" href="namespaceMs.html#aeccc894c5a64aba67bbfaf8fe1b755d5a10de4bc81f754b19b0d27246a0589c05">ElementType::NOTE</a>)</div><div class="line"><a name="l05266"></a><span class="lineno"> 5266</span>&#160;                  e = e-&gt;<a class="code" href="classMs_1_1Element.html#a52b30fdd589beba5b760a561a50ac601">parent</a>();</div><div class="line"><a name="l05267"></a><span class="lineno"> 5267</span>&#160;            QList&lt;ChordRest*&gt; crl;</div><div class="line"><a name="l05268"></a><span class="lineno"> 5268</span>&#160;            <span class="keywordflow">if</span> (e-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3d5c97191484848b3f10e754246f8758">links</a>()) {</div><div class="line"><a name="l05269"></a><span class="lineno"> 5269</span>&#160;                  <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1ScoreElement.html">ScoreElement</a>* cr : *e-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a3d5c97191484848b3f10e754246f8758">links</a>())</div><div class="line"><a name="l05270"></a><span class="lineno"> 5270</span>&#160;                        crl.append(static_cast&lt;ChordRest*&gt;(cr));</div><div class="line"><a name="l05271"></a><span class="lineno"> 5271</span>&#160;                  }</div><div class="line"><a name="l05272"></a><span class="lineno"> 5272</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l05273"></a><span class="lineno"> 5273</span>&#160;                  crl.append(static_cast&lt;ChordRest*&gt;(e));</div><div class="line"><a name="l05274"></a><span class="lineno"> 5274</span>&#160;</div><div class="line"><a name="l05275"></a><span class="lineno"> 5275</span>&#160;            <span class="keywordtype">bool</span> cmdActive = <span class="keyword">false</span>;</div><div class="line"><a name="l05276"></a><span class="lineno"> 5276</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr1 : crl) {</div><div class="line"><a name="l05277"></a><span class="lineno"> 5277</span>&#160;                  <span class="keywordflow">if</span> (cr1-&gt;type() == <a class="code" href="namespaceMs.html#a28863123e439c88c35086eb7dd963c9aa50780f47f6839d47d60bc4555ee00c3f">ElementType::REST</a>) {</div><div class="line"><a name="l05278"></a><span class="lineno"> 5278</span>&#160;                        <a class="code" href="classMs_1_1Rest.html">Rest</a>* r = <span class="keyword">static_cast&lt;</span><a class="code" href="classMs_1_1Rest.html">Rest</a>*<span class="keyword">&gt;</span>(cr1);</div><div class="line"><a name="l05279"></a><span class="lineno"> 5279</span>&#160;                        <span class="keywordflow">if</span> (r-&gt;<a class="code" href="classMs_1_1Rest.html#ac61e5972c98bd0b7f68c84e9b09ea825">measure</a>() &amp;&amp; r-&gt;<a class="code" href="classMs_1_1Rest.html#ac61e5972c98bd0b7f68c84e9b09ea825">measure</a>()-&gt;<a class="code" href="classMs_1_1Measure.html#ae92cfe704a9477074d0fbe1a3bb6ff61">isMMRest</a>())</div><div class="line"><a name="l05280"></a><span class="lineno"> 5280</span>&#160;                              <span class="keywordflow">break</span>;</div><div class="line"><a name="l05281"></a><span class="lineno"> 5281</span>&#160;                        }</div><div class="line"><a name="l05282"></a><span class="lineno"> 5282</span>&#160;                  <a class="code" href="classMs_1_1ChordRest.html">ChordRest</a>* cr2 = left ? <a class="code" href="namespaceMs.html#a05776eecab3e8f84c45f571328f47a14">prevChordRest</a>(cr1) : <a class="code" href="namespaceMs.html#a60c3d8a61c63ab648c253442e51e804b">nextChordRest</a>(cr1);</div><div class="line"><a name="l05283"></a><span class="lineno"> 5283</span>&#160;                  <span class="comment">// ensures cr1 is the left chord, useful in SwapCR::flip()</span></div><div class="line"><a name="l05284"></a><span class="lineno"> 5284</span>&#160;                  <span class="keywordflow">if</span> (left)</div><div class="line"><a name="l05285"></a><span class="lineno"> 5285</span>&#160;                        <a class="code" href="namespaceMs.html#a0c4aeeb6df2cc7465f9c33aacdbbbe4f">std::swap</a>(cr1, cr2);</div><div class="line"><a name="l05286"></a><span class="lineno"> 5286</span>&#160;                  <span class="keywordflow">if</span> (cr1 &amp;&amp; cr2 &amp;&amp; cr1-&gt;<a class="code" href="classMs_1_1ChordRest.html#aaa704d32c5e4253d54d722276f507e2d">measure</a>() == cr2-&gt;<a class="code" href="classMs_1_1ChordRest.html#aaa704d32c5e4253d54d722276f507e2d">measure</a>() &amp;&amp; !cr1-&gt;tuplet() &amp;&amp; !cr2-&gt;<a class="code" href="classMs_1_1DurationElement.html#a5eae2d4a8a4a01245e2a18d97ee7988a">tuplet</a>()</div><div class="line"><a name="l05287"></a><span class="lineno"> 5287</span>&#160;                     &amp;&amp; cr1-&gt;durationType() == cr2-&gt;<a class="code" href="classMs_1_1ChordRest.html#a4c0205b5940976cc9f7cb9eb543fbc08">durationType</a>() &amp;&amp; cr1-&gt;<a class="code" href="classMs_1_1TDuration.html#aa00a9e53b1d7ac9bf5db6f1d626f3cb5">ticks</a>() == cr2-&gt;<a class="code" href="classMs_1_1DurationElement.html#abd480ba4d052d040db56e1e504cf2596">ticks</a>()</div><div class="line"><a name="l05288"></a><span class="lineno"> 5288</span>&#160;                     <span class="comment">// if two chords belong to different two-note tremolos, abort</span></div><div class="line"><a name="l05289"></a><span class="lineno"> 5289</span>&#160;                     &amp;&amp; !(cr1-&gt;isChord() &amp;&amp; toChord(cr1)-&gt;tremolo() &amp;&amp; toChord(cr1)-&gt;tremolo()-&gt;twoNotes()</div><div class="line"><a name="l05290"></a><span class="lineno"> 5290</span>&#160;                        &amp;&amp; cr2-&gt;isChord() &amp;&amp; toChord(cr2)-&gt;tremolo() &amp;&amp; toChord(cr2)-&gt;tremolo()-&gt;twoNotes()</div><div class="line"><a name="l05291"></a><span class="lineno"> 5291</span>&#160;                        &amp;&amp; toChord(cr1)-&gt;tremolo() != toChord(cr2)-&gt;tremolo())) {</div><div class="line"><a name="l05292"></a><span class="lineno"> 5292</span>&#160;                        <span class="keywordflow">if</span> (!cmdActive) {</div><div class="line"><a name="l05293"></a><span class="lineno"> 5293</span>&#160;                              _score-&gt;startCmd();</div><div class="line"><a name="l05294"></a><span class="lineno"> 5294</span>&#160;                              cmdActive = <span class="keyword">true</span>;</div><div class="line"><a name="l05295"></a><span class="lineno"> 5295</span>&#160;                              }</div><div class="line"><a name="l05296"></a><span class="lineno"> 5296</span>&#160;                        _score-&gt;undo(<span class="keyword">new</span> <a class="code" href="classMs_1_1SwapCR.html">SwapCR</a>(cr1, cr2));</div><div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160;                        }</div><div class="line"><a name="l05298"></a><span class="lineno"> 5298</span>&#160;                  }</div><div class="line"><a name="l05299"></a><span class="lineno"> 5299</span>&#160;            <span class="keywordflow">if</span> (cmdActive)</div><div class="line"><a name="l05300"></a><span class="lineno"> 5300</span>&#160;                  _score-&gt;endCmd();</div><div class="line"><a name="l05301"></a><span class="lineno"> 5301</span>&#160;            }</div><div class="line"><a name="l05302"></a><span class="lineno"> 5302</span>&#160;      }</div><div class="line"><a name="l05303"></a><span class="lineno"> 5303</span>&#160;</div><div class="line"><a name="l05304"></a><span class="lineno"> 5304</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05305"></a><span class="lineno"> 5305</span>&#160;<span class="comment">//   cmdAddRemoveBreaks</span><span class="comment"></span></div><div class="line"><a name="l05306"></a><span class="lineno"> 5306</span>&#160;<span class="comment">///   add or remove line breaks within a range selection</span></div><div class="line"><a name="l05307"></a><span class="lineno"> 5307</span>&#160;<span class="comment">///   or, if nothing is selected, the entire score</span></div><div class="line"><a name="l05308"></a><span class="lineno"> 5308</span>&#160;<span class="comment"></span><span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05309"></a><span class="lineno"> 5309</span>&#160;</div><div class="line"><a name="l05310"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a1dc0206a240c5b5e4b014fead61e8d6c"> 5310</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a1dc0206a240c5b5e4b014fead61e8d6c">ScoreView::cmdAddRemoveBreaks</a>()</div><div class="line"><a name="l05311"></a><span class="lineno"> 5311</span>&#160;      {</div><div class="line"><a name="l05312"></a><span class="lineno"> 5312</span>&#160;      <span class="keywordtype">bool</span> noSelection = !_score-&gt;selection().isRange();</div><div class="line"><a name="l05313"></a><span class="lineno"> 5313</span>&#160;</div><div class="line"><a name="l05314"></a><span class="lineno"> 5314</span>&#160;      <span class="keywordflow">if</span> (noSelection)</div><div class="line"><a name="l05315"></a><span class="lineno"> 5315</span>&#160;            _score-&gt;cmdSelectAll();</div><div class="line"><a name="l05316"></a><span class="lineno"> 5316</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!_score-&gt;selection().isRange())</div><div class="line"><a name="l05317"></a><span class="lineno"> 5317</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l05318"></a><span class="lineno"> 5318</span>&#160;</div><div class="line"><a name="l05319"></a><span class="lineno"> 5319</span>&#160;      <a class="code" href="classMs_1_1BreaksDialog.html">BreaksDialog</a> bd;</div><div class="line"><a name="l05320"></a><span class="lineno"> 5320</span>&#160;      <span class="keywordflow">if</span> (!bd.exec())</div><div class="line"><a name="l05321"></a><span class="lineno"> 5321</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l05322"></a><span class="lineno"> 5322</span>&#160;</div><div class="line"><a name="l05323"></a><span class="lineno"> 5323</span>&#160;      <span class="keywordtype">int</span> interval = bd.<a class="code" href="classMs_1_1BreaksDialog.html#aec0e0e19b127ebd30940b9b9b1910988">remove</a> || bd.<a class="code" href="classMs_1_1BreaksDialog.html#ae34b6cb1df731e1925a5452cfe9b8ab2">lock</a> ? 0 : bd.<a class="code" href="classMs_1_1BreaksDialog.html#a36bae7ca96ca9b9be3ed587de8361c46">interval</a>;</div><div class="line"><a name="l05324"></a><span class="lineno"> 5324</span>&#160;</div><div class="line"><a name="l05325"></a><span class="lineno"> 5325</span>&#160;      _score-&gt;addRemoveBreaks(interval, bd.<a class="code" href="classMs_1_1BreaksDialog.html#ae34b6cb1df731e1925a5452cfe9b8ab2">lock</a>);</div><div class="line"><a name="l05326"></a><span class="lineno"> 5326</span>&#160;</div><div class="line"><a name="l05327"></a><span class="lineno"> 5327</span>&#160;      <span class="keywordflow">if</span> (noSelection)</div><div class="line"><a name="l05328"></a><span class="lineno"> 5328</span>&#160;             _score-&gt;deselectAll();</div><div class="line"><a name="l05329"></a><span class="lineno"> 5329</span>&#160;      }</div><div class="line"><a name="l05330"></a><span class="lineno"> 5330</span>&#160;</div><div class="line"><a name="l05331"></a><span class="lineno"> 5331</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05332"></a><span class="lineno"> 5332</span>&#160;<span class="comment">//   cmdCopyLyricsToClipboard</span><span class="comment"></span></div><div class="line"><a name="l05333"></a><span class="lineno"> 5333</span>&#160;<span class="comment">///   Copy the score lyrics into clipboard</span></div><div class="line"><a name="l05334"></a><span class="lineno"> 5334</span>&#160;<span class="comment"></span><span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05335"></a><span class="lineno"> 5335</span>&#160;</div><div class="line"><a name="l05336"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a89d82d8e3e9eebf0ec8d360053df5633"> 5336</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a89d82d8e3e9eebf0ec8d360053df5633">ScoreView::cmdCopyLyricsToClipboard</a>()</div><div class="line"><a name="l05337"></a><span class="lineno"> 5337</span>&#160;      {</div><div class="line"><a name="l05338"></a><span class="lineno"> 5338</span>&#160;      QApplication::clipboard()-&gt;setText(_score-&gt;extractLyrics());</div><div class="line"><a name="l05339"></a><span class="lineno"> 5339</span>&#160;      }</div><div class="line"><a name="l05340"></a><span class="lineno"> 5340</span>&#160;</div><div class="line"><a name="l05341"></a><span class="lineno"> 5341</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05342"></a><span class="lineno"> 5342</span>&#160;<span class="comment">//   updateContinuousPanel</span></div><div class="line"><a name="l05343"></a><span class="lineno"> 5343</span>&#160;<span class="comment">//   slot triggered when moving around the score to keep the panel visible</span></div><div class="line"><a name="l05344"></a><span class="lineno"> 5344</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05345"></a><span class="lineno"> 5345</span>&#160;</div><div class="line"><a name="l05346"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#ac1809e667c46e84b527ad0570b12db98"> 5346</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#ac1809e667c46e84b527ad0570b12db98">ScoreView::updateContinuousPanel</a>()</div><div class="line"><a name="l05347"></a><span class="lineno"> 5347</span>&#160;      {</div><div class="line"><a name="l05348"></a><span class="lineno"> 5348</span>&#160;      <span class="keywordflow">if</span> (_score-&gt;layoutMode() == <a class="code" href="namespaceMs.html#a9b1fb02f916c554309371c6513550a1ba17b8ef2c330f1430e00c9de5469fc7e7">LayoutMode::LINE</a>)</div><div class="line"><a name="l05349"></a><span class="lineno"> 5349</span>&#160;            update();</div><div class="line"><a name="l05350"></a><span class="lineno"> 5350</span>&#160;      }</div><div class="line"><a name="l05351"></a><span class="lineno"> 5351</span>&#160;</div><div class="line"><a name="l05352"></a><span class="lineno"> 5352</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05353"></a><span class="lineno"> 5353</span>&#160;<span class="comment">//   updateShadowNotes</span></div><div class="line"><a name="l05354"></a><span class="lineno"> 5354</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05355"></a><span class="lineno"> 5355</span>&#160;</div><div class="line"><a name="l05356"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#ad05366185d03cc9ab5a1faf63a1532c1"> 5356</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#ad05366185d03cc9ab5a1faf63a1532c1">ScoreView::updateShadowNotes</a>()</div><div class="line"><a name="l05357"></a><span class="lineno"> 5357</span>&#160;      {</div><div class="line"><a name="l05358"></a><span class="lineno"> 5358</span>&#160;      <span class="keywordflow">if</span> (shadowNote-&gt;visible())</div><div class="line"><a name="l05359"></a><span class="lineno"> 5359</span>&#160;            setShadowNote(shadowNote-&gt;pos());</div><div class="line"><a name="l05360"></a><span class="lineno"> 5360</span>&#160;      }</div><div class="line"><a name="l05361"></a><span class="lineno"> 5361</span>&#160;</div><div class="line"><a name="l05362"></a><span class="lineno"> 5362</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05363"></a><span class="lineno"> 5363</span>&#160;<span class="comment">//   getEditElement</span></div><div class="line"><a name="l05364"></a><span class="lineno"> 5364</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05365"></a><span class="lineno"> 5365</span>&#160;</div><div class="line"><a name="l05366"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#aec10219a39113609eef0b83de814b13c"> 5366</a></span>&#160;<a class="code" href="classMs_1_1Element.html">Element</a>* <a class="code" href="classMs_1_1ScoreView.html#aec10219a39113609eef0b83de814b13c">ScoreView::getEditElement</a>()</div><div class="line"><a name="l05367"></a><span class="lineno"> 5367</span>&#160;      {</div><div class="line"><a name="l05368"></a><span class="lineno"> 5368</span>&#160;      <span class="keywordflow">return</span> editData.element;</div><div class="line"><a name="l05369"></a><span class="lineno"> 5369</span>&#160;      }</div><div class="line"><a name="l05370"></a><span class="lineno"> 5370</span>&#160;</div><div class="line"><a name="l05371"></a><span class="lineno"> 5371</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05372"></a><span class="lineno"> 5372</span>&#160;<span class="comment">//   onElementDestruction</span></div><div class="line"><a name="l05373"></a><span class="lineno"> 5373</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05374"></a><span class="lineno"> 5374</span>&#160;</div><div class="line"><a name="l05375"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a9ef1dd345c7653273d1c02fed4359d46"> 5375</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a9ef1dd345c7653273d1c02fed4359d46">ScoreView::onElementDestruction</a>(<a class="code" href="classMs_1_1Element.html">Element</a>* e)</div><div class="line"><a name="l05376"></a><span class="lineno"> 5376</span>&#160;      {</div><div class="line"><a name="l05377"></a><span class="lineno"> 5377</span>&#160;      <span class="keywordflow">if</span> (editData.element == e) {</div><div class="line"><a name="l05378"></a><span class="lineno"> 5378</span>&#160;            editData.element = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l05379"></a><span class="lineno"> 5379</span>&#160;            <span class="keywordflow">if</span> (editMode())</div><div class="line"><a name="l05380"></a><span class="lineno"> 5380</span>&#160;                  changeState(<a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a1e23852820b9154316c7c06e2b7ba051">ViewState::NORMAL</a>);</div><div class="line"><a name="l05381"></a><span class="lineno"> 5381</span>&#160;            }</div><div class="line"><a name="l05382"></a><span class="lineno"> 5382</span>&#160;      }</div><div class="line"><a name="l05383"></a><span class="lineno"> 5383</span>&#160;</div><div class="line"><a name="l05384"></a><span class="lineno"> 5384</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05385"></a><span class="lineno"> 5385</span>&#160;<span class="comment">//   startNoteEntryMode</span></div><div class="line"><a name="l05386"></a><span class="lineno"> 5386</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05387"></a><span class="lineno"> 5387</span>&#160;</div><div class="line"><a name="l05388"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#abedb85f31b0dc920af6086c71235c3da"> 5388</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#abedb85f31b0dc920af6086c71235c3da">ScoreView::startNoteEntryMode</a>()</div><div class="line"><a name="l05389"></a><span class="lineno"> 5389</span>&#160;      {</div><div class="line"><a name="l05390"></a><span class="lineno"> 5390</span>&#160;      changeState(<a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a6dff4f0bcb369949446e0f3400db6d5c">ViewState::NOTE_ENTRY</a>);</div><div class="line"><a name="l05391"></a><span class="lineno"> 5391</span>&#160;      }</div><div class="line"><a name="l05392"></a><span class="lineno"> 5392</span>&#160;</div><div class="line"><a name="l05393"></a><span class="lineno"> 5393</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05394"></a><span class="lineno"> 5394</span>&#160;<span class="comment">//   fotoMode</span></div><div class="line"><a name="l05395"></a><span class="lineno"> 5395</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05396"></a><span class="lineno"> 5396</span>&#160;</div><div class="line"><a name="l05397"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a920bfb0637f25f850df1c5483a0cff5b"> 5397</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classMs_1_1ScoreView.html#a920bfb0637f25f850df1c5483a0cff5b">ScoreView::fotoMode</a>()<span class="keyword"> const</span></div><div class="line"><a name="l05398"></a><span class="lineno"> 5398</span>&#160;<span class="keyword">      </span>{</div><div class="line"><a name="l05399"></a><span class="lineno"> 5399</span>&#160;      <span class="keywordflow">switch</span> (state) {</div><div class="line"><a name="l05400"></a><span class="lineno"> 5400</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a1e23852820b9154316c7c06e2b7ba051">ViewState::NORMAL</a>:</div><div class="line"><a name="l05401"></a><span class="lineno"> 5401</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a1aa5dd7502c1d6ba1ca37f5bfd14fda6aff3480bb59f4249a9453a0caaa1b2236">ViewState::DRAG</a>:</div><div class="line"><a name="l05402"></a><span class="lineno"> 5402</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a7783e8aebb6f509bcfe7b235b73cc39a">ViewState::DRAG_OBJECT</a>:</div><div class="line"><a name="l05403"></a><span class="lineno"> 5403</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a93762d802eed04b3e1c59d1d46b35248">ViewState::EDIT</a>:</div><div class="line"><a name="l05404"></a><span class="lineno"> 5404</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1ad4b1df12331eb50f79373b3e2bd284ce">ViewState::DRAG_EDIT</a>:</div><div class="line"><a name="l05405"></a><span class="lineno"> 5405</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea557e208074023b45441fc1604d6bf81d">ViewState::LASSO</a>:</div><div class="line"><a name="l05406"></a><span class="lineno"> 5406</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a6dff4f0bcb369949446e0f3400db6d5c">ViewState::NOTE_ENTRY</a>:</div><div class="line"><a name="l05407"></a><span class="lineno"> 5407</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#aa0f871cf8181cec31d68d20a39010655a6a216efc529825c60a4a4c0bc99ad77f">ViewState::PLAY</a>:</div><div class="line"><a name="l05408"></a><span class="lineno"> 5408</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a6c97b3d6c91135b3a99f073595d20e5d">ViewState::ENTRY_PLAY</a>:</div><div class="line"><a name="l05409"></a><span class="lineno"> 5409</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l05410"></a><span class="lineno"> 5410</span>&#160;</div><div class="line"><a name="l05411"></a><span class="lineno"> 5411</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a8844bb893d3b16fa3365a5cfcde4edca">ViewState::FOTO</a>:</div><div class="line"><a name="l05412"></a><span class="lineno"> 5412</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a6868244d4b7f8fc007f2cd5c7aa425df">ViewState::FOTO_DRAG</a>:</div><div class="line"><a name="l05413"></a><span class="lineno"> 5413</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1aa1916b5141306345cf93539af6fcee5a">ViewState::FOTO_DRAG_EDIT</a>:</div><div class="line"><a name="l05414"></a><span class="lineno"> 5414</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a03d31fd5672e63a74217a95dce360596">ViewState::FOTO_DRAG_OBJECT</a>:</div><div class="line"><a name="l05415"></a><span class="lineno"> 5415</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a64b23c0b6154207e74e72976b7367845">ViewState::FOTO_LASSO</a>:</div><div class="line"><a name="l05416"></a><span class="lineno"> 5416</span>&#160;                  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l05417"></a><span class="lineno"> 5417</span>&#160;            }</div><div class="line"><a name="l05418"></a><span class="lineno"> 5418</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l05419"></a><span class="lineno"> 5419</span>&#160;      }</div><div class="line"><a name="l05420"></a><span class="lineno"> 5420</span>&#160;</div><div class="line"><a name="l05421"></a><span class="lineno"> 5421</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05422"></a><span class="lineno"> 5422</span>&#160;<span class="comment">//   setEditElement</span></div><div class="line"><a name="l05423"></a><span class="lineno"> 5423</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05424"></a><span class="lineno"> 5424</span>&#160;</div><div class="line"><a name="l05425"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#ac464040f737e975ff4e88ba8b46c686e"> 5425</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#ac464040f737e975ff4e88ba8b46c686e">ScoreView::setEditElement</a>(<a class="code" href="classMs_1_1Element.html">Element</a>* e)</div><div class="line"><a name="l05426"></a><span class="lineno"> 5426</span>&#160;      {</div><div class="line"><a name="l05427"></a><span class="lineno"> 5427</span>&#160;      <span class="keywordflow">if</span> (editData.element == e)</div><div class="line"><a name="l05428"></a><span class="lineno"> 5428</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l05429"></a><span class="lineno"> 5429</span>&#160;</div><div class="line"><a name="l05430"></a><span class="lineno"> 5430</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">bool</span> normalState = (state == <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a1e23852820b9154316c7c06e2b7ba051">ViewState::NORMAL</a>);</div><div class="line"><a name="l05431"></a><span class="lineno"> 5431</span>&#160;</div><div class="line"><a name="l05432"></a><span class="lineno"> 5432</span>&#160;      <span class="keywordflow">if</span> (normalState &amp;&amp; editData.element &amp;&amp; editData.element-&gt;normalModeEditBehavior() == <a class="code" href="classMs_1_1Element.html#a81f2c9509ccf414e30594abf843cbde2a7dce122004969d56ae2e0245cb754d35">Element::EditBehavior::Edit</a>)</div><div class="line"><a name="l05433"></a><span class="lineno"> 5433</span>&#160;            endEdit();</div><div class="line"><a name="l05434"></a><span class="lineno"> 5434</span>&#160;</div><div class="line"><a name="l05435"></a><span class="lineno"> 5435</span>&#160;      editData.element = e;</div><div class="line"><a name="l05436"></a><span class="lineno"> 5436</span>&#160;</div><div class="line"><a name="l05437"></a><span class="lineno"> 5437</span>&#160;      <span class="keywordflow">if</span> (normalState &amp;&amp; e &amp;&amp; e-&gt;<a class="code" href="classMs_1_1Element.html#a8da4cf37b6c3f27351f096ec5847d1b6">normalModeEditBehavior</a>() == <a class="code" href="classMs_1_1Element.html#a81f2c9509ccf414e30594abf843cbde2a7dce122004969d56ae2e0245cb754d35">Element::EditBehavior::Edit</a>)</div><div class="line"><a name="l05438"></a><span class="lineno"> 5438</span>&#160;            startEdit(<span class="comment">/* editMode */</span> <span class="keyword">false</span>);</div><div class="line"><a name="l05439"></a><span class="lineno"> 5439</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (editData.grips) {</div><div class="line"><a name="l05440"></a><span class="lineno"> 5440</span>&#160;            editData.grips = 0;</div><div class="line"><a name="l05441"></a><span class="lineno"> 5441</span>&#160;            editData.curGrip = <a class="code" href="namespaceMs.html#a1aa5dd7502c1d6ba1ca37f5bfd14fda6aad21beaf0e0f72012c11c0fb529d1f0a">Grip::NO_GRIP</a>;</div><div class="line"><a name="l05442"></a><span class="lineno"> 5442</span>&#160;            }</div><div class="line"><a name="l05443"></a><span class="lineno"> 5443</span>&#160;      }</div><div class="line"><a name="l05444"></a><span class="lineno"> 5444</span>&#160;</div><div class="line"><a name="l05445"></a><span class="lineno"> 5445</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05446"></a><span class="lineno"> 5446</span>&#160;<span class="comment">//   updateEditElement</span></div><div class="line"><a name="l05447"></a><span class="lineno"> 5447</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05448"></a><span class="lineno"> 5448</span>&#160;</div><div class="line"><a name="l05449"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a9cdbe49057c1b8ed34b6adb3a824f256"> 5449</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a9cdbe49057c1b8ed34b6adb3a824f256">ScoreView::updateEditElement</a>()</div><div class="line"><a name="l05450"></a><span class="lineno"> 5450</span>&#160;      {</div><div class="line"><a name="l05451"></a><span class="lineno"> 5451</span>&#160;      <span class="keywordflow">if</span> (state != <a class="code" href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a1e23852820b9154316c7c06e2b7ba051">ViewState::NORMAL</a>)</div><div class="line"><a name="l05452"></a><span class="lineno"> 5452</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l05453"></a><span class="lineno"> 5453</span>&#160;</div><div class="line"><a name="l05454"></a><span class="lineno"> 5454</span>&#160;      <span class="keywordflow">if</span> (!_score) {</div><div class="line"><a name="l05455"></a><span class="lineno"> 5455</span>&#160;            setEditElement(<span class="keyword">nullptr</span>);</div><div class="line"><a name="l05456"></a><span class="lineno"> 5456</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l05457"></a><span class="lineno"> 5457</span>&#160;            }</div><div class="line"><a name="l05458"></a><span class="lineno"> 5458</span>&#160;</div><div class="line"><a name="l05459"></a><span class="lineno"> 5459</span>&#160;      <span class="keyword">const</span> <a class="code" href="classMs_1_1Selection.html">Selection</a>&amp; sel = _score-&gt;selection();</div><div class="line"><a name="l05460"></a><span class="lineno"> 5460</span>&#160;</div><div class="line"><a name="l05461"></a><span class="lineno"> 5461</span>&#160;      <span class="keywordflow">switch</span> (sel.<a class="code" href="classMs_1_1Selection.html#a0f0ff9623827b0e90b83689c48b8cc73">state</a>()) {</div><div class="line"><a name="l05462"></a><span class="lineno"> 5462</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a8ba055802fd4a7411880d6902e984be1ab50339a10e1de285ac99d4c3990b8693">SelState::NONE</a>:</div><div class="line"><a name="l05463"></a><span class="lineno"> 5463</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a1066451ad9dc9959bedb76978f4f30c8a01036ddcc971d02f6c32c3da31a119f2">SelState::RANGE</a>:</div><div class="line"><a name="l05464"></a><span class="lineno"> 5464</span>&#160;                  setEditElement(<span class="keyword">nullptr</span>);</div><div class="line"><a name="l05465"></a><span class="lineno"> 5465</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l05466"></a><span class="lineno"> 5466</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="namespaceMs.html#a8ba055802fd4a7411880d6902e984be1a298cb25408234de02baf2085803a464a">SelState::LIST</a>:</div><div class="line"><a name="l05467"></a><span class="lineno"> 5467</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="classMs_1_1Element.html">Element</a>* e = sel.<a class="code" href="classMs_1_1Selection.html#abf55316b1de3db4e71efba968ec280f6">element</a>()) {</div><div class="line"><a name="l05468"></a><span class="lineno"> 5468</span>&#160;                        <span class="keywordflow">if</span> (editData.element == e)</div><div class="line"><a name="l05469"></a><span class="lineno"> 5469</span>&#160;                              updateGrips();</div><div class="line"><a name="l05470"></a><span class="lineno"> 5470</span>&#160;                        <span class="keywordflow">else</span></div><div class="line"><a name="l05471"></a><span class="lineno"> 5471</span>&#160;                              setEditElement(e);</div><div class="line"><a name="l05472"></a><span class="lineno"> 5472</span>&#160;                        }</div><div class="line"><a name="l05473"></a><span class="lineno"> 5473</span>&#160;                  <span class="keywordflow">else</span> {</div><div class="line"><a name="l05474"></a><span class="lineno"> 5474</span>&#160;                        setEditElement(<span class="keyword">nullptr</span>);</div><div class="line"><a name="l05475"></a><span class="lineno"> 5475</span>&#160;                        }</div><div class="line"><a name="l05476"></a><span class="lineno"> 5476</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l05477"></a><span class="lineno"> 5477</span>&#160;            }</div><div class="line"><a name="l05478"></a><span class="lineno"> 5478</span>&#160;      }</div><div class="line"><a name="l05479"></a><span class="lineno"> 5479</span>&#160;</div><div class="line"><a name="l05480"></a><span class="lineno"> 5480</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05481"></a><span class="lineno"> 5481</span>&#160;<span class="comment">//   visibleElementInScore</span></div><div class="line"><a name="l05482"></a><span class="lineno"> 5482</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05483"></a><span class="lineno"> 5483</span>&#160;</div><div class="line"><a name="l05484"></a><span class="lineno"><a class="line" href="namespaceMs.html#a85cf0b33b7e6389d4e5c50007173b070"> 5484</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classMs_1_1Element.html">Element</a>* <a class="code" href="namespaceMs.html#a85cf0b33b7e6389d4e5c50007173b070">visibleElementInScore</a>(<span class="keyword">const</span> <a class="code" href="classMs_1_1Element.html">Element</a>* orig, <span class="keyword">const</span> <a class="code" href="classMs_1_1Score.html">Score</a>* s)</div><div class="line"><a name="l05485"></a><span class="lineno"> 5485</span>&#160;      {</div><div class="line"><a name="l05486"></a><span class="lineno"> 5486</span>&#160;      <span class="keywordflow">if</span> (!orig)</div><div class="line"><a name="l05487"></a><span class="lineno"> 5487</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l05488"></a><span class="lineno"> 5488</span>&#160;      <span class="keywordflow">if</span> (orig-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a70883d048b0884821ac779d9ab168151">score</a>() == s &amp;&amp; orig-&gt;<a class="code" href="classMs_1_1Element.html#adc4d7b66745fbb0335dc73f0c3996994">bbox</a>().isValid())</div><div class="line"><a name="l05489"></a><span class="lineno"> 5489</span>&#160;            <span class="keywordflow">return</span> orig;</div><div class="line"><a name="l05490"></a><span class="lineno"> 5490</span>&#160;</div><div class="line"><a name="l05491"></a><span class="lineno"> 5491</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classMs_1_1ScoreElement.html">ScoreElement</a>* se : orig-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a2f0ed55c566c19cb483d77250cb52450">linkList</a>()) {</div><div class="line"><a name="l05492"></a><span class="lineno"> 5492</span>&#160;            <span class="keyword">const</span> <a class="code" href="classMs_1_1Element.html">Element</a>* e = toElement(se);</div><div class="line"><a name="l05493"></a><span class="lineno"> 5493</span>&#160;            <span class="keywordflow">if</span> (e-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a70883d048b0884821ac779d9ab168151">score</a>() == s &amp;&amp; e-&gt;<a class="code" href="classMs_1_1Element.html#adc4d7b66745fbb0335dc73f0c3996994">bbox</a>().isValid()) <span class="comment">// bbox check to ensure the element is indeed visible</span></div><div class="line"><a name="l05494"></a><span class="lineno"> 5494</span>&#160;                  <span class="keywordflow">return</span> e;</div><div class="line"><a name="l05495"></a><span class="lineno"> 5495</span>&#160;            }</div><div class="line"><a name="l05496"></a><span class="lineno"> 5496</span>&#160;</div><div class="line"><a name="l05497"></a><span class="lineno"> 5497</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l05498"></a><span class="lineno"> 5498</span>&#160;      }</div><div class="line"><a name="l05499"></a><span class="lineno"> 5499</span>&#160;</div><div class="line"><a name="l05500"></a><span class="lineno"> 5500</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05501"></a><span class="lineno"> 5501</span>&#160;<span class="comment">//   needViewportMove</span></div><div class="line"><a name="l05502"></a><span class="lineno"> 5502</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05503"></a><span class="lineno"> 5503</span>&#160;</div><div class="line"><a name="l05504"></a><span class="lineno"><a class="line" href="namespaceMs.html#af8d386d46745074a0f09a19f079be4a5"> 5504</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceMs.html#af8d386d46745074a0f09a19f079be4a5">needViewportMove</a>(<a class="code" href="classMs_1_1Score.html">Score</a>* cs, <a class="code" href="classMs_1_1ScoreView.html">ScoreView</a>* cv)</div><div class="line"><a name="l05505"></a><span class="lineno"> 5505</span>&#160;      {</div><div class="line"><a name="l05506"></a><span class="lineno"> 5506</span>&#160;      <span class="keywordflow">if</span> (!cs || !cv)</div><div class="line"><a name="l05507"></a><span class="lineno"> 5507</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l05508"></a><span class="lineno"> 5508</span>&#160;</div><div class="line"><a name="l05509"></a><span class="lineno"> 5509</span>&#160;      <span class="keyword">const</span> <a class="code" href="classMs_1_1CmdState.html">CmdState</a>&amp; state = cs-&gt;<a class="code" href="classMs_1_1Score.html#a07fa204a412636070028f2b159771574">cmdState</a>();</div><div class="line"><a name="l05510"></a><span class="lineno"> 5510</span>&#160;</div><div class="line"><a name="l05511"></a><span class="lineno"> 5511</span>&#160;      <span class="keywordflow">if</span> (state.<a class="code" href="classMs_1_1CmdState.html#a17c873235bb5faf9a9096a57f9613775">startTick</a>() &lt; <a class="code" href="classMs_1_1Fraction.html">Fraction</a>(0, 1))</div><div class="line"><a name="l05512"></a><span class="lineno"> 5512</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l05513"></a><span class="lineno"> 5513</span>&#160;</div><div class="line"><a name="l05514"></a><span class="lineno"> 5514</span>&#160;      <span class="keyword">const</span> QRectF viewport = cv-&gt;<a class="code" href="classMs_1_1ScoreView.html#a8fe1c8c0c77f212d97d3b6baaa215ffc">canvasViewport</a>(); <span class="comment">// TODO: margins for intersection check?</span></div><div class="line"><a name="l05515"></a><span class="lineno"> 5515</span>&#160;</div><div class="line"><a name="l05516"></a><span class="lineno"> 5516</span>&#160;      <span class="keyword">const</span> <a class="code" href="classMs_1_1Element.html">Element</a>* editElement = <a class="code" href="namespaceMs.html#a85cf0b33b7e6389d4e5c50007173b070">visibleElementInScore</a>(state.<a class="code" href="classMs_1_1CmdState.html#a89c244fc7d788220eaf7fe9f665e3754">element</a>(), cs);</div><div class="line"><a name="l05517"></a><span class="lineno"> 5517</span>&#160;      <span class="keywordflow">if</span> (editElement &amp;&amp; editElement-&gt;<a class="code" href="classMs_1_1Element.html#adc4d7b66745fbb0335dc73f0c3996994">bbox</a>().isValid() &amp;&amp; !editElement-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a98f8c58df0f5baafe63414bedf84514f">isSpanner</a>())</div><div class="line"><a name="l05518"></a><span class="lineno"> 5518</span>&#160;            <span class="keywordflow">return</span> !viewport.<a class="code" href="classMs_1_1Element.html#a77459c7e2f1077ec3b68b11c26640685">intersects</a>(editElement-&gt;<a class="code" href="classMs_1_1Element.html#a6ca9221d8858907d3063fa58255fb804">canvasBoundingRect</a>());</div><div class="line"><a name="l05519"></a><span class="lineno"> 5519</span>&#160;</div><div class="line"><a name="l05520"></a><span class="lineno"> 5520</span>&#160;      <span class="keywordflow">if</span> (state.<a class="code" href="classMs_1_1CmdState.html#a17c873235bb5faf9a9096a57f9613775">startTick</a>().<a class="code" href="classMs_1_1Fraction.html#ac3244c876739eef5fa17e93e053bc599">isZero</a>() &amp;&amp; state.<a class="code" href="classMs_1_1CmdState.html#a8d35125e832552b4285446381358bcf2">endTick</a>() == cs-&gt;<a class="code" href="classMs_1_1Score.html#afdc4d0de076f98453fd5991e95e15651">endTick</a>())</div><div class="line"><a name="l05521"></a><span class="lineno"> 5521</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// TODO: adjust staff perhaps?</span></div><div class="line"><a name="l05522"></a><span class="lineno"> 5522</span>&#160;</div><div class="line"><a name="l05523"></a><span class="lineno"> 5523</span>&#160;      <span class="comment">// Is any part of the range visible?</span></div><div class="line"><a name="l05524"></a><span class="lineno"> 5524</span>&#160;      <a class="code" href="classMs_1_1Measure.html">Measure</a>* mStart = cs-&gt;<a class="code" href="classMs_1_1Score.html#aedd642f8ec2fad2500877e7ce664d014">tick2measureMM</a>(state.<a class="code" href="classMs_1_1CmdState.html#a17c873235bb5faf9a9096a57f9613775">startTick</a>());</div><div class="line"><a name="l05525"></a><span class="lineno"> 5525</span>&#160;      <a class="code" href="classMs_1_1Measure.html">Measure</a>* mEnd = cs-&gt;<a class="code" href="classMs_1_1Score.html#aedd642f8ec2fad2500877e7ce664d014">tick2measureMM</a>(state.<a class="code" href="classMs_1_1CmdState.html#a8d35125e832552b4285446381358bcf2">endTick</a>());</div><div class="line"><a name="l05526"></a><span class="lineno"> 5526</span>&#160;      mEnd = mEnd ? mEnd-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a5e411c5bec8ab7b9120cf7f2ace28a89">nextMeasureMM</a>() : <span class="keyword">nullptr</span>;</div><div class="line"><a name="l05527"></a><span class="lineno"> 5527</span>&#160;</div><div class="line"><a name="l05528"></a><span class="lineno"> 5528</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">bool</span> isExcerpt = !cs-&gt;<a class="code" href="classMs_1_1Score.html#a8eddd82040d61bffb0d863d6f26270d6">isMaster</a>();</div><div class="line"><a name="l05529"></a><span class="lineno"> 5529</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">bool</span> csStaves = (isExcerpt || (state.<a class="code" href="classMs_1_1CmdState.html#a7bb0ba0b09e7253fdfd24649ef2b0116">endStaff</a>() &lt; 0) || (state.<a class="code" href="classMs_1_1CmdState.html#a7bb0ba0b09e7253fdfd24649ef2b0116">endStaff</a>() &gt;= cs-&gt;<a class="code" href="classMs_1_1Score.html#ab39888225a9fe0533558a379b1545cb1">nstaves</a>()));</div><div class="line"><a name="l05530"></a><span class="lineno"> 5530</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> startStaff = csStaves ? 0 : state.<a class="code" href="classMs_1_1CmdState.html#abf97e9e1222e1e90cb65c32e6bdc930d">startStaff</a>();</div><div class="line"><a name="l05531"></a><span class="lineno"> 5531</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> endStaff = csStaves ? (cs-&gt;<a class="code" href="classMs_1_1Score.html#ab39888225a9fe0533558a379b1545cb1">nstaves</a>() - 1) : state.<a class="code" href="classMs_1_1CmdState.html#a7bb0ba0b09e7253fdfd24649ef2b0116">endStaff</a>();</div><div class="line"><a name="l05532"></a><span class="lineno"> 5532</span>&#160;</div><div class="line"><a name="l05533"></a><span class="lineno"> 5533</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classMs_1_1Measure.html">Measure</a>* m = mStart; m &amp;&amp; m != mEnd; m = m-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a5e411c5bec8ab7b9120cf7f2ace28a89">nextMeasureMM</a>()) {</div><div class="line"><a name="l05534"></a><span class="lineno"> 5534</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> st = startStaff; st &lt;= endStaff; ++st) {</div><div class="line"><a name="l05535"></a><span class="lineno"> 5535</span>&#160;                  <span class="keyword">const</span> <a class="code" href="classMs_1_1StaffLines.html">StaffLines</a>* l = m-&gt;staffLines(st);</div><div class="line"><a name="l05536"></a><span class="lineno"> 5536</span>&#160;                  <span class="keywordflow">if</span> (l) {</div><div class="line"><a name="l05537"></a><span class="lineno"> 5537</span>&#160;                        <span class="keyword">const</span> QRectF r = l-&gt;<a class="code" href="classMs_1_1Element.html#adc4d7b66745fbb0335dc73f0c3996994">bbox</a>().translated(l-&gt;<a class="code" href="classMs_1_1StaffLines.html#a66b7898106ea89c187b7d21f1e612ef4">canvasPos</a>());</div><div class="line"><a name="l05538"></a><span class="lineno"> 5538</span>&#160;                        <span class="keywordflow">if</span> (viewport.intersects(r))</div><div class="line"><a name="l05539"></a><span class="lineno"> 5539</span>&#160;                              <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l05540"></a><span class="lineno"> 5540</span>&#160;                        }</div><div class="line"><a name="l05541"></a><span class="lineno"> 5541</span>&#160;                  }</div><div class="line"><a name="l05542"></a><span class="lineno"> 5542</span>&#160;            }</div><div class="line"><a name="l05543"></a><span class="lineno"> 5543</span>&#160;</div><div class="line"><a name="l05544"></a><span class="lineno"> 5544</span>&#160;      <span class="comment">// maybe viewport is at least near the desired position?</span></div><div class="line"><a name="l05545"></a><span class="lineno"> 5545</span>&#160;      <span class="keyword">const</span> QPointF p = viewport.center();</div><div class="line"><a name="l05546"></a><span class="lineno"> 5546</span>&#160;      <span class="keywordtype">int</span> staffIdx = 0;</div><div class="line"><a name="l05547"></a><span class="lineno"> 5547</span>&#160;      <span class="keyword">const</span> <a class="code" href="classMs_1_1Measure.html">Measure</a>* m = cs-&gt;<a class="code" href="classMs_1_1Score.html#a4c35c150fe004e1b2cb82cb2b87954a6">pos2measure</a>(p, &amp;staffIdx, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>);</div><div class="line"><a name="l05548"></a><span class="lineno"> 5548</span>&#160;      <span class="keywordflow">if</span> (m &amp;&amp; m-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a4957f952a3eca95bba93abfe047420bd">tick</a>() &gt;= state.<a class="code" href="classMs_1_1CmdState.html#a17c873235bb5faf9a9096a57f9613775">startTick</a>() &amp;&amp; m-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a4957f952a3eca95bba93abfe047420bd">tick</a>() &lt;= state.<a class="code" href="classMs_1_1CmdState.html#a8d35125e832552b4285446381358bcf2">endTick</a>())</div><div class="line"><a name="l05549"></a><span class="lineno"> 5549</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l05550"></a><span class="lineno"> 5550</span>&#160;</div><div class="line"><a name="l05551"></a><span class="lineno"> 5551</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l05552"></a><span class="lineno"> 5552</span>&#160;      }</div><div class="line"><a name="l05553"></a><span class="lineno"> 5553</span>&#160;</div><div class="line"><a name="l05554"></a><span class="lineno"> 5554</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05555"></a><span class="lineno"> 5555</span>&#160;<span class="comment">//   moveViewportToLastEdit</span></div><div class="line"><a name="l05556"></a><span class="lineno"> 5556</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05557"></a><span class="lineno"> 5557</span>&#160;</div><div class="line"><a name="l05558"></a><span class="lineno"><a class="line" href="classMs_1_1ScoreView.html#a0c933630253adf5ec3edfe67db13cae8"> 5558</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMs_1_1ScoreView.html#a0c933630253adf5ec3edfe67db13cae8">ScoreView::moveViewportToLastEdit</a>()</div><div class="line"><a name="l05559"></a><span class="lineno"> 5559</span>&#160;      {</div><div class="line"><a name="l05560"></a><span class="lineno"> 5560</span>&#160;      <span class="keywordflow">if</span> (_blockShowEdit)</div><div class="line"><a name="l05561"></a><span class="lineno"> 5561</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l05562"></a><span class="lineno"> 5562</span>&#160;</div><div class="line"><a name="l05563"></a><span class="lineno"> 5563</span>&#160;      <a class="code" href="classMs_1_1Score.html">Score</a>* sc = score();</div><div class="line"><a name="l05564"></a><span class="lineno"> 5564</span>&#160;</div><div class="line"><a name="l05565"></a><span class="lineno"> 5565</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespaceMs.html#af8d386d46745074a0f09a19f079be4a5">needViewportMove</a>(sc, <span class="keyword">this</span>))</div><div class="line"><a name="l05566"></a><span class="lineno"> 5566</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l05567"></a><span class="lineno"> 5567</span>&#160;</div><div class="line"><a name="l05568"></a><span class="lineno"> 5568</span>&#160;      <span class="keyword">const</span> <a class="code" href="classMs_1_1CmdState.html">CmdState</a>&amp; st = sc-&gt;<a class="code" href="classMs_1_1Score.html#a07fa204a412636070028f2b159771574">cmdState</a>();</div><div class="line"><a name="l05569"></a><span class="lineno"> 5569</span>&#160;      <span class="keyword">const</span> <a class="code" href="classMs_1_1Element.html">Element</a>* editElement = <a class="code" href="namespaceMs.html#a85cf0b33b7e6389d4e5c50007173b070">visibleElementInScore</a>(st.<a class="code" href="classMs_1_1CmdState.html#a89c244fc7d788220eaf7fe9f665e3754">element</a>(), sc);</div><div class="line"><a name="l05570"></a><span class="lineno"> 5570</span>&#160;</div><div class="line"><a name="l05571"></a><span class="lineno"> 5571</span>&#160;      <span class="keyword">const</span> <a class="code" href="classMs_1_1MeasureBase.html">MeasureBase</a>* mb = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l05572"></a><span class="lineno"> 5572</span>&#160;      <span class="keywordflow">if</span> (editElement) {</div><div class="line"><a name="l05573"></a><span class="lineno"> 5573</span>&#160;            <span class="keywordflow">if</span> (editElement-&gt;<a class="code" href="classMs_1_1ScoreElement.html#a5aa58f96618edb0e3ff660e1c96c5d4e">isSpannerSegment</a>()) {</div><div class="line"><a name="l05574"></a><span class="lineno"> 5574</span>&#160;                  <span class="keyword">const</span> <a class="code" href="classMs_1_1SpannerSegment.html">SpannerSegment</a>* s = <a class="code" href="namespaceMs.html#a8886182157e4e29202c1b22bbdc76ecb">toSpannerSegment</a>(editElement);</div><div class="line"><a name="l05575"></a><span class="lineno"> 5575</span>&#160;                  <a class="code" href="classMs_1_1Fraction.html">Fraction</a> <a class="code" href="click_8h.html#a23377ea277c7aef62f6cf3c640f7155c">tick</a> = s-&gt;<a class="code" href="classMs_1_1SpannerSegment.html#a1e5ab9a61853da835e9ea0fe1da55105">tick</a>();</div><div class="line"><a name="l05576"></a><span class="lineno"> 5576</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="classMs_1_1System.html">System</a>* sys = s-&gt;<a class="code" href="classMs_1_1SpannerSegment.html#ae988f78aec0a13e5a204fe135b6b0ae0">system</a>()) {</div><div class="line"><a name="l05577"></a><span class="lineno"> 5577</span>&#160;                        <a class="code" href="classMs_1_1Measure.html">Measure</a>* fm = sys-&gt;firstMeasure();</div><div class="line"><a name="l05578"></a><span class="lineno"> 5578</span>&#160;                        <span class="keywordflow">if</span> (fm)</div><div class="line"><a name="l05579"></a><span class="lineno"> 5579</span>&#160;                              tick = std::max(tick, fm-&gt;<a class="code" href="classMs_1_1MeasureBase.html#a4957f952a3eca95bba93abfe047420bd">tick</a>());</div><div class="line"><a name="l05580"></a><span class="lineno"> 5580</span>&#160;                        }</div><div class="line"><a name="l05581"></a><span class="lineno"> 5581</span>&#160;                  mb = sc-&gt;<a class="code" href="classMs_1_1Score.html#aedd642f8ec2fad2500877e7ce664d014">tick2measureMM</a>(tick);</div><div class="line"><a name="l05582"></a><span class="lineno"> 5582</span>&#160;                  }</div><div class="line"><a name="l05583"></a><span class="lineno"> 5583</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l05584"></a><span class="lineno"> 5584</span>&#160;                  mb = editElement-&gt;<a class="code" href="classMs_1_1Element.html#af0912f5fb5190a4fa489063b421093fa">findMeasureBase</a>();</div><div class="line"><a name="l05585"></a><span class="lineno"> 5585</span>&#160;                  }</div><div class="line"><a name="l05586"></a><span class="lineno"> 5586</span>&#160;            }</div><div class="line"><a name="l05587"></a><span class="lineno"> 5587</span>&#160;      <span class="keywordflow">if</span> (!mb)</div><div class="line"><a name="l05588"></a><span class="lineno"> 5588</span>&#160;            mb = sc-&gt;<a class="code" href="classMs_1_1Score.html#aedd642f8ec2fad2500877e7ce664d014">tick2measureMM</a>(st.<a class="code" href="classMs_1_1CmdState.html#a17c873235bb5faf9a9096a57f9613775">startTick</a>());</div><div class="line"><a name="l05589"></a><span class="lineno"> 5589</span>&#160;      <span class="keywordflow">if</span> (!mb)</div><div class="line"><a name="l05590"></a><span class="lineno"> 5590</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l05591"></a><span class="lineno"> 5591</span>&#160;</div><div class="line"><a name="l05592"></a><span class="lineno"> 5592</span>&#160;      <span class="keyword">const</span> <a class="code" href="classMs_1_1Element.html">Element</a>* viewportElement = (editElement &amp;&amp; editElement-&gt;<a class="code" href="classMs_1_1Element.html#adc4d7b66745fbb0335dc73f0c3996994">bbox</a>().isValid() &amp;&amp; !mb-&gt;isMeasure()) ? editElement : mb;</div><div class="line"><a name="l05593"></a><span class="lineno"> 5593</span>&#160;</div><div class="line"><a name="l05594"></a><span class="lineno"> 5594</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> staff = sc-&gt;<a class="code" href="classMs_1_1Score.html#a8eddd82040d61bffb0d863d6f26270d6">isMaster</a>() &amp;&amp; mb-&gt;isMeasure() ? st.<a class="code" href="classMs_1_1CmdState.html#abf97e9e1222e1e90cb65c32e6bdc930d">startStaff</a>() : -1; <span class="comment">// TODO: choose the closest staff to the current viewport?</span></div><div class="line"><a name="l05595"></a><span class="lineno"> 5595</span>&#160;      adjustCanvasPosition(viewportElement, <span class="comment">/* playback */</span> <span class="keyword">false</span>, staff);</div><div class="line"><a name="l05596"></a><span class="lineno"> 5596</span>&#160;      }</div><div class="line"><a name="l05597"></a><span class="lineno"> 5597</span>&#160;</div><div class="line"><a name="l05598"></a><span class="lineno"> 5598</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05599"></a><span class="lineno"> 5599</span>&#160;<span class="comment">//   loadFromPreferences</span></div><div class="line"><a name="l05600"></a><span class="lineno"> 5600</span>&#160;<span class="comment">//---------------------------------------------------------</span></div><div class="line"><a name="l05601"></a><span class="lineno"> 5601</span>&#160;</div><div class="line"><a name="l05602"></a><span class="lineno"><a class="line" href="structMs_1_1SmoothPanSettings.html#aceb13402efb7475ad57c2652693fc877"> 5602</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structMs_1_1SmoothPanSettings.html#aceb13402efb7475ad57c2652693fc877">SmoothPanSettings::loadFromPreferences</a>()</div><div class="line"><a name="l05603"></a><span class="lineno"> 5603</span>&#160;      {</div><div class="line"><a name="l05604"></a><span class="lineno"> 5604</span>&#160;      enabled = <a class="code" href="namespaceMs.html#abe8f8da5976e3a727f1a3a7a117e73de">preferences</a>.<a class="code" href="structMs_1_1Preferences.html#a39e1e4d3d337de7dcafb14fd8c75c4a2">getBool</a>(PREF_PAN_SMOOTHLY_ENABLED);</div><div class="line"><a name="l05605"></a><span class="lineno"> 5605</span>&#160;      controlModifierBase = <a class="code" href="namespaceMs.html#abe8f8da5976e3a727f1a3a7a117e73de">preferences</a>.<a class="code" href="structMs_1_1Preferences.html#a198a5eec01a96b4647546bd140e2a9f1">getDouble</a>(PREF_PAN_MODIFIER_BASE);</div><div class="line"><a name="l05606"></a><span class="lineno"> 5606</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;currentScoreView() != <span class="keyword">nullptr</span>)</div><div class="line"><a name="l05607"></a><span class="lineno"> 5607</span>&#160;            <a class="code" href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">mscore</a>-&gt;currentScoreView()-&gt;_controlModifier = controlModifierBase;</div><div class="line"><a name="l05608"></a><span class="lineno"> 5608</span>&#160;      controlModifierSteps = <a class="code" href="namespaceMs.html#abe8f8da5976e3a727f1a3a7a117e73de">preferences</a>.<a class="code" href="structMs_1_1Preferences.html#a198a5eec01a96b4647546bd140e2a9f1">getDouble</a>(PREF_PAN_MODIFIER_STEP);</div><div class="line"><a name="l05609"></a><span class="lineno"> 5609</span>&#160;      minContinuousModifier = <a class="code" href="namespaceMs.html#abe8f8da5976e3a727f1a3a7a117e73de">preferences</a>.<a class="code" href="structMs_1_1Preferences.html#a198a5eec01a96b4647546bd140e2a9f1">getDouble</a>(PREF_PAN_MODIFIER_MIN);</div><div class="line"><a name="l05610"></a><span class="lineno"> 5610</span>&#160;      maxContinuousModifier = <a class="code" href="namespaceMs.html#abe8f8da5976e3a727f1a3a7a117e73de">preferences</a>.<a class="code" href="structMs_1_1Preferences.html#a198a5eec01a96b4647546bd140e2a9f1">getDouble</a>(PREF_PAN_MODIFIER_MAX);</div><div class="line"><a name="l05611"></a><span class="lineno"> 5611</span>&#160;<span class="comment">//      leftDistance = preferences.getDouble(PREF_PAN_DISTANCE_LEFT);</span></div><div class="line"><a name="l05612"></a><span class="lineno"> 5612</span>&#160;<span class="comment">//      leftDistance1 = preferences.getDouble(PREF_PAN_DISTANCE_LEFT1);</span></div><div class="line"><a name="l05613"></a><span class="lineno"> 5613</span>&#160;<span class="comment">//      leftDistance2 = preferences.getDouble(PREF_PAN_DISTANCE_LEFT2);</span></div><div class="line"><a name="l05614"></a><span class="lineno"> 5614</span>&#160;<span class="comment">//      leftDistance3 = preferences.getDouble(PREF_PAN_DISTANCE_LEFT3);</span></div><div class="line"><a name="l05615"></a><span class="lineno"> 5615</span>&#160;<span class="comment">//      leftMod1 = preferences.getDouble(PREF_PAN_MODIFIER_LEFT1);</span></div><div class="line"><a name="l05616"></a><span class="lineno"> 5616</span>&#160;<span class="comment">//      leftMod2 = preferences.getDouble(PREF_PAN_MODIFIER_LEFT2);</span></div><div class="line"><a name="l05617"></a><span class="lineno"> 5617</span>&#160;<span class="comment">//      leftMod3 = preferences.getDouble(PREF_PAN_MODIFIER_LEFT3);</span></div><div class="line"><a name="l05618"></a><span class="lineno"> 5618</span>&#160;<span class="comment">//      rightDistance = preferences.getDouble(PREF_PAN_DISTANCE_RIGHT);</span></div><div class="line"><a name="l05619"></a><span class="lineno"> 5619</span>&#160;<span class="comment">//      rightDistance1 = preferences.getDouble(PREF_PAN_DISTANCE_RIGHT1);</span></div><div class="line"><a name="l05620"></a><span class="lineno"> 5620</span>&#160;<span class="comment">//      rightDistance2 = preferences.getDouble(PREF_PAN_DISTANCE_RIGHT2);</span></div><div class="line"><a name="l05621"></a><span class="lineno"> 5621</span>&#160;<span class="comment">//      rightDistance3 = preferences.getDouble(PREF_PAN_DISTANCE_RIGHT3);</span></div><div class="line"><a name="l05622"></a><span class="lineno"> 5622</span>&#160;<span class="comment">//      rightMod1 = preferences.getDouble(PREF_PAN_MODIFIER_RIGHT1);</span></div><div class="line"><a name="l05623"></a><span class="lineno"> 5623</span>&#160;<span class="comment">//      rightMod2 = preferences.getDouble(PREF_PAN_MODIFIER_RIGHT2);</span></div><div class="line"><a name="l05624"></a><span class="lineno"> 5624</span>&#160;<span class="comment">//      rightMod3 = preferences.getDouble(PREF_PAN_MODIFIER_RIGHT3);</span></div><div class="line"><a name="l05625"></a><span class="lineno"> 5625</span>&#160;<span class="comment">//      normalWeight = preferences.getDouble(PREF_PAN_WEIGHT_NORMAL);</span></div><div class="line"><a name="l05626"></a><span class="lineno"> 5626</span>&#160;<span class="comment">//      smartWeight = preferences.getDouble(PREF_PAN_WEIGHT_SMART);</span></div><div class="line"><a name="l05627"></a><span class="lineno"> 5627</span>&#160;<span class="comment">//      advancedWeighting = preferences.getBool(PREF_PAN_WEIGHT_ADVANCED);</span></div><div class="line"><a name="l05628"></a><span class="lineno"> 5628</span>&#160;<span class="comment">//      cursorTimerDuration = preferences.getInt(PREF_PAN_SMART_TIMER_DURATION);</span></div><div class="line"><a name="l05629"></a><span class="lineno"> 5629</span>&#160;      controlCursorScreenPos = <a class="code" href="namespaceMs.html#abe8f8da5976e3a727f1a3a7a117e73de">preferences</a>.<a class="code" href="structMs_1_1Preferences.html#a198a5eec01a96b4647546bd140e2a9f1">getDouble</a>(PREF_PAN_CURSOR_POS);</div><div class="line"><a name="l05630"></a><span class="lineno"> 5630</span>&#160;      teleportLeftEnabled = <a class="code" href="namespaceMs.html#abe8f8da5976e3a727f1a3a7a117e73de">preferences</a>.<a class="code" href="structMs_1_1Preferences.html#a39e1e4d3d337de7dcafb14fd8c75c4a2">getBool</a>(PREF_PAN_TELEPORT_LEFT);</div><div class="line"><a name="l05631"></a><span class="lineno"> 5631</span>&#160;      teleportRightEnabled = <a class="code" href="namespaceMs.html#abe8f8da5976e3a727f1a3a7a117e73de">preferences</a>.<a class="code" href="structMs_1_1Preferences.html#a39e1e4d3d337de7dcafb14fd8c75c4a2">getBool</a>(PREF_PAN_TELEPORT_RIGHT);</div><div class="line"><a name="l05632"></a><span class="lineno"> 5632</span>&#160;      }</div><div class="line"><a name="l05633"></a><span class="lineno"> 5633</span>&#160;} <span class="comment">// namespace Ms</span></div><div class="ttc" id="classMs_1_1Avs_1_1AvsOmrDrawer_html_a675a223fc96976c7e7a8be55642d7f38"><div class="ttname"><a href="classMs_1_1Avs_1_1AvsOmrDrawer.html#a675a223fc96976c7e7a8be55642d7f38">Ms::Avs::AvsOmrDrawer::draw</a></div><div class="ttdeci">void draw(std::shared_ptr&lt; Context &gt; ctx, const QList&lt; const Ms::Measure *&gt; &amp;ml)</div><div class="ttdef"><b>Definition:</b> <a href="avsomrdrawer_8cpp_source.html#l00073">avsomrdrawer.cpp:73</a></div></div>
<div class="ttc" id="namespaceMs_html_acebbf1c7a6bee6fc8049adb5141f59d4a07faea61b3a35dbab6e3ee5bac27da5b"><div class="ttname"><a href="namespaceMs.html#acebbf1c7a6bee6fc8049adb5141f59d4a07faea61b3a35dbab6e3ee5bac27da5b">Ms::CursorType::LOOP_OUT</a></div></div>
<div class="ttc" id="namespaceMs_html_acebbf1c7a6bee6fc8049adb5141f59d4a077a38a30f3b07338275f035c5a2b801"><div class="ttname"><a href="namespaceMs.html#acebbf1c7a6bee6fc8049adb5141f59d4a077a38a30f3b07338275f035c5a2b801">Ms::CursorType::LOOP_IN</a></div></div>
<div class="ttc" id="namespaceMs_html_a2c92ce0204176ede1ab86e2f44ae6b9ea9c6a910141dd674271df4ebacccaeed0"><div class="ttname"><a href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea9c6a910141dd674271df4ebacccaeed0">Ms::ElementType::HARMONY</a></div></div>
<div class="ttc" id="namespaceMs_html_a28863123e439c88c35086eb7dd963c9aa50780f47f6839d47d60bc4555ee00c3f"><div class="ttname"><a href="namespaceMs.html#a28863123e439c88c35086eb7dd963c9aa50780f47f6839d47d60bc4555ee00c3f">Ms::CapellaNoteObjectType::REST</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a09b79a6ac0b13eb38d93a6c9b78149be"><div class="ttname"><a href="classMs_1_1ScoreView.html#a09b79a6ac0b13eb38d93a6c9b78149be">Ms::ScoreView::normalCopy</a></div><div class="ttdeci">void normalCopy()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l01929">scoreview.cpp:1929</a></div></div>
<div class="ttc" id="classMs_1_1PositionCursor_html_a0fccaeb4e241b41a837fada745bd40fd"><div class="ttname"><a href="classMs_1_1PositionCursor.html#a0fccaeb4e241b41a837fada745bd40fd">Ms::PositionCursor::setRect</a></div><div class="ttdeci">void setRect(const QRectF &amp;r)</div><div class="ttdef"><b>Definition:</b> <a href="textcursor_8h_source.html#l00049">textcursor.h:49</a></div></div>
<div class="ttc" id="structMs_1_1MidiInputEvent_html_ac722e2a45f6bf0e70111f7ccf8509297"><div class="ttname"><a href="structMs_1_1MidiInputEvent.html#ac722e2a45f6bf0e70111f7ccf8509297">Ms::MidiInputEvent::chord</a></div><div class="ttdeci">bool chord</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l00198">score.h:198</a></div></div>
<div class="ttc" id="classMs_1_1TextBase_html_a947b23dce716abd08ef4367b3c7cd363"><div class="ttname"><a href="classMs_1_1TextBase.html#a947b23dce716abd08ef4367b3c7cd363">Ms::TextBase::plainText</a></div><div class="ttdeci">QString plainText() const</div><div class="ttdef"><b>Definition:</b> <a href="textbase_8cpp_source.html#l02357">textbase.cpp:2357</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_aa157659e972829e263e8835c3df4c931"><div class="ttname"><a href="classMs_1_1ScoreView.html#aa157659e972829e263e8835c3df4c931">Ms::ScoreView::cmdCreateTuplet</a></div><div class="ttdeci">void cmdCreateTuplet(ChordRest *cr, Tuplet *tuplet)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l04392">scoreview.cpp:4392</a></div></div>
<div class="ttc" id="classMs_1_1Segment_html_a44dc6d5b22a75152673060bc059acfb9"><div class="ttname"><a href="classMs_1_1Segment.html#a44dc6d5b22a75152673060bc059acfb9">Ms::Segment::measure</a></div><div class="ttdeci">Measure * measure() const</div><div class="ttdef"><b>Definition:</b> <a href="segment_8h_source.html#l00130">segment.h:130</a></div></div>
<div class="ttc" id="namespaceMs_html_ad1b3e57dfd5b26a280bf2ebde66b9d5aa8e2ef94cad245adb8089356242f49e55"><div class="ttname"><a href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aa8e2ef94cad245adb8089356242f49e55">Ms::Tid::STAFF</a></div></div>
<div class="ttc" id="namespaceMs_html_a9ac3d39c415913ce40aa7e57a5f3fb55ad0f5bb7cf646230bb691403d52fe2448"><div class="ttname"><a href="namespaceMs.html#a9ac3d39c415913ce40aa7e57a5f3fb55ad0f5bb7cf646230bb691403d52fe2448">Ms::HarmonyType::NASHVILLE</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_a2ba48a5bec00a30fe829a9e6e477d1d0"><div class="ttname"><a href="classMs_1_1Element.html#a2ba48a5bec00a30fe829a9e6e477d1d0">Ms::Element::offset</a></div><div class="ttdeci">const QPointF &amp; offset() const</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00261">element.h:261</a></div></div>
<div class="ttc" id="fotomode_8h_html"><div class="ttname"><a href="fotomode_8h.html">fotomode.h</a></div></div>
<div class="ttc" id="namespaceMs_html_a20d9370e85f87d0b2594fd90665f8cc1aa1916b5141306345cf93539af6fcee5a"><div class="ttname"><a href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1aa1916b5141306345cf93539af6fcee5a">Ms::ViewState::FOTO_DRAG_EDIT</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_aee2c8e5acab0616edede09c224417af6"><div class="ttname"><a href="classMs_1_1ScoreView.html#aee2c8e5acab0616edede09c224417af6">Ms::ScoreView::cmd</a></div><div class="ttdeci">void cmd(const QAction *)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l02080">scoreview.cpp:2080</a></div></div>
<div class="ttc" id="namespaceMs_html_a57d18b2b1d48c4af1fd15d73c2abe9be"><div class="ttname"><a href="namespaceMs.html#a57d18b2b1d48c4af1fd15d73c2abe9be">Ms::MAX_HEADERS</a></div><div class="ttdeci">static const int MAX_HEADERS</div><div class="ttdef"><b>Definition:</b> <a href="mscore_8h_source.html#l00084">mscore.h:84</a></div></div>
<div class="ttc" id="namespaceMs_html_ad1b1585b0038ede29126efd627daae91ab90cb5808ab539112c7b40d55db99535"><div class="ttname"><a href="namespaceMs.html#ad1b1585b0038ede29126efd627daae91ab90cb5808ab539112c7b40d55db99535">Ms::NO_CHORD_REST_SELECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="mscore_8h_source.html#l00242">mscore.h:242</a></div></div>
<div class="ttc" id="namespaceMs_html_a2c92ce0204176ede1ab86e2f44ae6b9ea557e208074023b45441fc1604d6bf81d"><div class="ttname"><a href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea557e208074023b45441fc1604d6bf81d">Ms::ElementType::LASSO</a></div></div>
<div class="ttc" id="classMs_1_1Note_html_ac1fe59b8f92c11fc6b662855fc8d9316"><div class="ttname"><a href="classMs_1_1Note.html#ac1fe59b8f92c11fc6b662855fc8d9316">Ms::Note::chord</a></div><div class="ttdeci">Chord * chord() const</div><div class="ttdef"><b>Definition:</b> <a href="note_8h_source.html#l00429">note.h:429</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a7c6f99b935e5d58e642250d876d5ec55"><div class="ttname"><a href="classMs_1_1Score.html#a7c6f99b935e5d58e642250d876d5ec55">Ms::Score::upDown</a></div><div class="ttdeci">void upDown(bool up, UpDownMode)</div><div class="ttdoc">Increment/decrement pitch of note by one or by an octave. </div><div class="ttdef"><b>Definition:</b> <a href="cmd_8cpp_source.html#l01475">cmd.cpp:1475</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_aeacd589786e73e54e81ba2cc9a812126"><div class="ttname"><a href="classMs_1_1Element.html#aeacd589786e73e54e81ba2cc9a812126">Ms::Element::drawEditMode</a></div><div class="ttdeci">virtual void drawEditMode(QPainter *, EditData &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="element_8cpp_source.html#l01972">element.cpp:1972</a></div></div>
<div class="ttc" id="stafftype_8h_html"><div class="ttname"><a href="stafftype_8h.html">stafftype.h</a></div></div>
<div class="ttc" id="classMs_1_1RehearsalMark_html"><div class="ttname"><a href="classMs_1_1RehearsalMark.html">Ms::RehearsalMark</a></div><div class="ttdef"><b>Definition:</b> <a href="rehearsalmark_8h_source.html#l00024">rehearsalmark.h:24</a></div></div>
<div class="ttc" id="icon_8h_html"><div class="ttname"><a href="icon_8h.html">icon.h</a></div></div>
<div class="ttc" id="namespaceMs_html_a2bac757437d1a9e364db27de8f9c9e2ea7c5d39d9b58f23d6f42e27eb20d55ec1"><div class="ttname"><a href="namespaceMs.html#a2bac757437d1a9e364db27de8f9c9e2ea7c5d39d9b58f23d6f42e27eb20d55ec1">Ms::Sid::barNoteDistance</a></div></div>
<div class="ttc" id="namespaceMs_html_a239e390cba4ba2b19296c2995da44976ac2d92b81beeac9bfc89fb870c1a20767"><div class="ttname"><a href="namespaceMs.html#a239e390cba4ba2b19296c2995da44976ac2d92b81beeac9bfc89fb870c1a20767">Ms::PlaceText::ABOVE</a></div></div>
<div class="ttc" id="classMs_1_1Selection_html_aa987ed47ede867a2ed6b1015a09ea3a9"><div class="ttname"><a href="classMs_1_1Selection.html#aa987ed47ede867a2ed6b1015a09ea3a9">Ms::Selection::firstChordRest</a></div><div class="ttdeci">ChordRest * firstChordRest(int track=-1) const</div><div class="ttdef"><b>Definition:</b> <a href="select_8cpp_source.html#l00224">select.cpp:224</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a2fc591b6529db05c03da165588a0d533"><div class="ttname"><a href="classMs_1_1ScoreView.html#a2fc591b6529db05c03da165588a0d533">Ms::ScoreView::screenPrev</a></div><div class="ttdeci">void screenPrev()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03542">scoreview.cpp:3542</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_afef24f41f99ba313d20ff8187e4d5232"><div class="ttname"><a href="classMs_1_1ScoreView.html#afef24f41f99ba313d20ff8187e4d5232">Ms::ScoreView::pagePrev</a></div><div class="ttdeci">void pagePrev()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03512">scoreview.cpp:3512</a></div></div>
<div class="ttc" id="classMs_1_1EditStaff_html"><div class="ttname"><a href="classMs_1_1EditStaff.html">Ms::EditStaff</a></div><div class="ttdef"><b>Definition:</b> <a href="editstaff_8h_source.html#l00038">editstaff.h:38</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_a4cc362a42bad65483b59d3a8e0df374f"><div class="ttname"><a href="classMs_1_1Element.html#a4cc362a42bad65483b59d3a8e0df374f">Ms::Element::tick</a></div><div class="ttdeci">virtual Fraction tick() const</div><div class="ttdef"><b>Definition:</b> <a href="element_8cpp_source.html#l00319">element.cpp:319</a></div></div>
<div class="ttc" id="namespaceMs_html_a2c92ce0204176ede1ab86e2f44ae6b9ea9ce833bcf3061cd326b2a3d7528a7699"><div class="ttname"><a href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea9ce833bcf3061cd326b2a3d7528a7699">Ms::ElementType::TEMPO_TEXT</a></div></div>
<div class="ttc" id="classMs_1_1Measure_html_a3c5e55d2f2291d5ee433a093c0b1dd04"><div class="ttname"><a href="classMs_1_1Measure.html#a3c5e55d2f2291d5ee433a093c0b1dd04">Ms::Measure::first</a></div><div class="ttdeci">Ms::Segment * first() const</div><div class="ttdef"><b>Definition:</b> <a href="measure_8h_source.html#l00149">measure.h:149</a></div></div>
<div class="ttc" id="classMs_1_1InputState_html_aa86bd802e3509aeecbad5d3756139c58"><div class="ttname"><a href="classMs_1_1InputState.html#aa86bd802e3509aeecbad5d3756139c58">Ms::InputState::noteEntryMethod</a></div><div class="ttdeci">NoteEntryMethod noteEntryMethod() const</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00104">input.h:104</a></div></div>
<div class="ttc" id="classMs_1_1StaffLines_html"><div class="ttname"><a href="classMs_1_1StaffLines.html">Ms::StaffLines</a></div><div class="ttdoc">The StaffLines class is the graphic representation of a staff, it draws the horizontal staff lines...</div><div class="ttdef"><b>Definition:</b> <a href="stafflines_8h_source.html#l00023">stafflines.h:23</a></div></div>
<div class="ttc" id="breaksdialog_8h_html"><div class="ttname"><a href="breaksdialog_8h.html">breaksdialog.h</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a757d2f7ee4f208f5b583ecf0348d506e"><div class="ttname"><a href="classMs_1_1ScoreView.html#a757d2f7ee4f208f5b583ecf0348d506e">Ms::ScoreView::drawBackground</a></div><div class="ttdeci">virtual void drawBackground(QPainter *p, const QRectF &amp;r) const</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l01132">scoreview.cpp:1132</a></div></div>
<div class="ttc" id="namespaceMs_html_a95ff6e2d794ab20e2a960e79f2d1637a"><div class="ttname"><a href="namespaceMs.html#a95ff6e2d794ab20e2a960e79f2d1637a">Ms::drawDebugInfo</a></div><div class="ttdeci">static void drawDebugInfo(QPainter &amp;p, const Element *_e)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l01175">scoreview.cpp:1175</a></div></div>
<div class="ttc" id="namespaceMs_html_aeccc894c5a64aba67bbfaf8fe1b755d5a10de4bc81f754b19b0d27246a0589c05"><div class="ttname"><a href="namespaceMs.html#aeccc894c5a64aba67bbfaf8fe1b755d5a10de4bc81f754b19b0d27246a0589c05">Ms::NOTE</a></div></div>
<div class="ttc" id="namespaceMs_html_a401306c67aaadf0a4102c60331e324d6a9eeb52badb613229884838847294b90d"><div class="ttname"><a href="namespaceMs.html#a401306c67aaadf0a4102c60331e324d6a9eeb52badb613229884838847294b90d">Ms::HDegreeType::ADD</a></div></div>
<div class="ttc" id="namespaceMs_html_a56785a0f227cf3d1d0a4891656a35daa"><div class="ttname"><a href="namespaceMs.html#a56785a0f227cf3d1d0a4891656a35daa">Ms::PropertyFlags</a></div><div class="ttdeci">PropertyFlags</div><div class="ttdef"><b>Definition:</b> <a href="property_8h_source.html#l00053">property.h:53</a></div></div>
<div class="ttc" id="namespaceMs_html_a175bedec052e1c2fd09257ffde43d847a3cc1dc9c08cf02f04fa8bda18b489c70"><div class="ttname"><a href="namespaceMs.html#a175bedec052e1c2fd09257ffde43d847a3cc1dc9c08cf02f04fa8bda18b489c70">Ms::SelectionFilterType::LYRICS</a></div></div>
<div class="ttc" id="classMs_1_1Selection_html_ac18d573f336887e1e49ba15a15f6d016"><div class="ttname"><a href="classMs_1_1Selection.html#ac18d573f336887e1e49ba15a15f6d016">Ms::Selection::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="select_8cpp_source.html#l00328">select.cpp:328</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_aec10219a39113609eef0b83de814b13c"><div class="ttname"><a href="classMs_1_1ScoreView.html#aec10219a39113609eef0b83de814b13c">Ms::ScoreView::getEditElement</a></div><div class="ttdeci">Element * getEditElement()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l05366">scoreview.cpp:5366</a></div></div>
<div class="ttc" id="classMs_1_1SplitStaff_html"><div class="ttname"><a href="classMs_1_1SplitStaff.html">Ms::SplitStaff</a></div><div class="ttdef"><b>Definition:</b> <a href="splitstaff_8h_source.html#l00034">splitstaff.h:34</a></div></div>
<div class="ttc" id="namespaceMs_html_a33b0ae0c9acf6508e69ad9b0cd36038bae1f2d5134ed2543d38a0de9751cf75d9"><div class="ttname"><a href="namespaceMs.html#a33b0ae0c9acf6508e69ad9b0cd36038bae1f2d5134ed2543d38a0de9751cf75d9">Ms::BeamMode::AUTO</a></div></div>
<div class="ttc" id="shadownote_8h_html"><div class="ttname"><a href="shadownote_8h.html">shadownote.h</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a8ebb01272b4e856e74658397e4ab05d3"><div class="ttname"><a href="classMs_1_1ScoreView.html#a8ebb01272b4e856e74658397e4ab05d3">Ms::ScoreView::setCursorVisible</a></div><div class="ttdeci">void setCursorVisible(bool v)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l04324">scoreview.cpp:4324</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_ac8fc4dd5e390b168a3a25159c654a840"><div class="ttname"><a href="classMs_1_1ScoreView.html#ac8fc4dd5e390b168a3a25159c654a840">Ms::ScoreView::setFocusRect</a></div><div class="ttdeci">void setFocusRect()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l01870">scoreview.cpp:1870</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_ac464040f737e975ff4e88ba8b46c686e"><div class="ttname"><a href="classMs_1_1ScoreView.html#ac464040f737e975ff4e88ba8b46c686e">Ms::ScoreView::setEditElement</a></div><div class="ttdeci">void setEditElement(Element *)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l05425">scoreview.cpp:5425</a></div></div>
<div class="ttc" id="classMs_1_1Selection_html_a009257797226b07065d8a225184178b3"><div class="ttname"><a href="classMs_1_1Selection.html#a009257797226b07065d8a225184178b3">Ms::Selection::staffStart</a></div><div class="ttdeci">int staffStart() const</div><div class="ttdef"><b>Definition:</b> <a href="select_8h_source.html#l00227">select.h:227</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a34b7ca83b68623778f5668c03b64ee35"><div class="ttname"><a href="classMs_1_1ScoreView.html#a34b7ca83b68623778f5668c03b64ee35">Ms::ScoreView::updateAll</a></div><div class="ttdeci">virtual void updateAll()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8h_source.html#l00505">scoreview.h:505</a></div></div>
<div class="ttc" id="classMs_1_1CmdState_html_a7bb0ba0b09e7253fdfd24649ef2b0116"><div class="ttname"><a href="classMs_1_1CmdState.html#a7bb0ba0b09e7253fdfd24649ef2b0116">Ms::CmdState::endStaff</a></div><div class="ttdeci">int endStaff() const</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l00302">score.h:302</a></div></div>
<div class="ttc" id="libmscore_2part_8h_html"><div class="ttname"><a href="libmscore_2part_8h.html">part.h</a></div></div>
<div class="ttc" id="classMs_1_1Spanner_html_a6924785e59e53240f35c6da8e846bc7e"><div class="ttname"><a href="classMs_1_1Spanner.html#a6924785e59e53240f35c6da8e846bc7e">Ms::Spanner::setTrack2</a></div><div class="ttdeci">void setTrack2(int v)</div><div class="ttdef"><b>Definition:</b> <a href="spanner_8h_source.html#l00184">spanner.h:184</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a5669436c1fd4244ffcd9483ae0f14303"><div class="ttname"><a href="classMs_1_1ScoreView.html#a5669436c1fd4244ffcd9483ae0f14303">Ms::ScoreView::editMode</a></div><div class="ttdeci">bool editMode() const</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8h_source.html#l00433">scoreview.h:433</a></div></div>
<div class="ttc" id="namespaceMs_html_ab3839d46f6bf923e4702c8d98a11444e"><div class="ttname"><a href="namespaceMs.html#ab3839d46f6bf923e4702c8d98a11444e">Ms::mimeSymbolFormat</a></div><div class="ttdeci">static const char mimeSymbolFormat[]</div><div class="ttdef"><b>Definition:</b> <a href="mscore_8h_source.html#l00098">mscore.h:98</a></div></div>
<div class="ttc" id="classMs_1_1SysStaff_html_a15edb8450b4cbf7ec4c20591804def65"><div class="ttname"><a href="classMs_1_1SysStaff.html#a15edb8450b4cbf7ec4c20591804def65">Ms::SysStaff::show</a></div><div class="ttdeci">bool show() const</div><div class="ttdef"><b>Definition:</b> <a href="system_8h_source.html#l00073">system.h:73</a></div></div>
<div class="ttc" id="namespaceMs_html_a820f9425aed4d3a065e563e3d60622ba"><div class="ttname"><a href="namespaceMs.html#a820f9425aed4d3a065e563e3d60622ba">Ms::thinPadding</a></div><div class="ttdeci">constexpr qreal thinPadding</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03432">scoreview.cpp:3432</a></div></div>
<div class="ttc" id="classMs_1_1MScore_html_a7490ecd88338d8ff3ffc39f5545171a4"><div class="ttname"><a href="classMs_1_1MScore.html#a7490ecd88338d8ff3ffc39f5545171a4">Ms::MScore::_error</a></div><div class="ttdeci">static MsError _error</div><div class="ttdef"><b>Definition:</b> <a href="mscore_8h_source.html#l00306">mscore.h:306</a></div></div>
<div class="ttc" id="classMs_1_1SpannerSegment_html_ae988f78aec0a13e5a204fe135b6b0ae0"><div class="ttname"><a href="classMs_1_1SpannerSegment.html#ae988f78aec0a13e5a204fe135b6b0ae0">Ms::SpannerSegment::system</a></div><div class="ttdeci">System * system() const</div><div class="ttdef"><b>Definition:</b> <a href="spanner_8h_source.html#l00065">spanner.h:65</a></div></div>
<div class="ttc" id="classMs_1_1InputState_html_ad23b3283d9647903d82a42461989506e"><div class="ttname"><a href="classMs_1_1InputState.html#ad23b3283d9647903d82a42461989506e">Ms::InputState::duration</a></div><div class="ttdeci">TDuration duration() const</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00067">input.h:67</a></div></div>
<div class="ttc" id="namespaceMs_html_a2c92ce0204176ede1ab86e2f44ae6b9eafec1fffeb63a24b31b41a5e941132ca9"><div class="ttname"><a href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9eafec1fffeb63a24b31b41a5e941132ca9">Ms::ElementType::STICKING</a></div></div>
<div class="ttc" id="namespaceMs_html_a2c92ce0204176ede1ab86e2f44ae6b9ea2c1e7e81a01ed3fa8c227e344c4f6662"><div class="ttname"><a href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea2c1e7e81a01ed3fa8c227e344c4f6662">Ms::ElementType::HBOX</a></div></div>
<div class="ttc" id="namespaceMs_html_a2c92ce0204176ede1ab86e2f44ae6b9ea1a34f2a487515f44d55d279dd4f3f2b9"><div class="ttname"><a href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea1a34f2a487515f44d55d279dd4f3f2b9">Ms::ElementType::FBOX</a></div></div>
<div class="ttc" id="classMs_1_1Selection_html_acb1497cbea90aadadfdfe9d21067e878"><div class="ttname"><a href="classMs_1_1Selection.html#acb1497cbea90aadadfdfe9d21067e878">Ms::Selection::noteList</a></div><div class="ttdeci">std::vector&lt; Note * &gt; noteList(int track=-1) const</div><div class="ttdef"><b>Definition:</b> <a href="select_8cpp_source.html#l01096">select.cpp:1096</a></div></div>
<div class="ttc" id="navigator_8h_html"><div class="ttname"><a href="navigator_8h.html">navigator.h</a></div></div>
<div class="ttc" id="undo_8h_html"><div class="ttname"><a href="undo_8h.html">undo.h</a></div><div class="ttdoc">Definition of undo-releated classes and structs. </div></div>
<div class="ttc" id="classMs_1_1Spanner_html_af1542368ed7ab82341987ae59acf5e4e"><div class="ttname"><a href="classMs_1_1Spanner.html#af1542368ed7ab82341987ae59acf5e4e">Ms::Spanner::setTick</a></div><div class="ttdeci">void setTick(const Fraction &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="spanner_8cpp_source.html#l01056">spanner.cpp:1056</a></div></div>
<div class="ttc" id="classMs_1_1Note_html"><div class="ttname"><a href="classMs_1_1Note.html">Ms::Note</a></div><div class="ttdoc">Graphic representation of a note. </div><div class="ttdef"><b>Definition:</b> <a href="note_8h_source.html#l00235">note.h:235</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a7652f9571dcfccf70cfd2c14e4531c5b"><div class="ttname"><a href="classMs_1_1Score.html#a7652f9571dcfccf70cfd2c14e4531c5b">Ms::Score::prevElement</a></div><div class="ttdeci">Element * prevElement()</div><div class="ttdef"><b>Definition:</b> <a href="navigate_8cpp_source.html#l00659">navigate.cpp:659</a></div></div>
<div class="ttc" id="classMs_1_1Harmony_html"><div class="ttname"><a href="classMs_1_1Harmony.html">Ms::Harmony</a></div><div class="ttdef"><b>Definition:</b> <a href="harmony_8h_source.html#l00069">harmony.h:69</a></div></div>
<div class="ttc" id="namespaceMs_html_a0c4aeeb6df2cc7465f9c33aacdbbbe4f"><div class="ttname"><a href="namespaceMs.html#a0c4aeeb6df2cc7465f9c33aacdbbbe4f">Ms::swap</a></div><div class="ttdeci">void swap(PartChannelSettingsLink &amp;l1, PartChannelSettingsLink &amp;l2)</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2instrument_8cpp_source.html#l01039">instrument.cpp:1039</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_afdc4d0de076f98453fd5991e95e15651"><div class="ttname"><a href="classMs_1_1Score.html#afdc4d0de076f98453fd5991e95e15651">Ms::Score::endTick</a></div><div class="ttdeci">Fraction endTick() const</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8cpp_source.html#l01710">score.cpp:1710</a></div></div>
<div class="ttc" id="classMs_1_1MScore_html_a69bdf5fa192ef7ce156a07497e67cda1"><div class="ttname"><a href="classMs_1_1MScore.html#a69bdf5fa192ef7ce156a07497e67cda1">Ms::MScore::nudgeStep10</a></div><div class="ttdeci">static qreal nudgeStep10</div><div class="ttdef"><b>Definition:</b> <a href="mscore_8h_source.html#l00350">mscore.h:350</a></div></div>
<div class="ttc" id="scoreaccessibility_8h_html"><div class="ttname"><a href="scoreaccessibility_8h.html">scoreaccessibility.h</a></div></div>
<div class="ttc" id="namespaceMs_html_a1e1231744bf13b1892573eaec52725f5"><div class="ttname"><a href="namespaceMs.html#a1e1231744bf13b1892573eaec52725f5">Ms::addSlur</a></div><div class="ttdeci">static void addSlur(const Notation &amp;notation, SlurStack &amp;slurs, ChordRest *cr, const int tick, MxmlLogger *logger, const QXmlStreamReader *const xmlreader)</div><div class="ttdef"><b>Definition:</b> <a href="importmxmlpass2_8cpp_source.html#l05396">importmxmlpass2.cpp:5396</a></div></div>
<div class="ttc" id="classMs_1_1MScore_html_a0b36375e5c943b4dca91624f0cdd4c63"><div class="ttname"><a href="classMs_1_1MScore.html#a0b36375e5c943b4dca91624f0cdd4c63">Ms::MScore::showBoundingRect</a></div><div class="ttdeci">static bool showBoundingRect</div><div class="ttdef"><b>Definition:</b> <a href="mscore_8h_source.html#l00361">mscore.h:361</a></div></div>
<div class="ttc" id="namespaceMs_html_a3b085ddb3e3b890843f2e33874b9fa4baf684bf05fa3e81528c84d1d281d839f1"><div class="ttname"><a href="namespaceMs.html#a3b085ddb3e3b890843f2e33874b9fa4baf684bf05fa3e81528c84d1d281d839f1">Ms::ClefType::TAB</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a9862650c532773456b7a4e8b74b9a1e6"><div class="ttname"><a href="classMs_1_1ScoreView.html#a9862650c532773456b7a4e8b74b9a1e6">Ms::ScoreView::checkSelectionStateForInsertMeasure</a></div><div class="ttdeci">MeasureBase * checkSelectionStateForInsertMeasure()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l04884">scoreview.cpp:4884</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a79b3e923044c67ce26c45dd20f22d849"><div class="ttname"><a href="classMs_1_1Score.html#a79b3e923044c67ce26c45dd20f22d849">Ms::Score::pos</a></div><div class="ttdeci">Fraction pos()</div><div class="ttdef"><b>Definition:</b> <a href="edit_8cpp_source.html#l00139">edit.cpp:139</a></div></div>
<div class="ttc" id="classMs_1_1Segment_html"><div class="ttname"><a href="classMs_1_1Segment.html">Ms::Segment</a></div><div class="ttdef"><b>Definition:</b> <a href="segment_8h_source.html#l00050">segment.h:50</a></div></div>
<div class="ttc" id="classMs_1_1Segment_html_aacaa89821976f55a33688d3a19e69565"><div class="ttname"><a href="classMs_1_1Segment.html#aacaa89821976f55a33688d3a19e69565">Ms::Segment::next1MMenabled</a></div><div class="ttdeci">Segment * next1MMenabled() const</div><div class="ttdef"><b>Definition:</b> <a href="segment_8cpp_source.html#l00273">segment.cpp:273</a></div></div>
<div class="ttc" id="drumroll_8h_html"><div class="ttname"><a href="drumroll_8h.html">drumroll.h</a></div></div>
<div class="ttc" id="classMs_1_1Measure_html"><div class="ttname"><a href="classMs_1_1Measure.html">Ms::Measure</a></div><div class="ttdoc">one measure in a system </div><div class="ttdef"><b>Definition:</b> <a href="measure_8h_source.html#l00066">measure.h:66</a></div></div>
<div class="ttc" id="classMs_1_1Chord_html_a77eab400665dc934f24de11fc7ac1c4e"><div class="ttname"><a href="classMs_1_1Chord.html#a77eab400665dc934f24de11fc7ac1c4e">Ms::Chord::notes</a></div><div class="ttdeci">std::vector&lt; Note * &gt; &amp; notes()</div><div class="ttdef"><b>Definition:</b> <a href="chord_8h_source.html#l00123">chord.h:123</a></div></div>
<div class="ttc" id="editdrumset_8h_html"><div class="ttname"><a href="editdrumset_8h.html">editdrumset.h</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html"><div class="ttname"><a href="classMs_1_1ScoreView.html">Ms::ScoreView</a></div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8h_source.html#l00156">scoreview.h:156</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a81ff7d4cdedb1b3193c4ab719b6a198d"><div class="ttname"><a href="classMs_1_1ScoreView.html#a81ff7d4cdedb1b3193c4ab719b6a198d">Ms::ScoreView::harmonyBeatsTab</a></div><div class="ttdeci">void harmonyBeatsTab(bool noterest, bool back)</div><div class="ttdef"><b>Definition:</b> <a href="editharmony_8cpp_source.html#l00101">editharmony.cpp:101</a></div></div>
<div class="ttc" id="pitchspelling_8h_html"><div class="ttname"><a href="pitchspelling_8h.html">pitchspelling.h</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_aaa20fcc0a0a1f86b0b0d859648341c49"><div class="ttname"><a href="classMs_1_1Score.html#aaa20fcc0a0a1f86b0b0d859648341c49">Ms::Score::spatium</a></div><div class="ttdeci">qreal spatium() const</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l00904">score.h:904</a></div></div>
<div class="ttc" id="namespaceMs_html_a24593d5bc01ac95fdbec3d354d258894aeb7c90481b6f7672bbbcd3775a2aae7d"><div class="ttname"><a href="namespaceMs.html#a24593d5bc01ac95fdbec3d354d258894aeb7c90481b6f7672bbbcd3775a2aae7d">Ms::SegmentType::EndBarLine</a></div></div>
<div class="ttc" id="classMs_1_1Element_html"><div class="ttname"><a href="classMs_1_1Element.html">Ms::Element</a></div><div class="ttdoc">Base class of score layout elements. </div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00163">element.h:163</a></div></div>
<div class="ttc" id="namespaceMs_html_a9b1fb02f916c554309371c6513550a1bafa177138f94a7ea01f549b1aa7893d03"><div class="ttname"><a href="namespaceMs.html#a9b1fb02f916c554309371c6513550a1bafa177138f94a7ea01f549b1aa7893d03">Ms::LayoutMode::SYSTEM</a></div></div>
<div class="ttc" id="classMs_1_1InputState_html_a06f803b5c2481d3cb34019698a8861bd"><div class="ttname"><a href="classMs_1_1InputState.html#a06f803b5c2481d3cb34019698a8861bd">Ms::InputState::setDuration</a></div><div class="ttdeci">void setDuration(const TDuration &amp;d)</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00066">input.h:66</a></div></div>
<div class="ttc" id="namespaceMs_html_a4723eaf0d51b78054133d58d1a6935cb"><div class="ttname"><a href="namespaceMs.html#a4723eaf0d51b78054133d58d1a6935cb">Ms::sort</a></div><div class="ttdeci">static void sort(int &amp;r1, int &amp;c1, int &amp;r2, int &amp;c2)</div><div class="ttdoc">swap (r1,c1) with (r2,c2) if they are not sorted </div><div class="ttdef"><b>Definition:</b> <a href="textbase_8cpp_source.html#l00109">textbase.cpp:109</a></div></div>
<div class="ttc" id="classMs_1_1System_html_a706bf742c241c75854c66141cbba2ca5"><div class="ttname"><a href="classMs_1_1System.html#a706bf742c241c75854c66141cbba2ca5">Ms::System::firstMeasure</a></div><div class="ttdeci">Measure * firstMeasure() const</div><div class="ttdef"><b>Definition:</b> <a href="system_8cpp_source.html#l01195">system.cpp:1195</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a8ab1c2eb8f17f4f020d21506a6188000"><div class="ttname"><a href="classMs_1_1Score.html#a8ab1c2eb8f17f4f020d21506a6188000">Ms::Score::addLyrics</a></div><div class="ttdeci">void addLyrics(const Fraction &amp;tick, int staffIdx, const QString &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8cpp_source.html#l03569">score.cpp:3569</a></div></div>
<div class="ttc" id="classMs_1_1MeasureBase_html"><div class="ttname"><a href="classMs_1_1MeasureBase.html">Ms::MeasureBase</a></div><div class="ttdoc">Virtual base class for Measure, HBox and VBox. </div><div class="ttdef"><b>Definition:</b> <a href="measurebase_8h_source.html#l00061">measurebase.h:61</a></div></div>
<div class="ttc" id="namespaceMs_html_ab7904232a877db2441531871cf3f5108"><div class="ttname"><a href="namespaceMs.html#ab7904232a877db2441531871cf3f5108">Ms::DPI</a></div><div class="ttdeci">static constexpr qreal DPI</div><div class="ttdef"><b>Definition:</b> <a href="mscore_8h_source.html#l00090">mscore.h:90</a></div></div>
<div class="ttc" id="classMs_1_1InputState_html_a055ef7159a7af443a067a3e067a69a79"><div class="ttname"><a href="classMs_1_1InputState.html#a055ef7159a7af443a067a3e067a69a79">Ms::InputState::drumNote</a></div><div class="ttdeci">int drumNote() const</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00079">input.h:79</a></div></div>
<div class="ttc" id="namespaceMs_html_ad1b3e57dfd5b26a280bf2ebde66b9d5aaf08c95b54eefa7d745685856db641133"><div class="ttname"><a href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aaf08c95b54eefa7d745685856db641133">Ms::Tid::POET</a></div></div>
<div class="ttc" id="classMs_1_1Drumset_html_a86efad5c5a2ed1b101524bed56206348"><div class="ttname"><a href="classMs_1_1Drumset.html#a86efad5c5a2ed1b101524bed56206348">Ms::Drumset::voice</a></div><div class="ttdeci">int voice(int pitch) const</div><div class="ttdef"><b>Definition:</b> <a href="drumset_8h_source.html#l00076">drumset.h:76</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a67a1f22da74237b491206ae705ebb688"><div class="ttname"><a href="classMs_1_1Score.html#a67a1f22da74237b491206ae705ebb688">Ms::Score::inputState</a></div><div class="ttdeci">const InputState &amp; inputState() const</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l00928">score.h:928</a></div></div>
<div class="ttc" id="classMs_1_1MeasureBase_html_a4957f952a3eca95bba93abfe047420bd"><div class="ttname"><a href="classMs_1_1MeasureBase.html#a4957f952a3eca95bba93abfe047420bd">Ms::MeasureBase::tick</a></div><div class="ttdeci">Fraction tick() const override</div><div class="ttdef"><b>Definition:</b> <a href="measurebase_8cpp_source.html#l00340">measurebase.cpp:340</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_a7e7ba0487a1113884ed218ba74c6a7d6"><div class="ttname"><a href="classMs_1_1Element.html#a7e7ba0487a1113884ed218ba74c6a7d6">Ms::Element::voice</a></div><div class="ttdeci">int voice() const</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00359">element.h:359</a></div></div>
<div class="ttc" id="classMs_1_1Sticking_html"><div class="ttname"><a href="classMs_1_1Sticking.html">Ms::Sticking</a></div><div class="ttdoc">Drum sticking. </div><div class="ttdef"><b>Definition:</b> <a href="sticking_8h_source.html#l00032">sticking.h:32</a></div></div>
<div class="ttc" id="fingering_8h_html"><div class="ttname"><a href="fingering_8h.html">fingering.h</a></div></div>
<div class="ttc" id="libmscore_2score_8h_html"><div class="ttname"><a href="libmscore_2score_8h.html">score.h</a></div><div class="ttdoc">Definition of Score class. </div></div>
<div class="ttc" id="namespaceMs_html_a3369cc1ece2bbd874c148455b5db4b86a4c1e3a498a71f85d23ea30283022c6a3"><div class="ttname"><a href="namespaceMs.html#a3369cc1ece2bbd874c148455b5db4b86a4c1e3a498a71f85d23ea30283022c6a3">Ms::Form::PERCUSSION</a></div></div>
<div class="ttc" id="classMs_1_1Segment_html_a23cde3c97359266e2787b107aa0c8cdf"><div class="ttname"><a href="classMs_1_1Segment.html#a23cde3c97359266e2787b107aa0c8cdf">Ms::Segment::tick</a></div><div class="ttdeci">Fraction tick() const override</div><div class="ttdef"><b>Definition:</b> <a href="segment_8cpp_source.html#l00212">segment.cpp:212</a></div></div>
<div class="ttc" id="classMs_1_1InputState_html_add56e365ff1a6963bc5ddb90d5c9909b"><div class="ttname"><a href="classMs_1_1InputState.html#add56e365ff1a6963bc5ddb90d5c9909b">Ms::InputState::voice</a></div><div class="ttdeci">int voice() const</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00082">input.h:82</a></div></div>
<div class="ttc" id="classMs_1_1SpannerSegment_html_aef566e6223c15bad8cba7de7a9bc63dc"><div class="ttname"><a href="classMs_1_1SpannerSegment.html#aef566e6223c15bad8cba7de7a9bc63dc">Ms::SpannerSegment::spanner</a></div><div class="ttdeci">Spanner * spanner() const</div><div class="ttdef"><b>Definition:</b> <a href="spanner_8h_source.html#l00052">spanner.h:52</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a241c185eaedfa9b83e9eb5e195a7ce59"><div class="ttname"><a href="classMs_1_1ScoreView.html#a241c185eaedfa9b83e9eb5e195a7ce59">Ms::ScoreView::searchRehearsalMark</a></div><div class="ttdeci">bool searchRehearsalMark(const QString &amp;s)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l05035">scoreview.cpp:5035</a></div></div>
<div class="ttc" id="avsomrdrawer_8h_html"><div class="ttname"><a href="avsomrdrawer_8h.html">avsomrdrawer.h</a></div></div>
<div class="ttc" id="classMs_1_1SpannerSegment_html_a478ec654aceaeb8e2a90196db7d02f60"><div class="ttname"><a href="classMs_1_1SpannerSegment.html#a478ec654aceaeb8e2a90196db7d02f60">Ms::SpannerSegment::setSelected</a></div><div class="ttdeci">virtual void setSelected(bool f) override</div><div class="ttdef"><b>Definition:</b> <a href="spanner_8cpp_source.html#l00257">spanner.cpp:257</a></div></div>
<div class="ttc" id="namespaceMs_html_a9ac3d39c415913ce40aa7e57a5f3fb55a65c329d60e40fb588c19c91b8bba597a"><div class="ttname"><a href="namespaceMs.html#a9ac3d39c415913ce40aa7e57a5f3fb55a65c329d60e40fb588c19c91b8bba597a">Ms::HarmonyType::ROMAN</a></div></div>
<div class="ttc" id="structMs_1_1SmoothPanSettings_html_aceb13402efb7475ad57c2652693fc877"><div class="ttname"><a href="structMs_1_1SmoothPanSettings.html#aceb13402efb7475ad57c2652693fc877">Ms::SmoothPanSettings::loadFromPreferences</a></div><div class="ttdeci">void loadFromPreferences()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l05602">scoreview.cpp:5602</a></div></div>
<div class="ttc" id="classMs_1_1NoteHead_html_a31c343e7e7f09fee0246ef6a1d7a4e87"><div class="ttname"><a href="classMs_1_1NoteHead.html#a31c343e7e7f09fee0246ef6a1d7a4e87">Ms::NoteHead::Type</a></div><div class="ttdeci">Type</div><div class="ttdef"><b>Definition:</b> <a href="note_8h_source.html#l00147">note.h:147</a></div></div>
<div class="ttc" id="namespaceMs_html_abe8f8da5976e3a727f1a3a7a117e73de"><div class="ttname"><a href="namespaceMs.html#abe8f8da5976e3a727f1a3a7a117e73de">Ms::preferences</a></div><div class="ttdeci">Preferences preferences</div><div class="ttdef"><b>Definition:</b> <a href="inspectorplugin_8cpp_source.html#l00031">inspectorplugin.cpp:31</a></div></div>
<div class="ttc" id="namespaceMs_html"><div class="ttname"><a href="namespaceMs.html">Ms</a></div><div class="ttdoc">MusicXML export. </div><div class="ttdef"><b>Definition:</b> <a href="aeolus_8cpp_source.html#l00026">aeolus.cpp:26</a></div></div>
<div class="ttc" id="namespaceMs_html_a5340e53ea850ac4e67c071825916e469"><div class="ttname"><a href="namespaceMs.html#a5340e53ea850ac4e67c071825916e469">Ms::Placement</a></div><div class="ttdeci">Placement</div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00394">types.h:394</a></div></div>
<div class="ttc" id="namespaceMs_html_aa15d8b46ea58d6bb59b084d6d7bcff7daa2770969c827f0f2910f6179418462df"><div class="ttname"><a href="namespaceMs.html#aa15d8b46ea58d6bb59b084d6d7bcff7daa2770969c827f0f2910f6179418462df">Ms::POS::CURRENT</a></div></div>
<div class="ttc" id="classMs_1_1Spanner_html_a4dc69fc35fde4cd35118dde886f292aea10de4bc81f754b19b0d27246a0589c05"><div class="ttname"><a href="classMs_1_1Spanner.html#a4dc69fc35fde4cd35118dde886f292aea10de4bc81f754b19b0d27246a0589c05">Ms::Spanner::Anchor::NOTE</a></div></div>
<div class="ttc" id="namespaceMs_html_a2c92ce0204176ede1ab86e2f44ae6b9ead109e83750643c68685b2ad8b669d136"><div class="ttname"><a href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ead109e83750643c68685b2ad8b669d136">Ms::ElementType::SLUR_SEGMENT</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_a77459c7e2f1077ec3b68b11c26640685"><div class="ttname"><a href="classMs_1_1Element.html#a77459c7e2f1077ec3b68b11c26640685">Ms::Element::intersects</a></div><div class="ttdeci">bool intersects(const QRectF &amp;r) const</div><div class="ttdef"><b>Definition:</b> <a href="element_8cpp_source.html#l00567">element.cpp:567</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_af7b330b203a0ae0903e15f97a9e7643c"><div class="ttname"><a href="classMs_1_1ScoreView.html#af7b330b203a0ae0903e15f97a9e7643c">Ms::ScoreView::mscoreState</a></div><div class="ttdeci">ScoreState mscoreState() const</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03936">scoreview.cpp:3936</a></div></div>
<div class="ttc" id="namespaceMs_html_a175bedec052e1c2fd09257ffde43d847ac8232229a477d4710dddc56eb98ed44e"><div class="ttname"><a href="namespaceMs.html#a175bedec052e1c2fd09257ffde43d847ac8232229a477d4710dddc56eb98ed44e">Ms::SelectionFilterType::FIGURED_BASS</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a8a5cc0612c5b0787dfc75f7f122c7220"><div class="ttname"><a href="classMs_1_1ScoreView.html#a8a5cc0612c5b0787dfc75f7f122c7220">Ms::ScoreView::normalCut</a></div><div class="ttdeci">void normalCut()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l01947">scoreview.cpp:1947</a></div></div>
<div class="ttc" id="editstaff_8h_html"><div class="ttname"><a href="editstaff_8h.html">editstaff.h</a></div></div>
<div class="ttc" id="classMs_1_1Spanner_html_aa58ff572b3afa46620e63c5f240d5fe1"><div class="ttname"><a href="classMs_1_1Spanner.html#aa58ff572b3afa46620e63c5f240d5fe1">Ms::Spanner::setAnchor</a></div><div class="ttdeci">void setAnchor(Anchor a)</div><div class="ttdef"><b>Definition:</b> <a href="spanner_8h_source.html#l00191">spanner.h:191</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_accef4917f0fce522b94b90a3ccd0f76b"><div class="ttname"><a href="classMs_1_1Element.html#accef4917f0fce522b94b90a3ccd0f76b">Ms::Element::isEditable</a></div><div class="ttdeci">virtual bool isEditable() const</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00326">element.h:326</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_afdedce94ce766c0c71bbd30ae610752b"><div class="ttname"><a href="classMs_1_1Score.html#afdedce94ce766c0c71bbd30ae610752b">Ms::Score::selection</a></div><div class="ttdeci">const Selection &amp; selection() const</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l00830">score.h:830</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_aa3b85eb58a8f7f4476fbd05b59253585"><div class="ttname"><a href="classMs_1_1Score.html#aa3b85eb58a8f7f4476fbd05b59253585">Ms::Score::select</a></div><div class="ttdeci">void select(Element *obj, SelectType=SelectType::SINGLE, int staff=0)</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8cpp_source.html#l03036">score.cpp:3036</a></div></div>
<div class="ttc" id="classMs_1_1StaffLines_html_a66b7898106ea89c187b7d21f1e612ef4"><div class="ttname"><a href="classMs_1_1StaffLines.html#a66b7898106ea89c187b7d21f1e612ef4">Ms::StaffLines::canvasPos</a></div><div class="ttdeci">QPointF canvasPos() const override</div><div class="ttdoc">position in page coordinates </div><div class="ttdef"><b>Definition:</b> <a href="stafflines_8cpp_source.html#l00060">stafflines.cpp:60</a></div></div>
<div class="ttc" id="text_8h_html"><div class="ttname"><a href="text_8h.html">text.h</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a42b6cf66302e9e231aed43340fc8ec74"><div class="ttname"><a href="classMs_1_1ScoreView.html#a42b6cf66302e9e231aed43340fc8ec74">Ms::ScoreView::showOmr</a></div><div class="ttdeci">void showOmr(bool flag)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03052">scoreview.cpp:3052</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_abedb85f31b0dc920af6086c71235c3da"><div class="ttname"><a href="classMs_1_1ScoreView.html#abedb85f31b0dc920af6086c71235c3da">Ms::ScoreView::startNoteEntryMode</a></div><div class="ttdeci">virtual void startNoteEntryMode() override</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l05388">scoreview.cpp:5388</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_aa891ef802b360f4c5b7cd73013ca152d"><div class="ttname"><a href="classMs_1_1ScoreView.html#aa891ef802b360f4c5b7cd73013ca152d">Ms::ScoreView::constraintCanvas</a></div><div class="ttdeci">void constraintCanvas(int *dxx, int *dyy)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l01608">scoreview.cpp:1608</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a108bf7df15d3b2a06d31ba22314cb70a"><div class="ttname"><a href="classMs_1_1ScoreView.html#a108bf7df15d3b2a06d31ba22314cb70a">Ms::ScoreView::searchMeasure</a></div><div class="ttdeci">bool searchMeasure(int i)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l05008">scoreview.cpp:5008</a></div></div>
<div class="ttc" id="namespaceMs_html_ad1b3e57dfd5b26a280bf2ebde66b9d5a"><div class="ttname"><a href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5a">Ms::Tid</a></div><div class="ttdeci">Tid</div><div class="ttdoc">Enumerates the list of built-in text substyles. </div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00474">types.h:474</a></div></div>
<div class="ttc" id="noteline_8h_html"><div class="ttname"><a href="noteline_8h.html">noteline.h</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_ac7a887cb6391a0e5c655ef59718188ad"><div class="ttname"><a href="classMs_1_1ScoreView.html#ac7a887cb6391a0e5c655ef59718188ad">Ms::ScoreView::drawAnchorLines</a></div><div class="ttdeci">void drawAnchorLines(QPainter &amp;painter)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l01070">scoreview.cpp:1070</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_aba6085db1523002d9aee019775846aec"><div class="ttname"><a href="classMs_1_1Score.html#aba6085db1523002d9aee019775846aec">Ms::Score::cmdJoinMeasure</a></div><div class="ttdeci">void cmdJoinMeasure(Measure *, Measure *)</div><div class="ttdef"><b>Definition:</b> <a href="joinMeasure_8cpp_source.html#l00026">joinMeasure.cpp:26</a></div></div>
<div class="ttc" id="classMs_1_1Spanner_html_afe04fd23f1b64719c91eb7b6ec42be69"><div class="ttname"><a href="classMs_1_1Spanner.html#afe04fd23f1b64719c91eb7b6ec42be69">Ms::Spanner::add</a></div><div class="ttdeci">virtual void add(Element *) override</div><div class="ttdef"><b>Definition:</b> <a href="spanner_8cpp_source.html#l00372">spanner.cpp:372</a></div></div>
<div class="ttc" id="namespaceMs_html_a20d9370e85f87d0b2594fd90665f8cc1a6dff4f0bcb369949446e0f3400db6d5c"><div class="ttname"><a href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a6dff4f0bcb369949446e0f3400db6d5c">Ms::ViewState::NOTE_ENTRY</a></div></div>
<div class="ttc" id="namespaceMs_html_acebbf1c7a6bee6fc8049adb5141f59d4a1903f54cd46d54aa3200a4508c948db0"><div class="ttname"><a href="namespaceMs.html#acebbf1c7a6bee6fc8049adb5141f59d4a1903f54cd46d54aa3200a4508c948db0">Ms::CursorType::POS</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a64fbe9d2a6d143b1068a61d1eb03eac7"><div class="ttname"><a href="classMs_1_1ScoreView.html#a64fbe9d2a6d143b1068a61d1eb03eac7">Ms::ScoreView::editData</a></div><div class="ttdeci">EditData editData</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8h_source.html#l00184">scoreview.h:184</a></div></div>
<div class="ttc" id="classMs_1_1TextCursor_html"><div class="ttname"><a href="classMs_1_1TextCursor.html">Ms::TextCursor</a></div><div class="ttdef"><b>Definition:</b> <a href="textbase_8h_source.html#l00104">textbase.h:104</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_ae629bd6513248811b5c7823836982ee8"><div class="ttname"><a href="classMs_1_1Score.html#ae629bd6513248811b5c7823836982ee8">Ms::Score::endCmd</a></div><div class="ttdeci">void endCmd(bool rollback=false)</div><div class="ttdoc">End a GUI command by (if undo) ending a user-visble undo and (always) updating the redraw area...</div><div class="ttdef"><b>Definition:</b> <a href="cmd_8cpp_source.html#l00247">cmd.cpp:247</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a139c3b3e2e59f504eb23157f2bcec731"><div class="ttname"><a href="classMs_1_1Score.html#a139c3b3e2e59f504eb23157f2bcec731">Ms::Score::upAltCtrl</a></div><div class="ttdeci">Note * upAltCtrl(Note *) const</div><div class="ttdef"><b>Definition:</b> <a href="navigate_8cpp_source.html#l00221">navigate.cpp:221</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_aac5cfbf34cbd22da196fd31944a260da"><div class="ttname"><a href="classMs_1_1Score.html#aac5cfbf34cbd22da196fd31944a260da">Ms::Score::masterScore</a></div><div class="ttdeci">MasterScore * masterScore() const</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l01074">score.h:1074</a></div></div>
<div class="ttc" id="namespaceMs_html_a2c92ce0204176ede1ab86e2f44ae6b9ea096a4e9d4aa1495cdf3dabcc1ddbfbe1"><div class="ttname"><a href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea096a4e9d4aa1495cdf3dabcc1ddbfbe1">Ms::ElementType::REHEARSAL_MARK</a></div></div>
<div class="ttc" id="namespaceMs_html_a1a43a84e57fe33057a3e17aa85488d5f"><div class="ttname"><a href="namespaceMs.html#a1a43a84e57fe33057a3e17aa85488d5f">Ms::seq</a></div><div class="ttdeci">Seq * seq</div><div class="ttdef"><b>Definition:</b> <a href="seq_8cpp_source.html#l00062">seq.cpp:62</a></div></div>
<div class="ttc" id="classMs_1_1Selection_html_a575e251b4d2315e53a2ad9a6c51b0c59"><div class="ttname"><a href="classMs_1_1Selection.html#a575e251b4d2315e53a2ad9a6c51b0c59">Ms::Selection::isLocked</a></div><div class="ttdeci">bool isLocked() const</div><div class="ttdef"><b>Definition:</b> <a href="select_8h_source.html#l00186">select.h:186</a></div></div>
<div class="ttc" id="pedal_8h_html"><div class="ttname"><a href="pedal_8h.html">pedal.h</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a9ab989307fe6147eb549078026f8653e"><div class="ttname"><a href="classMs_1_1ScoreView.html#a9ab989307fe6147eb549078026f8653e">Ms::ScoreView::changeEditElement</a></div><div class="ttdeci">void changeEditElement(Element *)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l04302">scoreview.cpp:4302</a></div></div>
<div class="ttc" id="structMs_1_1Preferences_html_a435c522d4eae2e8436b22f42919efd7b"><div class="ttname"><a href="structMs_1_1Preferences.html#a435c522d4eae2e8436b22f42919efd7b">Ms::Preferences::getInt</a></div><div class="ttdeci">int getInt(QString) const</div><div class="ttdef"><b>Definition:</b> <a href="inspectorplugin_8cpp_source.html#l00033">inspectorplugin.cpp:33</a></div></div>
<div class="ttc" id="namespaceMs_html_a2c92ce0204176ede1ab86e2f44ae6b9ea49f1f9beb48e7b006a35b2377403bea8"><div class="ttname"><a href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea49f1f9beb48e7b006a35b2377403bea8">Ms::ElementType::SEGMENT</a></div></div>
<div class="ttc" id="classMs_1_1MasterScore_html_a8bb5fd596eb01729ba5f47f52c2fc11c"><div class="ttname"><a href="classMs_1_1MasterScore.html#a8bb5fd596eb01729ba5f47f52c2fc11c">Ms::MasterScore::omr</a></div><div class="ttdeci">Omr * omr() const</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l01385">score.h:1385</a></div></div>
<div class="ttc" id="classMs_1_1Page_html_acf51ebcba73d3f26a68a185565506ef9"><div class="ttname"><a href="classMs_1_1Page.html#acf51ebcba73d3f26a68a185565506ef9">Ms::Page::lm</a></div><div class="ttdeci">qreal lm() const</div><div class="ttdef"><b>Definition:</b> <a href="page_8cpp_source.html#l00491">page.cpp:491</a></div></div>
<div class="ttc" id="timesig_8h_html"><div class="ttname"><a href="timesig_8h.html">timesig.h</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a2be6afdc4e50ebb9562554089fd54f07"><div class="ttname"><a href="classMs_1_1ScoreView.html#a2be6afdc4e50ebb9562554089fd54f07">Ms::ScoreView::fotoModeCopy</a></div><div class="ttdeci">void fotoModeCopy(bool includeLink=false)</div><div class="ttdef"><b>Definition:</b> <a href="fotomode_8cpp_source.html#l00435">fotomode.cpp:435</a></div></div>
<div class="ttc" id="classMs_1_1Measure_html_a66a3e42855dec1d88936966d197a0ac0"><div class="ttname"><a href="classMs_1_1Measure.html#a66a3e42855dec1d88936966d197a0ac0">Ms::Measure::findSegment</a></div><div class="ttdeci">Segment * findSegment(SegmentType st, const Fraction &amp;f) const</div><div class="ttdef"><b>Definition:</b> <a href="measure_8h_source.html#l00205">measure.h:205</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a4892156600af3c4f984c9834b8bab17d"><div class="ttname"><a href="classMs_1_1ScoreView.html#a4892156600af3c4f984c9834b8bab17d">Ms::ScoreView::dragScoreView</a></div><div class="ttdeci">void dragScoreView(QMouseEvent *ev)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03259">scoreview.cpp:3259</a></div></div>
<div class="ttc" id="namespaceMs_html_ab8c991c362b4c6671323072bdeb9c912a5f56117a3440c5d1aefb3efa0e827672"><div class="ttname"><a href="namespaceMs.html#ab8c991c362b4c6671323072bdeb9c912a5f56117a3440c5d1aefb3efa0e827672">Ms::HairpinType::DECRESC_HAIRPIN</a></div></div>
<div class="ttc" id="measureproperties_8h_html"><div class="ttname"><a href="measureproperties_8h.html">measureproperties.h</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_add4f29480cc932274e217d0d12925a41"><div class="ttname"><a href="classMs_1_1ScoreView.html#add4f29480cc932274e217d0d12925a41">Ms::ScoreView::addSlur</a></div><div class="ttdeci">void addSlur(ChordRest *, ChordRest *, const Slur *) override</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l04065">scoreview.cpp:4065</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_ad0e43e5b602ec3c2e9f6f98edb016d92"><div class="ttname"><a href="classMs_1_1ScoreView.html#ad0e43e5b602ec3c2e9f6f98edb016d92">Ms::ScoreView::cloneElement</a></div><div class="ttdeci">void cloneElement(Element *e)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l04282">scoreview.cpp:4282</a></div></div>
<div class="ttc" id="classMs_1_1MScore_html_ac9d042a7decd57dbcea04544594b33c1"><div class="ttname"><a href="classMs_1_1MScore.html#ac9d042a7decd57dbcea04544594b33c1">Ms::MScore::horizontalPageGapEven</a></div><div class="ttdeci">static qreal horizontalPageGapEven</div><div class="ttdef"><b>Definition:</b> <a href="mscore_8h_source.html#l00385">mscore.h:385</a></div></div>
<div class="ttc" id="classMs_1_1Selection_html_a2a7b60d5638a66f4a990d3122dcc234d"><div class="ttname"><a href="classMs_1_1Selection.html#a2a7b60d5638a66f4a990d3122dcc234d">Ms::Selection::currentCR</a></div><div class="ttdeci">ChordRest * currentCR() const</div><div class="ttdef"><b>Definition:</b> <a href="select_8cpp_source.html#l00173">select.cpp:173</a></div></div>
<div class="ttc" id="classMs_1_1Selection_html_a125e47fae45ef55211b0297dc96754ad"><div class="ttname"><a href="classMs_1_1Selection.html#a125e47fae45ef55211b0297dc96754ad">Ms::Selection::endSegment</a></div><div class="ttdeci">Segment * endSegment() const</div><div class="ttdef"><b>Definition:</b> <a href="select_8h_source.html#l00214">select.h:214</a></div></div>
<div class="ttc" id="classMs_1_1TBox_html"><div class="ttname"><a href="classMs_1_1TBox.html">Ms::TBox</a></div><div class="ttdoc">Text frame. </div><div class="ttdef"><b>Definition:</b> <a href="textframe_8h_source.html#l00027">textframe.h:27</a></div></div>
<div class="ttc" id="classMs_1_1BreaksDialog_html_aec0e0e19b127ebd30940b9b9b1910988"><div class="ttname"><a href="classMs_1_1BreaksDialog.html#aec0e0e19b127ebd30940b9b9b1910988">Ms::BreaksDialog::remove</a></div><div class="ttdeci">bool remove</div><div class="ttdef"><b>Definition:</b> <a href="breaksdialog_8h_source.html#l00040">breaksdialog.h:40</a></div></div>
<div class="ttc" id="namespaceMs_html_aba304e35acf732434f3c3d8b72562885adb7b0a8e9e13ed775c293306dafdcca3"><div class="ttname"><a href="namespaceMs.html#aba304e35acf732434f3c3d8b72562885adb7b0a8e9e13ed775c293306dafdcca3">Ms::STATE_NOTE_ENTRY_STAFF_PITCHED</a></div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00087">globals.h:87</a></div></div>
<div class="ttc" id="classMs_1_1ScoreTab_html_aac889bef7bb86520dfce92b3464c9d40"><div class="ttname"><a href="classMs_1_1ScoreTab.html#aac889bef7bb86520dfce92b3464c9d40">Ms::ScoreTab::setCurrentIndex</a></div><div class="ttdeci">void setCurrentIndex(int)</div><div class="ttdef"><b>Definition:</b> <a href="scoretab_8cpp_source.html#l00479">scoretab.cpp:479</a></div></div>
<div class="ttc" id="namespaceMs_html_ad1b1585b0038ede29126efd627daae91ad34256405b037dd4a85817fbea2430fa"><div class="ttname"><a href="namespaceMs.html#ad1b1585b0038ede29126efd627daae91ad34256405b037dd4a85817fbea2430fa">Ms::MS_NO_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="mscore_8h_source.html#l00240">mscore.h:240</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_abe6533d03566869716a0fe0fdc34f0bf"><div class="ttname"><a href="classMs_1_1ScoreView.html#abe6533d03566869716a0fe0fdc34f0bf">Ms::ScoreView::startEditMode</a></div><div class="ttdeci">void startEditMode(Element *)</div><div class="ttdef"><b>Definition:</b> <a href="editelement_8cpp_source.html#l00087">editelement.cpp:87</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_ab88c19ed2126343d40f3a118d71a2bd2"><div class="ttname"><a href="classMs_1_1Score.html#ab88c19ed2126343d40f3a118d71a2bd2">Ms::Score::downAlt</a></div><div class="ttdeci">Element * downAlt(Element *)</div><div class="ttdef"><b>Definition:</b> <a href="navigate_8cpp_source.html#l00232">navigate.cpp:232</a></div></div>
<div class="ttc" id="classMs_1_1MeasureBase_html_a0e9a0473e5ed4cc38a1dead12bf4c2f3"><div class="ttname"><a href="classMs_1_1MeasureBase.html#a0e9a0473e5ed4cc38a1dead12bf4c2f3">Ms::MeasureBase::system</a></div><div class="ttdeci">System * system() const</div><div class="ttdef"><b>Definition:</b> <a href="measurebase_8h_source.html#l00106">measurebase.h:106</a></div></div>
<div class="ttc" id="classMs_1_1Spanner_html_a6b9d4c455c837a6dc2c3c2f1540ff22d"><div class="ttname"><a href="classMs_1_1Spanner.html#a6b9d4c455c837a6dc2c3c2f1540ff22d">Ms::Spanner::setStartElement</a></div><div class="ttdeci">void setStartElement(Element *e)</div><div class="ttdef"><b>Definition:</b> <a href="spanner_8cpp_source.html#l00911">spanner.cpp:911</a></div></div>
<div class="ttc" id="classMs_1_1InstrumentChange_html"><div class="ttname"><a href="classMs_1_1InstrumentChange.html">Ms::InstrumentChange</a></div><div class="ttdef"><b>Definition:</b> <a href="instrchange_8h_source.html#l00026">instrchange.h:26</a></div></div>
<div class="ttc" id="namespaceMs_html_a1066451ad9dc9959bedb76978f4f30c8a0679273e201afd0bf57af3961f8a23b8"><div class="ttname"><a href="namespaceMs.html#a1066451ad9dc9959bedb76978f4f30c8a0679273e201afd0bf57af3961f8a23b8">Ms::SelectType::SINGLE</a></div></div>
<div class="ttc" id="namespaceMs_html_a2e97eaee358b108fee65ce7d9e414450"><div class="ttname"><a href="namespaceMs.html#a2e97eaee358b108fee65ce7d9e414450">Ms::tpc</a></div><div class="ttdeci">int tpc(int idx, int pitch, int opt)</div><div class="ttdef"><b>Definition:</b> <a href="pitchspelling_8cpp_source.html#l00558">pitchspelling.cpp:558</a></div></div>
<div class="ttc" id="classMs_1_1Selection_html_a18aa92607a7bc75a64262bbfd2746d51"><div class="ttname"><a href="classMs_1_1Selection.html#a18aa92607a7bc75a64262bbfd2746d51">Ms::Selection::staffEnd</a></div><div class="ttdeci">int staffEnd() const</div><div class="ttdef"><b>Definition:</b> <a href="select_8h_source.html#l00228">select.h:228</a></div></div>
<div class="ttc" id="classMs_1_1Spanner_html_a516e9a9ce16d41ef6f2585012c718d62"><div class="ttname"><a href="classMs_1_1Spanner.html#a516e9a9ce16d41ef6f2585012c718d62">Ms::Spanner::setScore</a></div><div class="ttdeci">virtual void setScore(Score *s) override</div><div class="ttdef"><b>Definition:</b> <a href="spanner_8cpp_source.html#l00482">spanner.cpp:482</a></div></div>
<div class="ttc" id="classMs_1_1TDuration_html_a123168fe235332a63c716e041fc3ddd5"><div class="ttname"><a href="classMs_1_1TDuration.html#a123168fe235332a63c716e041fc3ddd5">Ms::TDuration::type</a></div><div class="ttdeci">DurationType type() const</div><div class="ttdef"><b>Definition:</b> <a href="durationtype_8h_source.html#l00048">durationtype.h:48</a></div></div>
<div class="ttc" id="namespaceMs_html_a2c92ce0204176ede1ab86e2f44ae6b9ea77a3d52d60bccb4c3cd3da2a1779ce51"><div class="ttname"><a href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea77a3d52d60bccb4c3cd3da2a1779ce51">Ms::ElementType::VBOX</a></div></div>
<div class="ttc" id="libmscore_2image_8h_html"><div class="ttname"><a href="libmscore_2image_8h.html">image.h</a></div></div>
<div class="ttc" id="namespaceMs_html_aa15d8b46ea58d6bb59b084d6d7bcff7da21507b40c80068eda19865706fdc2403"><div class="ttname"><a href="namespaceMs.html#aa15d8b46ea58d6bb59b084d6d7bcff7da21507b40c80068eda19865706fdc2403">Ms::POS::RIGHT</a></div></div>
<div class="ttc" id="namespaceMs_html_a602ef082ffbbe2c4b11e2375cc4aa794"><div class="ttname"><a href="namespaceMs.html#a602ef082ffbbe2c4b11e2375cc4aa794">Ms::SymId</a></div><div class="ttdeci">SymId</div><div class="ttdef"><b>Definition:</b> <a href="sym_8h_source.html#l00045">sym.h:45</a></div></div>
<div class="ttc" id="click_8h_html_a23377ea277c7aef62f6cf3c640f7155c"><div class="ttname"><a href="click_8h.html#a23377ea277c7aef62f6cf3c640f7155c">tick</a></div><div class="ttdeci">static const double tick[]</div><div class="ttdef"><b>Definition:</b> <a href="click_8h_source.html#l00525">click.h:525</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a9ef1dd345c7653273d1c02fed4359d46"><div class="ttname"><a href="classMs_1_1ScoreView.html#a9ef1dd345c7653273d1c02fed4359d46">Ms::ScoreView::onElementDestruction</a></div><div class="ttdeci">void onElementDestruction(Element *) override</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l05375">scoreview.cpp:5375</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_acf601afde4a34bd505007046e0b0d776"><div class="ttname"><a href="classMs_1_1ScoreView.html#acf601afde4a34bd505007046e0b0d776">Ms::ScoreView::normalPaste</a></div><div class="ttdeci">bool normalPaste(Fraction scale=Fraction(1, 1))</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l02036">scoreview.cpp:2036</a></div></div>
<div class="ttc" id="namespaceMs_html_a9b1fb02f916c554309371c6513550a1ba22311203d44b308bd2d607cdc2dcb72c"><div class="ttname"><a href="namespaceMs.html#a9b1fb02f916c554309371c6513550a1ba22311203d44b308bd2d607cdc2dcb72c">Ms::LayoutMode::PAGE</a></div></div>
<div class="ttc" id="classMs_1_1EditDrumset_html"><div class="ttname"><a href="classMs_1_1EditDrumset.html">Ms::EditDrumset</a></div><div class="ttdef"><b>Definition:</b> <a href="editdrumset_8h_source.html#l00032">editdrumset.h:32</a></div></div>
<div class="ttc" id="namespaceMs_html_aa0f871cf8181cec31d68d20a39010655aeab4568c5c445379d34f5bdfb5148645"><div class="ttname"><a href="namespaceMs.html#aa0f871cf8181cec31d68d20a39010655aeab4568c5c445379d34f5bdfb5148645">Ms::Pid::FRET</a></div></div>
<div class="ttc" id="inspector_8h_html"><div class="ttname"><a href="inspector_8h.html">inspector.h</a></div></div>
<div class="ttc" id="classMs_1_1Spatium_html_ab21fa50b8ec92de51fb08a2365770422"><div class="ttname"><a href="classMs_1_1Spatium.html#ab21fa50b8ec92de51fb08a2365770422">Ms::Spatium::val</a></div><div class="ttdeci">constexpr qreal val() const</div><div class="ttdef"><b>Definition:</b> <a href="spatium_8h_source.html#l00032">spatium.h:32</a></div></div>
<div class="ttc" id="classMs_1_1InputState_html_a5b1b389fc37280d1926ba401495ca5ce"><div class="ttname"><a href="classMs_1_1InputState.html#a5b1b389fc37280d1926ba401495ca5ce">Ms::InputState::setTrack</a></div><div class="ttdeci">void setTrack(int v)</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00084">input.h:84</a></div></div>
<div class="ttc" id="classMs_1_1Selection_html_a884ac586a99a211a55eab115a2c3d95f"><div class="ttname"><a href="classMs_1_1Selection.html#a884ac586a99a211a55eab115a2c3d95f">Ms::Selection::isRange</a></div><div class="ttdeci">bool isRange() const</div><div class="ttdef"><b>Definition:</b> <a href="select_8h_source.html#l00179">select.h:179</a></div></div>
<div class="ttc" id="classMs_1_1MasterScore_html_a15c525dbfdfc64bc65ec97202bd71777"><div class="ttname"><a href="classMs_1_1MasterScore.html#a15c525dbfdfc64bc65ec97202bd71777">Ms::MasterScore::movements</a></div><div class="ttdeci">virtual Movements * movements() override</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l01347">score.h:1347</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a978708122185fbb15bb9a6cae3f18681"><div class="ttname"><a href="classMs_1_1ScoreView.html#a978708122185fbb15bb9a6cae3f18681">Ms::ScoreView::pageEnd</a></div><div class="ttdeci">void pageEnd()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03629">scoreview.cpp:3629</a></div></div>
<div class="ttc" id="classMs_1_1StaffType_html_af45a9aadd8ee7ec2943a1ecc4ab9d0e3"><div class="ttname"><a href="classMs_1_1StaffType.html#af45a9aadd8ee7ec2943a1ecc4ab9d0e3">Ms::StaffType::onLines</a></div><div class="ttdeci">bool onLines() const</div><div class="ttdef"><b>Definition:</b> <a href="stafftype_8h_source.html#l00370">stafftype.h:370</a></div></div>
<div class="ttc" id="namespaceMs_html_a20d9370e85f87d0b2594fd90665f8cc1ad4b1df12331eb50f79373b3e2bd284ce"><div class="ttname"><a href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1ad4b1df12331eb50f79373b3e2bd284ce">Ms::ViewState::DRAG_EDIT</a></div></div>
<div class="ttc" id="classMs_1_1SysStaff_html"><div class="ttname"><a href="classMs_1_1SysStaff.html">Ms::SysStaff</a></div><div class="ttdoc">One staff in a System. </div><div class="ttdef"><b>Definition:</b> <a href="system_8h_source.html#l00047">system.h:47</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_add8f756e67ed16b6a4e9b4719ddb2765"><div class="ttname"><a href="classMs_1_1ScoreView.html#add8f756e67ed16b6a4e9b4719ddb2765">Ms::ScoreView::extendCurrentNote</a></div><div class="ttdeci">void extendCurrentNote()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l04499">scoreview.cpp:4499</a></div></div>
<div class="ttc" id="classMs_1_1Lasso_html"><div class="ttname"><a href="classMs_1_1Lasso.html">Ms::Lasso</a></div><div class="ttdef"><b>Definition:</b> <a href="lasso_8h_source.html#l00024">lasso.h:24</a></div></div>
<div class="ttc" id="namespaceMs_html_a9697db2bfce866009163010d19ad3267"><div class="ttname"><a href="namespaceMs.html#a9697db2bfce866009163010d19ad3267">Ms::ZOOM_PRECISION_MIN</a></div><div class="ttdeci">static constexpr int ZOOM_PRECISION_MIN</div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00125">globals.h:125</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_ac50b56fbdc402dd9f4008abcb9fd478c"><div class="ttname"><a href="classMs_1_1ScoreView.html#ac50b56fbdc402dd9f4008abcb9fd478c">Ms::ScoreView::triggerCmdRealtimeAdvance</a></div><div class="ttdeci">void triggerCmdRealtimeAdvance()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l04540">scoreview.cpp:4540</a></div></div>
<div class="ttc" id="namespaceMs_html_aa0f871cf8181cec31d68d20a39010655acad84cf50449d72bac13a609c56ba102"><div class="ttname"><a href="namespaceMs.html#aa0f871cf8181cec31d68d20a39010655acad84cf50449d72bac13a609c56ba102">Ms::Pid::TPC2</a></div></div>
<div class="ttc" id="classMs_1_1SysStaff_html_aa79ca5523125cce73baf2b3783d0dd32"><div class="ttname"><a href="classMs_1_1SysStaff.html#aa79ca5523125cce73baf2b3783d0dd32">Ms::SysStaff::bbox</a></div><div class="ttdeci">const QRectF &amp; bbox() const</div><div class="ttdef"><b>Definition:</b> <a href="system_8h_source.html#l00060">system.h:60</a></div></div>
<div class="ttc" id="libmscore_2utils_8h_html"><div class="ttname"><a href="libmscore_2utils_8h.html">utils.h</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a4c35c150fe004e1b2cb82cb2b87954a6"><div class="ttname"><a href="classMs_1_1Score.html#a4c35c150fe004e1b2cb82cb2b87954a6">Ms::Score::pos2measure</a></div><div class="ttdeci">Measure * pos2measure(const QPointF &amp;, int *staffIdx, int *pitch, Segment **, QPointF *offset) const</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8cpp_source.html#l00562">score.cpp:562</a></div></div>
<div class="ttc" id="classMs_1_1Tuplet_html_a335f84666bd36e2bca5963785ae9759a"><div class="ttname"><a href="classMs_1_1Tuplet.html#a335f84666bd36e2bca5963785ae9759a">Ms::Tuplet::elements</a></div><div class="ttdeci">const std::vector&lt; DurationElement * &gt; &amp; elements() const</div><div class="ttdef"><b>Definition:</b> <a href="tuplet_8h_source.html#l00097">tuplet.h:97</a></div></div>
<div class="ttc" id="namespaceMs_html_ac12fb12074fc86d33abf8fb00d37bc86a8684c6e13ab436794879f63b5ed89ec1"><div class="ttname"><a href="namespaceMs.html#ac12fb12074fc86d33abf8fb00d37bc86a8684c6e13ab436794879f63b5ed89ec1">Ms::ZoomIndex::ZOOM_PAGE_WIDTH</a></div></div>
<div class="ttc" id="classMs_1_1Selection_html_a38ebdcd0c523014365b5c0855f9e3d80"><div class="ttname"><a href="classMs_1_1Selection.html#a38ebdcd0c523014365b5c0855f9e3d80">Ms::Selection::isSingle</a></div><div class="ttdeci">bool isSingle() const</div><div class="ttdef"><b>Definition:</b> <a href="select_8h_source.html#l00195">select.h:195</a></div></div>
<div class="ttc" id="namespaceMs_html_aa0f871cf8181cec31d68d20a39010655a858ed2708924311f93980f5d09d078f2"><div class="ttname"><a href="namespaceMs.html#aa0f871cf8181cec31d68d20a39010655a858ed2708924311f93980f5d09d078f2">Ms::Pid::TPC1</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a60b1af8920be36114df72b15a49efc91"><div class="ttname"><a href="classMs_1_1ScoreView.html#a60b1af8920be36114df72b15a49efc91">Ms::ScoreView::objectPopup</a></div><div class="ttdeci">void objectPopup(const QPoint &amp;, Element *)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l00286">scoreview.cpp:286</a></div></div>
<div class="ttc" id="classMs_1_1System_html_ad93df8d8b2f2fb6d8d88c1d4b590156c"><div class="ttname"><a href="classMs_1_1System.html#ad93df8d8b2f2fb6d8d88c1d4b590156c">Ms::System::staffYpage</a></div><div class="ttdeci">qreal staffYpage(int staffIdx) const</div><div class="ttdef"><b>Definition:</b> <a href="system_8cpp_source.html#l01287">system.cpp:1287</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a3a7ad4b062f625d9f7192c335ddfe289"><div class="ttname"><a href="classMs_1_1Score.html#a3a7ad4b062f625d9f7192c335ddfe289">Ms::Score::cmdAddInterval</a></div><div class="ttdeci">void cmdAddInterval(int, const std::vector&lt; Note *&gt; &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="cmd_8cpp_source.html#l00531">cmd.cpp:531</a></div></div>
<div class="ttc" id="namespaceMs_html_a016355598eeae7955dbcb44133094c22"><div class="ttname"><a href="namespaceMs.html#a016355598eeae7955dbcb44133094c22">Ms::ZOOM_PRECISION_MAX</a></div><div class="ttdeci">static constexpr int ZOOM_PRECISION_MAX</div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00126">globals.h:126</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a800b18cf10876b1497e1bc43a2a72ac0"><div class="ttname"><a href="classMs_1_1Score.html#a800b18cf10876b1497e1bc43a2a72ac0">Ms::Score::cmdConcertPitchChanged</a></div><div class="ttdeci">void cmdConcertPitchChanged(bool, bool)</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8cpp_source.html#l02715">score.cpp:2715</a></div></div>
<div class="ttc" id="namespaceMs_html_aa0f871cf8181cec31d68d20a39010655a6467064bd66ffef86b5daa25f5869248"><div class="ttname"><a href="namespaceMs.html#aa0f871cf8181cec31d68d20a39010655a6467064bd66ffef86b5daa25f5869248">Ms::Pid::SUB_STYLE</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a3a1c7e250183ca12912b4df157df6bc6"><div class="ttname"><a href="classMs_1_1Score.html#a3a1c7e250183ca12912b4df157df6bc6">Ms::Score::tick2leftSegment</a></div><div class="ttdeci">Segment * tick2leftSegment(const Fraction &amp;tick, bool useMMrest=false) const</div><div class="ttdoc">return the segment at this tick position if any or the first segment before this tick position ...</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2utils_8cpp_source.html#l00181">utils.cpp:181</a></div></div>
<div class="ttc" id="classMs_1_1Segment_html_a9f84e65ea1cc200227a75b058ab8e8d8"><div class="ttname"><a href="classMs_1_1Segment.html#a9f84e65ea1cc200227a75b058ab8e8d8">Ms::Segment::nextChordRest</a></div><div class="ttdeci">ChordRest * nextChordRest(int track, bool backwards=false) const</div><div class="ttdef"><b>Definition:</b> <a href="segment_8cpp_source.html#l00414">segment.cpp:414</a></div></div>
<div class="ttc" id="classMs_1_1MScore_html_aa0db4fc96c165225d1a05d87f9ac90cd"><div class="ttname"><a href="classMs_1_1MScore.html#aa0db4fc96c165225d1a05d87f9ac90cd">Ms::MScore::selectColor</a></div><div class="ttdeci">static QColor selectColor[VOICES]</div><div class="ttdef"><b>Definition:</b> <a href="mscore_8h_source.html#l00335">mscore.h:335</a></div></div>
<div class="ttc" id="classMs_1_1MeasureBase_html_a6cab2bc583be79fa27b83390dd48bc7f"><div class="ttname"><a href="classMs_1_1MeasureBase.html#a6cab2bc583be79fa27b83390dd48bc7f">Ms::MeasureBase::ticks</a></div><div class="ttdeci">Fraction ticks() const</div><div class="ttdef"><b>Definition:</b> <a href="measurebase_8h_source.html#l00128">measurebase.h:128</a></div></div>
<div class="ttc" id="classMs_1_1RepeatList_html_a85c9f5c6573154f1749e31f09432ccc1"><div class="ttname"><a href="classMs_1_1RepeatList.html#a85c9f5c6573154f1749e31f09432ccc1">Ms::RepeatList::tick2utick</a></div><div class="ttdeci">int tick2utick(int tick) const</div><div class="ttdef"><b>Definition:</b> <a href="repeatlist_8cpp_source.html#l00199">repeatlist.cpp:199</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_a06cc027fe14db0cf896f02931356ae24"><div class="ttname"><a href="classMs_1_1Element.html#a06cc027fe14db0cf896f02931356ae24">Ms::Element::pagePos</a></div><div class="ttdeci">virtual QPointF pagePos() const</div><div class="ttdoc">position in page coordinates </div><div class="ttdef"><b>Definition:</b> <a href="element_8cpp_source.html#l00443">element.cpp:443</a></div></div>
<div class="ttc" id="classMs_1_1TextBase_html"><div class="ttname"><a href="classMs_1_1TextBase.html">Ms::TextBase</a></div><div class="ttdef"><b>Definition:</b> <a href="textbase_8h_source.html#l00229">textbase.h:229</a></div></div>
<div class="ttc" id="classMs_1_1Drumset_html_aeb1d9b027161ed4f4c08f5c2abd2a642"><div class="ttname"><a href="classMs_1_1Drumset.html#aeb1d9b027161ed4f4c08f5c2abd2a642">Ms::Drumset::noteHeads</a></div><div class="ttdeci">SymId noteHeads(int pitch, NoteHead::Type t) const</div><div class="ttdef"><b>Definition:</b> <a href="drumset_8h_source.html#l00074">drumset.h:74</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_ab53d6e1fa1a9c0652a3101613d126fef"><div class="ttname"><a href="classMs_1_1Score.html#ab53d6e1fa1a9c0652a3101613d126fef">Ms::Score::addViewer</a></div><div class="ttdeci">void addViewer(MuseScoreView *v)</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l01108">score.h:1108</a></div></div>
<div class="ttc" id="classMs_1_1ScoreElement_html_a5aa58f96618edb0e3ff660e1c96c5d4e"><div class="ttname"><a href="classMs_1_1ScoreElement.html#a5aa58f96618edb0e3ff660e1c96c5d4e">Ms::ScoreElement::isSpannerSegment</a></div><div class="ttdeci">bool isSpannerSegment() const</div><div class="ttdef"><b>Definition:</b> <a href="scoreElement_8h_source.html#l00388">scoreElement.h:388</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a175c7228e6bb882a90330a5b0e6fa41c"><div class="ttname"><a href="classMs_1_1ScoreView.html#a175c7228e6bb882a90330a5b0e6fa41c">Ms::ScoreView::setControlCursorVisible</a></div><div class="ttdeci">void setControlCursorVisible(bool v)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l04333">scoreview.cpp:4333</a></div></div>
<div class="ttc" id="structMs_1_1MidiInputEvent_html_a6b8831155a0bb92d7fdc0429ddc914e7"><div class="ttname"><a href="structMs_1_1MidiInputEvent.html#a6b8831155a0bb92d7fdc0429ddc914e7">Ms::MidiInputEvent::pitch</a></div><div class="ttdeci">int pitch</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l00197">score.h:197</a></div></div>
<div class="ttc" id="avsomr_8h_html"><div class="ttname"><a href="avsomr_8h.html">avsomr.h</a></div></div>
<div class="ttc" id="page_8h_html"><div class="ttname"><a href="page_8h.html">page.h</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_a0e947d90ca39376fd98b995d34811126"><div class="ttname"><a href="classMs_1_1Element.html#a0e947d90ca39376fd98b995d34811126">Ms::Element::z</a></div><div class="ttdeci">int z() const</div><div class="ttdef"><b>Definition:</b> <a href="element_8cpp_source.html#l00308">element.cpp:308</a></div></div>
<div class="ttc" id="notedot_8h_html"><div class="ttname"><a href="notedot_8h.html">notedot.h</a></div></div>
<div class="ttc" id="classMs_1_1MeasureBase_html_ab5f6111d12a058461be1fe560c2c41b9"><div class="ttname"><a href="classMs_1_1MeasureBase.html#ab5f6111d12a058461be1fe560c2c41b9">Ms::MeasureBase::type</a></div><div class="ttdeci">virtual ElementType type() const =0</div></div>
<div class="ttc" id="classMs_1_1Selection_html_a2f0da0a7ca2a9d2941293fd554ce7983"><div class="ttname"><a href="classMs_1_1Selection.html#a2f0da0a7ca2a9d2941293fd554ce7983">Ms::Selection::mimeType</a></div><div class="ttdeci">QString mimeType() const</div><div class="ttdef"><b>Definition:</b> <a href="select_8cpp_source.html#l00734">select.cpp:734</a></div></div>
<div class="ttc" id="classMs_1_1Rest_html_ac3e5421836f4d0788e1b0abb44d860b1"><div class="ttname"><a href="classMs_1_1Rest.html#ac3e5421836f4d0788e1b0abb44d860b1">Ms::Rest::isGap</a></div><div class="ttdeci">bool isGap() const</div><div class="ttdef"><b>Definition:</b> <a href="rest_8h_source.html#l00066">rest.h:66</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_a97c6426acf5bd7303aef532c1d95f105"><div class="ttname"><a href="classMs_1_1Element.html#a97c6426acf5bd7303aef532c1d95f105">Ms::Element::pageBoundingRect</a></div><div class="ttdeci">QRectF pageBoundingRect() const</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00283">element.h:283</a></div></div>
<div class="ttc" id="clef_8h_html"><div class="ttname"><a href="clef_8h.html">clef.h</a></div><div class="ttdoc">Definition of classes Clef. </div></div>
<div class="ttc" id="classMs_1_1InputState_html_ae4835eeb13675b160c460db38f326a86"><div class="ttname"><a href="classMs_1_1InputState.html#ae4835eeb13675b160c460db38f326a86">Ms::InputState::rest</a></div><div class="ttdeci">bool rest() const</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00092">input.h:92</a></div></div>
<div class="ttc" id="classMs_1_1MScore_html_a25a281f50abe7cb55e81182c66c50d56"><div class="ttname"><a href="classMs_1_1MScore.html#a25a281f50abe7cb55e81182c66c50d56">Ms::MScore::bgColor</a></div><div class="ttdeci">static QColor bgColor</div><div class="ttdef"><b>Definition:</b> <a href="mscore_8h_source.html#l00340">mscore.h:340</a></div></div>
<div class="ttc" id="namespaceMs_html_a2c92ce0204176ede1ab86e2f44ae6b9ea84e4213ee54478574ea15a166ea10152"><div class="ttname"><a href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea84e4213ee54478574ea15a166ea10152">Ms::ElementType::MEASURE</a></div></div>
<div class="ttc" id="namespaceMs_html_a6b5aa179fb8d7a11ec316c01a2fdf6e1a6583855a84bb2092bdedabd25e5bc4e7"><div class="ttname"><a href="namespaceMs.html#a6b5aa179fb8d7a11ec316c01a2fdf6e1a6583855a84bb2092bdedabd25e5bc4e7">Ms::CapellaType::SLUR</a></div></div>
<div class="ttc" id="classMs_1_1Measure_html_a4bc97255a366ad792cc65094767152c5"><div class="ttname"><a href="classMs_1_1Measure.html#a4bc97255a366ad792cc65094767152c5">Ms::Measure::mmRestCount</a></div><div class="ttdeci">int mmRestCount() const</div><div class="ttdef"><b>Definition:</b> <a href="measure_8h_source.html#l00256">measure.h:256</a></div></div>
<div class="ttc" id="globals_8h_html"><div class="ttname"><a href="globals_8h.html">globals.h</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a46f6805e9dd2eb2811f64ee1e11cdce5"><div class="ttname"><a href="classMs_1_1ScoreView.html#a46f6805e9dd2eb2811f64ee1e11cdce5">Ms::ScoreView::editCopy</a></div><div class="ttdeci">void editCopy()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l01892">scoreview.cpp:1892</a></div></div>
<div class="ttc" id="articulation_8h_html"><div class="ttname"><a href="articulation_8h.html">articulation.h</a></div></div>
<div class="ttc" id="namespaceMs_html_aa7be8d92b4d54a840e62a3cd6dcfb08c"><div class="ttname"><a href="namespaceMs.html#aa7be8d92b4d54a840e62a3cd6dcfb08c">Ms::toRest</a></div><div class="ttdeci">static Rest * toRest(ScoreElement *e)</div><div class="ttdef"><b>Definition:</b> <a href="scoreElement_8h_source.html#l00447">scoreElement.h:447</a></div></div>
<div class="ttc" id="classMs_1_1TDuration_html_aab1a411cf428fcc4244950a88b03ab95"><div class="ttname"><a href="classMs_1_1TDuration.html#aab1a411cf428fcc4244950a88b03ab95">Ms::TDuration::headType</a></div><div class="ttdeci">NoteHead::Type headType() const</div><div class="ttdef"><b>Definition:</b> <a href="durationtype_8cpp_source.html#l00163">durationtype.cpp:163</a></div></div>
<div class="ttc" id="namespaceMs_html_a580f85ffcff35b12462cbfb60a8728b7"><div class="ttname"><a href="namespaceMs.html#a580f85ffcff35b12462cbfb60a8728b7">Ms::toChordRest</a></div><div class="ttdeci">static ChordRest * toChordRest(ScoreElement *e)</div><div class="ttdef"><b>Definition:</b> <a href="scoreElement_8h_source.html#l00427">scoreElement.h:427</a></div></div>
<div class="ttc" id="classMs_1_1Fraction_html_ac3244c876739eef5fa17e93e053bc599"><div class="ttname"><a href="classMs_1_1Fraction.html#ac3244c876739eef5fa17e93e053bc599">Ms::Fraction::isZero</a></div><div class="ttdeci">bool isZero() const</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2fraction_8h_source.html#l00077">fraction.h:77</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a426bdc8db7540c7ea6ae8326f697076b"><div class="ttname"><a href="classMs_1_1ScoreView.html#a426bdc8db7540c7ea6ae8326f697076b">Ms::ScoreView::appendMeasures</a></div><div class="ttdeci">void appendMeasures(int, ElementType)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l04816">scoreview.cpp:4816</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_aab67fb7861f0980d04fbae4c5348f3a6"><div class="ttname"><a href="classMs_1_1ScoreView.html#aab67fb7861f0980d04fbae4c5348f3a6">Ms::ScoreView::escapeCmd</a></div><div class="ttdeci">void escapeCmd()</div><div class="ttdef"><b>Definition:</b> <a href="events_8cpp_source.html#l01043">events.cpp:1043</a></div></div>
<div class="ttc" id="namespaceMs_html_a33bc7982f565376d042918ae3c91d3d6a278ec37b01c1bd1ed9b5870f2e57e2c3"><div class="ttname"><a href="namespaceMs.html#a33bc7982f565376d042918ae3c91d3d6a278ec37b01c1bd1ed9b5870f2e57e2c3">Ms::NoteEntryMethod::REALTIME_AUTO</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a07fa204a412636070028f2b159771574"><div class="ttname"><a href="classMs_1_1Score.html#a07fa204a412636070028f2b159771574">Ms::Score::cmdState</a></div><div class="ttdeci">virtual CmdState &amp; cmdState()</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l01475">score.h:1475</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_a19157e811d0d2a0e3c94dc844039ba2f"><div class="ttname"><a href="classMs_1_1Element.html#a19157e811d0d2a0e3c94dc844039ba2f">Ms::Element::pos</a></div><div class="ttdeci">virtual const QPointF pos() const</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00243">element.h:243</a></div></div>
<div class="ttc" id="stafftext_8h_html"><div class="ttname"><a href="stafftext_8h.html">stafftext.h</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_aafc617f0cd5069a406a83da394b15e53"><div class="ttname"><a href="classMs_1_1Element.html#aafc617f0cd5069a406a83da394b15e53">Ms::Element::canvasPos</a></div><div class="ttdeci">virtual QPointF canvasPos() const</div><div class="ttdoc">position in canvas coordinates </div><div class="ttdef"><b>Definition:</b> <a href="element_8cpp_source.html#l00486">element.cpp:486</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_adbcd81f12f80859fdaf2ca1bd24d23d1"><div class="ttname"><a href="classMs_1_1Element.html#adbcd81f12f80859fdaf2ca1bd24d23d1">Ms::Element::enabled</a></div><div class="ttdeci">bool enabled() const</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00455">element.h:455</a></div></div>
<div class="ttc" id="dynamic_8h_html"><div class="ttname"><a href="dynamic_8h.html">dynamic.h</a></div></div>
<div class="ttc" id="segment_8h_html"><div class="ttname"><a href="segment_8h.html">segment.h</a></div></div>
<div class="ttc" id="classMs_1_1PositionCursor_html"><div class="ttname"><a href="classMs_1_1PositionCursor.html">Ms::PositionCursor</a></div><div class="ttdef"><b>Definition:</b> <a href="textcursor_8h_source.html#l00036">textcursor.h:36</a></div></div>
<div class="ttc" id="classMs_1_1Text_html"><div class="ttname"><a href="classMs_1_1Text.html">Ms::Text</a></div><div class="ttdef"><b>Definition:</b> <a href="text_8h_source.html#l00024">text.h:24</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_ac4b421c6a812ee23383268d2dab74bff"><div class="ttname"><a href="classMs_1_1ScoreView.html#ac4b421c6a812ee23383268d2dab74bff">Ms::ScoreView::cmdAddNoteLine</a></div><div class="ttdeci">void cmdAddNoteLine()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l04159">scoreview.cpp:4159</a></div></div>
<div class="ttc" id="classMs_1_1InputState_html_af31048b03da7dd0dab6554f8acd8e399"><div class="ttname"><a href="classMs_1_1InputState.html#af31048b03da7dd0dab6554f8acd8e399">Ms::InputState::setSlur</a></div><div class="ttdeci">void setSlur(Slur *s)</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00112">input.h:112</a></div></div>
<div class="ttc" id="classMs_1_1System_html_a51fa420463d9aadfbdc0839fb781ff1e"><div class="ttname"><a href="classMs_1_1System.html#a51fa420463d9aadfbdc0839fb781ff1e">Ms::System::staff</a></div><div class="ttdeci">SysStaff * staff(int staffIdx) const</div><div class="ttdef"><b>Definition:</b> <a href="system_8h_source.html#l00148">system.h:148</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_aec20db38e504ce57480f8163c7b3c4e5"><div class="ttname"><a href="classMs_1_1ScoreView.html#aec20db38e504ce57480f8163c7b3c4e5">Ms::ScoreView::logicalZoomLevel</a></div><div class="ttdeci">qreal logicalZoomLevel() const</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03372">scoreview.cpp:3372</a></div></div>
<div class="ttc" id="classMs_1_1ScoreElement_html_a98f8c58df0f5baafe63414bedf84514f"><div class="ttname"><a href="classMs_1_1ScoreElement.html#a98f8c58df0f5baafe63414bedf84514f">Ms::ScoreElement::isSpanner</a></div><div class="ttdeci">bool isSpanner() const</div><div class="ttdef"><b>Definition:</b> <a href="scoreElement_8h_source.html#l00405">scoreElement.h:405</a></div></div>
<div class="ttc" id="namespaceMs_html_a20d9370e85f87d0b2594fd90665f8cc1a6c97b3d6c91135b3a99f073595d20e5d"><div class="ttname"><a href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a6c97b3d6c91135b3a99f073595d20e5d">Ms::ViewState::ENTRY_PLAY</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a5957ec3c53b8631677b3ec5640648aa5"><div class="ttname"><a href="classMs_1_1ScoreView.html#a5957ec3c53b8631677b3ec5640648aa5">Ms::ScoreView::cmdChangeEnharmonic</a></div><div class="ttdeci">void cmdChangeEnharmonic(bool)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l04207">scoreview.cpp:4207</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a0ce7ea8d2a58e47e21e61798593e7284"><div class="ttname"><a href="classMs_1_1Score.html#a0ce7ea8d2a58e47e21e61798593e7284">Ms::Score::repeatList</a></div><div class="ttdeci">virtual const RepeatList &amp; repeatList() const</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l01460">score.h:1460</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_ab9d683de661febe9ad00ae37f7cd5012"><div class="ttname"><a href="classMs_1_1Score.html#ab9d683de661febe9ad00ae37f7cd5012">Ms::Score::playPos</a></div><div class="ttdeci">Fraction playPos() const</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l00911">score.h:911</a></div></div>
<div class="ttc" id="classMs_1_1StaffType_html_a1f3e57f97fb721dca79f75d6611f394c"><div class="ttname"><a href="classMs_1_1StaffType.html#a1f3e57f97fb721dca79f75d6611f394c">Ms::StaffType::lines</a></div><div class="ttdeci">int lines() const</div><div class="ttdef"><b>Definition:</b> <a href="stafftype_8h_source.html#l00290">stafftype.h:290</a></div></div>
<div class="ttc" id="zoombox_8h_html"><div class="ttname"><a href="zoombox_8h.html">zoombox.h</a></div></div>
<div class="ttc" id="namespaceMs_html_aad3918cfddca91d981504ae55c0f19b0a94e94133f4bdc1794c6b647b8ea134d0"><div class="ttname"><a href="namespaceMs.html#aad3918cfddca91d981504ae55c0f19b0a94e94133f4bdc1794c6b647b8ea134d0">Ms::StaffGroup::STANDARD</a></div></div>
<div class="ttc" id="classMs_1_1ScoreElement_html_a3d5c97191484848b3f10e754246f8758"><div class="ttname"><a href="classMs_1_1ScoreElement.html#a3d5c97191484848b3f10e754246f8758">Ms::ScoreElement::links</a></div><div class="ttdeci">LinkedElements * links() const</div><div class="ttdef"><b>Definition:</b> <a href="scoreElement_8h_source.html#l00248">scoreElement.h:248</a></div></div>
<div class="ttc" id="classMs_1_1Slur_html"><div class="ttname"><a href="classMs_1_1Slur.html">Ms::Slur</a></div><div class="ttdef"><b>Definition:</b> <a href="slur_8h_source.html#l00054">slur.h:54</a></div></div>
<div class="ttc" id="classMs_1_1ScoreElement_html_acb1866df2e440923354fa5b1ee9d5f52"><div class="ttname"><a href="classMs_1_1ScoreElement.html#acb1866df2e440923354fa5b1ee9d5f52">Ms::ScoreElement::userName</a></div><div class="ttdeci">virtual QString userName() const</div><div class="ttdef"><b>Definition:</b> <a href="scoreElement_8cpp_source.html#l00809">scoreElement.cpp:809</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_ab95eddf0f09e0b3e6e669ed12031d4d2"><div class="ttname"><a href="classMs_1_1ScoreView.html#ab95eddf0f09e0b3e6e669ed12031d4d2">Ms::ScoreView::cmdTuplet</a></div><div class="ttdeci">void cmdTuplet(int n, ChordRest *)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l04342">scoreview.cpp:4342</a></div></div>
<div class="ttc" id="classMs_1_1TextBase_html_ad438fe216fbb719fbec8e44ae7fc6d5a"><div class="ttname"><a href="classMs_1_1TextBase.html#ad438fe216fbb719fbec8e44ae7fc6d5a">Ms::TextBase::propertyDefault</a></div><div class="ttdeci">virtual QVariant propertyDefault(Pid id) const override</div><div class="ttdef"><b>Definition:</b> <a href="textbase_8cpp_source.html#l02833">textbase.cpp:2833</a></div></div>
<div class="ttc" id="classMs_1_1Selection_html_a832d71c0a01cd82c2ed9a8f8d1e29cfc"><div class="ttname"><a href="classMs_1_1Selection.html#a832d71c0a01cd82c2ed9a8f8d1e29cfc">Ms::Selection::lastChordRest</a></div><div class="ttdeci">ChordRest * lastChordRest(int track=-1) const</div><div class="ttdef"><b>Definition:</b> <a href="select_8cpp_source.html#l00256">select.cpp:256</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_ad093fd9fad60eee8871821da28964f1a"><div class="ttname"><a href="classMs_1_1ScoreView.html#ad093fd9fad60eee8871821da28964f1a">Ms::ScoreView::paint</a></div><div class="ttdeci">void paint(const QRect &amp;, QPainter &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l01256">scoreview.cpp:1256</a></div></div>
<div class="ttc" id="classMs_1_1DurationElement_html_abd480ba4d052d040db56e1e504cf2596"><div class="ttname"><a href="classMs_1_1DurationElement.html#abd480ba4d052d040db56e1e504cf2596">Ms::DurationElement::ticks</a></div><div class="ttdeci">virtual Fraction ticks() const</div><div class="ttdef"><b>Definition:</b> <a href="duration_8h_source.html#l00057">duration.h:57</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_afa2b3594d7a3da79995ece44092f0b5c"><div class="ttname"><a href="classMs_1_1ScoreView.html#afa2b3594d7a3da79995ece44092f0b5c">Ms::ScoreView::calculateLogicalZoomLevel</a></div><div class="ttdeci">qreal calculateLogicalZoomLevel(const ZoomIndex index, const qreal logicalFreeZoomLevel=0.0) const</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l01795">scoreview.cpp:1795</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a94f2b82e913f6afe7b46f9df097f81ec"><div class="ttname"><a href="classMs_1_1ScoreView.html#a94f2b82e913f6afe7b46f9df097f81ec">Ms::ScoreView::~ScoreView</a></div><div class="ttdeci">~ScoreView()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l00264">scoreview.cpp:264</a></div></div>
<div class="ttc" id="namespaceMs_html_a1aa5dd7502c1d6ba1ca37f5bfd14fda6aad21beaf0e0f72012c11c0fb529d1f0a"><div class="ttname"><a href="namespaceMs.html#a1aa5dd7502c1d6ba1ca37f5bfd14fda6aad21beaf0e0f72012c11c0fb529d1f0a">Ms::Grip::NO_GRIP</a></div></div>
<div class="ttc" id="classMs_1_1MScore_html_aca131f1f53787e9bfa4fa5e3b564e7de"><div class="ttname"><a href="classMs_1_1MScore.html#aca131f1f53787e9bfa4fa5e3b564e7de">Ms::MScore::verticalOrientation</a></div><div class="ttdeci">static bool verticalOrientation()</div><div class="ttdef"><b>Definition:</b> <a href="mscore_8h_source.html#l00332">mscore.h:332</a></div></div>
<div class="ttc" id="classMs_1_1Spanner_html_ab851975c9fb1b63da5272ac303ec641d"><div class="ttname"><a href="classMs_1_1Spanner.html#ab851975c9fb1b63da5272ac303ec641d">Ms::Spanner::setTick2</a></div><div class="ttdeci">void setTick2(const Fraction &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="spanner_8cpp_source.html#l01067">spanner.cpp:1067</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_a81092ae7891eb2ac2d43d6fe86e1e749"><div class="ttname"><a href="classMs_1_1Element.html#a81092ae7891eb2ac2d43d6fe86e1e749">Ms::Element::nextElement</a></div><div class="ttdeci">virtual Element * nextElement()</div><div class="ttdef"><b>Definition:</b> <a href="element_8cpp_source.html#l01683">element.cpp:1683</a></div></div>
<div class="ttc" id="namespaceMs_html_aa15d8b46ea58d6bb59b084d6d7bcff7d"><div class="ttname"><a href="namespaceMs.html#aa15d8b46ea58d6bb59b084d6d7bcff7d">Ms::POS</a></div><div class="ttdeci">POS</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l00107">score.h:107</a></div></div>
<div class="ttc" id="classMs_1_1MScore_html_adeb6788e9d1fa98ce1e3ebfeb686a72d"><div class="ttname"><a href="classMs_1_1MScore.html#adeb6788e9d1fa98ce1e3ebfeb686a72d">Ms::MScore::showSystemBoundingRect</a></div><div class="ttdeci">static bool showSystemBoundingRect</div><div class="ttdef"><b>Definition:</b> <a href="mscore_8h_source.html#l00362">mscore.h:362</a></div></div>
<div class="ttc" id="sym_8h_html"><div class="ttname"><a href="sym_8h.html">sym.h</a></div></div>
<div class="ttc" id="classMs_1_1ScoreElement_html_a9b9c00757c23cba103638b4ab63df03e"><div class="ttname"><a href="classMs_1_1ScoreElement.html#a9b9c00757c23cba103638b4ab63df03e">Ms::ScoreElement::propertyFlags</a></div><div class="ttdeci">virtual PropertyFlags propertyFlags(Pid) const</div><div class="ttdef"><b>Definition:</b> <a href="scoreElement_8cpp_source.html#l00739">scoreElement.cpp:739</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_aab24975d37461c662a3643a89586075f"><div class="ttname"><a href="classMs_1_1ScoreView.html#aab24975d37461c662a3643a89586075f">Ms::ScoreView::moveCursor</a></div><div class="ttdeci">virtual void moveCursor() override</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l00797">scoreview.cpp:797</a></div></div>
<div class="ttc" id="textframe_8h_html"><div class="ttname"><a href="textframe_8h.html">textframe.h</a></div></div>
<div class="ttc" id="classMs_1_1ScoreElement_html_a06e5d7c169bf6eb01f5f723cbdae973f"><div class="ttname"><a href="classMs_1_1ScoreElement.html#a06e5d7c169bf6eb01f5f723cbdae973f">Ms::ScoreElement::isMeasureBase</a></div><div class="ttdeci">bool isMeasureBase() const</div><div class="ttdef"><b>Definition:</b> <a href="scoreElement_8h_source.html#l00368">scoreElement.h:368</a></div></div>
<div class="ttc" id="namespaceMs_html_a20d9370e85f87d0b2594fd90665f8cc1a7783e8aebb6f509bcfe7b235b73cc39a"><div class="ttname"><a href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a7783e8aebb6f509bcfe7b235b73cc39a">Ms::ViewState::DRAG_OBJECT</a></div></div>
<div class="ttc" id="avslog_8h_html_a90284ee45bce6d3f26e10946dd622af1"><div class="ttname"><a href="avslog_8h.html#a90284ee45bce6d3f26e10946dd622af1">LOGW</a></div><div class="ttdeci">#define LOGW()</div><div class="ttdef"><b>Definition:</b> <a href="avslog_8h_source.html#l00027">avslog.h:27</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_ac472aad2e547b4f9ab772ada8e8c4319"><div class="ttname"><a href="classMs_1_1ScoreView.html#ac472aad2e547b4f9ab772ada8e8c4319">Ms::ScoreView::editPaste</a></div><div class="ttdeci">void editPaste()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l01978">scoreview.cpp:1978</a></div></div>
<div class="ttc" id="keysig_8h_html"><div class="ttname"><a href="keysig_8h.html">keysig.h</a></div></div>
<div class="ttc" id="classMs_1_1Measure_html_ae92cfe704a9477074d0fbe1a3bb6ff61"><div class="ttname"><a href="classMs_1_1Measure.html#ae92cfe704a9477074d0fbe1a3bb6ff61">Ms::Measure::isMMRest</a></div><div class="ttdeci">bool isMMRest() const</div><div class="ttdef"><b>Definition:</b> <a href="measure_8h_source.html#l00252">measure.h:252</a></div></div>
<div class="ttc" id="classMs_1_1InputState_html_ac2992a6014b8bfb377796e3300562ee4"><div class="ttname"><a href="classMs_1_1InputState.html#ac2992a6014b8bfb377796e3300562ee4">Ms::InputState::moveToNextInputPos</a></div><div class="ttdeci">void moveToNextInputPos()</div><div class="ttdef"><b>Definition:</b> <a href="input_8cpp_source.html#l00256">input.cpp:256</a></div></div>
<div class="ttc" id="classMs_1_1MScore_html_ab56667808f0d632f2f7d6bfd1093e1f0"><div class="ttname"><a href="classMs_1_1MScore.html#ab56667808f0d632f2f7d6bfd1093e1f0">Ms::MScore::frameMarginColor</a></div><div class="ttdeci">static QColor frameMarginColor</div><div class="ttdef"><b>Definition:</b> <a href="mscore_8h_source.html#l00339">mscore.h:339</a></div></div>
<div class="ttc" id="classMs_1_1Slur_html_a3d7984862158dfeaf3e430e8837e8609"><div class="ttname"><a href="classMs_1_1Slur.html#a3d7984862158dfeaf3e430e8837e8609">Ms::Slur::clone</a></div><div class="ttdeci">Slur * clone() const override</div><div class="ttdef"><b>Definition:</b> <a href="slur_8h_source.html#l00062">slur.h:62</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_a951493711a51487f7f3c1786703b1a20"><div class="ttname"><a href="classMs_1_1Element.html#a951493711a51487f7f3c1786703b1a20">Ms::Element::placement</a></div><div class="ttdeci">Placement placement() const</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00228">element.h:228</a></div></div>
<div class="ttc" id="namespaceMs_html_a2bac757437d1a9e364db27de8f9c9e2ea92f4fe2c3c172220a2992018a69246b9"><div class="ttname"><a href="namespaceMs.html#a2bac757437d1a9e364db27de8f9c9e2ea92f4fe2c3c172220a2992018a69246b9">Ms::Sid::concertPitch</a></div></div>
<div class="ttc" id="classMs_1_1Chord_html_a0d74c6da05f4744a4dcdf7b08b5eb33f"><div class="ttname"><a href="classMs_1_1Chord.html#a0d74c6da05f4744a4dcdf7b08b5eb33f">Ms::Chord::segment</a></div><div class="ttdeci">Segment * segment() const override</div><div class="ttdef"><b>Definition:</b> <a href="chord_8cpp_source.html#l02993">chord.cpp:2993</a></div></div>
<div class="ttc" id="namespaceMs_html_a1aa5dd7502c1d6ba1ca37f5bfd14fda6ab1a326c06d88bf042f73d70f50197905"><div class="ttname"><a href="namespaceMs.html#a1aa5dd7502c1d6ba1ca37f5bfd14fda6ab1a326c06d88bf042f73d70f50197905">Ms::Grip::END</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_af0912f5fb5190a4fa489063b421093fa"><div class="ttname"><a href="classMs_1_1Element.html#af0912f5fb5190a4fa489063b421093fa">Ms::Element::findMeasureBase</a></div><div class="ttdeci">MeasureBase * findMeasureBase()</div><div class="ttdef"><b>Definition:</b> <a href="element_8cpp_source.html#l01494">element.cpp:1494</a></div></div>
<div class="ttc" id="namespaceMs_html_aba304e35acf732434f3c3d8b72562885a9e1cb865c1ca3816054dea26aa36b5cd"><div class="ttname"><a href="namespaceMs.html#aba304e35acf732434f3c3d8b72562885a9e1cb865c1ca3816054dea26aa36b5cd">Ms::STATE_FOTO</a></div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00081">globals.h:81</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_ab3227faba09a745523ba6748d9f94ab5"><div class="ttname"><a href="classMs_1_1Element.html#ab3227faba09a745523ba6748d9f94ab5">Ms::Element::undoChangeProperty</a></div><div class="ttdeci">virtual void undoChangeProperty(Pid id, const QVariant &amp;, PropertyFlags ps) override</div><div class="ttdef"><b>Definition:</b> <a href="element_8cpp_source.html#l01330">element.cpp:1330</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a804ddae9ab90338b17272e5cb470cda0"><div class="ttname"><a href="classMs_1_1ScoreView.html#a804ddae9ab90338b17272e5cb470cda0">Ms::ScoreView::inputMethodQuery</a></div><div class="ttdeci">QVariant inputMethodQuery(Qt::InputMethodQuery query) const override</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03335">scoreview.cpp:3335</a></div></div>
<div class="ttc" id="classMs_1_1ChordRest_html_aea020692fd005da199a5bc982fe96792"><div class="ttname"><a href="classMs_1_1ChordRest.html#aea020692fd005da199a5bc982fe96792">Ms::ChordRest::undoAddAnnotation</a></div><div class="ttdeci">void undoAddAnnotation(Element *)</div><div class="ttdef"><b>Definition:</b> <a href="chordrest_8cpp_source.html#l01389">chordrest.cpp:1389</a></div></div>
<div class="ttc" id="classMs_1_1TextBase_html_abc35bbd384acee59bc2911fdb6c3581f"><div class="ttname"><a href="classMs_1_1TextBase.html#abc35bbd384acee59bc2911fdb6c3581f">Ms::TextBase::movePosition</a></div><div class="ttdeci">void movePosition(EditData &amp;, QTextCursor::MoveOperation)</div><div class="ttdef"><b>Definition:</b> <a href="textedit_8cpp_source.html#l00480">textedit.cpp:480</a></div></div>
<div class="ttc" id="namespaceMs_html_a0170d0c2acdf047caab45053aec53588"><div class="ttname"><a href="namespaceMs.html#a0170d0c2acdf047caab45053aec53588">Ms::toMeasureBase</a></div><div class="ttdeci">static const MeasureBase * toMeasureBase(const ScoreElement *e)</div><div class="ttdef"><b>Definition:</b> <a href="scoreElement_8h_source.html#l00463">scoreElement.h:463</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a305f267437093a7464c5ccd1d9ae48ce"><div class="ttname"><a href="classMs_1_1ScoreView.html#a305f267437093a7464c5ccd1d9ae48ce">Ms::ScoreView::calculatePhysicalZoomLevel</a></div><div class="ttdeci">qreal calculatePhysicalZoomLevel(const ZoomIndex index, const qreal logicalFreeZoomLevel=0.0) const</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l01805">scoreview.cpp:1805</a></div></div>
<div class="ttc" id="classMs_1_1NoteHead_html_a1d3e8faf3d3bc1d89d9d3485acde69d1a6a94b8d56da1b6f881b076e10170e9a2"><div class="ttname"><a href="classMs_1_1NoteHead.html#a1d3e8faf3d3bc1d89d9d3485acde69d1a6a94b8d56da1b6f881b076e10170e9a2">Ms::NoteHead::Group::HEAD_NORMAL</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_ac1809e667c46e84b527ad0570b12db98"><div class="ttname"><a href="classMs_1_1ScoreView.html#ac1809e667c46e84b527ad0570b12db98">Ms::ScoreView::updateContinuousPanel</a></div><div class="ttdeci">void updateContinuousPanel()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l05346">scoreview.cpp:5346</a></div></div>
<div class="ttc" id="namespaceMs_html_ad1b3e57dfd5b26a280bf2ebde66b9d5aaf97f280fc46a662f2c66053ea3221d26"><div class="ttname"><a href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aaf97f280fc46a662f2c66053ea3221d26">Ms::Tid::STRING_NUMBER</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_a30c056051bbce9e867a512b8cbc1f912"><div class="ttname"><a href="classMs_1_1Element.html#a30c056051bbce9e867a512b8cbc1f912">Ms::Element::y</a></div><div class="ttdeci">virtual qreal y() const</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00245">element.h:245</a></div></div>
<div class="ttc" id="namespaceMs_html_aba304e35acf732434f3c3d8b72562885a376c7348e7b637fe5b9ddb868a5b54ac"><div class="ttname"><a href="namespaceMs.html#aba304e35acf732434f3c3d8b72562885a376c7348e7b637fe5b9ddb868a5b54ac">Ms::STATE_PLAY</a></div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00080">globals.h:80</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a42bc8186d9c05767fcc585b4e0b8eb5a"><div class="ttname"><a href="classMs_1_1Score.html#a42bc8186d9c05767fcc585b4e0b8eb5a">Ms::Score::moveUp</a></div><div class="ttdeci">void moveUp(ChordRest *)</div><div class="ttdef"><b>Definition:</b> <a href="cmd_8cpp_source.html#l01949">cmd.cpp:1949</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a46e805141dd47aad785718cddee9aed2"><div class="ttname"><a href="classMs_1_1ScoreView.html#a46e805141dd47aad785718cddee9aed2">Ms::ScoreView::cursorTick</a></div><div class="ttdeci">Fraction cursorTick() const</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l00907">scoreview.cpp:907</a></div></div>
<div class="ttc" id="namespaceMs_html_a2c92ce0204176ede1ab86e2f44ae6b9eaaa8453bcc6cf9cdd8d59eed1ae92759d"><div class="ttname"><a href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9eaaa8453bcc6cf9cdd8d59eed1ae92759d">Ms::ElementType::NOTEDOT</a></div></div>
<div class="ttc" id="continuouspanel_8h_html"><div class="ttname"><a href="continuouspanel_8h.html">continuouspanel.h</a></div></div>
<div class="ttc" id="texttools_8h_html"><div class="ttname"><a href="texttools_8h.html">texttools.h</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a3b0ebe7e7559cb8b28b944169abb4dc7"><div class="ttname"><a href="classMs_1_1ScoreView.html#a3b0ebe7e7559cb8b28b944169abb4dc7">Ms::ScoreView::figuredBassTab</a></div><div class="ttdeci">void figuredBassTab(bool meas, bool back)</div><div class="ttdef"><b>Definition:</b> <a href="editfiguredbass_8cpp_source.html#l00031">editfiguredbass.cpp:31</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_ad05366185d03cc9ab5a1faf63a1532c1"><div class="ttname"><a href="classMs_1_1ScoreView.html#ad05366185d03cc9ab5a1faf63a1532c1">Ms::ScoreView::updateShadowNotes</a></div><div class="ttdeci">void updateShadowNotes()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l05356">scoreview.cpp:5356</a></div></div>
<div class="ttc" id="classMs_1_1ChordRest_html_a4c0205b5940976cc9f7cb9eb543fbc08"><div class="ttname"><a href="classMs_1_1ChordRest.html#a4c0205b5940976cc9f7cb9eb543fbc08">Ms::ChordRest::durationType</a></div><div class="ttdeci">const TDuration durationType() const</div><div class="ttdef"><b>Definition:</b> <a href="chordrest_8h_source.html#l00120">chordrest.h:120</a></div></div>
<div class="ttc" id="classMs_1_1Lyrics_html"><div class="ttname"><a href="classMs_1_1Lyrics.html">Ms::Lyrics</a></div><div class="ttdef"><b>Definition:</b> <a href="lyrics_8h_source.html#l00027">lyrics.h:27</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_aa9f1f9e5918591039639de8d4d56e4cf"><div class="ttname"><a href="classMs_1_1ScoreView.html#aa9f1f9e5918591039639de8d4d56e4cf">Ms::ScoreView::changeVoice</a></div><div class="ttdeci">void changeVoice(int voice)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l04414">scoreview.cpp:4414</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_a9f375d79304c4cec5b45ea883c9efc86"><div class="ttname"><a href="classMs_1_1Element.html#a9f375d79304c4cec5b45ea883c9efc86">Ms::Element::spatium</a></div><div class="ttdeci">qreal spatium() const</div><div class="ttdef"><b>Definition:</b> <a href="element_8cpp_source.html#l00132">element.cpp:132</a></div></div>
<div class="ttc" id="structMs_1_1Preferences_html_a198a5eec01a96b4647546bd140e2a9f1"><div class="ttname"><a href="structMs_1_1Preferences.html#a198a5eec01a96b4647546bd140e2a9f1">Ms::Preferences::getDouble</a></div><div class="ttdeci">double getDouble(const QString key) const</div><div class="ttdef"><b>Definition:</b> <a href="preferences_8cpp_source.html#l00478">preferences.cpp:478</a></div></div>
<div class="ttc" id="namespaceMs_html_a20d9370e85f87d0b2594fd90665f8cc1a64b23c0b6154207e74e72976b7367845"><div class="ttname"><a href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a64b23c0b6154207e74e72976b7367845">Ms::ViewState::FOTO_LASSO</a></div></div>
<div class="ttc" id="mscore_8h_html_a7b14c16d0b45fd100ee97e74cfd907c0"><div class="ttname"><a href="mscore_8h.html#a7b14c16d0b45fd100ee97e74cfd907c0">VOICES</a></div><div class="ttdeci">#define VOICES</div><div class="ttdef"><b>Definition:</b> <a href="mscore_8h_source.html#l00074">mscore.h:74</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a920bfb0637f25f850df1c5483a0cff5b"><div class="ttname"><a href="classMs_1_1ScoreView.html#a920bfb0637f25f850df1c5483a0cff5b">Ms::ScoreView::fotoMode</a></div><div class="ttdeci">bool fotoMode() const</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l05397">scoreview.cpp:5397</a></div></div>
<div class="ttc" id="hairpin_8h_html"><div class="ttname"><a href="hairpin_8h.html">hairpin.h</a></div></div>
<div class="ttc" id="namespaceMs_html_a1066451ad9dc9959bedb76978f4f30c8a01036ddcc971d02f6c32c3da31a119f2"><div class="ttname"><a href="namespaceMs.html#a1066451ad9dc9959bedb76978f4f30c8a01036ddcc971d02f6c32c3da31a119f2">Ms::SelectType::RANGE</a></div></div>
<div class="ttc" id="namespaceMs_html_a80af7e281899de1319da9691bc9c13bd"><div class="ttname"><a href="namespaceMs.html#a80af7e281899de1319da9691bc9c13bd">Ms::enableExperimental</a></div><div class="ttdeci">bool enableExperimental</div><div class="ttdef"><b>Definition:</b> <a href="musescore_8cpp_source.html#l00186">musescore.cpp:186</a></div></div>
<div class="ttc" id="classMs_1_1Fraction_html_a1d92a73ce7f9b7f895a9a083f6fe1eb2"><div class="ttname"><a href="classMs_1_1Fraction.html#a1d92a73ce7f9b7f895a9a083f6fe1eb2">Ms::Fraction::ticks</a></div><div class="ttdeci">int ticks() const</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2fraction_8h_source.html#l00238">fraction.h:238</a></div></div>
<div class="ttc" id="classMs_1_1Tuplet_html"><div class="ttname"><a href="classMs_1_1Tuplet.html">Ms::Tuplet</a></div><div class="ttdoc">Example of 1/8 triplet: _baseLen = 1/8 (tuplet is measured in eighth notes) _ratio = 3/2 (3 eighth tu...</div><div class="ttdef"><b>Definition:</b> <a href="tuplet_8h_source.html#l00036">tuplet.h:36</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_ae47cb4db4ed5cdfaf6fbe97b49c9794a"><div class="ttname"><a href="classMs_1_1ScoreView.html#ae47cb4db4ed5cdfaf6fbe97b49c9794a">Ms::ScoreView::state</a></div><div class="ttdeci">ViewState state</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8h_source.html#l00159">scoreview.h:159</a></div></div>
<div class="ttc" id="classMs_1_1Segment_html_accf66d981db70ac1bd843ca5e03330a1"><div class="ttname"><a href="classMs_1_1Segment.html#accf66d981db70ac1bd843ca5e03330a1">Ms::Segment::segmentType</a></div><div class="ttdeci">static SegmentType segmentType(ElementType type)</div><div class="ttdef"><b>Definition:</b> <a href="segment_8cpp_source.html#l00749">segment.cpp:749</a></div></div>
<div class="ttc" id="namespaceMs_html_a043567da093e3157ef81be2d3d641bb2"><div class="ttname"><a href="namespaceMs.html#a043567da093e3157ef81be2d3d641bb2">Ms::elementLessThan</a></div><div class="ttdeci">bool elementLessThan(const Element *const e1, const Element *const e2)</div><div class="ttdef"><b>Definition:</b> <a href="element_8cpp_source.html#l01192">element.cpp:1192</a></div></div>
<div class="ttc" id="classMs_1_1Segment_html_a9adaf3b1b191b949ca562d891c4c5a49"><div class="ttname"><a href="classMs_1_1Segment.html#a9adaf3b1b191b949ca562d891c4c5a49">Ms::Segment::cr</a></div><div class="ttdeci">ChordRest * cr(int track) const</div><div class="ttdef"><b>Definition:</b> <a href="segment_8h_source.html#l00233">segment.h:233</a></div></div>
<div class="ttc" id="classMs_1_1TDuration_html_a5f699dd041973be93c8bef472927ee5f"><div class="ttname"><a href="classMs_1_1TDuration.html#a5f699dd041973be93c8bef472927ee5f">Ms::TDuration::fraction</a></div><div class="ttdeci">Fraction fraction() const</div><div class="ttdef"><b>Definition:</b> <a href="durationtype_8cpp_source.html#l00400">durationtype.cpp:400</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_af5e6bac5107fc313d59d07c8dbe28dfe"><div class="ttname"><a href="classMs_1_1Score.html#af5e6bac5107fc313d59d07c8dbe28dfe">Ms::Score::getSelectedChordRest</a></div><div class="ttdeci">ChordRest * getSelectedChordRest() const</div><div class="ttdef"><b>Definition:</b> <a href="edit_8cpp_source.html#l00078">edit.cpp:78</a></div></div>
<div class="ttc" id="classMs_1_1TDuration_html_ad9263bf173856b77421e83a48a7bf68caedb942968b04a93a934e1e7300694ed5"><div class="ttname"><a href="classMs_1_1TDuration.html#ad9263bf173856b77421e83a48a7bf68caedb942968b04a93a934e1e7300694ed5">Ms::TDuration::DurationType::V_EIGHTH</a></div></div>
<div class="ttc" id="classMs_1_1InputState_html_a50906efca36b635813b754bff9b32f15"><div class="ttname"><a href="classMs_1_1InputState.html#a50906efca36b635813b754bff9b32f15">Ms::InputState::segment</a></div><div class="ttdeci">Segment * segment() const</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00071">input.h:71</a></div></div>
<div class="ttc" id="namespaceBww_html_a3e78f1ce9898d7fcb3f7e7adfec046f1ace1daf3e3c443b9ff1e3aa11b5a3c34c"><div class="ttname"><a href="namespaceBww.html#a3e78f1ce9898d7fcb3f7e7adfec046f1ace1daf3e3c443b9ff1e3aa11b5a3c34c">Bww::TIE</a></div><div class="ttdef"><b>Definition:</b> <a href="symbols_8h_source.html#l00043">symbols.h:43</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_a90f21ba358732f3c471069758d84a76f"><div class="ttname"><a href="classMs_1_1Element.html#a90f21ba358732f3c471069758d84a76f">Ms::Element::mimeData</a></div><div class="ttdeci">virtual QByteArray mimeData(const QPointF &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="element_8cpp_source.html#l00965">element.cpp:965</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a1147e4dd0925960bd9ebf8124c2b5d7a"><div class="ttname"><a href="classMs_1_1Score.html#a1147e4dd0925960bd9ebf8124c2b5d7a">Ms::Score::tick2rightSegment</a></div><div class="ttdeci">Segment * tick2rightSegment(const Fraction &amp;tick, bool useMMrest=false) const</div><div class="ttdoc">return the segment at this tick position if any or the first segment after this tick position ...</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2utils_8cpp_source.html#l00206">utils.cpp:206</a></div></div>
<div class="ttc" id="classMs_1_1ChangeDrumset_html"><div class="ttname"><a href="classMs_1_1ChangeDrumset.html">Ms::ChangeDrumset</a></div><div class="ttdef"><b>Definition:</b> <a href="undo_8h_source.html#l01334">undo.h:1334</a></div></div>
<div class="ttc" id="namespaceMs_html_ad1b3e57dfd5b26a280bf2ebde66b9d5aa4755a6fd5219c602faa261bb02e0aa82"><div class="ttname"><a href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aa4755a6fd5219c602faa261bb02e0aa82">Ms::Tid::SUBTITLE</a></div></div>
<div class="ttc" id="classMs_1_1Shape_html_af605f5193bfe217ac0305a749fade8ff"><div class="ttname"><a href="classMs_1_1Shape.html#af605f5193bfe217ac0305a749fade8ff">Ms::Shape::paint</a></div><div class="ttdeci">void paint(QPainter &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="shape_8cpp_source.html#l00282">shape.cpp:282</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_ac64eee038c2d81d1ae934be877d8acc5"><div class="ttname"><a href="classMs_1_1Element.html#ac64eee038c2d81d1ae934be877d8acc5">Ms::Element::abbox</a></div><div class="ttdeci">QRectF abbox() const</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00282">element.h:282</a></div></div>
<div class="ttc" id="classMs_1_1EditData_html_a07230d29679583b1e4e23a7bfa4078ec"><div class="ttname"><a href="classMs_1_1EditData.html#a07230d29679583b1e4e23a7bfa4078ec">Ms::EditData::element</a></div><div class="ttdeci">Element * element</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00142">element.h:142</a></div></div>
<div class="ttc" id="classMs_1_1ScoreElement_html_aceed92c262270a2a79d3f97d0f018a29"><div class="ttname"><a href="classMs_1_1ScoreElement.html#aceed92c262270a2a79d3f97d0f018a29">Ms::ScoreElement::setPropertyFlags</a></div><div class="ttdeci">void setPropertyFlags(Pid, PropertyFlags)</div><div class="ttdef"><b>Definition:</b> <a href="scoreElement_8cpp_source.html#l00753">scoreElement.cpp:753</a></div></div>
<div class="ttc" id="classMs_1_1CmdState_html_a8d35125e832552b4285446381358bcf2"><div class="ttname"><a href="classMs_1_1CmdState.html#a8d35125e832552b4285446381358bcf2">Ms::CmdState::endTick</a></div><div class="ttdeci">Fraction endTick() const</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l00300">score.h:300</a></div></div>
<div class="ttc" id="classMs_1_1Chord_html_ace8797d2ee2406c3c6a58f011e6b3e04"><div class="ttname"><a href="classMs_1_1Chord.html#ace8797d2ee2406c3c6a58f011e6b3e04">Ms::Chord::selectedNote</a></div><div class="ttdeci">Note * selectedNote() const</div><div class="ttdef"><b>Definition:</b> <a href="chord_8cpp_source.html#l00957">chord.cpp:957</a></div></div>
<div class="ttc" id="classMs_1_1FretDiagram_html"><div class="ttname"><a href="classMs_1_1FretDiagram.html">Ms::FretDiagram</a></div><div class="ttdoc">Fretboard diagram. </div><div class="ttdef"><b>Definition:</b> <a href="fret_8h_source.html#l00127">fret.h:127</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a44c6bd40d3aa305ab04894c56f47d972"><div class="ttname"><a href="classMs_1_1ScoreView.html#a44c6bd40d3aa305ab04894c56f47d972">Ms::ScoreView::yoffset</a></div><div class="ttdeci">qreal yoffset() const</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03412">scoreview.cpp:3412</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a3e4dce39cb7000ffb7b6b9624a08a553"><div class="ttname"><a href="classMs_1_1ScoreView.html#a3e4dce39cb7000ffb7b6b9624a08a553">Ms::ScoreView::midiNoteReceived</a></div><div class="ttdeci">void midiNoteReceived(int pitch, bool chord, int velocity)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l04471">scoreview.cpp:4471</a></div></div>
<div class="ttc" id="classMs_1_1DurationElement_html_ab33a18c124a4f211bf9754856916fb80"><div class="ttname"><a href="classMs_1_1DurationElement.html#ab33a18c124a4f211bf9754856916fb80">Ms::DurationElement::setTuplet</a></div><div class="ttdeci">void setTuplet(Tuplet *t)</div><div class="ttdef"><b>Definition:</b> <a href="duration_8h_source.html#l00049">duration.h:49</a></div></div>
<div class="ttc" id="seq_8h_html"><div class="ttname"><a href="seq_8h.html">seq.h</a></div></div>
<div class="ttc" id="namespaceMs_html_a4ddd02afd2f797a6a269ddce7466a4d6ae1f2d5134ed2543d38a0de9751cf75d9"><div class="ttname"><a href="namespaceMs.html#a4ddd02afd2f797a6a269ddce7466a4d6ae1f2d5134ed2543d38a0de9751cf75d9">Ms::Direction::AUTO</a></div></div>
<div class="ttc" id="classMs_1_1TDuration_html_ad9263bf173856b77421e83a48a7bf68ca05e8f1c139e16d278117c17e7fc13ef6"><div class="ttname"><a href="classMs_1_1TDuration.html#ad9263bf173856b77421e83a48a7bf68ca05e8f1c139e16d278117c17e7fc13ef6">Ms::TDuration::DurationType::V_QUARTER</a></div></div>
<div class="ttc" id="classMs_1_1SwapCR_html"><div class="ttname"><a href="classMs_1_1SwapCR.html">Ms::SwapCR</a></div><div class="ttdef"><b>Definition:</b> <a href="undo_8h_source.html#l00986">undo.h:986</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a3dc36593be9301e1e5461fecfdbee728"><div class="ttname"><a href="classMs_1_1ScoreView.html#a3dc36593be9301e1e5461fecfdbee728">Ms::ScoreView::doDragLasso</a></div><div class="ttdeci">void doDragLasso(QMouseEvent *ev)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03290">scoreview.cpp:3290</a></div></div>
<div class="ttc" id="classMs_1_1Avs_1_1AvsOmrDrawer_html"><div class="ttname"><a href="classMs_1_1Avs_1_1AvsOmrDrawer.html">Ms::Avs::AvsOmrDrawer</a></div><div class="ttdef"><b>Definition:</b> <a href="avsomrdrawer_8h_source.html#l00032">avsomrdrawer.h:32</a></div></div>
<div class="ttc" id="box_8h_html"><div class="ttname"><a href="box_8h.html">box.h</a></div><div class="ttdoc">Definition of HBox and VBox classes. </div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a9a2bb9cc4c5b513c37161738cb456509"><div class="ttname"><a href="classMs_1_1ScoreView.html#a9a2bb9cc4c5b513c37161738cb456509">Ms::ScoreView::cmdAddHairpin</a></div><div class="ttdeci">virtual void cmdAddHairpin(HairpinType)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l04108">scoreview.cpp:4108</a></div></div>
<div class="ttc" id="classMs_1_1InputState_html_a15cf2602df222da8558a2d6a43e66b19"><div class="ttname"><a href="classMs_1_1InputState.html#a15cf2602df222da8558a2d6a43e66b19">Ms::InputState::track</a></div><div class="ttdeci">int track() const</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00083">input.h:83</a></div></div>
<div class="ttc" id="classMs_1_1MeasureBase_html_a5e411c5bec8ab7b9120cf7f2ace28a89"><div class="ttname"><a href="classMs_1_1MeasureBase.html#a5e411c5bec8ab7b9120cf7f2ace28a89">Ms::MeasureBase::nextMeasureMM</a></div><div class="ttdeci">Ms::Measure * nextMeasureMM() const</div><div class="ttdef"><b>Definition:</b> <a href="measurebase_8cpp_source.html#l00213">measurebase.cpp:213</a></div></div>
<div class="ttc" id="classMs_1_1TextBase_html_a71cffa380431f2f83d4fbecc2f8538b0"><div class="ttname"><a href="classMs_1_1TextBase.html#a71cffa380431f2f83d4fbecc2f8538b0">Ms::TextBase::initTid</a></div><div class="ttdeci">void initTid(Tid id)</div><div class="ttdef"><b>Definition:</b> <a href="textbase_8cpp_source.html#l03002">textbase.cpp:3002</a></div></div>
<div class="ttc" id="classMs_1_1StaffType_html_a5c8edcd1dcd113c55d1a682cf422c26e"><div class="ttname"><a href="classMs_1_1StaffType.html#a5c8edcd1dcd113c55d1a682cf422c26e">Ms::StaffType::physStringToYOffset</a></div><div class="ttdeci">qreal physStringToYOffset(int strg) const</div><div class="ttdef"><b>Definition:</b> <a href="stafftype_8cpp_source.html#l00826">stafftype.cpp:826</a></div></div>
<div class="ttc" id="classMs_1_1ScoreElement_html"><div class="ttname"><a href="classMs_1_1ScoreElement.html">Ms::ScoreElement</a></div><div class="ttdef"><b>Definition:</b> <a href="scoreElement_8h_source.html#l00173">scoreElement.h:173</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a45f203d4720642f1765b382b237d51b8"><div class="ttname"><a href="classMs_1_1Score.html#a45f203d4720642f1765b382b237d51b8">Ms::Score::getSelectedChordRests</a></div><div class="ttdeci">QSet&lt; ChordRest * &gt; getSelectedChordRests() const</div><div class="ttdef"><b>Definition:</b> <a href="edit_8cpp_source.html#l00122">edit.cpp:122</a></div></div>
<div class="ttc" id="classMs_1_1Measure_html_a9109c2c9621f0cc9ecd86afcae54afe8"><div class="ttname"><a href="classMs_1_1Measure.html#a9109c2c9621f0cc9ecd86afcae54afe8">Ms::Measure::mmRest</a></div><div class="ttdeci">Measure * mmRest() const</div><div class="ttdef"><b>Definition:</b> <a href="measure_8h_source.html#l00253">measure.h:253</a></div></div>
<div class="ttc" id="namespaceMs_html_ad1b3e57dfd5b26a280bf2ebde66b9d5aa5e25078623973232ebcdabaca6ed82c3"><div class="ttname"><a href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aa5e25078623973232ebcdabaca6ed82c3">Ms::Tid::COMPOSER</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a8fe1c8c0c77f212d97d3b6baaa215ffc"><div class="ttname"><a href="classMs_1_1ScoreView.html#a8fe1c8c0c77f212d97d3b6baaa215ffc">Ms::ScoreView::canvasViewport</a></div><div class="ttdeci">QRectF canvasViewport() const</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8h_source.html#l00469">scoreview.h:469</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_a52b30fdd589beba5b760a561a50ac601"><div class="ttname"><a href="classMs_1_1Element.html#a52b30fdd589beba5b760a561a50ac601">Ms::Element::parent</a></div><div class="ttdeci">Element * parent() const</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00199">element.h:199</a></div></div>
<div class="ttc" id="classMs_1_1ScoreTab_html_a92a67736a8eff82a18de4e524904377f"><div class="ttname"><a href="classMs_1_1ScoreTab.html#a92a67736a8eff82a18de4e524904377f">Ms::ScoreTab::currentIndex</a></div><div class="ttdeci">int currentIndex() const</div><div class="ttdef"><b>Definition:</b> <a href="scoretab_8cpp_source.html#l00466">scoretab.cpp:466</a></div></div>
<div class="ttc" id="classMs_1_1Tuplet_html_aa73835ab3d3b43501f4761576db56023"><div class="ttname"><a href="classMs_1_1Tuplet.html#aa73835ab3d3b43501f4761576db56023">Ms::Tuplet::setTick</a></div><div class="ttdeci">void setTick(const Fraction &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="tuplet_8h_source.html#l00124">tuplet.h:124</a></div></div>
<div class="ttc" id="classMs_1_1Selection_html_aa8f7f63c5dc2fb6f1d52d3338481a451"><div class="ttname"><a href="classMs_1_1Selection.html#aa8f7f63c5dc2fb6f1d52d3338481a451">Ms::Selection::measureRange</a></div><div class="ttdeci">bool measureRange(Measure **m1, Measure **m2) const</div><div class="ttdef"><b>Definition:</b> <a href="select_8cpp_source.html#l01253">select.cpp:1253</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_ae5512da94d1a2baacd493a34899e9548"><div class="ttname"><a href="classMs_1_1ScoreView.html#ae5512da94d1a2baacd493a34899e9548">Ms::ScoreView::setLogicalZoom</a></div><div class="ttdeci">void setLogicalZoom(ZoomIndex index, qreal logicalLevel, const QPointF &amp;pos=QPointF())</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l01752">scoreview.cpp:1752</a></div></div>
<div class="ttc" id="classMs_1_1Seq_html_abb1e3673970733b8564170ccee3c3b6e"><div class="ttname"><a href="classMs_1_1Seq.html#abb1e3673970733b8564170ccee3c3b6e">Ms::Seq::isPlaying</a></div><div class="ttdeci">bool isPlaying() const</div><div class="ttdef"><b>Definition:</b> <a href="seq_8h_source.html#l00256">seq.h:256</a></div></div>
<div class="ttc" id="namespaceMs_html_a3f252aa86f2284ccdc8ccfa26db5523bab50339a10e1de285ac99d4c3990b8693"><div class="ttname"><a href="namespaceMs.html#a3f252aa86f2284ccdc8ccfa26db5523bab50339a10e1de285ac99d4c3990b8693">Ms::AccidentalType::NONE</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a6585f1b1fc0f252c1e349f0fa5f3d77c"><div class="ttname"><a href="classMs_1_1ScoreView.html#a6585f1b1fc0f252c1e349f0fa5f3d77c">Ms::ScoreView::popupActive</a></div><div class="ttdeci">bool popupActive</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8h_source.html#l00207">scoreview.h:207</a></div></div>
<div class="ttc" id="classMs_1_1Fraction_html"><div class="ttname"><a href="classMs_1_1Fraction.html">Ms::Fraction</a></div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2fraction_8h_source.html#l00046">fraction.h:46</a></div></div>
<div class="ttc" id="navigate_8h_html"><div class="ttname"><a href="navigate_8h.html">navigate.h</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_ad48ce06a988e98b0da7d4cf1e6f56ded"><div class="ttname"><a href="classMs_1_1Element.html#ad48ce06a988e98b0da7d4cf1e6f56ded">Ms::Element::prevElement</a></div><div class="ttdeci">virtual Element * prevElement()</div><div class="ttdef"><b>Definition:</b> <a href="element_8cpp_source.html#l01717">element.cpp:1717</a></div></div>
<div class="ttc" id="classMs_1_1TextCursor_html_a4edbcbcd5699b08957c2869c32af433e"><div class="ttname"><a href="classMs_1_1TextCursor.html#a4edbcbcd5699b08957c2869c32af433e">Ms::TextCursor::cursorRect</a></div><div class="ttdeci">QRectF cursorRect() const</div><div class="ttdef"><b>Definition:</b> <a href="textbase_8cpp_source.html#l00213">textbase.cpp:213</a></div></div>
<div class="ttc" id="classMs_1_1System_html_a436845d5d0032348dfe5f9618d12cb0c"><div class="ttname"><a href="classMs_1_1System.html#a436845d5d0032348dfe5f9618d12cb0c">Ms::System::staves</a></div><div class="ttdeci">QList&lt; SysStaff * &gt; * staves()</div><div class="ttdef"><b>Definition:</b> <a href="system_8h_source.html#l00144">system.h:144</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_a31599e271170912967669cfddd1e49b4"><div class="ttname"><a href="classMs_1_1Element.html#a31599e271170912967669cfddd1e49b4">Ms::Element::prevSegmentElement</a></div><div class="ttdeci">virtual Element * prevSegmentElement()</div><div class="ttdef"><b>Definition:</b> <a href="element_8cpp_source.html#l01799">element.cpp:1799</a></div></div>
<div class="ttc" id="namespaceMs_html_a1aa5dd7502c1d6ba1ca37f5bfd14fda6"><div class="ttname"><a href="namespaceMs.html#a1aa5dd7502c1d6ba1ca37f5bfd14fda6">Ms::Grip</a></div><div class="ttdeci">Grip</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00045">element.h:45</a></div></div>
<div class="ttc" id="structMs_1_1Position_html_abbe729294840d35520143a7ebfebfbf7"><div class="ttname"><a href="structMs_1_1Position.html#abbe729294840d35520143a7ebfebfbf7">Ms::Position::line</a></div><div class="ttdeci">int line</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l00209">score.h:209</a></div></div>
<div class="ttc" id="classMs_1_1CmdState_html_a17c873235bb5faf9a9096a57f9613775"><div class="ttname"><a href="classMs_1_1CmdState.html#a17c873235bb5faf9a9096a57f9613775">Ms::CmdState::startTick</a></div><div class="ttdeci">Fraction startTick() const</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l00299">score.h:299</a></div></div>
<div class="ttc" id="namespaceMs_html_a24593d5bc01ac95fdbec3d354d258894a7884fad7b22d960efd4e9d84e61e7fe0"><div class="ttname"><a href="namespaceMs.html#a24593d5bc01ac95fdbec3d354d258894a7884fad7b22d960efd4e9d84e61e7fe0">Ms::SegmentType::ChordRest</a></div></div>
<div class="ttc" id="namespaceMs_html_a85cf0b33b7e6389d4e5c50007173b070"><div class="ttname"><a href="namespaceMs.html#a85cf0b33b7e6389d4e5c50007173b070">Ms::visibleElementInScore</a></div><div class="ttdeci">static const Element * visibleElementInScore(const Element *orig, const Score *s)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l05484">scoreview.cpp:5484</a></div></div>
<div class="ttc" id="classMs_1_1Measure_html_a9c4de13b592b3e0cc6a2398641da99ed"><div class="ttname"><a href="classMs_1_1Measure.html#a9c4de13b592b3e0cc6a2398641da99ed">Ms::Measure::system</a></div><div class="ttdeci">System * system() const</div><div class="ttdef"><b>Definition:</b> <a href="measure_8h_source.html#l00120">measure.h:120</a></div></div>
<div class="ttc" id="classMs_1_1System_html_a6ba93d243368e9e08b10ab5c1803bb70"><div class="ttname"><a href="classMs_1_1System.html#a6ba93d243368e9e08b10ab5c1803bb70">Ms::System::measure</a></div><div class="ttdeci">MeasureBase * measure(int idx)</div><div class="ttdef"><b>Definition:</b> <a href="system_8h_source.html#l00164">system.h:164</a></div></div>
<div class="ttc" id="classMs_1_1System_html_a57af65dafb20c1282ea78ba3d74725a0"><div class="ttname"><a href="classMs_1_1System.html#a57af65dafb20c1282ea78ba3d74725a0">Ms::System::page</a></div><div class="ttdeci">Page * page() const</div><div class="ttdef"><b>Definition:</b> <a href="system_8h_source.html#l00130">system.h:130</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a229ec32c64e743ef265e720ac0c44df3"><div class="ttname"><a href="classMs_1_1Score.html#a229ec32c64e743ef265e720ac0c44df3">Ms::Score::move</a></div><div class="ttdeci">Element * move(const QString &amp;cmd)</div><div class="ttdef"><b>Definition:</b> <a href="cmd_8cpp_source.html#l02275">cmd.cpp:2275</a></div></div>
<div class="ttc" id="classMs_1_1ScoreAccessibility_html_ae738485b5f6979cd0f41ca231a6bea12"><div class="ttname"><a href="classMs_1_1ScoreAccessibility.html#ae738485b5f6979cd0f41ca231a6bea12">Ms::ScoreAccessibility::instance</a></div><div class="ttdeci">static ScoreAccessibility * instance()</div><div class="ttdef"><b>Definition:</b> <a href="scoreaccessibility_8cpp_source.html#l00354">scoreaccessibility.cpp:354</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a81bde69ca9cf6a9bade63ac525eac9ce"><div class="ttname"><a href="classMs_1_1Score.html#a81bde69ca9cf6a9bade63ac525eac9ce">Ms::Score::addFiguredBass</a></div><div class="ttdeci">FiguredBass * addFiguredBass()</div><div class="ttdef"><b>Definition:</b> <a href="figuredbass_8cpp_source.html#l01762">figuredbass.cpp:1762</a></div></div>
<div class="ttc" id="xml_8h_html"><div class="ttname"><a href="xml_8h.html">xml.h</a></div></div>
<div class="ttc" id="namespaceMs_html_af04301d501c0fce5cd0c5bcdc4261286"><div class="ttname"><a href="namespaceMs.html#af04301d501c0fce5cd0c5bcdc4261286">Ms::elementLower</a></div><div class="ttdeci">static bool elementLower(const Element *e1, const Element *e2)</div><div class="ttdef"><b>Definition:</b> <a href="mscoreview_8cpp_source.html#l00023">mscoreview.cpp:23</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a687f074b331fe27ebec4b4d596f91e0e"><div class="ttname"><a href="classMs_1_1Score.html#a687f074b331fe27ebec4b4d596f91e0e">Ms::Score::startCmd</a></div><div class="ttdeci">void startCmd()</div><div class="ttdoc">Start a GUI command by clearing the redraw area and starting a user-visible undo. ...</div><div class="ttdef"><b>Definition:</b> <a href="cmd_8cpp_source.html#l00207">cmd.cpp:207</a></div></div>
<div class="ttc" id="namespaceMs_html_a55bf2366ce137fe11dcc963f9824ff09a2981e8499f73fe20e0ea11febc01a9c1"><div class="ttname"><a href="namespaceMs.html#a55bf2366ce137fe11dcc963f9824ff09a2981e8499f73fe20e0ea11febc01a9c1">Ms::MusicXmlSlash::RHYTHM</a></div></div>
<div class="ttc" id="classMs_1_1NoteDot_html"><div class="ttname"><a href="classMs_1_1NoteDot.html">Ms::NoteDot</a></div><div class="ttdef"><b>Definition:</b> <a href="notedot_8h_source.html#l00027">notedot.h:27</a></div></div>
<div class="ttc" id="classMs_1_1Rest_html_ac61e5972c98bd0b7f68c84e9b09ea825"><div class="ttname"><a href="classMs_1_1Rest.html#ac61e5972c98bd0b7f68c84e9b09ea825">Ms::Rest::measure</a></div><div class="ttdeci">Measure * measure() const override</div><div class="ttdef"><b>Definition:</b> <a href="rest_8h_source.html#l00056">rest.h:56</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a44222486dab8ce9252cff7a089a42e86"><div class="ttname"><a href="classMs_1_1ScoreView.html#a44222486dab8ce9252cff7a089a42e86">Ms::ScoreView::cmdGotoElement</a></div><div class="ttdeci">void cmdGotoElement(Element *)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l02050">scoreview.cpp:2050</a></div></div>
<div class="ttc" id="classMs_1_1TBox_html_a67a0d4ccc8145d56eb2ebd5b16add50a"><div class="ttname"><a href="classMs_1_1TBox.html#a67a0d4ccc8145d56eb2ebd5b16add50a">Ms::TBox::text</a></div><div class="ttdeci">Text * text()</div><div class="ttdef"><b>Definition:</b> <a href="textframe_8h_source.html#l00046">textframe.h:46</a></div></div>
<div class="ttc" id="namespaceMs_html_aba304e35acf732434f3c3d8b72562885a130366d4599cfbcecb504254314cc31f"><div class="ttname"><a href="namespaceMs.html#aba304e35acf732434f3c3d8b72562885a130366d4599cfbcecb504254314cc31f">Ms::STATE_NOTE_ENTRY_STAFF_TAB</a></div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00070">globals.h:70</a></div></div>
<div class="ttc" id="namespaceMs_html_a8ba055802fd4a7411880d6902e984be1ab50339a10e1de285ac99d4c3990b8693"><div class="ttname"><a href="namespaceMs.html#a8ba055802fd4a7411880d6902e984be1ab50339a10e1de285ac99d4c3990b8693">Ms::SelState::NONE</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a1ba0a11fa38c1b9aae97c33e314b1eb2"><div class="ttname"><a href="classMs_1_1ScoreView.html#a1ba0a11fa38c1b9aae97c33e314b1eb2">Ms::ScoreView::cmdMoveCR</a></div><div class="ttdeci">void cmdMoveCR(bool left)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l05261">scoreview.cpp:5261</a></div></div>
<div class="ttc" id="classMs_1_1SysStaff_html_aee9868a0f2bc566af571f4fd377d6741"><div class="ttname"><a href="classMs_1_1SysStaff.html#aee9868a0f2bc566af571f4fd377d6741">Ms::SysStaff::y</a></div><div class="ttdeci">qreal y() const</div><div class="ttdef"><b>Definition:</b> <a href="system_8h_source.html#l00063">system.h:63</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_a6ca9221d8858907d3063fa58255fb804"><div class="ttname"><a href="classMs_1_1Element.html#a6ca9221d8858907d3063fa58255fb804">Ms::Element::canvasBoundingRect</a></div><div class="ttdeci">QRectF canvasBoundingRect() const</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00284">element.h:284</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a336033b7ff252caa99dca592b20805de"><div class="ttname"><a href="classMs_1_1ScoreView.html#a336033b7ff252caa99dca592b20805de">Ms::ScoreView::cmdAppendMeasures</a></div><div class="ttdeci">void cmdAppendMeasures(int, ElementType)</div><div class="ttdoc">Append n measures. </div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l04792">scoreview.cpp:4792</a></div></div>
<div class="ttc" id="namespaceMs_html_a3a9adffa5e5207751ca4d55f50c8a32a"><div class="ttname"><a href="namespaceMs.html#a3a9adffa5e5207751ca4d55f50c8a32a">Ms::grip</a></div><div class="ttdeci">static const int grip</div><div class="ttdef"><b>Definition:</b> <a href="chordview_8cpp_source.html#l00026">chordview.cpp:26</a></div></div>
<div class="ttc" id="namespaceMs_html_aba304e35acf732434f3c3d8b72562885ae2abe15ad81637c074ea9b39e0c0cc45"><div class="ttname"><a href="namespaceMs.html#aba304e35acf732434f3c3d8b72562885ae2abe15ad81637c074ea9b39e0c0cc45">Ms::STATE_NOTE_ENTRY_STAFF_DRUM</a></div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00069">globals.h:69</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a64bcbb3dbfc6a89701c5c2d560d6fff2"><div class="ttname"><a href="classMs_1_1Score.html#a64bcbb3dbfc6a89701c5c2d560d6fff2">Ms::Score::selectMove</a></div><div class="ttdeci">Element * selectMove(const QString &amp;cmd)</div><div class="ttdef"><b>Definition:</b> <a href="cmd_8cpp_source.html#l02543">cmd.cpp:2543</a></div></div>
<div class="ttc" id="stafflines_8h_html"><div class="ttname"><a href="stafflines_8h.html">stafflines.h</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_aa7757f6d62dc28447706ee8eb12da5ec"><div class="ttname"><a href="classMs_1_1Element.html#aa7757f6d62dc28447706ee8eb12da5ec">Ms::Element::setParent</a></div><div class="ttdeci">void setParent(Element *e)</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00200">element.h:200</a></div></div>
<div class="ttc" id="measure_8h_html"><div class="ttname"><a href="measure_8h.html">measure.h</a></div><div class="ttdoc">Definition of class Measure. </div></div>
<div class="ttc" id="classMs_1_1Harmony_html_a7fa4692b8851bcdd4a45ccc3a62d6e36"><div class="ttname"><a href="classMs_1_1Harmony.html#a7fa4692b8851bcdd4a45ccc3a62d6e36">Ms::Harmony::setHarmonyType</a></div><div class="ttdeci">void setHarmonyType(HarmonyType val)</div><div class="ttdef"><b>Definition:</b> <a href="harmony_8cpp_source.html#l01956">harmony.cpp:1956</a></div></div>
<div class="ttc" id="classMs_1_1InputState_html_aa3c2705f1c6bbae2937ff66e367da527"><div class="ttname"><a href="classMs_1_1InputState.html#aa3c2705f1c6bbae2937ff66e367da527">Ms::InputState::slur</a></div><div class="ttdeci">Slur * slur() const</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00111">input.h:111</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a3042c1aa07e0321df617e7aaff37f67a"><div class="ttname"><a href="classMs_1_1ScoreView.html#a3042c1aa07e0321df617e7aaff37f67a">Ms::ScoreView::loopToggled</a></div><div class="ttdeci">void loopToggled(bool)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l05242">scoreview.cpp:5242</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a10b3dcb51582bccbc41e61a39df811df"><div class="ttname"><a href="classMs_1_1Score.html#a10b3dcb51582bccbc41e61a39df811df">Ms::Score::downAltCtrl</a></div><div class="ttdeci">Note * downAltCtrl(Note *) const</div><div class="ttdef"><b>Definition:</b> <a href="navigate_8cpp_source.html#l00264">navigate.cpp:264</a></div></div>
<div class="ttc" id="classMs_1_1TextBase_html_a523bd153f59fec4d0f45139da3ffa5e7"><div class="ttname"><a href="classMs_1_1TextBase.html#a523bd153f59fec4d0f45139da3ffa5e7">Ms::TextBase::cursor</a></div><div class="ttdeci">TextCursor * cursor(const EditData &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="textbase_8cpp_source.html#l03049">textbase.cpp:3049</a></div></div>
<div class="ttc" id="structMs_1_1Position_html_a1e2a764aa7f3f0d219b06415f5abc93d"><div class="ttname"><a href="structMs_1_1Position.html#a1e2a764aa7f3f0d219b06415f5abc93d">Ms::Position::segment</a></div><div class="ttdeci">Segment * segment</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l00207">score.h:207</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_ae429073049b54476891e1ea08ea4f66f"><div class="ttname"><a href="classMs_1_1Score.html#ae429073049b54476891e1ea08ea4f66f">Ms::Score::createRevision</a></div><div class="ttdeci">void createRevision()</div><div class="ttdef"><b>Definition:</b> <a href="scorefile_8cpp_source.html#l01142">scorefile.cpp:1142</a></div></div>
<div class="ttc" id="trill_8h_html"><div class="ttname"><a href="trill_8h.html">trill.h</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_af49b0ad7154217f60bf3ed22e00a3cee"><div class="ttname"><a href="classMs_1_1ScoreView.html#af49b0ad7154217f60bf3ed22e00a3cee">Ms::ScoreView::physicalZoomLevel</a></div><div class="ttdeci">qreal physicalZoomLevel() const</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03381">scoreview.cpp:3381</a></div></div>
<div class="ttc" id="harmony_8h_html"><div class="ttname"><a href="harmony_8h.html">harmony.h</a></div></div>
<div class="ttc" id="fret_8h_html"><div class="ttname"><a href="fret_8h.html">fret.h</a></div></div>
<div class="ttc" id="classMs_1_1Rest_html"><div class="ttname"><a href="classMs_1_1Rest.html">Ms::Rest</a></div><div class="ttdoc">This class implements a rest. </div><div class="ttdef"><b>Definition:</b> <a href="rest_8h_source.html#l00029">rest.h:29</a></div></div>
<div class="ttc" id="splitstaff_8h_html"><div class="ttname"><a href="splitstaff_8h.html">splitstaff.h</a></div></div>
<div class="ttc" id="classMs_1_1Drumset_html_a0c116c7a1faa14e7d3f5b583561f5245"><div class="ttname"><a href="classMs_1_1Drumset.html#a0c116c7a1faa14e7d3f5b583561f5245">Ms::Drumset::isValid</a></div><div class="ttdeci">bool isValid(int pitch) const</div><div class="ttdef"><b>Definition:</b> <a href="drumset_8h_source.html#l00072">drumset.h:72</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a99958594c126940e7da653f2e11d0fab"><div class="ttname"><a href="classMs_1_1ScoreView.html#a99958594c126940e7da653f2e11d0fab">Ms::ScoreView::normalSwap</a></div><div class="ttdeci">void normalSwap()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l01988">scoreview.cpp:1988</a></div></div>
<div class="ttc" id="classMs_1_1Drumset_html_a57e943db32934a5f5b85f56d6cc5dc47"><div class="ttname"><a href="classMs_1_1Drumset.html#a57e943db32934a5f5b85f56d6cc5dc47">Ms::Drumset::noteHead</a></div><div class="ttdeci">NoteHead::Group noteHead(int pitch) const</div><div class="ttdef"><b>Definition:</b> <a href="drumset_8h_source.html#l00073">drumset.h:73</a></div></div>
<div class="ttc" id="classMs_1_1Chord_html"><div class="ttname"><a href="classMs_1_1Chord.html">Ms::Chord</a></div><div class="ttdoc">Graphic representation of a chord. </div><div class="ttdef"><b>Definition:</b> <a href="chord_8h_source.html#l00055">chord.h:55</a></div></div>
<div class="ttc" id="namespaceMs_html_ab8c991c362b4c6671323072bdeb9c912a50dee7fcaa6b7b85fba1758b62a3cec5"><div class="ttname"><a href="namespaceMs.html#ab8c991c362b4c6671323072bdeb9c912a50dee7fcaa6b7b85fba1758b62a3cec5">Ms::HairpinType::CRESC_HAIRPIN</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_ade6f94fbbe9267df4d80e609191e1d6c"><div class="ttname"><a href="classMs_1_1ScoreView.html#ade6f94fbbe9267df4d80e609191e1d6c">Ms::ScoreView::cmdAddChordName</a></div><div class="ttdeci">void cmdAddChordName(HarmonyType ht)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l04596">scoreview.cpp:4596</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_a884bf81982c8c302cbdf79ea567c3ced"><div class="ttname"><a href="classMs_1_1Element.html#a884bf81982c8c302cbdf79ea567c3ced">Ms::Element::setTrack</a></div><div class="ttdeci">virtual void setTrack(int val)</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00352">element.h:352</a></div></div>
<div class="ttc" id="classMs_1_1Staff_html_ad248bef7f25a4fe152ce281372a24d3f"><div class="ttname"><a href="classMs_1_1Staff.html#ad248bef7f25a4fe152ce281372a24d3f">Ms::Staff::staffType</a></div><div class="ttdeci">const StaffType * staffType(const Fraction &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="staff_8cpp_source.html#l01010">staff.cpp:1010</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a3606ad504a055013fd8c9867b2f2f146"><div class="ttname"><a href="classMs_1_1Score.html#a3606ad504a055013fd8c9867b2f2f146">Ms::Score::getSelectedElement</a></div><div class="ttdeci">Element * getSelectedElement() const</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l00829">score.h:829</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_abd781d11186d1951028a0efaf6d5cf5a"><div class="ttname"><a href="classMs_1_1Element.html#abd781d11186d1951028a0efaf6d5cf5a">Ms::Element::width</a></div><div class="ttdeci">virtual qreal width() const</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00280">element.h:280</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_ae8b0b20a69a6cf9d2ba89e03158d4671"><div class="ttname"><a href="classMs_1_1ScoreView.html#ae8b0b20a69a6cf9d2ba89e03158d4671">Ms::ScoreView::changeState</a></div><div class="ttdeci">void changeState(ViewState)</div><div class="ttdef"><b>Definition:</b> <a href="events_8cpp_source.html#l01101">events.cpp:1101</a></div></div>
<div class="ttc" id="classMs_1_1ScoreElement_html_a70883d048b0884821ac779d9ab168151"><div class="ttname"><a href="classMs_1_1ScoreElement.html#a70883d048b0884821ac779d9ab168151">Ms::ScoreElement::score</a></div><div class="ttdeci">Score * score() const</div><div class="ttdef"><b>Definition:</b> <a href="scoreElement_8h_source.html#l00189">scoreElement.h:189</a></div></div>
<div class="ttc" id="classMs_1_1Selection_html_a240f8c2954141765a38e366e11c2fb6b"><div class="ttname"><a href="classMs_1_1Selection.html#a240f8c2954141765a38e366e11c2fb6b">Ms::Selection::mimeData</a></div><div class="ttdeci">QByteArray mimeData() const</div><div class="ttdef"><b>Definition:</b> <a href="select_8cpp_source.html#l00751">select.cpp:751</a></div></div>
<div class="ttc" id="classMs_1_1Segment_html_a4e9ad4c47081dec0aebcd2aea96b309f"><div class="ttname"><a href="classMs_1_1Segment.html#a4e9ad4c47081dec0aebcd2aea96b309f">Ms::Segment::element</a></div><div class="ttdeci">Element * element(int track) const</div><div class="ttdef"><b>Definition:</b> <a href="segment_8cpp_source.html#l00424">segment.cpp:424</a></div></div>
<div class="ttc" id="namespaceMs_1_1LRHand_html_ab842ec714e9b8d83d04868ad7229b74e"><div class="ttname"><a href="namespaceMs_1_1LRHand.html#ab842ec714e9b8d83d04868ad7229b74e">Ms::LRHand::splitStaff</a></div><div class="ttdeci">void splitStaff(std::multimap&lt; int, MTrack &gt; &amp;tracks, std::multimap&lt; int, MTrack &gt;::iterator &amp;it)</div><div class="ttdef"><b>Definition:</b> <a href="importmidi__lrhand_8cpp_source.html#l00363">importmidi_lrhand.cpp:363</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_a22907ac84ae65fb5b6c3bc2b14f3b23c"><div class="ttname"><a href="classMs_1_1Element.html#a22907ac84ae65fb5b6c3bc2b14f3b23c">Ms::Element::setColor</a></div><div class="ttdeci">virtual void setColor(const QColor &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00385">element.h:385</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_ad1de1c246a7f35e5b63781630e3c7d58"><div class="ttname"><a href="classMs_1_1Score.html#ad1de1c246a7f35e5b63781630e3c7d58">Ms::Score::staff</a></div><div class="ttdeci">Staff * staff(int n) const</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l00657">score.h:657</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a07d03c1fad7a5d7fa419725726674086"><div class="ttname"><a href="classMs_1_1Score.html#a07d03c1fad7a5d7fa419725726674086">Ms::Score::firstElement</a></div><div class="ttdeci">Element * firstElement(bool frame=true)</div><div class="ttdef"><b>Definition:</b> <a href="navigate_8cpp_source.html#l00273">navigate.cpp:273</a></div></div>
<div class="ttc" id="namespaceMs_html_aad3918cfddca91d981504ae55c0f19b0"><div class="ttname"><a href="namespaceMs.html#aad3918cfddca91d981504ae55c0f19b0">Ms::StaffGroup</a></div><div class="ttdeci">StaffGroup</div><div class="ttdef"><b>Definition:</b> <a href="mscore_8h_source.html#l00186">mscore.h:186</a></div></div>
<div class="ttc" id="namespaceMs_html_aba304e35acf732434f3c3d8b72562885a5afa6aea0aaa477fce19fa8e7be2834f"><div class="ttname"><a href="namespaceMs.html#aba304e35acf732434f3c3d8b72562885a5afa6aea0aaa477fce19fa8e7be2834f">Ms::STATE_NORMAL</a></div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00067">globals.h:67</a></div></div>
<div class="ttc" id="namespaceMs_html_a0ae7680d3dcd8f5ece7e7c9985988c06"><div class="ttname"><a href="namespaceMs.html#a0ae7680d3dcd8f5ece7e7c9985988c06">Ms::toTextBase</a></div><div class="ttdeci">static TextBase * toTextBase(ScoreElement *e)</div><div class="ttdef"><b>Definition:</b> <a href="scoreElement_8h_source.html#l00491">scoreElement.h:491</a></div></div>
<div class="ttc" id="classMs_1_1Segment_html_a8c27ddfb0004417dd89b655e3480a6a0"><div class="ttname"><a href="classMs_1_1Segment.html#a8c27ddfb0004417dd89b655e3480a6a0">Ms::Segment::next1</a></div><div class="ttdeci">Segment * next1() const</div><div class="ttdoc">return next Segment, don’t stop searching at end of Measure </div><div class="ttdef"><b>Definition:</b> <a href="segment_8cpp_source.html#l00223">segment.cpp:223</a></div></div>
<div class="ttc" id="classMs_1_1MScore_html_a2d1e149be3385c5540ef31af5d4fb20e"><div class="ttname"><a href="classMs_1_1MScore.html#a2d1e149be3385c5540ef31af5d4fb20e">Ms::MScore::verticalPageGap</a></div><div class="ttdeci">static qreal verticalPageGap</div><div class="ttdef"><b>Definition:</b> <a href="mscore_8h_source.html#l00384">mscore.h:384</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_adbef3c30b425e73d82e92b56273ab1c1"><div class="ttname"><a href="classMs_1_1ScoreView.html#adbef3c30b425e73d82e92b56273ab1c1">Ms::ScoreView::elementNear</a></div><div class="ttdeci">virtual Element * elementNear(QPointF)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l05197">scoreview.cpp:5197</a></div></div>
<div class="ttc" id="classMs_1_1InputState_html_a79d562ec34847c3154ec4c6c5073d464"><div class="ttname"><a href="classMs_1_1InputState.html#a79d562ec34847c3154ec4c6c5073d464">Ms::InputState::tick</a></div><div class="ttdeci">Fraction tick() const</div><div class="ttdef"><b>Definition:</b> <a href="input_8cpp_source.html#l00064">input.cpp:64</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_abad632b129432186a9b5c84b3ef096f3"><div class="ttname"><a href="classMs_1_1ScoreView.html#abad632b129432186a9b5c84b3ef096f3">Ms::ScoreView::pageNext</a></div><div class="ttdeci">void pageNext()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03439">scoreview.cpp:3439</a></div></div>
<div class="ttc" id="classMs_1_1Segment_html_a12875266ecd46db59c8ba3a12857c944"><div class="ttname"><a href="classMs_1_1Segment.html#a12875266ecd46db59c8ba3a12857c944">Ms::Segment::isChordRestType</a></div><div class="ttdeci">bool isChordRestType() const</div><div class="ttdef"><b>Definition:</b> <a href="segment_8h_source.html#l00244">segment.h:244</a></div></div>
<div class="ttc" id="classMs_1_1ChordRest_html_a7ef00364bfc818f5ae0741af4589449a"><div class="ttname"><a href="classMs_1_1ChordRest.html#a7ef00364bfc818f5ae0741af4589449a">Ms::ChordRest::isBefore</a></div><div class="ttdeci">bool isBefore(const ChordRest *) const</div><div class="ttdef"><b>Definition:</b> <a href="chordrest_8cpp_source.html#l01361">chordrest.cpp:1361</a></div></div>
<div class="ttc" id="namespaceMs_html_aba304e35acf732434f3c3d8b72562885a6bd10e64c96ec7b0894a5c1c0ea8085a"><div class="ttname"><a href="namespaceMs.html#aba304e35acf732434f3c3d8b72562885a6bd10e64c96ec7b0894a5c1c0ea8085a">Ms::STATE_LYRICS_EDIT</a></div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00078">globals.h:78</a></div></div>
<div class="ttc" id="namespaceMs_html_ad1b3e57dfd5b26a280bf2ebde66b9d5aa665b68be9b2bb1fe1ce8498a85da8064"><div class="ttname"><a href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aa665b68be9b2bb1fe1ce8498a85da8064">Ms::Tid::LH_GUITAR_FINGERING</a></div></div>
<div class="ttc" id="namespaceMs_html_a2bac757437d1a9e364db27de8f9c9e2ea94da04fab9582e6a796d54284da5e407"><div class="ttname"><a href="namespaceMs.html#a2bac757437d1a9e364db27de8f9c9e2ea94da04fab9582e6a796d54284da5e407">Ms::Sid::pageWidth</a></div></div>
<div class="ttc" id="namespaceMs_html_aba304e35acf732434f3c3d8b72562885a4088550426e4be668ec986b2f25c96c5"><div class="ttname"><a href="namespaceMs.html#aba304e35acf732434f3c3d8b72562885a4088550426e4be668ec986b2f25c96c5">Ms::STATE_HARMONY_FIGBASS_EDIT</a></div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00079">globals.h:79</a></div></div>
<div class="ttc" id="classMs_1_1Staff_html_afdd8a358b8e40b9e02bca11e9fbb8829"><div class="ttname"><a href="classMs_1_1Staff.html#afdd8a358b8e40b9e02bca11e9fbb8829">Ms::Staff::isTabStaff</a></div><div class="ttdeci">bool isTabStaff(const Fraction &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="staff_8cpp_source.html#l01516">staff.cpp:1516</a></div></div>
<div class="ttc" id="namespaceMs_html_aa0f871cf8181cec31d68d20a39010655a63b588d5559f64f89a416e656880b949"><div class="ttname"><a href="namespaceMs.html#aa0f871cf8181cec31d68d20a39010655a63b588d5559f64f89a416e656880b949">Ms::Pid::STRING</a></div></div>
<div class="ttc" id="classMs_1_1ChordRest_html_a94a3a697e4767c1e0ed46c205a81ac24"><div class="ttname"><a href="classMs_1_1ChordRest.html#a94a3a697e4767c1e0ed46c205a81ac24">Ms::ChordRest::segment</a></div><div class="ttdeci">virtual Segment * segment() const</div><div class="ttdef"><b>Definition:</b> <a href="chordrest_8h_source.html#l00081">chordrest.h:81</a></div></div>
<div class="ttc" id="rehearsalmark_8h_html"><div class="ttname"><a href="rehearsalmark_8h.html">rehearsalmark.h</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a7f1d97d8cc1533ee3867fbd666dbb395"><div class="ttname"><a href="classMs_1_1ScoreView.html#a7f1d97d8cc1533ee3867fbd666dbb395">Ms::ScoreView::zoomBySteps</a></div><div class="ttdeci">void zoomBySteps(qreal numSteps, bool usingMouse=false, const QPointF &amp;pos=QPointF())</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l01581">scoreview.cpp:1581</a></div></div>
<div class="ttc" id="namespaceMs_html_ade5a93277df5cc945295bbffb6714055"><div class="ttname"><a href="namespaceMs.html#ade5a93277df5cc945295bbffb6714055">Ms::getAction</a></div><div class="ttdeci">QAction * getAction(const char *)</div><div class="ttdef"><b>Definition:</b> <a href="shortcut_8cpp_source.html#l04246">shortcut.cpp:4246</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_afe065fc6ab404a52234aa463aa3ed8c3"><div class="ttname"><a href="classMs_1_1Score.html#afe065fc6ab404a52234aa463aa3ed8c3">Ms::Score::setPlayChord</a></div><div class="ttdeci">void setPlayChord(bool v)</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l00778">score.h:778</a></div></div>
<div class="ttc" id="ottava_8h_html"><div class="ttname"><a href="ottava_8h.html">ottava.h</a></div></div>
<div class="ttc" id="classMs_1_1MasterScore_html"><div class="ttname"><a href="classMs_1_1MasterScore.html">Ms::MasterScore</a></div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l01269">score.h:1269</a></div></div>
<div class="ttc" id="structMs_1_1Preferences_html_a0838c098bfae080b0ef28c4eeea245a3"><div class="ttname"><a href="structMs_1_1Preferences.html#a0838c098bfae080b0ef28c4eeea245a3">Ms::Preferences::getString</a></div><div class="ttdeci">QString getString(const QString key) const</div><div class="ttdef"><b>Definition:</b> <a href="preferences_8cpp_source.html#l00459">preferences.cpp:459</a></div></div>
<div class="ttc" id="classMs_1_1InputState_html_a82552c2c441e7d9fad1834ff3bd8b613"><div class="ttname"><a href="classMs_1_1InputState.html#a82552c2c441e7d9fad1834ff3bd8b613">Ms::InputState::setAccidentalType</a></div><div class="ttdeci">void setAccidentalType(AccidentalType val)</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00109">input.h:109</a></div></div>
<div class="ttc" id="classMs_1_1BreaksDialog_html_ae34b6cb1df731e1925a5452cfe9b8ab2"><div class="ttname"><a href="classMs_1_1BreaksDialog.html#ae34b6cb1df731e1925a5452cfe9b8ab2">Ms::BreaksDialog::lock</a></div><div class="ttdeci">bool lock</div><div class="ttdef"><b>Definition:</b> <a href="breaksdialog_8h_source.html#l00041">breaksdialog.h:41</a></div></div>
<div class="ttc" id="classMs_1_1TourHandler_html_ad76d9649ea2b543417df5e44b3cebd54"><div class="ttname"><a href="classMs_1_1TourHandler.html#ad76d9649ea2b543417df5e44b3cebd54">Ms::TourHandler::startTour</a></div><div class="ttdeci">static void startTour(QString tourName)</div><div class="ttdef"><b>Definition:</b> <a href="tourhandler_8cpp_source.html#l00306">tourhandler.cpp:306</a></div></div>
<div class="ttc" id="namespaceMs_html_a175bedec052e1c2fd09257ffde43d847ada98229f91cb296787194d3b3c265bbe"><div class="ttname"><a href="namespaceMs.html#a175bedec052e1c2fd09257ffde43d847ada98229f91cb296787194d3b3c265bbe">Ms::SelectionFilterType::FRET_DIAGRAM</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a85103aa981859b10e793eb03d5216afe"><div class="ttname"><a href="classMs_1_1Score.html#a85103aa981859b10e793eb03d5216afe">Ms::Score::cmdAddTie</a></div><div class="ttdeci">void cmdAddTie(bool addToChord=false)</div><div class="ttdef"><b>Definition:</b> <a href="edit_8cpp_source.html#l01251">edit.cpp:1251</a></div></div>
<div class="ttc" id="namespaceMs_html_a2bac757437d1a9e364db27de8f9c9e2ea83a473e523160149b1f60621fcba0b5b"><div class="ttname"><a href="namespaceMs.html#a2bac757437d1a9e364db27de8f9c9e2ea83a473e523160149b1f60621fcba0b5b">Ms::Sid::createMultiMeasureRests</a></div></div>
<div class="ttc" id="preferences_8h_html"><div class="ttname"><a href="preferences_8h.html">preferences.h</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a369f7689a1a21e8b0aa07e5bbacb3d76"><div class="ttname"><a href="classMs_1_1Score.html#a369f7689a1a21e8b0aa07e5bbacb3d76">Ms::Score::styleB</a></div><div class="ttdeci">bool styleB(Sid idx) const</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l00898">score.h:898</a></div></div>
<div class="ttc" id="namespaceMs_html_a2bac757437d1a9e364db27de8f9c9e2eae3c647ad6cb1602e679b6f4e3d5e8e32"><div class="ttname"><a href="namespaceMs.html#a2bac757437d1a9e364db27de8f9c9e2eae3c647ad6cb1602e679b6f4e3d5e8e32">Ms::Sid::spatium</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a1dc0206a240c5b5e4b014fead61e8d6c"><div class="ttname"><a href="classMs_1_1ScoreView.html#a1dc0206a240c5b5e4b014fead61e8d6c">Ms::ScoreView::cmdAddRemoveBreaks</a></div><div class="ttdeci">void cmdAddRemoveBreaks()</div><div class="ttdoc">add or remove line breaks within a range selection or, if nothing is selected, the entire score ...</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l05310">scoreview.cpp:5310</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_aa7ea8f4f050ba44ed0cf95ad4f5d3c06"><div class="ttname"><a href="classMs_1_1Score.html#aa7ea8f4f050ba44ed0cf95ad4f5d3c06">Ms::Score::ntracks</a></div><div class="ttdeci">int ntracks() const</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l00654">score.h:654</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_a2a2ce2358cc23529d8f038a940062e62"><div class="ttname"><a href="classMs_1_1Element.html#a2a2ce2358cc23529d8f038a940062e62">Ms::Element::setPos</a></div><div class="ttdeci">void setPos(qreal x, qreal y)</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00246">element.h:246</a></div></div>
<div class="ttc" id="classMs_1_1Drumset_html_a19e7739fa57e35a79928fa58766d9c5a"><div class="ttname"><a href="classMs_1_1Drumset.html#a19e7739fa57e35a79928fa58766d9c5a">Ms::Drumset::line</a></div><div class="ttdeci">int line(int pitch) const</div><div class="ttdef"><b>Definition:</b> <a href="drumset_8h_source.html#l00075">drumset.h:75</a></div></div>
<div class="ttc" id="classMs_1_1ZoomBox_html_a206727ef26cef5679f240399077ae885"><div class="ttname"><a href="classMs_1_1ZoomBox.html#a206727ef26cef5679f240399077ae885">Ms::ZoomBox::getDefaultLogicalZoom</a></div><div class="ttdeci">static ZoomState getDefaultLogicalZoom()</div><div class="ttdef"><b>Definition:</b> <a href="zoombox_8cpp_source.html#l00050">zoombox.cpp:50</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a9b6639c49b8f736a64213a0efce0cf91"><div class="ttname"><a href="classMs_1_1ScoreView.html#a9b6639c49b8f736a64213a0efce0cf91">Ms::ScoreView::setBackground</a></div><div class="ttdeci">void setBackground(QPixmap *)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l00527">scoreview.cpp:527</a></div></div>
<div class="ttc" id="namespaceMs_html_a9506eedd97d44c482010b77e53a72b18"><div class="ttname"><a href="namespaceMs.html#a9506eedd97d44c482010b77e53a72b18">Ms::distance</a></div><div class="ttdeci">static int distance(const Location &amp;l1, const Location &amp;l2)</div><div class="ttdef"><b>Definition:</b> <a href="connector_8cpp_source.html#l00120">connector.cpp:120</a></div></div>
<div class="ttc" id="classMs_1_1BreaksDialog_html"><div class="ttname"><a href="classMs_1_1BreaksDialog.html">Ms::BreaksDialog</a></div><div class="ttdef"><b>Definition:</b> <a href="breaksdialog_8h_source.html#l00031">breaksdialog.h:31</a></div></div>
<div class="ttc" id="namespaceMs_html_a5834db24580b29ecc04ba1e0cbd3c6fc"><div class="ttname"><a href="namespaceMs.html#a5834db24580b29ecc04ba1e0cbd3c6fc">Ms::MAX_FOOTERS</a></div><div class="ttdeci">static const int MAX_FOOTERS</div><div class="ttdef"><b>Definition:</b> <a href="mscore_8h_source.html#l00085">mscore.h:85</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_aa67e400c9c8e3d1f8eab3cf97fb7e691"><div class="ttname"><a href="classMs_1_1ScoreView.html#aa67e400c9c8e3d1f8eab3cf97fb7e691">Ms::ScoreView::layoutChanged</a></div><div class="ttdeci">virtual void layoutChanged()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l05094">scoreview.cpp:5094</a></div></div>
<div class="ttc" id="structMs_1_1MidiInputEvent_html"><div class="ttname"><a href="structMs_1_1MidiInputEvent.html">Ms::MidiInputEvent</a></div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l00196">score.h:196</a></div></div>
<div class="ttc" id="namespaceMs_html_ad1b3e57dfd5b26a280bf2ebde66b9d5aaea8ec660a4ff1a0cf378ac911be7efb2"><div class="ttname"><a href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aaea8ec660a4ff1a0cf378ac911be7efb2">Ms::Tid::EXPRESSION</a></div></div>
<div class="ttc" id="namespaceMs_html_aed34af612b7e7463508b8c0409067a90"><div class="ttname"><a href="namespaceMs.html#aed34af612b7e7463508b8c0409067a90">Ms::mscore</a></div><div class="ttdeci">MScore * mscore</div><div class="ttdef"><b>Definition:</b> <a href="musescore_8cpp_source.html#l00183">musescore.cpp:183</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_a14581354d9bfc2c39c7dafbed79403da"><div class="ttname"><a href="classMs_1_1Element.html#a14581354d9bfc2c39c7dafbed79403da">Ms::Element::staff</a></div><div class="ttdeci">Staff * staff() const</div><div class="ttdef"><b>Definition:</b> <a href="element_8cpp_source.html#l00276">element.cpp:276</a></div></div>
<div class="ttc" id="classMs_1_1Seq_html_a2c672a68273237eb7e211334e785b5d4"><div class="ttname"><a href="classMs_1_1Seq.html#a2c672a68273237eb7e211334e785b5d4">Ms::Seq::playMetronomeBeat</a></div><div class="ttdeci">virtual void playMetronomeBeat(BeatType type) override</div><div class="ttdef"><b>Definition:</b> <a href="seq_8cpp_source.html#l01287">seq.cpp:1287</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_ad24eacaee5aefa5cab5dc1fcded8307f"><div class="ttname"><a href="classMs_1_1ScoreView.html#ad24eacaee5aefa5cab5dc1fcded8307f">Ms::ScoreView::cmdEnterRest</a></div><div class="ttdeci">void cmdEnterRest()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03894">scoreview.cpp:3894</a></div></div>
<div class="ttc" id="classMs_1_1Slur_html_ae358b25c537dd8a8ccb95366a9d30272"><div class="ttname"><a href="classMs_1_1Slur.html#ae358b25c537dd8a8ccb95366a9d30272">Ms::Slur::setTrack</a></div><div class="ttdeci">void setTrack(int val) override</div><div class="ttdef"><b>Definition:</b> <a href="slur_8cpp_source.html#l01270">slur.cpp:1270</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a2e13d7cbff67d9b4d07ed2c4eabeae59"><div class="ttname"><a href="classMs_1_1ScoreView.html#a2e13d7cbff67d9b4d07ed2c4eabeae59">Ms::ScoreView::searchPage</a></div><div class="ttdeci">bool searchPage(int i)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l04981">scoreview.cpp:4981</a></div></div>
<div class="ttc" id="classMs_1_1Selection_html_a10222c86689ca16007f4cd453cad3080"><div class="ttname"><a href="classMs_1_1Selection.html#a10222c86689ca16007f4cd453cad3080">Ms::Selection::uniqueElements</a></div><div class="ttdeci">const QList&lt; Element * &gt; uniqueElements() const</div><div class="ttdef"><b>Definition:</b> <a href="select_8cpp_source.html#l01278">select.cpp:1278</a></div></div>
<div class="ttc" id="rest_8h_html"><div class="ttname"><a href="rest_8h.html">rest.h</a></div></div>
<div class="ttc" id="classMs_1_1StaffText_html"><div class="ttname"><a href="classMs_1_1StaffText.html">Ms::StaffText</a></div><div class="ttdef"><b>Definition:</b> <a href="stafftext_8h_source.html#l00027">stafftext.h:27</a></div></div>
<div class="ttc" id="classMs_1_1Selection_html_a0f0ff9623827b0e90b83689c48b8cc73"><div class="ttname"><a href="classMs_1_1Selection.html#a0f0ff9623827b0e90b83689c48b8cc73">Ms::Selection::state</a></div><div class="ttdeci">SelState state() const</div><div class="ttdef"><b>Definition:</b> <a href="select_8h_source.html#l00177">select.h:177</a></div></div>
<div class="ttc" id="classMs_1_1Selection_html_a53446bcb1fe1977d950cd066df8edece"><div class="ttname"><a href="classMs_1_1Selection.html#a53446bcb1fe1977d950cd066df8edece">Ms::Selection::lockReason</a></div><div class="ttdeci">const QString &amp; lockReason() const</div><div class="ttdef"><b>Definition:</b> <a href="select_8h_source.html#l00187">select.h:187</a></div></div>
<div class="ttc" id="classMs_1_1SplitStaff_html_a3cade784c5a99eab62449920c4362dd7"><div class="ttname"><a href="classMs_1_1SplitStaff.html#a3cade784c5a99eab62449920c4362dd7">Ms::SplitStaff::getSplitPoint</a></div><div class="ttdeci">int getSplitPoint() const</div><div class="ttdef"><b>Definition:</b> <a href="splitstaff_8h_source.html#l00042">splitstaff.h:42</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_ab18b18a898987cd0173d0695da09532a"><div class="ttname"><a href="classMs_1_1ScoreView.html#ab18b18a898987cd0173d0695da09532a">Ms::ScoreView::editKeySticking</a></div><div class="ttdeci">bool editKeySticking()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03026">scoreview.cpp:3026</a></div></div>
<div class="ttc" id="classMs_1_1Selection_html_aabf6157f4dbda5a9b86a9c4cae8c167f"><div class="ttname"><a href="classMs_1_1Selection.html#aabf6157f4dbda5a9b86a9c4cae8c167f">Ms::Selection::elements</a></div><div class="ttdeci">const QList&lt; Element * &gt; &amp; elements() const</div><div class="ttdef"><b>Definition:</b> <a href="select_8h_source.html#l00189">select.h:189</a></div></div>
<div class="ttc" id="classMs_1_1ScoreTab_html_a261c98022c1b2e0134b47fc92c5b1d13"><div class="ttname"><a href="classMs_1_1ScoreTab.html#a261c98022c1b2e0134b47fc92c5b1d13">Ms::ScoreTab::view</a></div><div class="ttdeci">ScoreView * view(int) const</div><div class="ttdef"><b>Definition:</b> <a href="scoretab_8cpp_source.html#l00134">scoretab.cpp:134</a></div></div>
<div class="ttc" id="classMs_1_1Staff_html_a80aa5db67223dff29e9113f23865b62b"><div class="ttname"><a href="classMs_1_1Staff.html#a80aa5db67223dff29e9113f23865b62b">Ms::Staff::mag</a></div><div class="ttdeci">qreal mag(const StaffType *) const</div><div class="ttdef"><b>Definition:</b> <a href="staff_8cpp_source.html#l00830">staff.cpp:830</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_ae8423054a43ea21dbd267df926233a22"><div class="ttname"><a href="classMs_1_1ScoreView.html#ae8423054a43ea21dbd267df926233a22">Ms::ScoreView::cmdRealtimeAdvance</a></div><div class="ttdeci">void cmdRealtimeAdvance()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l04562">scoreview.cpp:4562</a></div></div>
<div class="ttc" id="classMs_1_1TextLine_html"><div class="ttname"><a href="classMs_1_1TextLine.html">Ms::TextLine</a></div><div class="ttdef"><b>Definition:</b> <a href="textline_8h_source.html#l00047">textline.h:47</a></div></div>
<div class="ttc" id="textline_8h_html"><div class="ttname"><a href="textline_8h.html">textline.h</a></div></div>
<div class="ttc" id="structMs_1_1Position_html"><div class="ttname"><a href="structMs_1_1Position.html">Ms::Position</a></div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l00206">score.h:206</a></div></div>
<div class="ttc" id="namespaceMs_html_a1f2a0152a1bad8e53e685e4b821d89c9"><div class="ttname"><a href="namespaceMs.html#a1f2a0152a1bad8e53e685e4b821d89c9">Ms::scrollStep</a></div><div class="ttdeci">constexpr qreal scrollStep</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03431">scoreview.cpp:3431</a></div></div>
<div class="ttc" id="namespaceMs_html_a2c92ce0204176ede1ab86e2f44ae6b9ea6fe77702587eeb8974a8e3ec21bdce22"><div class="ttname"><a href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea6fe77702587eeb8974a8e3ec21bdce22">Ms::ElementType::STAFF_TEXT</a></div></div>
<div class="ttc" id="figuredbass_8h_html"><div class="ttname"><a href="figuredbass_8h.html">figuredbass.h</a></div></div>
<div class="ttc" id="namespaceMs_html_a33bc7982f565376d042918ae3c91d3d6a7cb82508c8bf3f656f9943577d5b8d7a"><div class="ttname"><a href="namespaceMs.html#a33bc7982f565376d042918ae3c91d3d6a7cb82508c8bf3f656f9943577d5b8d7a">Ms::NoteEntryMethod::REALTIME_MANUAL</a></div></div>
<div class="ttc" id="structMs_1_1Preferences_html_a39e1e4d3d337de7dcafb14fd8c75c4a2"><div class="ttname"><a href="structMs_1_1Preferences.html#a39e1e4d3d337de7dcafb14fd8c75c4a2">Ms::Preferences::getBool</a></div><div class="ttdeci">bool getBool(const QString key) const</div><div class="ttdef"><b>Definition:</b> <a href="preferences_8cpp_source.html#l00440">preferences.cpp:440</a></div></div>
<div class="ttc" id="spanner_8h_html"><div class="ttname"><a href="spanner_8h.html">spanner.h</a></div></div>
<div class="ttc" id="classMs_1_1MScore_html_a8df15d21836a82f3655265f5a8b5e2ad"><div class="ttname"><a href="classMs_1_1MScore.html#a8df15d21836a82f3655265f5a8b5e2ad">Ms::MScore::nudgeStep</a></div><div class="ttdeci">static qreal nudgeStep</div><div class="ttdef"><b>Definition:</b> <a href="mscore_8h_source.html#l00349">mscore.h:349</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_ad03ba69d6727361b1e148fea06535a95"><div class="ttname"><a href="classMs_1_1ScoreView.html#ad03ba69d6727361b1e148fea06535a95">Ms::ScoreView::appendMeasure</a></div><div class="ttdeci">MeasureBase * appendMeasure(ElementType)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l04803">scoreview.cpp:4803</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a9cdbe49057c1b8ed34b6adb3a824f256"><div class="ttname"><a href="classMs_1_1ScoreView.html#a9cdbe49057c1b8ed34b6adb3a824f256">Ms::ScoreView::updateEditElement</a></div><div class="ttdeci">void updateEditElement()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l05449">scoreview.cpp:5449</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_aab9661da3b01fe82845f0a1c839bede9"><div class="ttname"><a href="classMs_1_1ScoreView.html#aab9661da3b01fe82845f0a1c839bede9">Ms::ScoreView::cmdInsertMeasures</a></div><div class="ttdeci">void cmdInsertMeasures(int, ElementType)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l04833">scoreview.cpp:4833</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_ac4ec0a0b6466642c3ded222399790040"><div class="ttname"><a href="classMs_1_1Score.html#ac4ec0a0b6466642c3ded222399790040">Ms::Score::cmdSplitMeasure</a></div><div class="ttdeci">void cmdSplitMeasure(ChordRest *)</div><div class="ttdef"><b>Definition:</b> <a href="splitMeasure_8cpp_source.html#l00030">splitMeasure.cpp:30</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a89d82d8e3e9eebf0ec8d360053df5633"><div class="ttname"><a href="classMs_1_1ScoreView.html#a89d82d8e3e9eebf0ec8d360053df5633">Ms::ScoreView::cmdCopyLyricsToClipboard</a></div><div class="ttdeci">void cmdCopyLyricsToClipboard()</div><div class="ttdoc">Copy the score lyrics into clipboard. </div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l05336">scoreview.cpp:5336</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a6e1941e17c43a0fc02086b1a0a3dab71"><div class="ttname"><a href="classMs_1_1ScoreView.html#a6e1941e17c43a0fc02086b1a0a3dab71">Ms::ScoreView::startUndoRedo</a></div><div class="ttdeci">void startUndoRedo(bool)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03976">scoreview.cpp:3976</a></div></div>
<div class="ttc" id="classMs_1_1ChordRest_html_a47a641f4c229f43d67ed5154fdebc05c"><div class="ttname"><a href="classMs_1_1ChordRest.html#a47a641f4c229f43d67ed5154fdebc05c">Ms::ChordRest::type</a></div><div class="ttdeci">virtual ElementType type() const =0</div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_ac75eee40bd733a74052c81b23378ccf3"><div class="ttname"><a href="classMs_1_1ScoreView.html#ac75eee40bd733a74052c81b23378ccf3">Ms::ScoreView::setScore</a></div><div class="ttdeci">virtual void setScore(Score *s)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l00213">scoreview.cpp:213</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a6458722b4cfdfa121851ec499d40cfe2"><div class="ttname"><a href="classMs_1_1ScoreView.html#a6458722b4cfdfa121851ec499d40cfe2">Ms::ScoreView::isCursorDistanceReasonable</a></div><div class="ttdeci">bool isCursorDistanceReasonable()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l00758">scoreview.cpp:758</a></div></div>
<div class="ttc" id="namespaceMs_html_a469dd00a292aca0acb3e57ad0222715f"><div class="ttname"><a href="namespaceMs.html#a469dd00a292aca0acb3e57ad0222715f">Ms::trackZeroVoice</a></div><div class="ttdeci">int trackZeroVoice(int track)</div><div class="ttdef"><b>Definition:</b> <a href="mscore_8h_source.html#l00080">mscore.h:80</a></div></div>
<div class="ttc" id="classMs_1_1Hairpin_html"><div class="ttname"><a href="classMs_1_1Hairpin.html">Ms::Hairpin</a></div><div class="ttdef"><b>Definition:</b> <a href="hairpin_8h_source.html#l00081">hairpin.h:81</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a3a0ec1a078110ae7de1a173c02e1df0c"><div class="ttname"><a href="classMs_1_1ScoreView.html#a3a0ec1a078110ae7de1a173c02e1df0c">Ms::ScoreView::startNoteEntry</a></div><div class="ttdeci">void startNoteEntry()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03068">scoreview.cpp:3068</a></div></div>
<div class="ttc" id="namespaceMs_html_ac12fb12074fc86d33abf8fb00d37bc86"><div class="ttname"><a href="namespaceMs.html#ac12fb12074fc86d33abf8fb00d37bc86">Ms::ZoomIndex</a></div><div class="ttdeci">ZoomIndex</div><div class="ttdef"><b>Definition:</b> <a href="zoombox_8h_source.html#l00032">zoombox.h:32</a></div></div>
<div class="ttc" id="structMs_1_1NoteVal_html"><div class="ttname"><a href="structMs_1_1NoteVal.html">Ms::NoteVal</a></div><div class="ttdoc">helper structure </div><div class="ttdef"><b>Definition:</b> <a href="note_8h_source.html#l00186">note.h:186</a></div></div>
<div class="ttc" id="classMs_1_1Instrument_html_a1632d4bf3af6b96e024ae13be290099d"><div class="ttname"><a href="classMs_1_1Instrument.html#a1632d4bf3af6b96e024ae13be290099d">Ms::Instrument::useDrumset</a></div><div class="ttdeci">bool useDrumset() const</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2instrument_8h_source.html#l00312">instrument.h:312</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_a8da4cf37b6c3f27351f096ec5847d1b6"><div class="ttname"><a href="classMs_1_1Element.html#a8da4cf37b6c3f27351f096ec5847d1b6">Ms::Element::normalModeEditBehavior</a></div><div class="ttdeci">virtual EditBehavior normalModeEditBehavior() const</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00344">element.h:344</a></div></div>
<div class="ttc" id="classMs_1_1TDuration_html_ad9263bf173856b77421e83a48a7bf68ca0b87e0e85e0396ef98e1c4e7af8529e5"><div class="ttname"><a href="classMs_1_1TDuration.html#ad9263bf173856b77421e83a48a7bf68ca0b87e0e85e0396ef98e1c4e7af8529e5">Ms::TDuration::DurationType::V_512TH</a></div></div>
<div class="ttc" id="classMs_1_1Note_html_a4d3ebffc692e780226d816e6ce212582"><div class="ttname"><a href="classMs_1_1Note.html#a4d3ebffc692e780226d816e6ce212582">Ms::Note::noteHead</a></div><div class="ttdeci">SymId noteHead() const</div><div class="ttdef"><b>Definition:</b> <a href="note_8cpp_source.html#l00874">note.cpp:874</a></div></div>
<div class="ttc" id="classMs_1_1Spanner_html_aa4950556dbbb619fae97f981251108e0"><div class="ttname"><a href="classMs_1_1Spanner.html#aa4950556dbbb619fae97f981251108e0">Ms::Spanner::setEndElement</a></div><div class="ttdeci">void setEndElement(Element *e)</div><div class="ttdef"><b>Definition:</b> <a href="spanner_8cpp_source.html#l00924">spanner.cpp:924</a></div></div>
<div class="ttc" id="classMs_1_1Page_html_a4b37a2729b8043dea781641919ed4209"><div class="ttname"><a href="classMs_1_1Page.html#a4b37a2729b8043dea781641919ed4209">Ms::Page::rm</a></div><div class="ttdeci">qreal rm() const</div><div class="ttdef"><b>Definition:</b> <a href="page_8cpp_source.html#l00501">page.cpp:501</a></div></div>
<div class="ttc" id="namespaceMs_html_a1aa5dd7502c1d6ba1ca37f5bfd14fda6aff3480bb59f4249a9453a0caaa1b2236"><div class="ttname"><a href="namespaceMs.html#a1aa5dd7502c1d6ba1ca37f5bfd14fda6aff3480bb59f4249a9453a0caaa1b2236">Ms::Grip::DRAG</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a3ad962ba95fa348961d5016da346ee02"><div class="ttname"><a href="classMs_1_1ScoreView.html#a3ad962ba95fa348961d5016da346ee02">Ms::ScoreView::setLoopCursor</a></div><div class="ttdeci">void setLoopCursor(PositionCursor *curLoop, const Fraction &amp;tick, bool isInPos)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l00930">scoreview.cpp:930</a></div></div>
<div class="ttc" id="classMs_1_1DurationElement_html"><div class="ttname"><a href="classMs_1_1DurationElement.html">Ms::DurationElement</a></div><div class="ttdoc">Virtual base class for Chord, Rest and Tuplet. </div><div class="ttdef"><b>Definition:</b> <a href="duration_8h_source.html#l00034">duration.h:34</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_ab4986d1b4f0d45b8e84cf52c46885c36"><div class="ttname"><a href="classMs_1_1Element.html#ab4986d1b4f0d45b8e84cf52c46885c36">Ms::Element::track</a></div><div class="ttdeci">int track() const</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00351">element.h:351</a></div></div>
<div class="ttc" id="namespaceMs_html_aa17da6d3d99d94476a61e04a750ee52f"><div class="ttname"><a href="namespaceMs.html#aa17da6d3d99d94476a61e04a750ee52f">Ms::zoomEntries</a></div><div class="ttdeci">const std::array&lt; ZoomEntry, 13 &gt; zoomEntries</div><div class="ttdef"><b>Definition:</b> <a href="zoombox_8cpp_source.html#l00034">zoombox.cpp:34</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_abad27335f8d58f3f3389683134375c57"><div class="ttname"><a href="classMs_1_1ScoreView.html#abad27335f8d58f3f3389683134375c57">Ms::ScoreView::setCursorOn</a></div><div class="ttdeci">void setCursorOn(bool)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l00916">scoreview.cpp:916</a></div></div>
<div class="ttc" id="classMs_1_1ScoreTab_html_a6d0f51a15169d069e8c8f2784a343568"><div class="ttname"><a href="classMs_1_1ScoreTab.html#a6d0f51a15169d069e8c8f2784a343568">Ms::ScoreTab::tab</a></div><div class="ttdeci">MsTabBar * tab</div><div class="ttdef"><b>Definition:</b> <a href="scoretab_8h_source.html#l00066">scoretab.h:66</a></div></div>
<div class="ttc" id="classMs_1_1Spanner_html_a821182163a4bfdf98b47121451de6aea"><div class="ttname"><a href="classMs_1_1Spanner.html#a821182163a4bfdf98b47121451de6aea">Ms::Spanner::spannerSegments</a></div><div class="ttdeci">const std::vector&lt; SpannerSegment * &gt; spannerSegments() const</div><div class="ttdef"><b>Definition:</b> <a href="spanner_8h_source.html#l00155">spanner.h:155</a></div></div>
<div class="ttc" id="classMs_1_1MeasureBase_html_a6e80c952d019b265c81945b98c91fed2"><div class="ttname"><a href="classMs_1_1MeasureBase.html#a6e80c952d019b265c81945b98c91fed2">Ms::MeasureBase::endTick</a></div><div class="ttdeci">Fraction endTick() const</div><div class="ttdef"><b>Definition:</b> <a href="measurebase_8h_source.html#l00131">measurebase.h:131</a></div></div>
<div class="ttc" id="classMs_1_1Page_html_a4406043135c1ea0028f010710ebe9774"><div class="ttname"><a href="classMs_1_1Page.html#a4406043135c1ea0028f010710ebe9774">Ms::Page::systems</a></div><div class="ttdeci">const QList&lt; System * &gt; &amp; systems() const</div><div class="ttdef"><b>Definition:</b> <a href="page_8h_source.html#l00052">page.h:52</a></div></div>
<div class="ttc" id="classMs_1_1InputState_html_a317166f3795ace112c72ccdcdcb0b259"><div class="ttname"><a href="classMs_1_1InputState.html#a317166f3795ace112c72ccdcdcb0b259">Ms::InputState::usingNoteEntryMethod</a></div><div class="ttdeci">bool usingNoteEntryMethod(NoteEntryMethod m) const</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00106">input.h:106</a></div></div>
<div class="ttc" id="classMs_1_1Spanner_html"><div class="ttname"><a href="classMs_1_1Spanner.html">Ms::Spanner</a></div><div class="ttdoc">Virtual base class for slurs, ties, lines etc. </div><div class="ttdef"><b>Definition:</b> <a href="spanner_8h_source.html#l00123">spanner.h:123</a></div></div>
<div class="ttc" id="classMs_1_1FiguredBass_html"><div class="ttname"><a href="classMs_1_1FiguredBass.html">Ms::FiguredBass</a></div><div class="ttdoc">A complete figured bass indication. </div><div class="ttdef"><b>Definition:</b> <a href="figuredbass_8h_source.html#l00232">figuredbass.h:232</a></div></div>
<div class="ttc" id="namespaceMs_html_af8d386d46745074a0f09a19f079be4a5"><div class="ttname"><a href="namespaceMs.html#af8d386d46745074a0f09a19f079be4a5">Ms::needViewportMove</a></div><div class="ttdeci">static bool needViewportMove(Score *cs, ScoreView *cv)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l05504">scoreview.cpp:5504</a></div></div>
<div class="ttc" id="classMs_1_1Chord_html_a1a35e7598d783204faa93ba261b5909d"><div class="ttname"><a href="classMs_1_1Chord.html#a1a35e7598d783204faa93ba261b5909d">Ms::Chord::upNote</a></div><div class="ttdeci">Note * upNote() const</div><div class="ttdef"><b>Definition:</b> <a href="chord_8cpp_source.html#l00069">chord.cpp:69</a></div></div>
<div class="ttc" id="classMs_1_1InputState_html_a2b598e99509560ee141496e415f5bffb"><div class="ttname"><a href="classMs_1_1InputState.html#a2b598e99509560ee141496e415f5bffb">Ms::InputState::setNoteEntryMode</a></div><div class="ttdeci">void setNoteEntryMode(bool v)</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00102">input.h:102</a></div></div>
<div class="ttc" id="classMs_1_1ScoreElement_html_a1d34473f54590e3d8c2a1bc78b560c21"><div class="ttname"><a href="classMs_1_1ScoreElement.html#a1d34473f54590e3d8c2a1bc78b560c21">Ms::ScoreElement::isLinked</a></div><div class="ttdeci">bool isLinked(ScoreElement *)</div><div class="ttdoc">return true if se is different and linked to this element </div><div class="ttdef"><b>Definition:</b> <a href="scoreElement_8cpp_source.html#l00584">scoreElement.cpp:584</a></div></div>
<div class="ttc" id="namespaceMs_html_a175bedec052e1c2fd09257ffde43d847a9b5778b423deab938ac37574ae543e56"><div class="ttname"><a href="namespaceMs.html#a175bedec052e1c2fd09257ffde43d847a9b5778b423deab938ac37574ae543e56">Ms::SelectionFilterType::FINGERING</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_ac168037965f984d48c85b6739f37fb39"><div class="ttname"><a href="classMs_1_1ScoreView.html#ac168037965f984d48c85b6739f37fb39">Ms::ScoreView::elementsNear</a></div><div class="ttdeci">QList&lt; Element * &gt; elementsNear(QPointF)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l05151">scoreview.cpp:5151</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_ab39888225a9fe0533558a379b1545cb1"><div class="ttname"><a href="classMs_1_1Score.html#ab39888225a9fe0533558a379b1545cb1">Ms::Score::nstaves</a></div><div class="ttdeci">int nstaves() const</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l00653">score.h:653</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_ae7d06361c8e7d7d355889e8125abd871"><div class="ttname"><a href="classMs_1_1ScoreView.html#ae7d06361c8e7d7d355889e8125abd871">Ms::ScoreView::setPhysicalZoomLevel</a></div><div class="ttdeci">void setPhysicalZoomLevel(qreal logicalLevel)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l01722">scoreview.cpp:1722</a></div></div>
<div class="ttc" id="namespaceMs_html_aa0f871cf8181cec31d68d20a39010655a6a216efc529825c60a4a4c0bc99ad77f"><div class="ttname"><a href="namespaceMs.html#aa0f871cf8181cec31d68d20a39010655a6a216efc529825c60a4a4c0bc99ad77f">Ms::Pid::PLAY</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_ae2e69645835d742be2cc273308593d7f"><div class="ttname"><a href="classMs_1_1ScoreView.html#ae2e69645835d742be2cc273308593d7f">Ms::ScoreView::editSwap</a></div><div class="ttdeci">void editSwap()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l01961">scoreview.cpp:1961</a></div></div>
<div class="ttc" id="namespaceMs_html_ac201ae58f81f322edf18a44aef8d4ca8"><div class="ttname"><a href="namespaceMs.html#ac201ae58f81f322edf18a44aef8d4ca8">Ms::ZOOM_LEVEL_MIN</a></div><div class="ttdeci">static constexpr qreal ZOOM_LEVEL_MIN</div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00123">globals.h:123</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_ae4f2f3a774def87e608afd55ef29b3e9"><div class="ttname"><a href="classMs_1_1Element.html#ae4f2f3a774def87e608afd55ef29b3e9">Ms::Element::selected</a></div><div class="ttdeci">bool selected() const</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00218">element.h:218</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a60ba9b7e2b84c28a8dbdfc3549f52544"><div class="ttname"><a href="classMs_1_1ScoreView.html#a60ba9b7e2b84c28a8dbdfc3549f52544">Ms::ScoreView::setOffset</a></div><div class="ttdeci">void setOffset(qreal x, qreal y)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03390">scoreview.cpp:3390</a></div></div>
<div class="ttc" id="classMs_1_1InputState_html_a325cb15dabdc8d28471d820cc28c39bd"><div class="ttname"><a href="classMs_1_1InputState.html#a325cb15dabdc8d28471d820cc28c39bd">Ms::InputState::drumset</a></div><div class="ttdeci">const Drumset * drumset() const</div><div class="ttdef"><b>Definition:</b> <a href="input_8cpp_source.html#l00035">input.cpp:35</a></div></div>
<div class="ttc" id="classMs_1_1BreaksDialog_html_a36bae7ca96ca9b9be3ed587de8361c46"><div class="ttname"><a href="classMs_1_1BreaksDialog.html#a36bae7ca96ca9b9be3ed587de8361c46">Ms::BreaksDialog::interval</a></div><div class="ttdeci">int interval</div><div class="ttdef"><b>Definition:</b> <a href="breaksdialog_8h_source.html#l00039">breaksdialog.h:39</a></div></div>
<div class="ttc" id="classMs_1_1XmlReader_html"><div class="ttname"><a href="classMs_1_1XmlReader.html">Ms::XmlReader</a></div><div class="ttdef"><b>Definition:</b> <a href="xml_8h_source.html#l00069">xml.h:69</a></div></div>
<div class="ttc" id="classMs_1_1MScore_html_a6dad4596647775c77a597679fb98cb45"><div class="ttname"><a href="classMs_1_1MScore.html#a6dad4596647775c77a597679fb98cb45">Ms::MScore::showCorruptedMeasures</a></div><div class="ttdeci">static bool showCorruptedMeasures</div><div class="ttdef"><b>Definition:</b> <a href="mscore_8h_source.html#l00363">mscore.h:363</a></div></div>
<div class="ttc" id="note_8h_html"><div class="ttname"><a href="note_8h.html">note.h</a></div><div class="ttdoc">Definition of classes Note and NoteHead. </div></div>
<div class="ttc" id="classMs_1_1Tuplet_html_a28548e0ca46eaf9970fed3f7d3b51c58"><div class="ttname"><a href="classMs_1_1Tuplet.html#a28548e0ca46eaf9970fed3f7d3b51c58">Ms::Tuplet::baseLen</a></div><div class="ttdeci">TDuration baseLen() const</div><div class="ttdef"><b>Definition:</b> <a href="tuplet_8h_source.html#l00114">tuplet.h:114</a></div></div>
<div class="ttc" id="chord_8h_html"><div class="ttname"><a href="chord_8h.html">chord.h</a></div><div class="ttdoc">Definition of classes Chord, HelpLine and NoteList. </div></div>
<div class="ttc" id="classMs_1_1Segment_html_a8a396189ef9375898066fb2d30952d79"><div class="ttname"><a href="classMs_1_1Segment.html#a8a396189ef9375898066fb2d30952d79">Ms::Segment::rtick</a></div><div class="ttdeci">Fraction rtick() const override</div><div class="ttdef"><b>Definition:</b> <a href="segment_8h_source.html#l00160">segment.h:160</a></div></div>
<div class="ttc" id="classMs_1_1DurationElement_html_ab46be26ba621ac65774af1ad7bb07cd7"><div class="ttname"><a href="classMs_1_1DurationElement.html#ab46be26ba621ac65774af1ad7bb07cd7">Ms::DurationElement::setTicks</a></div><div class="ttdeci">void setTicks(const Fraction &amp;f)</div><div class="ttdef"><b>Definition:</b> <a href="duration_8h_source.html#l00059">duration.h:59</a></div></div>
<div class="ttc" id="namespaceMs_html_a8886182157e4e29202c1b22bbdc76ecb"><div class="ttname"><a href="namespaceMs.html#a8886182157e4e29202c1b22bbdc76ecb">Ms::toSpannerSegment</a></div><div class="ttdeci">static SpannerSegment * toSpannerSegment(ScoreElement *e)</div><div class="ttdef"><b>Definition:</b> <a href="scoreElement_8h_source.html#l00475">scoreElement.h:475</a></div></div>
<div class="ttc" id="namespaceMs_html_a2c92ce0204176ede1ab86e2f44ae6b9eaf00e5bc95e18be1ab839e6f51d8c3f3b"><div class="ttname"><a href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9eaf00e5bc95e18be1ab839e6f51d8c3f3b">Ms::ElementType::REPEAT_MEASURE</a></div></div>
<div class="ttc" id="stringdata_8h_html"><div class="ttname"><a href="stringdata_8h.html">stringdata.h</a></div></div>
<div class="ttc" id="classMs_1_1Measure_html_a7dd90eaf72439bf012349d7e8f476425"><div class="ttname"><a href="classMs_1_1Measure.html#a7dd90eaf72439bf012349d7e8f476425">Ms::Measure::mmRest1</a></div><div class="ttdeci">const Measure * mmRest1() const</div><div class="ttdef"><b>Definition:</b> <a href="measure_8cpp_source.html#l03359">measure.cpp:3359</a></div></div>
<div class="ttc" id="classMs_1_1StaffType_html_a8573023e9149c33b1dc28e8e841e21ca"><div class="ttname"><a href="classMs_1_1StaffType.html#a8573023e9149c33b1dc28e8e841e21ca">Ms::StaffType::lineDistance</a></div><div class="ttdeci">Spatium lineDistance() const</div><div class="ttdef"><b>Definition:</b> <a href="stafftype_8h_source.html#l00294">stafftype.h:294</a></div></div>
<div class="ttc" id="classMs_1_1Fingering_html"><div class="ttname"><a href="classMs_1_1Fingering.html">Ms::Fingering</a></div><div class="ttdef"><b>Definition:</b> <a href="fingering_8h_source.html#l00024">fingering.h:24</a></div></div>
<div class="ttc" id="classMs_1_1Measure_html_af1e8fd79a9de3d2e12bbda91e1a82aff"><div class="ttname"><a href="classMs_1_1Measure.html#af1e8fd79a9de3d2e12bbda91e1a82aff">Ms::Measure::staffabbox</a></div><div class="ttdeci">QRectF staffabbox(int staffIdx) const</div><div class="ttdef"><b>Definition:</b> <a href="measure_8cpp_source.html#l01351">measure.cpp:1351</a></div></div>
<div class="ttc" id="classMs_1_1TDuration_html_ad9263bf173856b77421e83a48a7bf68ca68a1baf6d6e825773e6dc8cdaf7b1dba"><div class="ttname"><a href="classMs_1_1TDuration.html#ad9263bf173856b77421e83a48a7bf68ca68a1baf6d6e825773e6dc8cdaf7b1dba">Ms::TDuration::DurationType::V_WHOLE</a></div></div>
<div class="ttc" id="textpalette_8h_html"><div class="ttname"><a href="textpalette_8h.html">textpalette.h</a></div></div>
<div class="ttc" id="textcursor_8h_html"><div class="ttname"><a href="textcursor_8h.html">textcursor.h</a></div></div>
<div class="ttc" id="namespaceMs_html_a6b5aa179fb8d7a11ec316c01a2fdf6e1a61a96ffcb251bb9bf0abf8fec19d0ea8"><div class="ttname"><a href="namespaceMs.html#a6b5aa179fb8d7a11ec316c01a2fdf6e1a61a96ffcb251bb9bf0abf8fec19d0ea8">Ms::CapellaType::TEXT</a></div></div>
<div class="ttc" id="classMs_1_1StaffType_html"><div class="ttname"><a href="classMs_1_1StaffType.html">Ms::StaffType</a></div><div class="ttdef"><b>Definition:</b> <a href="stafftype_8h_source.html#l00177">stafftype.h:177</a></div></div>
<div class="ttc" id="classMs_1_1TDuration_html_ad9263bf173856b77421e83a48a7bf68cac5f539d8ae1a90e7d2c1489ae20048dc"><div class="ttname"><a href="classMs_1_1TDuration.html#ad9263bf173856b77421e83a48a7bf68cac5f539d8ae1a90e7d2c1489ae20048dc">Ms::TDuration::DurationType::V_HALF</a></div></div>
<div class="ttc" id="system_8h_html"><div class="ttname"><a href="system_8h.html">system.h</a></div><div class="ttdoc">Definition of classes SysStaff and System. </div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_aa53149346a651dce3f4678a9f7014f1f"><div class="ttname"><a href="classMs_1_1ScoreView.html#aa53149346a651dce3f4678a9f7014f1f">Ms::ScoreView::paintPageBorder</a></div><div class="ttdeci">void paintPageBorder(QPainter &amp;p, Page *page)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l01150">scoreview.cpp:1150</a></div></div>
<div class="ttc" id="namespaceMs_html_aa15d8b46ea58d6bb59b084d6d7bcff7da684d325a7303f52e64011467ff5c5758"><div class="ttname"><a href="namespaceMs.html#aa15d8b46ea58d6bb59b084d6d7bcff7da684d325a7303f52e64011467ff5c5758">Ms::POS::LEFT</a></div></div>
<div class="ttc" id="systemtext_8h_html"><div class="ttname"><a href="systemtext_8h.html">systemtext.h</a></div></div>
<div class="ttc" id="classMs_1_1Note_html_a6003ba6106243f773ea7ae88abe5dc14"><div class="ttname"><a href="classMs_1_1Note.html#a6003ba6106243f773ea7ae88abe5dc14">Ms::Note::el</a></div><div class="ttdeci">ElementList &amp; el()</div><div class="ttdef"><b>Definition:</b> <a href="note_8h_source.html#l00449">note.h:449</a></div></div>
<div class="ttc" id="volta_8h_html"><div class="ttname"><a href="volta_8h.html">volta.h</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_aa1f1ac02b360d2d4f30e14aaa5ca2564"><div class="ttname"><a href="classMs_1_1Element.html#aa1f1ac02b360d2d4f30e14aaa5ca2564">Ms::Element::findMeasure</a></div><div class="ttdeci">Measure * findMeasure()</div><div class="ttdef"><b>Definition:</b> <a href="element_8cpp_source.html#l01470">element.cpp:1470</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a415252f9c604e83c35677a00769cd1a8"><div class="ttname"><a href="classMs_1_1ScoreView.html#a415252f9c604e83c35677a00769cd1a8">Ms::ScoreView::setShadowNote</a></div><div class="ttdeci">void setShadowNote(const QPointF &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l01005">scoreview.cpp:1005</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_ac2611b75294773cfc1cfa30285d9dd1e"><div class="ttname"><a href="classMs_1_1ScoreView.html#ac2611b75294773cfc1cfa30285d9dd1e">Ms::ScoreView::editCmd</a></div><div class="ttdeci">void editCmd(const QString &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="keyb_8cpp_source.html#l00050">keyb.cpp:50</a></div></div>
<div class="ttc" id="sticking_8h_html"><div class="ttname"><a href="sticking_8h.html">sticking.h</a></div></div>
<div class="ttc" id="namespaceMs_html_a20d9370e85f87d0b2594fd90665f8cc1a6868244d4b7f8fc007f2cd5c7aa425df"><div class="ttname"><a href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a6868244d4b7f8fc007f2cd5c7aa425df">Ms::ViewState::FOTO_DRAG</a></div></div>
<div class="ttc" id="instrchange_8h_html"><div class="ttname"><a href="instrchange_8h.html">instrchange.h</a></div></div>
<div class="ttc" id="namespaceMs_html_a602ef082ffbbe2c4b11e2375cc4aa794aeab244836adffdeef9573f36a3baba75"><div class="ttname"><a href="namespaceMs.html#a602ef082ffbbe2c4b11e2375cc4aa794aeab244836adffdeef9573f36a3baba75">Ms::SymId::noteheadBlack</a></div></div>
<div class="ttc" id="classMs_1_1System_html_a57ae7602a440ece25a56b8c99530c728"><div class="ttname"><a href="classMs_1_1System.html#a57ae7602a440ece25a56b8c99530c728">Ms::System::staffCanvasYpage</a></div><div class="ttdeci">qreal staffCanvasYpage(int staffIdx) const</div><div class="ttdef"><b>Definition:</b> <a href="system_8cpp_source.html#l01300">system.cpp:1300</a></div></div>
<div class="ttc" id="namespaceMs_html_a46459b09cb8d7b0c58c5db7fbb0d7150"><div class="ttname"><a href="namespaceMs.html#a46459b09cb8d7b0c58c5db7fbb0d7150">Ms::mimeStaffListFormat</a></div><div class="ttdeci">static const char mimeStaffListFormat[]</div><div class="ttdef"><b>Definition:</b> <a href="mscore_8h_source.html#l00100">mscore.h:100</a></div></div>
<div class="ttc" id="classMs_1_1MeasureBase_html_a362a1699d39b7f1684c13a1a8c75c376"><div class="ttname"><a href="classMs_1_1MeasureBase.html#a362a1699d39b7f1684c13a1a8c75c376">Ms::MeasureBase::prev</a></div><div class="ttdeci">MeasureBase * prev() const</div><div class="ttdef"><b>Definition:</b> <a href="measurebase_8h_source.html#l00088">measurebase.h:88</a></div></div>
<div class="ttc" id="classMs_1_1Page_html"><div class="ttname"><a href="classMs_1_1Page.html">Ms::Page</a></div><div class="ttdef"><b>Definition:</b> <a href="page_8h_source.html#l00034">page.h:34</a></div></div>
<div class="ttc" id="classMs_1_1Fraction_html_ae671ef315b71166777d5f3feeb3e3e92"><div class="ttname"><a href="classMs_1_1Fraction.html#ae671ef315b71166777d5f3feeb3e3e92">Ms::Fraction::setDenominator</a></div><div class="ttdeci">void setDenominator(int v)</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2fraction_8h_source.html#l00068">fraction.h:68</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a6cc379cc25680adcf704fa815386f9f2"><div class="ttname"><a href="classMs_1_1ScoreView.html#a6cc379cc25680adcf704fa815386f9f2">Ms::ScoreView::posChanged</a></div><div class="ttdeci">void posChanged(POS pos, unsigned tick)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l05217">scoreview.cpp:5217</a></div></div>
<div class="ttc" id="namespaceMs_html_a9b1fb02f916c554309371c6513550a1ba17b8ef2c330f1430e00c9de5469fc7e7"><div class="ttname"><a href="namespaceMs.html#a9b1fb02f916c554309371c6513550a1ba17b8ef2c330f1430e00c9de5469fc7e7">Ms::LayoutMode::LINE</a></div></div>
<div class="ttc" id="classMs_1_1TDuration_html_ad9263bf173856b77421e83a48a7bf68cac23bf58f35bf1fdfa910d9de6dba47f4"><div class="ttname"><a href="classMs_1_1TDuration.html#ad9263bf173856b77421e83a48a7bf68cac23bf58f35bf1fdfa910d9de6dba47f4">Ms::TDuration::DurationType::V_MEASURE</a></div></div>
<div class="ttc" id="namespaceMs_html_a60c3d8a61c63ab648c253442e51e804b"><div class="ttname"><a href="namespaceMs.html#a60c3d8a61c63ab648c253442e51e804b">Ms::nextChordRest</a></div><div class="ttdeci">ChordRest * nextChordRest(ChordRest *cr, bool skipGrace)</div><div class="ttdef"><b>Definition:</b> <a href="navigate_8cpp_source.html#l00039">navigate.cpp:39</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a65d942be9aa38e46f0b9b7b5ff866b8f"><div class="ttname"><a href="classMs_1_1ScoreView.html#a65d942be9aa38e46f0b9b7b5ff866b8f">Ms::ScoreView::paintEvent</a></div><div class="ttdeci">virtual void paintEvent(QPaintEvent *)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l01099">scoreview.cpp:1099</a></div></div>
<div class="ttc" id="classMs_1_1SlurSegment_html"><div class="ttname"><a href="classMs_1_1SlurSegment.html">Ms::SlurSegment</a></div><div class="ttdoc">a single segment of slur; also used for Tie </div><div class="ttdef"><b>Definition:</b> <a href="slur_8h_source.html#l00025">slur.h:25</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_ae13af03f0efac5348d139609cbadc826"><div class="ttname"><a href="classMs_1_1Element.html#ae13af03f0efac5348d139609cbadc826">Ms::Element::setPlacement</a></div><div class="ttdeci">void setPlacement(Placement val)</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00229">element.h:229</a></div></div>
<div class="ttc" id="classMs_1_1Note_html_a185ab0f428111692b22a601be4026991"><div class="ttname"><a href="classMs_1_1Note.html#a185ab0f428111692b22a601be4026991">Ms::Note::hidden</a></div><div class="ttdeci">bool hidden() const</div><div class="ttdef"><b>Definition:</b> <a href="note_8h_source.html#l00441">note.h:441</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_ada1e6822ac83e28e36b73c8e4a589fa4"><div class="ttname"><a href="classMs_1_1Score.html#ada1e6822ac83e28e36b73c8e4a589fa4">Ms::Score::lastElement</a></div><div class="ttdeci">Element * lastElement(bool frame=true)</div><div class="ttdef"><b>Definition:</b> <a href="navigate_8cpp_source.html#l00288">navigate.cpp:288</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_a9f91ce44289781c10fbaab9f5867d387"><div class="ttname"><a href="classMs_1_1Element.html#a9f91ce44289781c10fbaab9f5867d387">Ms::Element::visible</a></div><div class="ttdeci">bool visible() const</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00221">element.h:221</a></div></div>
<div class="ttc" id="structMs_1_1Position_html_a4a5bb90e03f7ee0950a4303af8dc12c2"><div class="ttname"><a href="structMs_1_1Position.html#a4a5bb90e03f7ee0950a4303af8dc12c2">Ms::Position::pos</a></div><div class="ttdeci">QPointF pos</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l00211">score.h:211</a></div></div>
<div class="ttc" id="classMs_1_1MasterScore_html_ab55f2df03a0cce61e49cf13ec6122840"><div class="ttname"><a href="classMs_1_1MasterScore.html#ab55f2df03a0cce61e49cf13ec6122840">Ms::MasterScore::showOmr</a></div><div class="ttdeci">bool showOmr() const</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l01388">score.h:1388</a></div></div>
<div class="ttc" id="namespaceMs_html_a05776eecab3e8f84c45f571328f47a14"><div class="ttname"><a href="namespaceMs.html#a05776eecab3e8f84c45f571328f47a14">Ms::prevChordRest</a></div><div class="ttdeci">ChordRest * prevChordRest(ChordRest *cr, bool skipGrace)</div><div class="ttdef"><b>Definition:</b> <a href="navigate_8cpp_source.html#l00117">navigate.cpp:117</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_acff6952d015f5f2928c5c1e0050abc86"><div class="ttname"><a href="classMs_1_1Score.html#acff6952d015f5f2928c5c1e0050abc86">Ms::Score::type</a></div><div class="ttdeci">virtual ElementType type() const override</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l00601">score.h:601</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_ad3571dd2769ff183c2beba6f7cdb3313"><div class="ttname"><a href="classMs_1_1Score.html#ad3571dd2769ff183c2beba6f7cdb3313">Ms::Score::upAlt</a></div><div class="ttdeci">Element * upAlt(Element *)</div><div class="ttdef"><b>Definition:</b> <a href="navigate_8cpp_source.html#l00190">navigate.cpp:190</a></div></div>
<div class="ttc" id="namespaceMs_html_a20d9370e85f87d0b2594fd90665f8cc1a1e23852820b9154316c7c06e2b7ba051"><div class="ttname"><a href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a1e23852820b9154316c7c06e2b7ba051">Ms::ViewState::NORMAL</a></div></div>
<div class="ttc" id="classMs_1_1DurationElement_html_a5eae2d4a8a4a01245e2a18d97ee7988a"><div class="ttname"><a href="classMs_1_1DurationElement.html#a5eae2d4a8a4a01245e2a18d97ee7988a">Ms::DurationElement::tuplet</a></div><div class="ttdeci">Tuplet * tuplet() const</div><div class="ttdef"><b>Definition:</b> <a href="duration_8h_source.html#l00050">duration.h:50</a></div></div>
<div class="ttc" id="classMs_1_1InputState_html_a28047eb7c30748dd3111c4621eb1ea4d"><div class="ttname"><a href="classMs_1_1InputState.html#a28047eb7c30748dd3111c4621eb1ea4d">Ms::InputState::cr</a></div><div class="ttdeci">ChordRest * cr() const</div><div class="ttdef"><b>Definition:</b> <a href="input_8cpp_source.html#l00073">input.cpp:73</a></div></div>
<div class="ttc" id="classMs_1_1Staff_html"><div class="ttname"><a href="classMs_1_1Staff.html">Ms::Staff</a></div><div class="ttdoc">Global staff data not directly related to drawing. </div><div class="ttdef"><b>Definition:</b> <a href="staff_8h_source.html#l00063">staff.h:63</a></div></div>
<div class="ttc" id="lyrics_8h_html"><div class="ttname"><a href="lyrics_8h.html">lyrics.h</a></div></div>
<div class="ttc" id="classMs_1_1SLine_html_a3607607e62c180dd7572aaa39872f88c"><div class="ttname"><a href="classMs_1_1SLine.html#a3607607e62c180dd7572aaa39872f88c">Ms::SLine::setDiagonal</a></div><div class="ttdeci">void setDiagonal(bool v)</div><div class="ttdef"><b>Definition:</b> <a href="line_8h_source.html#l00111">line.h:111</a></div></div>
<div class="ttc" id="scoretab_8h_html"><div class="ttname"><a href="scoretab_8h.html">scoretab.h</a></div></div>
<div class="ttc" id="classMs_1_1SlurTieSegment_html_a41449c7a71eb7fc42d4384b3e560fd72"><div class="ttname"><a href="classMs_1_1SlurTieSegment.html#a41449c7a71eb7fc42d4384b3e560fd72">Ms::SlurTieSegment::setSlurOffset</a></div><div class="ttdeci">void setSlurOffset(Grip i, const QPointF &amp;val)</div><div class="ttdef"><b>Definition:</b> <a href="slurtie_8h_source.html#l00109">slurtie.h:109</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a88d1556bac485bde9b2d6ae3c1e6bd77"><div class="ttname"><a href="classMs_1_1Score.html#a88d1556bac485bde9b2d6ae3c1e6bd77">Ms::Score::undoAddElement</a></div><div class="ttdeci">void undoAddElement(Element *element)</div><div class="ttdef"><b>Definition:</b> <a href="edit_8cpp_source.html#l04406">edit.cpp:4406</a></div></div>
<div class="ttc" id="classMs_1_1Segment_html_a1c4c00c6b1052c6c122f5fc665ec8a20"><div class="ttname"><a href="classMs_1_1Segment.html#a1c4c00c6b1052c6c122f5fc665ec8a20">Ms::Segment::next</a></div><div class="ttdeci">Segment * next() const</div><div class="ttdef"><b>Definition:</b> <a href="segment_8h_source.html#l00085">segment.h:85</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a0857568aea0bf9897ecf5387a5bd41fc"><div class="ttname"><a href="classMs_1_1ScoreView.html#a0857568aea0bf9897ecf5387a5bd41fc">Ms::ScoreView::endNoteEntry</a></div><div class="ttdeci">void endNoteEntry()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03238">scoreview.cpp:3238</a></div></div>
<div class="ttc" id="classMs_1_1Segment_html_ac30bce62d008049b47f408497d32dccc"><div class="ttname"><a href="classMs_1_1Segment.html#ac30bce62d008049b47f408497d32dccc">Ms::Segment::annotations</a></div><div class="ttdeci">const std::vector&lt; Element * &gt; &amp; annotations() const</div><div class="ttdef"><b>Definition:</b> <a href="segment_8h_source.html#l00172">segment.h:172</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_afb07851d16c730290086fcf3a32f522c"><div class="ttname"><a href="classMs_1_1Score.html#afb07851d16c730290086fcf3a32f522c">Ms::Score::update</a></div><div class="ttdeci">void update(bool resetCmdState)</div><div class="ttdef"><b>Definition:</b> <a href="cmd_8cpp_source.html#l00294">cmd.cpp:294</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_adb795730e534b4d78e99c5139be9a95f"><div class="ttname"><a href="classMs_1_1ScoreView.html#adb795730e534b4d78e99c5139be9a95f">Ms::ScoreView::cmdEnterRest</a></div><div class="ttdeci">void cmdEnterRest(const TDuration &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03908">scoreview.cpp:3908</a></div></div>
<div class="ttc" id="classMs_1_1PositionCursor_html_ab7f81e6223cfe87fe008ec360d5603c2"><div class="ttname"><a href="classMs_1_1PositionCursor.html#ab7f81e6223cfe87fe008ec360d5603c2">Ms::PositionCursor::rect</a></div><div class="ttdeci">QRectF rect() const</div><div class="ttdef"><b>Definition:</b> <a href="textcursor_8h_source.html#l00048">textcursor.h:48</a></div></div>
<div class="ttc" id="classMs_1_1ScoreAccessibility_html_ab599dd1d2ea8a07138e0d34e46abe4bb"><div class="ttname"><a href="classMs_1_1ScoreAccessibility.html#ab599dd1d2ea8a07138e0d34e46abe4bb">Ms::ScoreAccessibility::clearAccessibilityInfo</a></div><div class="ttdeci">void clearAccessibilityInfo()</div><div class="ttdef"><b>Definition:</b> <a href="scoreaccessibility_8cpp_source.html#l00216">scoreaccessibility.cpp:216</a></div></div>
<div class="ttc" id="namespaceMs_html_ad1b3e57dfd5b26a280bf2ebde66b9d5aafa177138f94a7ea01f549b1aa7893d03"><div class="ttname"><a href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aafa177138f94a7ea01f549b1aa7893d03">Ms::Tid::SYSTEM</a></div></div>
<div class="ttc" id="slur_8h_html"><div class="ttname"><a href="slur_8h.html">slur.h</a></div></div>
<div class="ttc" id="namespaceMs_html_a8ba055802fd4a7411880d6902e984be1a298cb25408234de02baf2085803a464a"><div class="ttname"><a href="namespaceMs.html#a8ba055802fd4a7411880d6902e984be1a298cb25408234de02baf2085803a464a">Ms::SelState::LIST</a></div></div>
<div class="ttc" id="classMs_1_1Page_html_a531a2daae4ad65988a04ae199ebdf179"><div class="ttname"><a href="classMs_1_1Page.html#a531a2daae4ad65988a04ae199ebdf179">Ms::Page::items</a></div><div class="ttdeci">QList&lt; Element * &gt; items(const QRectF &amp;r)</div><div class="ttdef"><b>Definition:</b> <a href="page_8cpp_source.html#l00055">page.cpp:55</a></div></div>
<div class="ttc" id="classMs_1_1TextBase_html_a26aa5eb322375f093ff39146890478d4"><div class="ttname"><a href="classMs_1_1TextBase.html#a26aa5eb322375f093ff39146890478d4">Ms::TextBase::tid</a></div><div class="ttdeci">Tid tid() const</div><div class="ttdef"><b>Definition:</b> <a href="textbase_8h_source.html#l00388">textbase.h:388</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_a6f850cd0581c46bee4661210b7a7777c"><div class="ttname"><a href="classMs_1_1Element.html#a6f850cd0581c46bee4661210b7a7777c">Ms::Element::x</a></div><div class="ttdeci">virtual qreal x() const</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00244">element.h:244</a></div></div>
<div class="ttc" id="classMs_1_1Measure_html_a9491f66d4e4c82e05aaea063d3654ac8"><div class="ttname"><a href="classMs_1_1Measure.html#a9491f66d4e4c82e05aaea063d3654ac8">Ms::Measure::hasMMRest</a></div><div class="ttdeci">bool hasMMRest() const</div><div class="ttdef"><b>Definition:</b> <a href="measure_8h_source.html#l00251">measure.h:251</a></div></div>
<div class="ttc" id="classMs_1_1Tuplet_html_a1f6d0d4fbe2921476dc77bb9cf59f9e0"><div class="ttname"><a href="classMs_1_1Tuplet.html#a1f6d0d4fbe2921476dc77bb9cf59f9e0">Ms::Tuplet::setBaseLen</a></div><div class="ttdeci">void setBaseLen(const TDuration &amp;d)</div><div class="ttdef"><b>Definition:</b> <a href="tuplet_8h_source.html#l00115">tuplet.h:115</a></div></div>
<div class="ttc" id="classMs_1_1ScoreElement_html_aac3320320d350a161ed3f9a601160451"><div class="ttname"><a href="classMs_1_1ScoreElement.html#aac3320320d350a161ed3f9a601160451">Ms::ScoreElement::isVBoxBase</a></div><div class="ttdeci">bool isVBoxBase() const</div><div class="ttdef"><b>Definition:</b> <a href="scoreElement_8h_source.html#l00367">scoreElement.h:367</a></div></div>
<div class="ttc" id="classMs_1_1ScoreElement_html_a979b6e1bc10cf790e755aa8641feb4cf"><div class="ttname"><a href="classMs_1_1ScoreElement.html#a979b6e1bc10cf790e755aa8641feb4cf">Ms::ScoreElement::isTextBase</a></div><div class="ttdeci">bool isTextBase() const</div><div class="ttdef"><b>Definition:</b> <a href="scoreElement_8cpp_source.html#l00844">scoreElement.cpp:844</a></div></div>
<div class="ttc" id="namespaceMs_html_ac12fb12074fc86d33abf8fb00d37bc86a4fe2e7c5638514d1e165cf5eab2ed1ef"><div class="ttname"><a href="namespaceMs.html#ac12fb12074fc86d33abf8fb00d37bc86a4fe2e7c5638514d1e165cf5eab2ed1ef">Ms::ZoomIndex::ZOOM_WHOLE_PAGE</a></div></div>
<div class="ttc" id="classMs_1_1ScoreElement_html_a3dbb763c3cd4ec05d202d03115abe1d5"><div class="ttname"><a href="classMs_1_1ScoreElement.html#a3dbb763c3cd4ec05d202d03115abe1d5">Ms::ScoreElement::type</a></div><div class="ttdeci">virtual ElementType type() const =0</div></div>
<div class="ttc" id="namespaceMs_html_a56785a0f227cf3d1d0a4891656a35daaa2816296dc4ec68b74aa2aa62cfe49e21"><div class="ttname"><a href="namespaceMs.html#a56785a0f227cf3d1d0a4891656a35daaa2816296dc4ec68b74aa2aa62cfe49e21">Ms::PropertyFlags::UNSTYLED</a></div></div>
<div class="ttc" id="classMs_1_1Selection_html_ad758bc5c1eadc3b1d99b4a79f07f60cb"><div class="ttname"><a href="classMs_1_1Selection.html#ad758bc5c1eadc3b1d99b4a79f07f60cb">Ms::Selection::isList</a></div><div class="ttdeci">bool isList() const</div><div class="ttdef"><b>Definition:</b> <a href="select_8h_source.html#l00180">select.h:180</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_affd680e8fef37423dcd00caa17d375e5"><div class="ttname"><a href="classMs_1_1ScoreView.html#affd680e8fef37423dcd00caa17d375e5">Ms::ScoreView::xoffset</a></div><div class="ttdeci">qreal xoffset() const</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03403">scoreview.cpp:3403</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_abb85c34d7002f2f9bd49bb57e6afd689"><div class="ttname"><a href="classMs_1_1ScoreView.html#abb85c34d7002f2f9bd49bb57e6afd689">Ms::ScoreView::adjustCanvasPosition</a></div><div class="ttdeci">virtual void adjustCanvasPosition(const Element *el, bool playBack, int staff=-1) override</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03660">scoreview.cpp:3660</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a766fb53e10ee7e2ef96a0140e4163538"><div class="ttname"><a href="classMs_1_1ScoreView.html#a766fb53e10ee7e2ef96a0140e4163538">Ms::ScoreView::noteEntryMode</a></div><div class="ttdeci">bool noteEntryMode() const</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8h_source.html#l00432">scoreview.h:432</a></div></div>
<div class="ttc" id="classMs_1_1Measure_html_a2c67ef4fc0d77fa272feef2e45ba3617"><div class="ttname"><a href="classMs_1_1Measure.html#a2c67ef4fc0d77fa272feef2e45ba3617">Ms::Measure::isEditable</a></div><div class="ttdeci">bool isEditable() const override</div><div class="ttdef"><b>Definition:</b> <a href="measure_8h_source.html#l00112">measure.h:112</a></div></div>
<div class="ttc" id="classMs_1_1Selection_html_a52a5707191f5035bfda106c54df906d7"><div class="ttname"><a href="classMs_1_1Selection.html#a52a5707191f5035bfda106c54df906d7">Ms::Selection::startSegment</a></div><div class="ttdeci">Segment * startSegment() const</div><div class="ttdef"><b>Definition:</b> <a href="select_8h_source.html#l00213">select.h:213</a></div></div>
<div class="ttc" id="namespaceMs_html_ac12fb12074fc86d33abf8fb00d37bc86a086ce865dca88eb7c133056ea99ce130"><div class="ttname"><a href="namespaceMs.html#ac12fb12074fc86d33abf8fb00d37bc86a086ce865dca88eb7c133056ea99ce130">Ms::ZoomIndex::ZOOM_TWO_PAGES</a></div></div>
<div class="ttc" id="classMs_1_1ChordRest_html_aaa704d32c5e4253d54d722276f507e2d"><div class="ttname"><a href="classMs_1_1ChordRest.html#aaa704d32c5e4253d54d722276f507e2d">Ms::ChordRest::measure</a></div><div class="ttdeci">virtual Measure * measure() const =0</div></div>
<div class="ttc" id="classMs_1_1PositionCursor_html_ae3dde691712094ad15e7beccb095af7e"><div class="ttname"><a href="classMs_1_1PositionCursor.html#ae3dde691712094ad15e7beccb095af7e">Ms::PositionCursor::setTick</a></div><div class="ttdeci">void setTick(const Fraction &amp;val)</div><div class="ttdef"><b>Definition:</b> <a href="textcursor_8h_source.html#l00055">textcursor.h:55</a></div></div>
<div class="ttc" id="classMs_1_1TDuration_html_a477b8c2ea4cd1914e605219b70fb7b13"><div class="ttname"><a href="classMs_1_1TDuration.html#a477b8c2ea4cd1914e605219b70fb7b13">Ms::TDuration::isMeasure</a></div><div class="ttdeci">bool isMeasure() const</div><div class="ttdef"><b>Definition:</b> <a href="durationtype_8h_source.html#l00051">durationtype.h:51</a></div></div>
<div class="ttc" id="namespaceMs_html_ac12fb12074fc86d33abf8fb00d37bc86a2cee454ffbaad8446033c0c951975004"><div class="ttname"><a href="namespaceMs.html#ac12fb12074fc86d33abf8fb00d37bc86a2cee454ffbaad8446033c0c951975004">Ms::ZoomIndex::ZOOM_FREE</a></div></div>
<div class="ttc" id="classMs_1_1MeasureProperties_html"><div class="ttname"><a href="classMs_1_1MeasureProperties.html">Ms::MeasureProperties</a></div><div class="ttdef"><b>Definition:</b> <a href="measureproperties_8h_source.html#l00034">measureproperties.h:34</a></div></div>
<div class="ttc" id="classMs_1_1Part_html_a6cae82662abe64d683dff09b3c7874f8"><div class="ttname"><a href="classMs_1_1Part.html#a6cae82662abe64d683dff09b3c7874f8">Ms::Part::instrument</a></div><div class="ttdeci">Instrument * instrument(Fraction={ -1, 1 })</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2part_8cpp_source.html#l00334">part.cpp:334</a></div></div>
<div class="ttc" id="namespaceMs_html_a9ac3d39c415913ce40aa7e57a5f3fb55"><div class="ttname"><a href="namespaceMs.html#a9ac3d39c415913ce40aa7e57a5f3fb55">Ms::HarmonyType</a></div><div class="ttdeci">HarmonyType</div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00382">types.h:382</a></div></div>
<div class="ttc" id="namespaceMs_html_aa0f871cf8181cec31d68d20a39010655a1b8a8605d2ff5670a215e55c6645e0d9"><div class="ttname"><a href="namespaceMs.html#aa0f871cf8181cec31d68d20a39010655a1b8a8605d2ff5670a215e55c6645e0d9">Ms::Pid::OFFSET</a></div></div>
<div class="ttc" id="structMs_1_1MidiInputEvent_html_ad64a4c8a069d019aa6c9fdd1b4a365f0"><div class="ttname"><a href="structMs_1_1MidiInputEvent.html#ad64a4c8a069d019aa6c9fdd1b4a365f0">Ms::MidiInputEvent::velocity</a></div><div class="ttdeci">int velocity</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l00199">score.h:199</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_a3c37abb86b5dfb5b16fe74155154bab8"><div class="ttname"><a href="classMs_1_1Element.html#a3c37abb86b5dfb5b16fe74155154bab8">Ms::Element::staffIdx</a></div><div class="ttdeci">int staffIdx() const</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00357">element.h:357</a></div></div>
<div class="ttc" id="namespaceMs_html_ad1b3e57dfd5b26a280bf2ebde66b9d5aa591aa8ad7eccb940ed9ed21d61cb61f6"><div class="ttname"><a href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aa591aa8ad7eccb940ed9ed21d61cb61f6">Ms::Tid::INSTRUMENT_EXCERPT</a></div></div>
<div class="ttc" id="classMs_1_1CmdState_html"><div class="ttname"><a href="classMs_1_1CmdState.html">Ms::CmdState</a></div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l00267">score.h:267</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a232d837eb35d66b42561d349d5716117"><div class="ttname"><a href="classMs_1_1ScoreView.html#a232d837eb35d66b42561d349d5716117">Ms::ScoreView::moveCursor</a></div><div class="ttdeci">void moveCursor(const Fraction &amp;tick)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l00575">scoreview.cpp:575</a></div></div>
<div class="ttc" id="classMs_1_1MScore_html_ae096be4858e62f8e63814d0f364b9180"><div class="ttname"><a href="classMs_1_1MScore.html#ae096be4858e62f8e63814d0f364b9180">Ms::MScore::showSkylines</a></div><div class="ttdeci">static bool showSkylines</div><div class="ttdef"><b>Definition:</b> <a href="mscore_8h_source.html#l00359">mscore.h:359</a></div></div>
<div class="ttc" id="namespaceMs_html_aba2aa505eb62a6a5600a3e55f0cc11eb"><div class="ttname"><a href="namespaceMs.html#aba2aa505eb62a6a5600a3e55f0cc11eb">Ms::gscore</a></div><div class="ttdeci">MasterScore * gscore</div><div class="ttdoc">system score, used for palettes etc. </div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8cpp_source.html#l00080">score.cpp:80</a></div></div>
<div class="ttc" id="structMs_1_1Preferences_html_a2663c94f483c146a45a34e9d2deb11d5"><div class="ttname"><a href="structMs_1_1Preferences.html#a2663c94f483c146a45a34e9d2deb11d5">Ms::Preferences::getColor</a></div><div class="ttdeci">QColor getColor(const QString key) const</div><div class="ttdef"><b>Definition:</b> <a href="preferences_8cpp_source.html#l00446">preferences.cpp:446</a></div></div>
<div class="ttc" id="classMs_1_1ChordRest_html_ac50a2989556e5cd55b71ca4c98067492"><div class="ttname"><a href="classMs_1_1ChordRest.html#ac50a2989556e5cd55b71ca4c98067492">Ms::ChordRest::setTrack</a></div><div class="ttdeci">virtual void setTrack(int val) override</div><div class="ttdef"><b>Definition:</b> <a href="chordrest_8cpp_source.html#l00995">chordrest.cpp:995</a></div></div>
<div class="ttc" id="namespaceMs_html_aa0f871cf8181cec31d68d20a39010655ad5829bb83e9a51bb48fb0a1e5d77423e"><div class="ttname"><a href="namespaceMs.html#aa0f871cf8181cec31d68d20a39010655ad5829bb83e9a51bb48fb0a1e5d77423e">Ms::Pid::PLACEMENT</a></div></div>
<div class="ttc" id="classMs_1_1MScore_html_a4869cc8207f7c0ad6772120a1ec78c56"><div class="ttname"><a href="classMs_1_1MScore.html#a4869cc8207f7c0ad6772120a1ec78c56">Ms::MScore::horizontalPageGapOdd</a></div><div class="ttdeci">static qreal horizontalPageGapOdd</div><div class="ttdef"><b>Definition:</b> <a href="mscore_8h_source.html#l00386">mscore.h:386</a></div></div>
<div class="ttc" id="classMs_1_1InputState_html"><div class="ttname"><a href="classMs_1_1InputState.html">Ms::InputState</a></div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00042">input.h:42</a></div></div>
<div class="ttc" id="classMs_1_1InputState_html_a185cc2920a232317a5543ad71f2abc21"><div class="ttname"><a href="classMs_1_1InputState.html#a185cc2920a232317a5543ad71f2abc21">Ms::InputState::setRest</a></div><div class="ttdeci">void setRest(bool v)</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00093">input.h:93</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_ad46a1fa8985b3d3897101b295a7a5d3e"><div class="ttname"><a href="classMs_1_1Element.html#ad46a1fa8985b3d3897101b295a7a5d3e">Ms::Element::shape</a></div><div class="ttdeci">virtual Shape shape() const</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00290">element.h:290</a></div></div>
<div class="ttc" id="namespaceMs_html_a2c92ce0204176ede1ab86e2f44ae6b9ea53e518b6393904e797819c7a941f9ddc"><div class="ttname"><a href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea53e518b6393904e797819c7a941f9ddc">Ms::ElementType::TBOX</a></div></div>
<div class="ttc" id="classMs_1_1TDuration_html"><div class="ttname"><a href="classMs_1_1TDuration.html">Ms::TDuration</a></div><div class="ttdef"><b>Definition:</b> <a href="durationtype_8h_source.html#l00028">durationtype.h:28</a></div></div>
<div class="ttc" id="classMs_1_1Drumset_html"><div class="ttname"><a href="classMs_1_1Drumset.html">Ms::Drumset</a></div><div class="ttdef"><b>Definition:</b> <a href="drumset_8h_source.html#l00068">drumset.h:68</a></div></div>
<div class="ttc" id="classMs_1_1Page_html_a7e188c4049e98cb251340317bedeb1c0"><div class="ttname"><a href="classMs_1_1Page.html#a7e188c4049e98cb251340317bedeb1c0">Ms::Page::bm</a></div><div class="ttdeci">qreal bm() const</div><div class="ttdef"><b>Definition:</b> <a href="page_8cpp_source.html#l00481">page.cpp:481</a></div></div>
<div class="ttc" id="classMs_1_1Tuplet_html_afe2203c33521ceb7dfb756e21dceac2b"><div class="ttname"><a href="classMs_1_1Tuplet.html#afe2203c33521ceb7dfb756e21dceac2b">Ms::Tuplet::setRatio</a></div><div class="ttdeci">void setRatio(const Fraction &amp;r)</div><div class="ttdef"><b>Definition:</b> <a href="tuplet_8h_source.html#l00095">tuplet.h:95</a></div></div>
<div class="ttc" id="classMs_1_1Staff_html_ae31dc0de799c1e206af979e65bf837ab"><div class="ttname"><a href="classMs_1_1Staff.html#ae31dc0de799c1e206af979e65bf837ab">Ms::Staff::part</a></div><div class="ttdeci">Part * part() const</div><div class="ttdef"><b>Definition:</b> <a href="staff_8h_source.html#l00122">staff.h:122</a></div></div>
<div class="ttc" id="classMs_1_1ScoreElement_html_ad80dda73306d6b784b0cac4626f797d4"><div class="ttname"><a href="classMs_1_1ScoreElement.html#ad80dda73306d6b784b0cac4626f797d4">Ms::ScoreElement::name</a></div><div class="ttdeci">const char * name() const</div><div class="ttdef"><b>Definition:</b> <a href="scoreElement_8cpp_source.html#l00791">scoreElement.cpp:791</a></div></div>
<div class="ttc" id="shape_8h_html"><div class="ttname"><a href="shape_8h.html">shape.h</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_aedd642f8ec2fad2500877e7ce664d014"><div class="ttname"><a href="classMs_1_1Score.html#aedd642f8ec2fad2500877e7ce664d014">Ms::Score::tick2measureMM</a></div><div class="ttdeci">Measure * tick2measureMM(const Fraction &amp;tick) const</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2utils_8cpp_source.html#l00073">utils.cpp:73</a></div></div>
<div class="ttc" id="namespaceMs_html_a2bac757437d1a9e364db27de8f9c9e2eac2ed9b2e814c2fc8828662eda7639753"><div class="ttname"><a href="namespaceMs.html#a2bac757437d1a9e364db27de8f9c9e2eac2ed9b2e814c2fc8828662eda7639753">Ms::Sid::pageHeight</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a220c3e49e703287696af33c4edae6bdb"><div class="ttname"><a href="classMs_1_1ScoreView.html#a220c3e49e703287696af33c4edae6bdb">Ms::ScoreView::moveControlCursor</a></div><div class="ttdeci">void moveControlCursor(const Fraction &amp;tick)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l00668">scoreview.cpp:668</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a77c1fdb6a5994e2c1138940552fc3376"><div class="ttname"><a href="classMs_1_1ScoreView.html#a77c1fdb6a5994e2c1138940552fc3376">Ms::ScoreView::moveControlCursorNearCursor</a></div><div class="ttdeci">void moveControlCursorNearCursor()</div><div class="ttdoc">used to position the control cursor correctly when starting playback </div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l00782">scoreview.cpp:782</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a8eddd82040d61bffb0d863d6f26270d6"><div class="ttname"><a href="classMs_1_1Score.html#a8eddd82040d61bffb0d863d6f26270d6">Ms::Score::isMaster</a></div><div class="ttdeci">virtual bool isMaster() const</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l00593">score.h:593</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_a81f2c9509ccf414e30594abf843cbde2a7dce122004969d56ae2e0245cb754d35"><div class="ttname"><a href="classMs_1_1Element.html#a81f2c9509ccf414e30594abf843cbde2a7dce122004969d56ae2e0245cb754d35">Ms::Element::EditBehavior::Edit</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a0c933630253adf5ec3edfe67db13cae8"><div class="ttname"><a href="classMs_1_1ScoreView.html#a0c933630253adf5ec3edfe67db13cae8">Ms::ScoreView::moveViewportToLastEdit</a></div><div class="ttdeci">void moveViewportToLastEdit()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l05558">scoreview.cpp:5558</a></div></div>
<div class="ttc" id="classMs_1_1MeasureBase_html_ab0832f1270b77762f3c12758fe22c3c2"><div class="ttname"><a href="classMs_1_1MeasureBase.html#ab0832f1270b77762f3c12758fe22c3c2">Ms::MeasureBase::el</a></div><div class="ttdeci">ElementList &amp; el()</div><div class="ttdef"><b>Definition:</b> <a href="measurebase_8h_source.html#l00104">measurebase.h:104</a></div></div>
<div class="ttc" id="namespaceMs_html_ad90065615b21f2118f67f3574f151169"><div class="ttname"><a href="namespaceMs.html#ad90065615b21f2118f67f3574f151169">Ms::ZOOM_LEVEL_MAX</a></div><div class="ttdeci">static constexpr qreal ZOOM_LEVEL_MAX</div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00124">globals.h:124</a></div></div>
<div class="ttc" id="namespaceMs_html_a239e390cba4ba2b19296c2995da44976aa25949e21299b84cc33c4b00c740f08f"><div class="ttname"><a href="namespaceMs.html#a239e390cba4ba2b19296c2995da44976aa25949e21299b84cc33c4b00c740f08f">Ms::PlaceText::BELOW</a></div></div>
<div class="ttc" id="namespaceMs_html_a9e76bd253cc84b05294834c6315451ab"><div class="ttname"><a href="namespaceMs.html#a9e76bd253cc84b05294834c6315451ab">Ms::converterMode</a></div><div class="ttdeci">bool converterMode</div><div class="ttdef"><b>Definition:</b> <a href="musescore_8cpp_source.html#l00191">musescore.cpp:191</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_ad5e377ed9b055434956aa3ee92a3b3a9"><div class="ttname"><a href="classMs_1_1Element.html#ad5e377ed9b055434956aa3ee92a3b3a9">Ms::Element::nextSegmentElement</a></div><div class="ttdeci">virtual Element * nextSegmentElement()</div><div class="ttdef"><b>Definition:</b> <a href="element_8cpp_source.html#l01754">element.cpp:1754</a></div></div>
<div class="ttc" id="namespaceMs_html_a20d9370e85f87d0b2594fd90665f8cc1a03d31fd5672e63a74217a95dce360596"><div class="ttname"><a href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a03d31fd5672e63a74217a95dce360596">Ms::ViewState::FOTO_DRAG_OBJECT</a></div></div>
<div class="ttc" id="classMs_1_1InputState_html_a29a52f461eddb54abda0ef2214599fee"><div class="ttname"><a href="classMs_1_1InputState.html#a29a52f461eddb54abda0ef2214599fee">Ms::InputState::setString</a></div><div class="ttdeci">void setString(int val)</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00088">input.h:88</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a2d7629bfb31d6b8ff03f435eca80ebe8"><div class="ttname"><a href="classMs_1_1Score.html#a2d7629bfb31d6b8ff03f435eca80ebe8">Ms::Score::nextElement</a></div><div class="ttdeci">Element * nextElement()</div><div class="ttdef"><b>Definition:</b> <a href="navigate_8cpp_source.html#l00531">navigate.cpp:531</a></div></div>
<div class="ttc" id="namespaceMs_html_aa56d24b082133246f25b43b7bef7f959af3fb4b2c999493d3d65c2377e47c0fee"><div class="ttname"><a href="namespaceMs.html#aa56d24b082133246f25b43b7bef7f959af3fb4b2c999493d3d65c2377e47c0fee">Ms::UpDownMode::DIATONIC</a></div></div>
<div class="ttc" id="classMs_1_1MScore_html_a58e52c0bece662fbd932efcee0ebdb67"><div class="ttname"><a href="classMs_1_1MScore.html#a58e52c0bece662fbd932efcee0ebdb67">Ms::MScore::debugMode</a></div><div class="ttdeci">static bool debugMode</div><div class="ttdef"><b>Definition:</b> <a href="mscore_8h_source.html#l00366">mscore.h:366</a></div></div>
<div class="ttc" id="classMs_1_1NoteHead_html_a1d3e8faf3d3bc1d89d9d3485acde69d1ae539be55377c7c48043e1c5875d3e448"><div class="ttname"><a href="classMs_1_1NoteHead.html#a1d3e8faf3d3bc1d89d9d3485acde69d1ae539be55377c7c48043e1c5875d3e448">Ms::NoteHead::Group::HEAD_CUSTOM</a></div></div>
<div class="ttc" id="namespaceMs_html_a2c92ce0204176ede1ab86e2f44ae6b9ea45d886b842022787183a308e0200d336"><div class="ttname"><a href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9ea45d886b842022787183a308e0200d336">Ms::ElementType::CHORD</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a52f8ed77c3f24cce22f815325917970e"><div class="ttname"><a href="classMs_1_1ScoreView.html#a52f8ed77c3f24cce22f815325917970e">Ms::ScoreView::ScoreView</a></div><div class="ttdeci">ScoreView(QWidget *parent=0)</div><div class="ttdef"><b>Definition:</b> <a href="util_8cpp_source.html#l00038">util.cpp:38</a></div></div>
<div class="ttc" id="classMs_1_1TDuration_html_a2535725d2eb2060f255dda68d6d62d8a"><div class="ttname"><a href="classMs_1_1TDuration.html#a2535725d2eb2060f255dda68d6d62d8a">Ms::TDuration::isValid</a></div><div class="ttdeci">bool isValid() const</div><div class="ttdef"><b>Definition:</b> <a href="durationtype_8h_source.html#l00049">durationtype.h:49</a></div></div>
<div class="ttc" id="classMs_1_1CmdState_html_a89c244fc7d788220eaf7fe9f665e3754"><div class="ttname"><a href="classMs_1_1CmdState.html#a89c244fc7d788220eaf7fe9f665e3754">Ms::CmdState::element</a></div><div class="ttdeci">const Element * element() const</div><div class="ttdef"><b>Definition:</b> <a href="cmd_8cpp_source.html#l00177">cmd.cpp:177</a></div></div>
<div class="ttc" id="namespaceMs_html_a2c92ce0204176ede1ab86e2f44ae6b9e"><div class="ttname"><a href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9e">Ms::ElementType</a></div><div class="ttdeci">ElementType</div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00034">types.h:34</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a8d4c17f0d115b9501be41346e3d4e68f"><div class="ttname"><a href="classMs_1_1Score.html#a8d4c17f0d115b9501be41346e3d4e68f">Ms::Score::removeViewer</a></div><div class="ttdeci">void removeViewer(MuseScoreView *v)</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l01109">score.h:1109</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_adb4d90e15dabb71a7dd16c357f4bea49"><div class="ttname"><a href="classMs_1_1ScoreView.html#adb4d90e15dabb71a7dd16c357f4bea49">Ms::ScoreView::harmonyTab</a></div><div class="ttdeci">void harmonyTab(bool back)</div><div class="ttdef"><b>Definition:</b> <a href="editharmony_8cpp_source.html#l00028">editharmony.cpp:28</a></div></div>
<div class="ttc" id="namespaceMs_html_a9acbf233ff363fe819865e5bdd0c8fdfa0679273e201afd0bf57af3961f8a23b8"><div class="ttname"><a href="namespaceMs.html#a9acbf233ff363fe819865e5bdd0c8fdfa0679273e201afd0bf57af3961f8a23b8">Ms::SpannerSegmentType::SINGLE</a></div></div>
<div class="ttc" id="classMs_1_1MScore_html_a5fc44789b80db3de16a23846532181d2"><div class="ttname"><a href="classMs_1_1MScore.html#a5fc44789b80db3de16a23846532181d2">Ms::MScore::setError</a></div><div class="ttdeci">static void setError(MsError e)</div><div class="ttdef"><b>Definition:</b> <a href="mscore_8h_source.html#l00390">mscore.h:390</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a31bc492bacedfeeff81c8fbcc85b2858"><div class="ttname"><a href="classMs_1_1ScoreView.html#a31bc492bacedfeeff81c8fbcc85b2858">Ms::ScoreView::drawElements</a></div><div class="ttdeci">void drawElements(QPainter &amp;p, QList&lt; Element *&gt; &amp;el, Element *editElement)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l01226">scoreview.cpp:1226</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a3f280531f1f8fd348c89cb4f428e8d47"><div class="ttname"><a href="classMs_1_1ScoreView.html#a3f280531f1f8fd348c89cb4f428e8d47">Ms::ScoreView::realtimeAdvance</a></div><div class="ttdeci">void realtimeAdvance(bool allowRests)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l04513">scoreview.cpp:4513</a></div></div>
<div class="ttc" id="namespaceMs_html_addc0c1c84493b29580209e7a22110c30"><div class="ttname"><a href="namespaceMs.html#addc0c1c84493b29580209e7a22110c30">Ms::errorMessage</a></div><div class="ttdeci">QErrorMessage * errorMessage</div><div class="ttdef"><b>Definition:</b> <a href="musescore_8cpp_source.html#l00232">musescore.cpp:232</a></div></div>
<div class="ttc" id="classMs_1_1Page_html_a27cbb69c1c1cdbe3f3a51f00283f465b"><div class="ttname"><a href="classMs_1_1Page.html#a27cbb69c1c1cdbe3f3a51f00283f465b">Ms::Page::tm</a></div><div class="ttdeci">qreal tm() const</div><div class="ttdef"><b>Definition:</b> <a href="page_8cpp_source.html#l00471">page.cpp:471</a></div></div>
<div class="ttc" id="classMs_1_1Instrument_html"><div class="ttname"><a href="classMs_1_1Instrument.html">Ms::Instrument</a></div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2instrument_8h_source.html#l00257">instrument.h:257</a></div></div>
<div class="ttc" id="tourhandler_8h_html"><div class="ttname"><a href="tourhandler_8h.html">tourhandler.h</a></div></div>
<div class="ttc" id="classMs_1_1SpannerSegment_html_a1e5ab9a61853da835e9ea0fe1da55105"><div class="ttname"><a href="classMs_1_1SpannerSegment.html#a1e5ab9a61853da835e9ea0fe1da55105">Ms::SpannerSegment::tick</a></div><div class="ttdeci">virtual Fraction tick() const override</div><div class="ttdef"><b>Definition:</b> <a href="spanner_8cpp_source.html#l00080">spanner.cpp:80</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a7d7f12f78fa77fa82109180eb8aeec00"><div class="ttname"><a href="classMs_1_1Score.html#a7d7f12f78fa77fa82109180eb8aeec00">Ms::Score::moveDown</a></div><div class="ttdeci">void moveDown(ChordRest *)</div><div class="ttdef"><b>Definition:</b> <a href="cmd_8cpp_source.html#l01975">cmd.cpp:1975</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a719c6e2966c4a8a15c29f85fc7ef688b"><div class="ttname"><a href="classMs_1_1ScoreView.html#a719c6e2966c4a8a15c29f85fc7ef688b">Ms::ScoreView::deselectAll</a></div><div class="ttdeci">void deselectAll()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03324">scoreview.cpp:3324</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_aa585cd70b6ca2bf1654e0af4de552ec6"><div class="ttname"><a href="classMs_1_1ScoreView.html#aa585cd70b6ca2bf1654e0af4de552ec6">Ms::ScoreView::textTab</a></div><div class="ttdeci">virtual void textTab(bool back=false) override</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l02896">scoreview.cpp:2896</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a3510962e79179066a6568ebff6cf359e"><div class="ttname"><a href="classMs_1_1ScoreView.html#a3510962e79179066a6568ebff6cf359e">Ms::ScoreView::ticksTab</a></div><div class="ttdeci">void ticksTab(const Fraction &amp;ticks)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l02068">scoreview.cpp:2068</a></div></div>
<div class="ttc" id="classMs_1_1TDuration_html_aa00a9e53b1d7ac9bf5db6f1d626f3cb5"><div class="ttname"><a href="classMs_1_1TDuration.html#aa00a9e53b1d7ac9bf5db6f1d626f3cb5">Ms::TDuration::ticks</a></div><div class="ttdeci">Fraction ticks() const</div><div class="ttdef"><b>Definition:</b> <a href="durationtype_8cpp_source.html#l00098">durationtype.cpp:98</a></div></div>
<div class="ttc" id="classMs_1_1Fraction_html_acc3076889cb6d4019cd1406411c3656c"><div class="ttname"><a href="classMs_1_1Fraction.html#acc3076889cb6d4019cd1406411c3656c">Ms::Fraction::isValid</a></div><div class="ttdeci">bool isValid() const</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2fraction_8h_source.html#l00081">fraction.h:81</a></div></div>
<div class="ttc" id="classMs_1_1Score_html_a8351cb8cbffdb4381de1f7dd34fe3dfa"><div class="ttname"><a href="classMs_1_1Score.html#a8351cb8cbffdb4381de1f7dd34fe3dfa">Ms::Score::cmdToggleTie</a></div><div class="ttdeci">void cmdToggleTie()</div><div class="ttdef"><b>Definition:</b> <a href="edit_8cpp_source.html#l01361">edit.cpp:1361</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a0a07dda77a880d368180ef4c8c56e28f"><div class="ttname"><a href="classMs_1_1ScoreView.html#a0a07dda77a880d368180ef4c8c56e28f">Ms::ScoreView::measurePopup</a></div><div class="ttdeci">void measurePopup(QContextMenuEvent *ev, Measure *)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l00399">scoreview.cpp:399</a></div></div>
<div class="ttc" id="classMs_1_1Selection_html_a753b2a15f85c00694be997289b1b9c63"><div class="ttname"><a href="classMs_1_1Selection.html#a753b2a15f85c00694be997289b1b9c63">Ms::Selection::add</a></div><div class="ttdeci">void add(Element *)</div><div class="ttdef"><b>Definition:</b> <a href="select_8cpp_source.html#l00371">select.cpp:371</a></div></div>
<div class="ttc" id="classMs_1_1Page_html_a347bfa761f54d2d45e5890ffb9c369c9"><div class="ttname"><a href="classMs_1_1Page.html#a347bfa761f54d2d45e5890ffb9c369c9">Ms::Page::isOdd</a></div><div class="ttdeci">bool isOdd() const</div><div class="ttdef"><b>Definition:</b> <a href="page_8cpp_source.html#l00421">page.cpp:421</a></div></div>
<div class="ttc" id="classMs_1_1ScoreElement_html_a2f0ed55c566c19cb483d77250cb52450"><div class="ttname"><a href="classMs_1_1ScoreElement.html#a2f0ed55c566c19cb483d77250cb52450">Ms::ScoreElement::linkList</a></div><div class="ttdeci">QList&lt; ScoreElement * &gt; linkList() const</div><div class="ttdef"><b>Definition:</b> <a href="scoreElement_8cpp_source.html#l00603">scoreElement.cpp:603</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a18d575f9db6807580ee6cee3b5bb2b72"><div class="ttname"><a href="classMs_1_1ScoreView.html#a18d575f9db6807580ee6cee3b5bb2b72">Ms::ScoreView::cmdInsertMeasure</a></div><div class="ttdeci">void cmdInsertMeasure(ElementType)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l04859">scoreview.cpp:4859</a></div></div>
<div class="ttc" id="classMs_1_1InputState_html_a3b873c338079a3da35310c7dc79bd5a2"><div class="ttname"><a href="classMs_1_1InputState.html#a3b873c338079a3da35310c7dc79bd5a2">Ms::InputState::string</a></div><div class="ttdeci">int string() const</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00087">input.h:87</a></div></div>
<div class="ttc" id="classMs_1_1Tuplet_html_a400fcfe66e74cf8f9444a5d269c7bfb0"><div class="ttname"><a href="classMs_1_1Tuplet.html#a400fcfe66e74cf8f9444a5d269c7bfb0">Ms::Tuplet::setTrack</a></div><div class="ttdeci">void setTrack(int val) override</div><div class="ttdef"><b>Definition:</b> <a href="tuplet_8cpp_source.html#l01014">tuplet.cpp:1014</a></div></div>
<div class="ttc" id="namespaceMs_html_aba304e35acf732434f3c3d8b72562885a721f0a40ff396c82733370f8760f49f3"><div class="ttname"><a href="namespaceMs.html#aba304e35acf732434f3c3d8b72562885a721f0a40ff396c82733370f8760f49f3">Ms::STATE_EDIT</a></div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00076">globals.h:76</a></div></div>
<div class="ttc" id="namespaceMs_html_aba304e35acf732434f3c3d8b72562885"><div class="ttname"><a href="namespaceMs.html#aba304e35acf732434f3c3d8b72562885">Ms::ScoreState</a></div><div class="ttdeci">ScoreState</div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00064">globals.h:64</a></div></div>
<div class="ttc" id="classMs_1_1Avs_1_1AvsOmrDrawer_html_afe0bcf50dbfafde66b3c7ffde708461e"><div class="ttname"><a href="classMs_1_1Avs_1_1AvsOmrDrawer.html#afe0bcf50dbfafde66b3c7ffde708461e">Ms::Avs::AvsOmrDrawer::makeContext</a></div><div class="ttdeci">std::shared_ptr&lt; Context &gt; makeContext(QPainter *p, const Ms::Score *score) const</div><div class="ttdef"><b>Definition:</b> <a href="avsomrdrawer_8cpp_source.html#l00040">avsomrdrawer.cpp:40</a></div></div>
<div class="ttc" id="classMs_1_1CmdState_html_abf97e9e1222e1e90cb65c32e6bdc930d"><div class="ttname"><a href="classMs_1_1CmdState.html#abf97e9e1222e1e90cb65c32e6bdc930d">Ms::CmdState::startStaff</a></div><div class="ttdeci">int startStaff() const</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l00301">score.h:301</a></div></div>
<div class="ttc" id="classMs_1_1System_html"><div class="ttname"><a href="classMs_1_1System.html">Ms::System</a></div><div class="ttdoc">One row of measures for all instruments; a complete piece of the timeline. </div><div class="ttdef"><b>Definition:</b> <a href="system_8h_source.html#l00089">system.h:89</a></div></div>
<div class="ttc" id="classMs_1_1Score_html"><div class="ttname"><a href="classMs_1_1Score.html">Ms::Score</a></div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l00396">score.h:396</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_aaa90bc751111ad8ec041e2004321fbfe"><div class="ttname"><a href="classMs_1_1Element.html#aaa90bc751111ad8ec041e2004321fbfe">Ms::Element::reset</a></div><div class="ttdeci">virtual void reset() override</div><div class="ttdef"><b>Definition:</b> <a href="element_8cpp_source.html#l00252">element.cpp:252</a></div></div>
<div class="ttc" id="classMs_1_1ShadowNote_html"><div class="ttname"><a href="classMs_1_1ShadowNote.html">Ms::ShadowNote</a></div><div class="ttdoc">Graphic representation of a shadow note, which shows the note insert position in note entry mode...</div><div class="ttdef"><b>Definition:</b> <a href="shadownote_8h_source.html#l00030">shadownote.h:30</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_aa05c08b2242f9c4a523044beddd2bea3"><div class="ttname"><a href="classMs_1_1ScoreView.html#aa05c08b2242f9c4a523044beddd2bea3">Ms::ScoreView::endLasso</a></div><div class="ttdeci">void endLasso()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03311">scoreview.cpp:3311</a></div></div>
<div class="ttc" id="repeatlist_8h_html"><div class="ttname"><a href="repeatlist_8h.html">repeatlist.h</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_abbdc0afd25bb61ad920486f5415c46be"><div class="ttname"><a href="classMs_1_1ScoreView.html#abbdc0afd25bb61ad920486f5415c46be">Ms::ScoreView::cmdAddSlur</a></div><div class="ttdeci">void cmdAddSlur(const Slur *slurTemplate=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03995">scoreview.cpp:3995</a></div></div>
<div class="ttc" id="classMs_1_1Seq_html_a3e2066fafa6413eaaf0843a12ff96e2a"><div class="ttname"><a href="classMs_1_1Seq.html#a3e2066fafa6413eaaf0843a12ff96e2a">Ms::Seq::canStart</a></div><div class="ttdeci">bool canStart()</div><div class="ttdef"><b>Definition:</b> <a href="seq_8cpp_source.html#l00328">seq.cpp:328</a></div></div>
<div class="ttc" id="namespaceMs_html_aba304e35acf732434f3c3d8b72562885a1609d1ec8361af8c738b3036be794da4"><div class="ttname"><a href="namespaceMs.html#aba304e35acf732434f3c3d8b72562885a1609d1ec8361af8c738b3036be794da4">Ms::STATE_TEXT_EDIT</a></div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00077">globals.h:77</a></div></div>
<div class="ttc" id="classMs_1_1ScoreTab_html"><div class="ttname"><a href="classMs_1_1ScoreTab.html">Ms::ScoreTab</a></div><div class="ttdef"><b>Definition:</b> <a href="scoretab_8h_source.html#l00063">scoretab.h:63</a></div></div>
<div class="ttc" id="barline_8h_html"><div class="ttname"><a href="barline_8h.html">barline.h</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_a2a8ba8af6817e602c27c154e93542028"><div class="ttname"><a href="classMs_1_1Element.html#a2a8ba8af6817e602c27c154e93542028">Ms::Element::height</a></div><div class="ttdeci">virtual qreal height() const</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00278">element.h:278</a></div></div>
<div class="ttc" id="namespaceMs_html_a2c92ce0204176ede1ab86e2f44ae6b9eadff611def40f842cc2fc5c5b48e0d7f4"><div class="ttname"><a href="namespaceMs.html#a2c92ce0204176ede1ab86e2f44ae6b9eadff611def40f842cc2fc5c5b48e0d7f4">Ms::ElementType::INSTRUMENT_CHANGE</a></div></div>
<div class="ttc" id="classMs_1_1Measure_html_a251d5169092a1437befbec204fa0efe9"><div class="ttname"><a href="classMs_1_1Measure.html#a251d5169092a1437befbec204fa0efe9">Ms::Measure::last</a></div><div class="ttdeci">Ms::Segment * last() const</div><div class="ttdef"><b>Definition:</b> <a href="measure_8h_source.html#l00153">measure.h:153</a></div></div>
<div class="ttc" id="classMs_1_1MuseScoreView_html_a65ec08ade4d6eb8ded10ebbcb88604cc"><div class="ttname"><a href="classMs_1_1MuseScoreView.html#a65ec08ade4d6eb8ded10ebbcb88604cc">Ms::MuseScoreView::score</a></div><div class="ttdeci">Score * score() const</div><div class="ttdef"><b>Definition:</b> <a href="mscoreview_8h_source.html#l00053">mscoreview.h:53</a></div></div>
<div class="ttc" id="musescore_8h_html"><div class="ttname"><a href="musescore_8h.html">musescore.h</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a230edc68abde8030cbea26c1436e0c65"><div class="ttname"><a href="classMs_1_1ScoreView.html#a230edc68abde8030cbea26c1436e0c65">Ms::ScoreView::screenNext</a></div><div class="ttdeci">void screenNext()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03475">scoreview.cpp:3475</a></div></div>
<div class="ttc" id="namespaceMs_html_a20d9370e85f87d0b2594fd90665f8cc1a93762d802eed04b3e1c59d1d46b35248"><div class="ttname"><a href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a93762d802eed04b3e1c59d1d46b35248">Ms::ViewState::EDIT</a></div></div>
<div class="ttc" id="classMs_1_1TDuration_html_a5bc114333d3029ce7b4f66f0f4486d76"><div class="ttname"><a href="classMs_1_1TDuration.html#a5bc114333d3029ce7b4f66f0f4486d76">Ms::TDuration::isZero</a></div><div class="ttdeci">bool isZero() const</div><div class="ttdef"><b>Definition:</b> <a href="durationtype_8h_source.html#l00050">durationtype.h:50</a></div></div>
<div class="ttc" id="classMs_1_1Staff_html_a1a4d5789b71d29fd2e7c05311638aa7b"><div class="ttname"><a href="classMs_1_1Staff.html#a1a4d5789b71d29fd2e7c05311638aa7b">Ms::Staff::lines</a></div><div class="ttdeci">int lines(const Fraction &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="staff_8cpp_source.html#l01535">staff.cpp:1535</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_ac5d599777a2d7b5e9750bfad3ddb8c14"><div class="ttname"><a href="classMs_1_1ScoreView.html#ac5d599777a2d7b5e9750bfad3ddb8c14">Ms::ScoreView::fsize</a></div><div class="ttdeci">QSizeF fsize() const</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03421">scoreview.cpp:3421</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a140eb5996ea9bba125371c43372a3ac5"><div class="ttname"><a href="classMs_1_1ScoreView.html#a140eb5996ea9bba125371c43372a3ac5">Ms::ScoreView::dataChanged</a></div><div class="ttdeci">virtual void dataChanged(const QRectF &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l00565">scoreview.cpp:565</a></div></div>
<div class="ttc" id="namespaceMs_html_a56785a0f227cf3d1d0a4891656a35daaae36a8b0bff422df195ae7b5e2738e7d6"><div class="ttname"><a href="namespaceMs.html#a56785a0f227cf3d1d0a4891656a35daaae36a8b0bff422df195ae7b5e2738e7d6">Ms::PropertyFlags::STYLED</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a4dbc7c19c3ea32d3542dabfcba5ba30f"><div class="ttname"><a href="classMs_1_1ScoreView.html#a4dbc7c19c3ea32d3542dabfcba5ba30f">Ms::ScoreView::cmdRepeatSelection</a></div><div class="ttdeci">void cmdRepeatSelection()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l04910">scoreview.cpp:4910</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a1a9f5ed5cf322cf68d5d0df853b3369a"><div class="ttname"><a href="classMs_1_1ScoreView.html#a1a9f5ed5cf322cf68d5d0df853b3369a">Ms::ScoreView::checkCopyOrCut</a></div><div class="ttdeci">bool checkCopyOrCut()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l01914">scoreview.cpp:1914</a></div></div>
<div class="ttc" id="classMs_1_1Measure_html_a05f61e821fcc878e4442039f8170ac74"><div class="ttname"><a href="classMs_1_1Measure.html#a05f61e821fcc878e4442039f8170ac74">Ms::Measure::corrupted</a></div><div class="ttdeci">bool corrupted(int staffIdx) const</div><div class="ttdef"><b>Definition:</b> <a href="measure_8cpp_source.html#l00313">measure.cpp:313</a></div></div>
<div class="ttc" id="libmscore_2excerpt_8h_html"><div class="ttname"><a href="libmscore_2excerpt_8h.html">excerpt.h</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a6f8765f4d1cc3b25d4f9f84fc0cf98a3"><div class="ttname"><a href="classMs_1_1ScoreView.html#a6f8765f4d1cc3b25d4f9f84fc0cf98a3">Ms::ScoreView::updateGrips</a></div><div class="ttdeci">void updateGrips()</div><div class="ttdef"><b>Definition:</b> <a href="editelement_8cpp_source.html#l00039">editelement.cpp:39</a></div></div>
<div class="ttc" id="classMs_1_1Instrument_html_ac377dcee9176d06151474454b0f3c265"><div class="ttname"><a href="classMs_1_1Instrument.html#ac377dcee9176d06151474454b0f3c265">Ms::Instrument::drumset</a></div><div class="ttdeci">const Drumset * drumset() const</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2instrument_8h_source.html#l00310">instrument.h:310</a></div></div>
<div class="ttc" id="structMs_1_1Position_html_a2feea1eb55245f72eebc4701d474e66f"><div class="ttname"><a href="structMs_1_1Position.html#a2feea1eb55245f72eebc4701d474e66f">Ms::Position::staffIdx</a></div><div class="ttdeci">int staffIdx</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2score_8h_source.html#l00208">score.h:208</a></div></div>
<div class="ttc" id="classMs_1_1InputState_html_accb27700fe1fe82e0bcf96ea0e5f0974"><div class="ttname"><a href="classMs_1_1InputState.html#accb27700fe1fe82e0bcf96ea0e5f0974">Ms::InputState::setSegment</a></div><div class="ttdeci">void setSegment(Segment *s)</div><div class="ttdef"><b>Definition:</b> <a href="input_8cpp_source.html#l00220">input.cpp:220</a></div></div>
<div class="ttc" id="classMs_1_1Selection_html"><div class="ttname"><a href="classMs_1_1Selection.html">Ms::Selection</a></div><div class="ttdef"><b>Definition:</b> <a href="select_8h_source.html#l00142">select.h:142</a></div></div>
<div class="ttc" id="classMs_1_1NoteHead_html_a1d3e8faf3d3bc1d89d9d3485acde69d1"><div class="ttname"><a href="classMs_1_1NoteHead.html#a1d3e8faf3d3bc1d89d9d3485acde69d1">Ms::NoteHead::Group</a></div><div class="ttdeci">Group</div><div class="ttdef"><b>Definition:</b> <a href="note_8h_source.html#l00073">note.h:73</a></div></div>
<div class="ttc" id="classMs_1_1Fraction_html_a63e242155373d30a2de43750ea718368"><div class="ttname"><a href="classMs_1_1Fraction.html#a63e242155373d30a2de43750ea718368">Ms::Fraction::fromTicks</a></div><div class="ttdeci">static Fraction fromTicks(int ticks)</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2fraction_8h_source.html#l00220">fraction.h:220</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_a7b4ff51eff905fed21705445958253c1"><div class="ttname"><a href="classMs_1_1Element.html#a7b4ff51eff905fed21705445958253c1">Ms::Element::selectable</a></div><div class="ttdeci">bool selectable() const</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00444">element.h:444</a></div></div>
<div class="ttc" id="namespaceMs_html_a69e4fa7a19b16bb41903f725726760bf"><div class="ttname"><a href="namespaceMs.html#a69e4fa7a19b16bb41903f725726760bf">Ms::thickPadding</a></div><div class="ttdeci">constexpr qreal thickPadding</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03433">scoreview.cpp:3433</a></div></div>
<div class="ttc" id="namespaceMs_html_ace3977c7351a3c80613f191da242afdd"><div class="ttname"><a href="namespaceMs.html#ace3977c7351a3c80613f191da242afdd">Ms::SPATIUM20</a></div><div class="ttdeci">static constexpr qreal SPATIUM20</div><div class="ttdef"><b>Definition:</b> <a href="mscore_8h_source.html#l00091">mscore.h:91</a></div></div>
<div class="ttc" id="classMs_1_1TextBase_html_a784b53f52f53f9b17f41bb9ddcf5a2ac"><div class="ttname"><a href="classMs_1_1TextBase.html#a784b53f52f53f9b17f41bb9ddcf5a2ac">Ms::TextBase::paste</a></div><div class="ttdeci">virtual void paste(EditData &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="textedit_8cpp_source.html#l00618">textedit.cpp:618</a></div></div>
<div class="ttc" id="namespaceMs_html_ab8c991c362b4c6671323072bdeb9c912"><div class="ttname"><a href="namespaceMs.html#ab8c991c362b4c6671323072bdeb9c912">Ms::HairpinType</a></div><div class="ttdeci">HairpinType</div><div class="ttdef"><b>Definition:</b> <a href="hairpin_8h_source.html#l00029">hairpin.h:29</a></div></div>
<div class="ttc" id="classMs_1_1Element_html_adc4d7b66745fbb0335dc73f0c3996994"><div class="ttname"><a href="classMs_1_1Element.html#adc4d7b66745fbb0335dc73f0c3996994">Ms::Element::bbox</a></div><div class="ttdeci">virtual const QRectF &amp; bbox() const</div><div class="ttdef"><b>Definition:</b> <a href="element_8h_source.html#l00276">element.h:276</a></div></div>
<div class="ttc" id="tuplet_8h_html"><div class="ttname"><a href="tuplet_8h.html">tuplet.h</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a63116d66773e923b967530e1fba9d028"><div class="ttname"><a href="classMs_1_1ScoreView.html#a63116d66773e923b967530e1fba9d028">Ms::ScoreView::editCut</a></div><div class="ttdeci">void editCut()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l01902">scoreview.cpp:1902</a></div></div>
<div class="ttc" id="namespaceMs_html_ad1b3e57dfd5b26a280bf2ebde66b9d5aa5b39c8b553c821e7cddc6da64b5bd2ee"><div class="ttname"><a href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aa5b39c8b553c821e7cddc6da64b5bd2ee">Ms::Tid::DEFAULT</a></div></div>
<div class="ttc" id="classMs_1_1SpannerSegment_html"><div class="ttname"><a href="classMs_1_1SpannerSegment.html">Ms::SpannerSegment</a></div><div class="ttdoc">parent: System </div><div class="ttdef"><b>Definition:</b> <a href="spanner_8h_source.html#l00035">spanner.h:35</a></div></div>
<div class="ttc" id="classMs_1_1InputState_html_ace2db17820748f92057d3a27bb2d31a8"><div class="ttname"><a href="classMs_1_1InputState.html#ace2db17820748f92057d3a27bb2d31a8">Ms::InputState::noteEntryMode</a></div><div class="ttdeci">bool noteEntryMode() const</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00101">input.h:101</a></div></div>
<div class="ttc" id="namespaceMs_html_ad1b3e57dfd5b26a280bf2ebde66b9d5aa6f9dccd85b2e0786c8d522045365eb48"><div class="ttname"><a href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aa6f9dccd85b2e0786c8d522045365eb48">Ms::Tid::TITLE</a></div></div>
<div class="ttc" id="classMs_1_1SpannerSegment_html_aa8e443286d58d8d50a99cc891c61e72f"><div class="ttname"><a href="classMs_1_1SpannerSegment.html#aa8e443286d58d8d50a99cc891c61e72f">Ms::SpannerSegment::setSpannerSegmentType</a></div><div class="ttdeci">void setSpannerSegmentType(SpannerSegmentType s)</div><div class="ttdef"><b>Definition:</b> <a href="spanner_8h_source.html#l00055">spanner.h:55</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a958198aa0c66eb36e304342164166fd8"><div class="ttname"><a href="classMs_1_1ScoreView.html#a958198aa0c66eb36e304342164166fd8">Ms::ScoreView::cmdAddText</a></div><div class="ttdeci">void cmdAddText(Tid tid, Tid customTid=Tid::DEFAULT, PropertyFlags pf=PropertyFlags::STYLED, Placement p=Placement::ABOVE)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l04636">scoreview.cpp:4636</a></div></div>
<div class="ttc" id="classMs_1_1MScore_html_a0a2c87368a022590120e2e25848d4320"><div class="ttname"><a href="classMs_1_1MScore.html#a0a2c87368a022590120e2e25848d4320">Ms::MScore::showSegmentShapes</a></div><div class="ttdeci">static bool showSegmentShapes</div><div class="ttdef"><b>Definition:</b> <a href="mscore_8h_source.html#l00358">mscore.h:358</a></div></div>
<div class="ttc" id="namespaceMs_html_abd83f3147d5fadc937a40931c56620cd"><div class="ttname"><a href="namespaceMs.html#abd83f3147d5fadc937a40931c56620cd">Ms::mimeData</a></div><div class="ttdeci">static QByteArray mimeData(T *t)</div><div class="ttdef"><b>Definition:</b> <a href="palettetree_8cpp_source.html#l00073">palettetree.cpp:73</a></div></div>
<div class="ttc" id="classMs_1_1NoteDot_html_a0ba418fdb5d637f3aa147be87e90de94"><div class="ttname"><a href="classMs_1_1NoteDot.html#a0ba418fdb5d637f3aa147be87e90de94">Ms::NoteDot::note</a></div><div class="ttdeci">Note * note() const</div><div class="ttdef"><b>Definition:</b> <a href="notedot_8h_source.html#l00040">notedot.h:40</a></div></div>
<div class="ttc" id="staff_8h_html"><div class="ttname"><a href="staff_8h.html">staff.h</a></div><div class="ttdoc">Definition of class Staff. </div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_ab6a68eed7d8a3a5cb2fc2b2bdadcedda"><div class="ttname"><a href="classMs_1_1ScoreView.html#ab6a68eed7d8a3a5cb2fc2b2bdadcedda">Ms::ScoreView::pageTop</a></div><div class="ttdeci">void pageTop()</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l03580">scoreview.cpp:3580</a></div></div>
<div class="ttc" id="namespaceMs_html_a20d9370e85f87d0b2594fd90665f8cc1a8844bb893d3b16fa3365a5cfcde4edca"><div class="ttname"><a href="namespaceMs.html#a20d9370e85f87d0b2594fd90665f8cc1a8844bb893d3b16fa3365a5cfcde4edca">Ms::ViewState::FOTO</a></div></div>
<div class="ttc" id="scoreview_8h_html"><div class="ttname"><a href="scoreview_8h.html">scoreview.h</a></div></div>
<div class="ttc" id="lasso_8h_html"><div class="ttname"><a href="lasso_8h.html">lasso.h</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a93abcdabfce49c3860197f5a126d4302"><div class="ttname"><a href="classMs_1_1ScoreView.html#a93abcdabfce49c3860197f5a126d4302">Ms::ScoreView::gotoMeasure</a></div><div class="ttdeci">void gotoMeasure(Measure *)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l05062">scoreview.cpp:5062</a></div></div>
<div class="ttc" id="classMs_1_1ChordRest_html"><div class="ttname"><a href="classMs_1_1ChordRest.html">Ms::ChordRest</a></div><div class="ttdef"><b>Definition:</b> <a href="chordrest_8h_source.html#l00049">chordrest.h:49</a></div></div>
<div class="ttc" id="namespaceMs_html_ad1b3e57dfd5b26a280bf2ebde66b9d5aab8f375d174a8caa14d48dda0ee15e49a"><div class="ttname"><a href="namespaceMs.html#ad1b3e57dfd5b26a280bf2ebde66b9d5aab8f375d174a8caa14d48dda0ee15e49a">Ms::Tid::RH_GUITAR_FINGERING</a></div></div>
<div class="ttc" id="classMs_1_1SystemText_html"><div class="ttname"><a href="classMs_1_1SystemText.html">Ms::SystemText</a></div><div class="ttdef"><b>Definition:</b> <a href="systemtext_8h_source.html#l00024">systemtext.h:24</a></div></div>
<div class="ttc" id="classMs_1_1ScoreView_html_a97e80eb178645f767c371648ae674dd8"><div class="ttname"><a href="classMs_1_1ScoreView.html#a97e80eb178645f767c371648ae674dd8">Ms::ScoreView::setForeground</a></div><div class="ttdeci">void setForeground(QPixmap *)</div><div class="ttdef"><b>Definition:</b> <a href="scoreview_8cpp_source.html#l00546">scoreview.cpp:546</a></div></div>
<div class="ttc" id="classMs_1_1Selection_html_abf55316b1de3db4e71efba968ec280f6"><div class="ttname"><a href="classMs_1_1Selection.html#abf55316b1de3db4e71efba968ec280f6">Ms::Selection::element</a></div><div class="ttdeci">Element * element() const</div><div class="ttdef"><b>Definition:</b> <a href="select_8cpp_source.html#l00148">select.cpp:148</a></div></div>
<div class="ttc" id="classMs_1_1Fraction_html_a65efbab334943fc56b8a7444ea087415"><div class="ttname"><a href="classMs_1_1Fraction.html#a65efbab334943fc56b8a7444ea087415">Ms::Fraction::reduce</a></div><div class="ttdeci">void reduce()</div><div class="ttdef"><b>Definition:</b> <a href="libmscore_2fraction_8h_source.html#l00099">fraction.h:99</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
